const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DruBfr1d.js","assets/if-defined-ij0N2LBp.js","assets/index-LCWyeMdZ.js","assets/index-BwKWF7JC.js","assets/ref-NJjDjA1n.js","assets/index-CyPPOxub.js","assets/index-BPInMFL-.js","assets/index-BmKEsTqr.js","assets/index-BpJAYoOb.js","assets/index-Bf_Lb9qz.js","assets/index-BI-wFmG7.js","assets/index-Bvg-LJBD.js","assets/email-BovNVxse.js","assets/index-C2q-Pp4t.js","assets/socials-DxKgYmqJ.js","assets/index-Cc1bivnB.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-VzGN-USu.js","assets/index-DnlRFWMb.js","assets/index-BwJkDsKy.js","assets/index-BnCotuNM.js","assets/swaps-2ysZ9Prq.js","assets/index-K0522Fwf.js","assets/index-DsEdOCHD.js","assets/index-DmSXtUs7.js","assets/send-Gw_90e5x.js","assets/index-DEar4UY_.js","assets/index-J74HTStu.js","assets/receive-CvSAwhsf.js","assets/index-CmKxHpqU.js","assets/onramp-CeZgQxoJ.js","assets/index-BtraQ0Qw.js","assets/index-BnA68wkp.js","assets/transactions-Bo6TRNWL.js","assets/index-BsTtymsf.js","assets/index-DZelwJ4r.js","assets/index-BLAYg0gB.js","assets/ui-5bl-ua3I.js","assets/index-5vuh3PDy.js","assets/index-DOttm2G0.js","assets/w3m-modal-BQiIOanM.js","assets/SafeProvider-DwBFOySW.js","assets/index-BV8s6ez1.js","assets/sha3-C-pCNav2.js","assets/index-DtZ77vmU.js","assets/index-BSa-HmJi.js"])))=>i.map(i=>d[i]);
var $3=Object.defineProperty;var y1=t=>{throw TypeError(t)};var M3=(t,e,r)=>e in t?$3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var H=(t,e,r)=>M3(t,typeof e!="symbol"?e+"":e,r),Hy=(t,e,r)=>e.has(t)||y1("Cannot "+r);var y=(t,e,r)=>(Hy(t,e,"read from private field"),r?r.call(t):e.get(t)),W=(t,e,r)=>e.has(t)?y1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),P=(t,e,r,n)=>(Hy(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ne=(t,e,r)=>(Hy(t,e,"access private method"),r);var Pd=(t,e,r,n)=>({set _(s){P(t,e,s,r)},get _(){return y(t,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xv(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Ht={},Vu=[],zi=()=>{},F3=()=>!1,Gw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Tv=t=>t.startsWith("onUpdate:"),yn=Object.assign,Pv=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},j3=Object.prototype.hasOwnProperty,St=(t,e)=>j3.call(t,e),Ve=Array.isArray,Wu=t=>Kw(t)==="[object Map]",tx=t=>Kw(t)==="[object Set]",Ke=t=>typeof t=="function",mr=t=>typeof t=="string",cc=t=>typeof t=="symbol",tr=t=>t!==null&&typeof t=="object",rx=t=>(tr(t)||Ke(t))&&Ke(t.then)&&Ke(t.catch),nx=Object.prototype.toString,Kw=t=>nx.call(t),H3=t=>Kw(t).slice(8,-1),sx=t=>Kw(t)==="[object Object]",Ov=t=>mr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gf=xv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jw=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},z3=/-(\w)/g,Is=Jw(t=>t.replace(z3,(e,r)=>r?r.toUpperCase():"")),q3=/\B([A-Z])/g,Vl=Jw(t=>t.replace(q3,"-$1").toLowerCase()),Yw=Jw(t=>t.charAt(0).toUpperCase()+t.slice(1)),zy=Jw(t=>t?`on${Yw(t)}`:""),Wa=(t,e)=>!Object.is(t,e),qy=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},xb=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},V3=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let b1;const Qw=()=>b1||(b1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rv(t){if(Ve(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=mr(n)?J3(n):Rv(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(mr(t)||tr(t))return t}const W3=/;(?![^(]*\))/g,G3=/:([^]+)/,K3=/\/\*[^]*?\*\//g;function J3(t){const e={};return t.replace(K3,"").split(W3).forEach(r=>{if(r){const n=r.split(G3);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Dv(t){let e="";if(mr(t))e=t;else if(Ve(t))for(let r=0;r<t.length;r++){const n=Dv(t[r]);n&&(e+=n+" ")}else if(tr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Y3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Q3=xv(Y3);function ix(t){return!!t||t===""}const ox=t=>!!(t&&t.__v_isRef===!0),ho=t=>mr(t)?t:t==null?"":Ve(t)||tr(t)&&(t.toString===nx||!Ke(t.toString))?ox(t)?ho(t.value):JSON.stringify(t,ax,2):String(t),ax=(t,e)=>ox(e)?ax(t,e.value):Wu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[Vy(n,i)+" =>"]=s,r),{})}:tx(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Vy(r))}:cc(e)?Vy(e):tr(e)&&!Ve(e)&&!sx(e)?String(e):e,Vy=(t,e="")=>{var r;return cc(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let On;class Z3{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=On,!e&&On&&(this.index=(On.scopes||(On.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=On;try{return On=this,e()}finally{On=r}}}on(){++this._on===1&&(this.prevScope=On,On=this)}off(){this._on>0&&--this._on===0&&(On=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function X3(){return On}let jt;const Wy=new WeakSet;class cx{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,On&&On.active&&On.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wy.has(this)&&(Wy.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ux(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,E1(this),hx(this);const e=jt,r=Xs;jt=this,Xs=!0;try{return this.fn()}finally{dx(this),jt=e,Xs=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bv(e);this.deps=this.depsTail=void 0,E1(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wy.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Tb(this)&&this.run()}get dirty(){return Tb(this)}}let lx=0,mf,wf;function ux(t,e=!1){if(t.flags|=8,e){t.next=wf,wf=t;return}t.next=mf,mf=t}function kv(){lx++}function Uv(){if(--lx>0)return;if(wf){let e=wf;for(wf=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;mf;){let e=mf;for(mf=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function hx(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function dx(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),Bv(n),eD(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Tb(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(fx(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function fx(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Hf)||(t.globalVersion=Hf,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Tb(t))))return;t.flags|=2;const e=t.dep,r=jt,n=Xs;jt=t,Xs=!0;try{hx(t);const s=t.fn(t._value);(e.version===0||Wa(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{jt=r,Xs=n,dx(t),t.flags&=-3}}function Bv(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)Bv(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function eD(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Xs=!0;const px=[];function Ho(){px.push(Xs),Xs=!1}function zo(){const t=px.pop();Xs=t===void 0?!0:t}function E1(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=jt;jt=void 0;try{e()}finally{jt=r}}}let Hf=0;class tD{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Lv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!jt||!Xs||jt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==jt)r=this.activeLink=new tD(jt,this),jt.deps?(r.prevDep=jt.depsTail,jt.depsTail.nextDep=r,jt.depsTail=r):jt.deps=jt.depsTail=r,gx(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=jt.depsTail,r.nextDep=void 0,jt.depsTail.nextDep=r,jt.depsTail=r,jt.deps===r&&(jt.deps=n)}return r}trigger(e){this.version++,Hf++,this.notify(e)}notify(e){kv();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Uv()}}}function gx(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)gx(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Pb=new WeakMap,wl=Symbol(""),Ob=Symbol(""),zf=Symbol("");function Qr(t,e,r){if(Xs&&jt){let n=Pb.get(t);n||Pb.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Lv),s.map=n,s.key=r),s.track()}}function Ro(t,e,r,n,s,i){const o=Pb.get(t);if(!o){Hf++;return}const a=c=>{c&&c.trigger()};if(kv(),e==="clear")o.forEach(a);else{const c=Ve(t),l=c&&Ov(r);if(c&&r==="length"){const u=Number(n);o.forEach((h,d)=>{(d==="length"||d===zf||!cc(d)&&d>=u)&&a(h)})}else switch((r!==void 0||o.has(void 0))&&a(o.get(r)),l&&a(o.get(zf)),e){case"add":c?l&&a(o.get("length")):(a(o.get(wl)),Wu(t)&&a(o.get(Ob)));break;case"delete":c||(a(o.get(wl)),Wu(t)&&a(o.get(Ob)));break;case"set":Wu(t)&&a(o.get(wl));break}}Uv()}function ru(t){const e=It(t);return e===t?e:(Qr(e,"iterate",zf),ei(t)?e:e.map(ln))}function $v(t){return Qr(t=It(t),"iterate",zf),t}const rD={__proto__:null,[Symbol.iterator](){return Gy(this,Symbol.iterator,ln)},concat(...t){return ru(this).concat(...t.map(e=>Ve(e)?ru(e):e))},entries(){return Gy(this,"entries",t=>(t[1]=ln(t[1]),t))},every(t,e){return to(this,"every",t,e,void 0,arguments)},filter(t,e){return to(this,"filter",t,e,r=>r.map(ln),arguments)},find(t,e){return to(this,"find",t,e,ln,arguments)},findIndex(t,e){return to(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return to(this,"findLast",t,e,ln,arguments)},findLastIndex(t,e){return to(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return to(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ky(this,"includes",t)},indexOf(...t){return Ky(this,"indexOf",t)},join(t){return ru(this).join(t)},lastIndexOf(...t){return Ky(this,"lastIndexOf",t)},map(t,e){return to(this,"map",t,e,void 0,arguments)},pop(){return Od(this,"pop")},push(...t){return Od(this,"push",t)},reduce(t,...e){return v1(this,"reduce",t,e)},reduceRight(t,...e){return v1(this,"reduceRight",t,e)},shift(){return Od(this,"shift")},some(t,e){return to(this,"some",t,e,void 0,arguments)},splice(...t){return Od(this,"splice",t)},toReversed(){return ru(this).toReversed()},toSorted(t){return ru(this).toSorted(t)},toSpliced(...t){return ru(this).toSpliced(...t)},unshift(...t){return Od(this,"unshift",t)},values(){return Gy(this,"values",ln)}};function Gy(t,e,r){const n=$v(t),s=n[e]();return n!==t&&!ei(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const nD=Array.prototype;function to(t,e,r,n,s,i){const o=$v(t),a=o!==t&&!ei(t),c=o[e];if(c!==nD[e]){const h=c.apply(t,i);return a?ln(h):h}let l=r;o!==t&&(a?l=function(h,d){return r.call(this,ln(h),d,t)}:r.length>2&&(l=function(h,d){return r.call(this,h,d,t)}));const u=c.call(o,l,n);return a&&s?s(u):u}function v1(t,e,r,n){const s=$v(t);let i=r;return s!==t&&(ei(t)?r.length>3&&(i=function(o,a,c){return r.call(this,o,a,c,t)}):i=function(o,a,c){return r.call(this,o,ln(a),c,t)}),s[e](i,...n)}function Ky(t,e,r){const n=It(t);Qr(n,"iterate",zf);const s=n[e](...r);return(s===-1||s===!1)&&jv(r[0])?(r[0]=It(r[0]),n[e](...r)):s}function Od(t,e,r=[]){Ho(),kv();const n=It(t)[e].apply(t,r);return Uv(),zo(),n}const sD=xv("__proto__,__v_isRef,__isVue"),mx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(cc));function iD(t){cc(t)||(t=String(t));const e=It(this);return Qr(e,"has",t),e.hasOwnProperty(t)}class wx{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?gD:vx:i?Ex:bx).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Ve(e);if(!s){let c;if(o&&(c=rD[r]))return c;if(r==="hasOwnProperty")return iD}const a=Reflect.get(e,r,Xr(e)?e:n);return(cc(r)?mx.has(r):sD(r))||(s||Qr(e,"get",r),i)?a:Xr(a)?o&&Ov(r)?a:a.value:tr(a)?s?Ax(a):lc(a):a}}class yx extends wx{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const c=_l(i);if(!ei(n)&&!_l(n)&&(i=It(i),n=It(n)),!Ve(e)&&Xr(i)&&!Xr(n))return c?!1:(i.value=n,!0)}const o=Ve(e)&&Ov(r)?Number(r)<e.length:St(e,r),a=Reflect.set(e,r,n,Xr(e)?e:s);return e===It(s)&&(o?Wa(n,i)&&Ro(e,"set",r,n):Ro(e,"add",r,n)),a}deleteProperty(e,r){const n=St(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Ro(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!cc(r)||!mx.has(r))&&Qr(e,"has",r),n}ownKeys(e){return Qr(e,"iterate",Ve(e)?"length":wl),Reflect.ownKeys(e)}}class oD extends wx{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const aD=new yx,cD=new oD,lD=new yx(!0);const Rb=t=>t,Dg=t=>Reflect.getPrototypeOf(t);function uD(t,e,r){return function(...n){const s=this.__v_raw,i=It(s),o=Wu(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...n),u=r?Rb:e?Db:ln;return!e&&Qr(i,"iterate",c?Ob:wl),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function kg(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function hD(t,e){const r={get(s){const i=this.__v_raw,o=It(i),a=It(s);t||(Wa(s,a)&&Qr(o,"get",s),Qr(o,"get",a));const{has:c}=Dg(o),l=e?Rb:t?Db:ln;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Qr(It(s),"iterate",wl),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=It(i),a=It(s);return t||(Wa(s,a)&&Qr(o,"has",s),Qr(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=It(a),l=e?Rb:t?Db:ln;return!t&&Qr(c,"iterate",wl),a.forEach((u,h)=>s.call(i,l(u),l(h),o))}};return yn(r,t?{add:kg("add"),set:kg("set"),delete:kg("delete"),clear:kg("clear")}:{add(s){!e&&!ei(s)&&!_l(s)&&(s=It(s));const i=It(this);return Dg(i).has.call(i,s)||(i.add(s),Ro(i,"add",s,s)),this},set(s,i){!e&&!ei(i)&&!_l(i)&&(i=It(i));const o=It(this),{has:a,get:c}=Dg(o);let l=a.call(o,s);l||(s=It(s),l=a.call(o,s));const u=c.call(o,s);return o.set(s,i),l?Wa(i,u)&&Ro(o,"set",s,i):Ro(o,"add",s,i),this},delete(s){const i=It(this),{has:o,get:a}=Dg(i);let c=o.call(i,s);c||(s=It(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&Ro(i,"delete",s,void 0),l},clear(){const s=It(this),i=s.size!==0,o=s.clear();return i&&Ro(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=uD(s,t,e)}),r}function Mv(t,e){const r=hD(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(St(r,s)&&s in n?r:n,s,i)}const dD={get:Mv(!1,!1)},fD={get:Mv(!1,!0)},pD={get:Mv(!0,!1)};const bx=new WeakMap,Ex=new WeakMap,vx=new WeakMap,gD=new WeakMap;function mD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wD(t){return t.__v_skip||!Object.isExtensible(t)?0:mD(H3(t))}function lc(t){return _l(t)?t:Fv(t,!1,aD,dD,bx)}function yD(t){return Fv(t,!1,lD,fD,Ex)}function Ax(t){return Fv(t,!0,cD,pD,vx)}function Fv(t,e,r,n,s){if(!tr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=wD(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?n:r);return s.set(t,a),a}function yf(t){return _l(t)?yf(t.__v_raw):!!(t&&t.__v_isReactive)}function _l(t){return!!(t&&t.__v_isReadonly)}function ei(t){return!!(t&&t.__v_isShallow)}function jv(t){return t?!!t.__v_raw:!1}function It(t){const e=t&&t.__v_raw;return e?It(e):t}function bD(t){return!St(t,"__v_skip")&&Object.isExtensible(t)&&xb(t,"__v_skip",!0),t}const ln=t=>tr(t)?lc(t):t,Db=t=>tr(t)?Ax(t):t;function Xr(t){return t?t.__v_isRef===!0:!1}function qi(t){return ED(t,!1)}function ED(t,e){return Xr(t)?t:new vD(t,e)}class vD{constructor(e,r){this.dep=new Lv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:It(e),this._value=r?e:ln(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||ei(e)||_l(e);e=n?e:It(e),Wa(e,r)&&(this._rawValue=e,this._value=n?e:ln(e),this.dep.trigger())}}function AD(t){return Xr(t)?t.value:t}const CD={get:(t,e,r)=>e==="__v_raw"?t:AD(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Xr(s)&&!Xr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Cx(t){return yf(t)?t:new Proxy(t,CD)}class _D{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Lv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&jt!==this)return ux(this,!0),!0}get value(){const e=this.dep.track();return fx(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ID(t,e,r=!1){let n,s;return Ke(t)?n=t:(n=t.get,s=t.set),new _D(n,s,r)}const Ug={},qm=new WeakMap;let Sc;function SD(t,e=!1,r=Sc){if(r){let n=qm.get(r);n||qm.set(r,n=[]),n.push(t)}}function ND(t,e,r=Ht){const{immediate:n,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=r,l=C=>s?C:ei(C)||s===!1||s===0?Ca(C,1):Ca(C);let u,h,d,f,g=!1,p=!1;if(Xr(t)?(h=()=>t.value,g=ei(t)):yf(t)?(h=()=>l(t),g=!0):Ve(t)?(p=!0,g=t.some(C=>yf(C)||ei(C)),h=()=>t.map(C=>{if(Xr(C))return C.value;if(yf(C))return l(C);if(Ke(C))return c?c(C,2):C()})):Ke(t)?e?h=c?()=>c(t,2):t:h=()=>{if(d){Ho();try{d()}finally{zo()}}const C=Sc;Sc=u;try{return c?c(t,3,[f]):t(f)}finally{Sc=C}}:h=zi,e&&s){const C=h,I=s===!0?1/0:s;h=()=>Ca(C(),I)}const m=X3(),w=()=>{u.stop(),m&&m.active&&Pv(m.effects,u)};if(i&&e){const C=e;e=(...I)=>{C(...I),w()}}let E=p?new Array(t.length).fill(Ug):Ug;const b=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const I=u.run();if(s||g||(p?I.some((_,O)=>Wa(_,E[O])):Wa(I,E))){d&&d();const _=Sc;Sc=u;try{const O=[I,E===Ug?void 0:p&&E[0]===Ug?[]:E,f];E=I,c?c(e,3,O):e(...O)}finally{Sc=_}}}else u.run()};return a&&a(b),u=new cx(h),u.scheduler=o?()=>o(b,!1):b,f=C=>SD(C,!1,u),d=u.onStop=()=>{const C=qm.get(u);if(C){if(c)c(C,4);else for(const I of C)I();qm.delete(u)}},e?n?b(!0):E=u.run():o?o(b.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function Ca(t,e=1/0,r){if(e<=0||!tr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Xr(t))Ca(t.value,e,r);else if(Ve(t))for(let n=0;n<t.length;n++)Ca(t[n],e,r);else if(tx(t)||Wu(t))t.forEach(n=>{Ca(n,e,r)});else if(sx(t)){for(const n in t)Ca(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ca(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function og(t,e,r,n){try{return n?t(...n):t()}catch(s){Zw(s,e,r)}}function Qi(t,e,r,n){if(Ke(t)){const s=og(t,e,r,n);return s&&rx(s)&&s.catch(i=>{Zw(i,e,r)}),s}if(Ve(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Qi(t[i],e,r,n));return s}}function Zw(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ht;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,c,l)===!1)return}a=a.parent}if(i){Ho(),og(i,null,10,[t,c,l]),zo();return}}xD(t,r,s,n,o)}function xD(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const un=[];let Ei=-1;const Gu=[];let ma=null,Su=0;const _x=Promise.resolve();let Vm=null;function TD(t){const e=Vm||_x;return t?e.then(this?t.bind(this):t):e}function PD(t){let e=Ei+1,r=un.length;for(;e<r;){const n=e+r>>>1,s=un[n],i=qf(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function Hv(t){if(!(t.flags&1)){const e=qf(t),r=un[un.length-1];!r||!(t.flags&2)&&e>=qf(r)?un.push(t):un.splice(PD(e),0,t),t.flags|=1,Ix()}}function Ix(){Vm||(Vm=_x.then(Nx))}function OD(t){Ve(t)?Gu.push(...t):ma&&t.id===-1?ma.splice(Su+1,0,t):t.flags&1||(Gu.push(t),t.flags|=1),Ix()}function A1(t,e,r=Ei+1){for(;r<un.length;r++){const n=un[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;un.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Sx(t){if(Gu.length){const e=[...new Set(Gu)].sort((r,n)=>qf(r)-qf(n));if(Gu.length=0,ma){ma.push(...e);return}for(ma=e,Su=0;Su<ma.length;Su++){const r=ma[Su];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}ma=null,Su=0}}const qf=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Nx(t){try{for(Ei=0;Ei<un.length;Ei++){const e=un[Ei];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),og(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ei<un.length;Ei++){const e=un[Ei];e&&(e.flags&=-2)}Ei=-1,un.length=0,Sx(),Vm=null,(un.length||Gu.length)&&Nx()}}let Js=null,xx=null;function Wm(t){const e=Js;return Js=t,xx=t&&t.type.__scopeId||null,e}function RD(t,e=Js,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&D1(-1);const i=Wm(e);let o;try{o=t(...s)}finally{Wm(i),n._d&&D1(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function pc(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[n];c&&(Ho(),Qi(c,r,8,[t.el,a,t,e]),zo())}}const DD=Symbol("_vte"),kD=t=>t.__isTeleport;function zv(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zv(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Tx(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function bf(t,e,r,n,s=!1){if(Ve(t)){t.forEach((g,p)=>bf(g,e&&(Ve(e)?e[p]:e),r,n,s));return}if(Ef(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&bf(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?Yv(n.component):n.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Ht?a.refs={}:a.refs,h=a.setupState,d=It(h),f=h===Ht?()=>!1:g=>St(d,g);if(l!=null&&l!==c&&(mr(l)?(u[l]=null,f(l)&&(h[l]=null)):Xr(l)&&(l.value=null)),Ke(c))og(c,a,12,[o,u]);else{const g=mr(c),p=Xr(c);if(g||p){const m=()=>{if(t.f){const w=g?f(c)?h[c]:u[c]:c.value;s?Ve(w)&&Pv(w,i):Ve(w)?w.includes(i)||w.push(i):g?(u[c]=[i],f(c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else g?(u[c]=o,f(c)&&(h[c]=o)):p&&(c.value=o,t.k&&(u[t.k]=o))};o?(m.id=-1,Kn(m,r)):m()}}}Qw().requestIdleCallback;Qw().cancelIdleCallback;const Ef=t=>!!t.type.__asyncLoader,Px=t=>t.type.__isKeepAlive;function UD(t,e){Ox(t,"a",e)}function BD(t,e){Ox(t,"da",e)}function Ox(t,e,r=Zr){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Xw(e,n,r),r){let s=r.parent;for(;s&&s.parent;)Px(s.parent.vnode)&&LD(n,e,r,s),s=s.parent}}function LD(t,e,r,n){const s=Xw(e,t,n,!0);uc(()=>{Pv(n[e],s)},r)}function Xw(t,e,r=Zr,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ho();const a=ag(r),c=Qi(e,r,t,o);return a(),zo(),c});return n?s.unshift(i):s.push(i),i}}const Qo=t=>(e,r=Zr)=>{(!Wf||t==="sp")&&Xw(t,(...n)=>e(...n),r)},$D=Qo("bm"),qv=Qo("m"),MD=Qo("bu"),FD=Qo("u"),jD=Qo("bum"),uc=Qo("um"),HD=Qo("sp"),zD=Qo("rtg"),qD=Qo("rtc");function VD(t,e=Zr){Xw("ec",t,e)}const WD="components";function C1(t,e){return KD(WD,t,!0,e)||t}const GD=Symbol.for("v-ndc");function KD(t,e,r=!0,n=!1){const s=Js||Zr;if(s){const i=s.type;{const a=Lk(i,!1);if(a&&(a===e||a===Is(e)||a===Yw(Is(e))))return i}const o=_1(s[t]||i[t],e)||_1(s.appContext[t],e);return!o&&n?i:o}}function _1(t,e){return t&&(t[e]||t[Is(e)]||t[Yw(Is(e))])}const kb=t=>t?Qx(t)?Yv(t):kb(t.parent):null,vf=yn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>kb(t.parent),$root:t=>kb(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Dx(t),$forceUpdate:t=>t.f||(t.f=()=>{Hv(t.update)}),$nextTick:t=>t.n||(t.n=TD.bind(t.proxy)),$watch:t=>mk.bind(t)}),Jy=(t,e)=>t!==Ht&&!t.__isScriptSetup&&St(t,e),JD={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(Jy(n,e))return o[e]=1,n[e];if(s!==Ht&&St(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&St(l,e))return o[e]=3,i[e];if(r!==Ht&&St(r,e))return o[e]=4,r[e];Ub&&(o[e]=0)}}const u=vf[e];let h,d;if(u)return e==="$attrs"&&Qr(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(r!==Ht&&St(r,e))return o[e]=4,r[e];if(d=c.config.globalProperties,St(d,e))return d[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return Jy(s,e)?(s[e]=r,!0):n!==Ht&&St(n,e)?(n[e]=r,!0):St(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},o){let a;return!!r[o]||t!==Ht&&St(t,o)||Jy(e,o)||(a=i[0])&&St(a,o)||St(n,o)||St(vf,o)||St(s.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:St(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function I1(t){return Ve(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Ub=!0;function YD(t){const e=Dx(t),r=t.proxy,n=t.ctx;Ub=!1,e.beforeCreate&&S1(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:w,beforeUnmount:E,destroyed:b,unmounted:C,render:I,renderTracked:_,renderTriggered:O,errorCaptured:T,serverPrefetch:N,expose:k,inheritAttrs:U,components:$,directives:V,filters:z}=e;if(l&&QD(l,n,null),o)for(const R in o){const L=o[R];Ke(L)&&(n[R]=L.bind(r))}if(s){const R=s.call(r,r);tr(R)&&(t.data=lc(R))}if(Ub=!0,i)for(const R in i){const L=i[R],F=Ke(L)?L.bind(r,r):Ke(L.get)?L.get.bind(r,r):zi,j=!Ke(L)&&Ke(L.set)?L.set.bind(r):zi,K=Mk({get:F,set:j});Object.defineProperty(n,R,{enumerable:!0,configurable:!0,get:()=>K.value,set:Q=>K.value=Q})}if(a)for(const R in a)Rx(a[R],n,r,R);if(c){const R=Ke(c)?c.call(r):c;Reflect.ownKeys(R).forEach(L=>{nk(L,R[L])})}u&&S1(u,t,"c");function S(R,L){Ve(L)?L.forEach(F=>R(F.bind(r))):L&&R(L.bind(r))}if(S($D,h),S(qv,d),S(MD,f),S(FD,g),S(UD,p),S(BD,m),S(VD,T),S(qD,_),S(zD,O),S(jD,E),S(uc,C),S(HD,N),Ve(k))if(k.length){const R=t.exposed||(t.exposed={});k.forEach(L=>{Object.defineProperty(R,L,{get:()=>r[L],set:F=>r[L]=F,enumerable:!0})})}else t.exposed||(t.exposed={});I&&t.render===zi&&(t.render=I),U!=null&&(t.inheritAttrs=U),$&&(t.components=$),V&&(t.directives=V),N&&Tx(t)}function QD(t,e,r=zi){Ve(t)&&(t=Bb(t));for(const n in t){const s=t[n];let i;tr(s)?"default"in s?i=bm(s.from||n,s.default,!0):i=bm(s.from||n):i=bm(s),Xr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function S1(t,e,r){Qi(Ve(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function Rx(t,e,r,n){let s=n.includes(".")?Wx(r,n):()=>r[n];if(mr(t)){const i=e[t];Ke(i)&&Qy(s,i)}else if(Ke(t))Qy(s,t.bind(r));else if(tr(t))if(Ve(t))t.forEach(i=>Rx(i,e,r,n));else{const i=Ke(t.handler)?t.handler.bind(r):e[t.handler];Ke(i)&&Qy(s,i,t)}}function Dx(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!r&&!n?c=e:(c={},s.length&&s.forEach(l=>Gm(c,l,o,!0)),Gm(c,e,o)),tr(e)&&i.set(e,c),c}function Gm(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&Gm(t,i,r,!0),s&&s.forEach(o=>Gm(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const a=ZD[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const ZD={data:N1,props:x1,emits:x1,methods:nf,computed:nf,beforeCreate:sn,created:sn,beforeMount:sn,mounted:sn,beforeUpdate:sn,updated:sn,beforeDestroy:sn,beforeUnmount:sn,destroyed:sn,unmounted:sn,activated:sn,deactivated:sn,errorCaptured:sn,serverPrefetch:sn,components:nf,directives:nf,watch:ek,provide:N1,inject:XD};function N1(t,e){return e?t?function(){return yn(Ke(t)?t.call(this,this):t,Ke(e)?e.call(this,this):e)}:e:t}function XD(t,e){return nf(Bb(t),Bb(e))}function Bb(t){if(Ve(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function sn(t,e){return t?[...new Set([].concat(t,e))]:e}function nf(t,e){return t?yn(Object.create(null),t,e):e}function x1(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:yn(Object.create(null),I1(t),I1(e??{})):e}function ek(t,e){if(!t)return e;if(!e)return t;const r=yn(Object.create(null),t);for(const n in e)r[n]=sn(t[n],e[n]);return r}function kx(){return{app:null,config:{isNativeTag:F3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tk=0;function rk(t,e){return function(n,s=null){Ke(n)||(n=yn({},n)),s!=null&&!tr(s)&&(s=null);const i=kx(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:tk++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:Fk,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&Ke(u.install)?(o.add(u),u.install(l,...h)):Ke(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,d){if(!c){const f=l._ceVNode||Lo(n,s);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),t(f,u,d),c=!0,l._container=u,u.__vue_app__=l,Yv(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Qi(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=Ku;Ku=l;try{return u()}finally{Ku=h}}};return l}}let Ku=null;function nk(t,e){if(Zr){let r=Zr.provides;const n=Zr.parent&&Zr.parent.provides;n===r&&(r=Zr.provides=Object.create(n)),r[t]=e}}function bm(t,e,r=!1){const n=Rk();if(n||Ku){let s=Ku?Ku._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Ke(e)?e.call(n&&n.proxy):e}}const Ux={},Bx=()=>Object.create(Ux),Lx=t=>Object.getPrototypeOf(t)===Ux;function sk(t,e,r,n=!1){const s={},i=Bx();t.propsDefaults=Object.create(null),$x(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);r?t.props=n?s:yD(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function ik(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=It(s),[c]=t.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(ey(t.emitsOptions,d))continue;const f=e[d];if(c)if(St(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const g=Is(d);s[g]=Lb(c,a,g,f,t,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{$x(t,e,s,i)&&(l=!0);let u;for(const h in a)(!e||!St(e,h)&&((u=Vl(h))===h||!St(e,u)))&&(c?r&&(r[h]!==void 0||r[u]!==void 0)&&(s[h]=Lb(c,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!St(e,h))&&(delete i[h],l=!0)}l&&Ro(t.attrs,"set","")}function $x(t,e,r,n){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(gf(c))continue;const l=e[c];let u;s&&St(s,u=Is(c))?!i||!i.includes(u)?r[u]=l:(a||(a={}))[u]=l:ey(t.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,o=!0)}if(i){const c=It(r),l=a||Ht;for(let u=0;u<i.length;u++){const h=i[u];r[h]=Lb(s,c,h,l[h],t,!St(l,h))}}return o}function Lb(t,e,r,n,s,i){const o=t[r];if(o!=null){const a=St(o,"default");if(a&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ke(c)){const{propsDefaults:l}=s;if(r in l)n=l[r];else{const u=ag(s);n=l[r]=c.call(null,e),u()}}else n=c;s.ce&&s.ce._setProp(r,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Vl(r))&&(n=!0))}return n}const ok=new WeakMap;function Mx(t,e,r=!1){const n=r?ok:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Ke(t)){const u=h=>{c=!0;const[d,f]=Mx(h,e,!0);yn(o,d),f&&a.push(...f)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return tr(t)&&n.set(t,Vu),Vu;if(Ve(i))for(let u=0;u<i.length;u++){const h=Is(i[u]);T1(h)&&(o[h]=Ht)}else if(i)for(const u in i){const h=Is(u);if(T1(h)){const d=i[u],f=o[h]=Ve(d)||Ke(d)?{type:d}:yn({},d),g=f.type;let p=!1,m=!0;if(Ve(g))for(let w=0;w<g.length;++w){const E=g[w],b=Ke(E)&&E.name;if(b==="Boolean"){p=!0;break}else b==="String"&&(m=!1)}else p=Ke(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||St(f,"default"))&&a.push(h)}}const l=[o,a];return tr(t)&&n.set(t,l),l}function T1(t){return t[0]!=="$"&&!gf(t)}const Vv=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",Wv=t=>Ve(t)?t.map(ki):[ki(t)],ak=(t,e,r)=>{if(e._n)return e;const n=RD((...s)=>Wv(e(...s)),r);return n._c=!1,n},Fx=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Vv(s))continue;const i=t[s];if(Ke(i))e[s]=ak(s,i,n);else if(i!=null){const o=Wv(i);e[s]=()=>o}}},jx=(t,e)=>{const r=Wv(e);t.slots.default=()=>r},Hx=(t,e,r)=>{for(const n in e)(r||!Vv(n))&&(t[n]=e[n])},ck=(t,e,r)=>{const n=t.slots=Bx();if(t.vnode.shapeFlag&32){const s=e.__;s&&xb(n,"__",s,!0);const i=e._;i?(Hx(n,e,r),r&&xb(n,"_",i,!0)):Fx(e,n)}else e&&jx(t,e)},lk=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,o=Ht;if(n.shapeFlag&32){const a=e._;a?r&&a===1?i=!1:Hx(s,e,r):(i=!e.$stable,Fx(e,s)),o=e}else e&&(jx(t,e),o={default:1});if(i)for(const a in s)!Vv(a)&&o[a]==null&&delete s[a]},Kn=Ck;function uk(t){return hk(t)}function hk(t,e){const r=Qw();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=zi,insertStaticContent:g}=t,p=(D,B,G,ee=null,Z=null,re=null,pe=void 0,he=null,ae=!!B.dynamicChildren)=>{if(D===B)return;D&&!Rd(D,B)&&(ee=ze(D),Q(D,Z,re,!0),D=null),B.patchFlag===-2&&(ae=!1,B.dynamicChildren=null);const{type:se,ref:Re,shapeFlag:ge}=B;switch(se){case ty:m(D,B,G,ee);break;case Kh:w(D,B,G,ee);break;case Zy:D==null&&E(B,G,ee,pe);break;case Di:$(D,B,G,ee,Z,re,pe,he,ae);break;default:ge&1?I(D,B,G,ee,Z,re,pe,he,ae):ge&6?V(D,B,G,ee,Z,re,pe,he,ae):(ge&64||ge&128)&&se.process(D,B,G,ee,Z,re,pe,he,ae,ct)}Re!=null&&Z?bf(Re,D&&D.ref,re,B||D,!B):Re==null&&D&&D.ref!=null&&bf(D.ref,null,re,D,!0)},m=(D,B,G,ee)=>{if(D==null)n(B.el=a(B.children),G,ee);else{const Z=B.el=D.el;B.children!==D.children&&l(Z,B.children)}},w=(D,B,G,ee)=>{D==null?n(B.el=c(B.children||""),G,ee):B.el=D.el},E=(D,B,G,ee)=>{[D.el,D.anchor]=g(D.children,B,G,ee,D.el,D.anchor)},b=({el:D,anchor:B},G,ee)=>{let Z;for(;D&&D!==B;)Z=d(D),n(D,G,ee),D=Z;n(B,G,ee)},C=({el:D,anchor:B})=>{let G;for(;D&&D!==B;)G=d(D),s(D),D=G;s(B)},I=(D,B,G,ee,Z,re,pe,he,ae)=>{B.type==="svg"?pe="svg":B.type==="math"&&(pe="mathml"),D==null?_(B,G,ee,Z,re,pe,he,ae):N(D,B,Z,re,pe,he,ae)},_=(D,B,G,ee,Z,re,pe,he)=>{let ae,se;const{props:Re,shapeFlag:ge,transition:Oe,dirs:Fe}=D;if(ae=D.el=o(D.type,re,Re&&Re.is,Re),ge&8?u(ae,D.children):ge&16&&T(D.children,ae,null,ee,Z,Yy(D,re),pe,he),Fe&&pc(D,null,ee,"created"),O(ae,D,D.scopeId,pe,ee),Re){for(const Dt in Re)Dt!=="value"&&!gf(Dt)&&i(ae,Dt,null,Re[Dt],re,ee);"value"in Re&&i(ae,"value",null,Re.value,re),(se=Re.onVnodeBeforeMount)&&hi(se,ee,D)}Fe&&pc(D,null,ee,"beforeMount");const rt=dk(Z,Oe);rt&&Oe.beforeEnter(ae),n(ae,B,G),((se=Re&&Re.onVnodeMounted)||rt||Fe)&&Kn(()=>{se&&hi(se,ee,D),rt&&Oe.enter(ae),Fe&&pc(D,null,ee,"mounted")},Z)},O=(D,B,G,ee,Z)=>{if(G&&f(D,G),ee)for(let re=0;re<ee.length;re++)f(D,ee[re]);if(Z){let re=Z.subTree;if(B===re||Kx(re.type)&&(re.ssContent===B||re.ssFallback===B)){const pe=Z.vnode;O(D,pe,pe.scopeId,pe.slotScopeIds,Z.parent)}}},T=(D,B,G,ee,Z,re,pe,he,ae=0)=>{for(let se=ae;se<D.length;se++){const Re=D[se]=he?wa(D[se]):ki(D[se]);p(null,Re,B,G,ee,Z,re,pe,he)}},N=(D,B,G,ee,Z,re,pe)=>{const he=B.el=D.el;let{patchFlag:ae,dynamicChildren:se,dirs:Re}=B;ae|=D.patchFlag&16;const ge=D.props||Ht,Oe=B.props||Ht;let Fe;if(G&&gc(G,!1),(Fe=Oe.onVnodeBeforeUpdate)&&hi(Fe,G,B,D),Re&&pc(B,D,G,"beforeUpdate"),G&&gc(G,!0),(ge.innerHTML&&Oe.innerHTML==null||ge.textContent&&Oe.textContent==null)&&u(he,""),se?k(D.dynamicChildren,se,he,G,ee,Yy(B,Z),re):pe||L(D,B,he,null,G,ee,Yy(B,Z),re,!1),ae>0){if(ae&16)U(he,ge,Oe,G,Z);else if(ae&2&&ge.class!==Oe.class&&i(he,"class",null,Oe.class,Z),ae&4&&i(he,"style",ge.style,Oe.style,Z),ae&8){const rt=B.dynamicProps;for(let Dt=0;Dt<rt.length;Dt++){const vt=rt[Dt],Fr=ge[vt],jr=Oe[vt];(jr!==Fr||vt==="value")&&i(he,vt,Fr,jr,Z,G)}}ae&1&&D.children!==B.children&&u(he,B.children)}else!pe&&se==null&&U(he,ge,Oe,G,Z);((Fe=Oe.onVnodeUpdated)||Re)&&Kn(()=>{Fe&&hi(Fe,G,B,D),Re&&pc(B,D,G,"updated")},ee)},k=(D,B,G,ee,Z,re,pe)=>{for(let he=0;he<B.length;he++){const ae=D[he],se=B[he],Re=ae.el&&(ae.type===Di||!Rd(ae,se)||ae.shapeFlag&198)?h(ae.el):G;p(ae,se,Re,null,ee,Z,re,pe,!0)}},U=(D,B,G,ee,Z)=>{if(B!==G){if(B!==Ht)for(const re in B)!gf(re)&&!(re in G)&&i(D,re,B[re],null,Z,ee);for(const re in G){if(gf(re))continue;const pe=G[re],he=B[re];pe!==he&&re!=="value"&&i(D,re,he,pe,Z,ee)}"value"in G&&i(D,"value",B.value,G.value,Z)}},$=(D,B,G,ee,Z,re,pe,he,ae)=>{const se=B.el=D?D.el:a(""),Re=B.anchor=D?D.anchor:a("");let{patchFlag:ge,dynamicChildren:Oe,slotScopeIds:Fe}=B;Fe&&(he=he?he.concat(Fe):Fe),D==null?(n(se,G,ee),n(Re,G,ee),T(B.children||[],G,Re,Z,re,pe,he,ae)):ge>0&&ge&64&&Oe&&D.dynamicChildren?(k(D.dynamicChildren,Oe,G,Z,re,pe,he),(B.key!=null||Z&&B===Z.subTree)&&zx(D,B,!0)):L(D,B,G,Re,Z,re,pe,he,ae)},V=(D,B,G,ee,Z,re,pe,he,ae)=>{B.slotScopeIds=he,D==null?B.shapeFlag&512?Z.ctx.activate(B,G,ee,pe,ae):z(B,G,ee,Z,re,pe,ae):v(D,B,ae)},z=(D,B,G,ee,Z,re,pe)=>{const he=D.component=Ok(D,ee,Z);if(Px(D)&&(he.ctx.renderer=ct),Dk(he,!1,pe),he.asyncDep){if(Z&&Z.registerDep(he,S,pe),!D.el){const ae=he.subTree=Lo(Kh);w(null,ae,B,G),D.placeholder=ae.el}}else S(he,D,B,G,Z,re,pe)},v=(D,B,G)=>{const ee=B.component=D.component;if(vk(D,B,G))if(ee.asyncDep&&!ee.asyncResolved){R(ee,B,G);return}else ee.next=B,ee.update();else B.el=D.el,ee.vnode=B},S=(D,B,G,ee,Z,re,pe)=>{const he=()=>{if(D.isMounted){let{next:ge,bu:Oe,u:Fe,parent:rt,vnode:Dt}=D;{const li=qx(D);if(li){ge&&(ge.el=Dt.el,R(D,ge,pe)),li.asyncDep.then(()=>{D.isUnmounted||he()});return}}let vt=ge,Fr;gc(D,!1),ge?(ge.el=Dt.el,R(D,ge,pe)):ge=Dt,Oe&&qy(Oe),(Fr=ge.props&&ge.props.onVnodeBeforeUpdate)&&hi(Fr,rt,ge,Dt),gc(D,!0);const jr=O1(D),ci=D.subTree;D.subTree=jr,p(ci,jr,h(ci.el),ze(ci),D,Z,re),ge.el=jr.el,vt===null&&Ak(D,jr.el),Fe&&Kn(Fe,Z),(Fr=ge.props&&ge.props.onVnodeUpdated)&&Kn(()=>hi(Fr,rt,ge,Dt),Z)}else{let ge;const{el:Oe,props:Fe}=B,{bm:rt,m:Dt,parent:vt,root:Fr,type:jr}=D,ci=Ef(B);gc(D,!1),rt&&qy(rt),!ci&&(ge=Fe&&Fe.onVnodeBeforeMount)&&hi(ge,vt,B),gc(D,!0);{Fr.ce&&Fr.ce._def.shadowRoot!==!1&&Fr.ce._injectChildStyle(jr);const li=D.subTree=O1(D);p(null,li,G,ee,D,Z,re),B.el=li.el}if(Dt&&Kn(Dt,Z),!ci&&(ge=Fe&&Fe.onVnodeMounted)){const li=B;Kn(()=>hi(ge,vt,li),Z)}(B.shapeFlag&256||vt&&Ef(vt.vnode)&&vt.vnode.shapeFlag&256)&&D.a&&Kn(D.a,Z),D.isMounted=!0,B=G=ee=null}};D.scope.on();const ae=D.effect=new cx(he);D.scope.off();const se=D.update=ae.run.bind(ae),Re=D.job=ae.runIfDirty.bind(ae);Re.i=D,Re.id=D.uid,ae.scheduler=()=>Hv(Re),gc(D,!0),se()},R=(D,B,G)=>{B.component=D;const ee=D.vnode.props;D.vnode=B,D.next=null,ik(D,B.props,ee,G),lk(D,B.children,G),Ho(),A1(D),zo()},L=(D,B,G,ee,Z,re,pe,he,ae=!1)=>{const se=D&&D.children,Re=D?D.shapeFlag:0,ge=B.children,{patchFlag:Oe,shapeFlag:Fe}=B;if(Oe>0){if(Oe&128){j(se,ge,G,ee,Z,re,pe,he,ae);return}else if(Oe&256){F(se,ge,G,ee,Z,re,pe,he,ae);return}}Fe&8?(Re&16&&Te(se,Z,re),ge!==se&&u(G,ge)):Re&16?Fe&16?j(se,ge,G,ee,Z,re,pe,he,ae):Te(se,Z,re,!0):(Re&8&&u(G,""),Fe&16&&T(ge,G,ee,Z,re,pe,he,ae))},F=(D,B,G,ee,Z,re,pe,he,ae)=>{D=D||Vu,B=B||Vu;const se=D.length,Re=B.length,ge=Math.min(se,Re);let Oe;for(Oe=0;Oe<ge;Oe++){const Fe=B[Oe]=ae?wa(B[Oe]):ki(B[Oe]);p(D[Oe],Fe,G,null,Z,re,pe,he,ae)}se>Re?Te(D,Z,re,!0,!1,ge):T(B,G,ee,Z,re,pe,he,ae,ge)},j=(D,B,G,ee,Z,re,pe,he,ae)=>{let se=0;const Re=B.length;let ge=D.length-1,Oe=Re-1;for(;se<=ge&&se<=Oe;){const Fe=D[se],rt=B[se]=ae?wa(B[se]):ki(B[se]);if(Rd(Fe,rt))p(Fe,rt,G,null,Z,re,pe,he,ae);else break;se++}for(;se<=ge&&se<=Oe;){const Fe=D[ge],rt=B[Oe]=ae?wa(B[Oe]):ki(B[Oe]);if(Rd(Fe,rt))p(Fe,rt,G,null,Z,re,pe,he,ae);else break;ge--,Oe--}if(se>ge){if(se<=Oe){const Fe=Oe+1,rt=Fe<Re?B[Fe].el:ee;for(;se<=Oe;)p(null,B[se]=ae?wa(B[se]):ki(B[se]),G,rt,Z,re,pe,he,ae),se++}}else if(se>Oe)for(;se<=ge;)Q(D[se],Z,re,!0),se++;else{const Fe=se,rt=se,Dt=new Map;for(se=rt;se<=Oe;se++){const qn=B[se]=ae?wa(B[se]):ki(B[se]);qn.key!=null&&Dt.set(qn.key,se)}let vt,Fr=0;const jr=Oe-rt+1;let ci=!1,li=0;const Td=new Array(jr);for(se=0;se<jr;se++)Td[se]=0;for(se=Fe;se<=ge;se++){const qn=D[se];if(Fr>=jr){Q(qn,Z,re,!0);continue}let ui;if(qn.key!=null)ui=Dt.get(qn.key);else for(vt=rt;vt<=Oe;vt++)if(Td[vt-rt]===0&&Rd(qn,B[vt])){ui=vt;break}ui===void 0?Q(qn,Z,re,!0):(Td[ui-rt]=se+1,ui>=li?li=ui:ci=!0,p(qn,B[ui],G,null,Z,re,pe,he,ae),Fr++)}const g1=ci?fk(Td):Vu;for(vt=g1.length-1,se=jr-1;se>=0;se--){const qn=rt+se,ui=B[qn],m1=B[qn+1],w1=qn+1<Re?m1.el||m1.placeholder:ee;Td[se]===0?p(null,ui,G,w1,Z,re,pe,he,ae):ci&&(vt<0||se!==g1[vt]?K(ui,G,w1,2):vt--)}}},K=(D,B,G,ee,Z=null)=>{const{el:re,type:pe,transition:he,children:ae,shapeFlag:se}=D;if(se&6){K(D.component.subTree,B,G,ee);return}if(se&128){D.suspense.move(B,G,ee);return}if(se&64){pe.move(D,B,G,ct);return}if(pe===Di){n(re,B,G);for(let ge=0;ge<ae.length;ge++)K(ae[ge],B,G,ee);n(D.anchor,B,G);return}if(pe===Zy){b(D,B,G);return}if(ee!==2&&se&1&&he)if(ee===0)he.beforeEnter(re),n(re,B,G),Kn(()=>he.enter(re),Z);else{const{leave:ge,delayLeave:Oe,afterLeave:Fe}=he,rt=()=>{D.ctx.isUnmounted?s(re):n(re,B,G)},Dt=()=>{ge(re,()=>{rt(),Fe&&Fe()})};Oe?Oe(re,rt,Dt):Dt()}else n(re,B,G)},Q=(D,B,G,ee=!1,Z=!1)=>{const{type:re,props:pe,ref:he,children:ae,dynamicChildren:se,shapeFlag:Re,patchFlag:ge,dirs:Oe,cacheIndex:Fe}=D;if(ge===-2&&(Z=!1),he!=null&&(Ho(),bf(he,null,G,D,!0),zo()),Fe!=null&&(B.renderCache[Fe]=void 0),Re&256){B.ctx.deactivate(D);return}const rt=Re&1&&Oe,Dt=!Ef(D);let vt;if(Dt&&(vt=pe&&pe.onVnodeBeforeUnmount)&&hi(vt,B,D),Re&6)we(D.component,G,ee);else{if(Re&128){D.suspense.unmount(G,ee);return}rt&&pc(D,null,B,"beforeUnmount"),Re&64?D.type.remove(D,B,G,ct,ee):se&&!se.hasOnce&&(re!==Di||ge>0&&ge&64)?Te(se,B,G,!1,!0):(re===Di&&ge&384||!Z&&Re&16)&&Te(ae,B,G),ee&&ce(D)}(Dt&&(vt=pe&&pe.onVnodeUnmounted)||rt)&&Kn(()=>{vt&&hi(vt,B,D),rt&&pc(D,null,B,"unmounted")},G)},ce=D=>{const{type:B,el:G,anchor:ee,transition:Z}=D;if(B===Di){ie(G,ee);return}if(B===Zy){C(D);return}const re=()=>{s(G),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(D.shapeFlag&1&&Z&&!Z.persisted){const{leave:pe,delayLeave:he}=Z,ae=()=>pe(G,re);he?he(D.el,re,ae):ae()}else re()},ie=(D,B)=>{let G;for(;D!==B;)G=d(D),s(D),D=G;s(B)},we=(D,B,G)=>{const{bum:ee,scope:Z,job:re,subTree:pe,um:he,m:ae,a:se,parent:Re,slots:{__:ge}}=D;P1(ae),P1(se),ee&&qy(ee),Re&&Ve(ge)&&ge.forEach(Oe=>{Re.renderCache[Oe]=void 0}),Z.stop(),re&&(re.flags|=8,Q(pe,D,B,G)),he&&Kn(he,B),Kn(()=>{D.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},Te=(D,B,G,ee=!1,Z=!1,re=0)=>{for(let pe=re;pe<D.length;pe++)Q(D[pe],B,G,ee,Z)},ze=D=>{if(D.shapeFlag&6)return ze(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const B=d(D.anchor||D.el),G=B&&B[DD];return G?d(G):B};let Xe=!1;const He=(D,B,G)=>{D==null?B._vnode&&Q(B._vnode,null,null,!0):p(B._vnode||null,D,B,null,null,null,G),B._vnode=D,Xe||(Xe=!0,A1(),Sx(),Xe=!1)},ct={p,um:Q,m:K,r:ce,mt:z,mc:T,pc:L,pbc:k,n:ze,o:t};return{render:He,hydrate:void 0,createApp:rk(He)}}function Yy({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function gc({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function dk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function zx(t,e,r=!1){const n=t.children,s=e.children;if(Ve(n)&&Ve(s))for(let i=0;i<n.length;i++){const o=n[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=wa(s[i]),a.el=o.el),!r&&a.patchFlag!==-2&&zx(o,a)),a.type===ty&&(a.el=o.el),a.type===Kh&&!a.el&&(a.el=o.el)}}function fk(t){const e=t.slice(),r=[0];let n,s,i,o,a;const c=t.length;for(n=0;n<c;n++){const l=t[n];if(l!==0){if(s=r[r.length-1],t[s]<l){e[n]=s,r.push(n);continue}for(i=0,o=r.length-1;i<o;)a=i+o>>1,t[r[a]]<l?i=a+1:o=a;l<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function qx(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qx(e)}function P1(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const pk=Symbol.for("v-scx"),gk=()=>bm(pk);function Qy(t,e,r){return Vx(t,e,r)}function Vx(t,e,r=Ht){const{immediate:n,deep:s,flush:i,once:o}=r,a=yn({},r),c=e&&n||!e&&i!=="post";let l;if(Wf){if(i==="sync"){const f=gk();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=zi,f.resume=zi,f.pause=zi,f}}const u=Zr;a.call=(f,g,p)=>Qi(f,u,g,p);let h=!1;i==="post"?a.scheduler=f=>{Kn(f,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(f,g)=>{g?f():Hv(f)}),a.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=ND(t,e,a);return Wf&&(l?l.push(d):c&&d()),d}function mk(t,e,r){const n=this.proxy,s=mr(t)?t.includes(".")?Wx(n,t):()=>n[t]:t.bind(n,n);let i;Ke(e)?i=e:(i=e.handler,r=e);const o=ag(this),a=Vx(s,i.bind(n),r);return o(),a}function Wx(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const wk=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Is(e)}Modifiers`]||t[`${Vl(e)}Modifiers`];function yk(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Ht;let s=r;const i=e.startsWith("update:"),o=i&&wk(n,e.slice(7));o&&(o.trim&&(s=r.map(u=>mr(u)?u.trim():u)),o.number&&(s=r.map(V3)));let a,c=n[a=zy(e)]||n[a=zy(Is(e))];!c&&i&&(c=n[a=zy(Vl(e))]),c&&Qi(c,t,6,s);const l=n[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Qi(l,t,6,s)}}function Gx(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ke(t)){const c=l=>{const u=Gx(l,e,!0);u&&(a=!0,yn(o,u))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(tr(t)&&n.set(t,null),null):(Ve(i)?i.forEach(c=>o[c]=null):yn(o,i),tr(t)&&n.set(t,o),o)}function ey(t,e){return!t||!Gw(e)?!1:(e=e.slice(2).replace(/Once$/,""),St(t,e[0].toLowerCase()+e.slice(1))||St(t,Vl(e))||St(t,e))}function O1(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=t,m=Wm(t);let w,E;try{if(r.shapeFlag&4){const C=s||n,I=C;w=ki(l.call(I,C,u,h,f,d,g)),E=a}else{const C=e;w=ki(C.length>1?C(h,{attrs:a,slots:o,emit:c}):C(h,null)),E=e.props?a:bk(a)}}catch(C){Af.length=0,Zw(C,t,1),w=Lo(Kh)}let b=w;if(E&&p!==!1){const C=Object.keys(E),{shapeFlag:I}=b;C.length&&I&7&&(i&&C.some(Tv)&&(E=Ek(E,i)),b=Jh(b,E,!1,!0))}return r.dirs&&(b=Jh(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&zv(b,r.transition),w=b,Wm(m),w}const bk=t=>{let e;for(const r in t)(r==="class"||r==="style"||Gw(r))&&((e||(e={}))[r]=t[r]);return e},Ek=(t,e)=>{const r={};for(const n in t)(!Tv(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function vk(t,e,r){const{props:n,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?R1(n,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==n[d]&&!ey(l,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?R1(n,o,l):!0:!!o;return!1}function R1(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!ey(r,i))return!0}return!1}function Ak({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const Kx=t=>t.__isSuspense;function Ck(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):OD(t)}const Di=Symbol.for("v-fgt"),ty=Symbol.for("v-txt"),Kh=Symbol.for("v-cmt"),Zy=Symbol.for("v-stc"),Af=[];let ss=null;function Gv(t=!1){Af.push(ss=t?null:[])}function _k(){Af.pop(),ss=Af[Af.length-1]||null}let Vf=1;function D1(t,e=!1){Vf+=t,t<0&&ss&&e&&(ss.hasOnce=!0)}function Ik(t){return t.dynamicChildren=Vf>0?ss||Vu:null,_k(),Vf>0&&ss&&ss.push(t),t}function Kv(t,e,r,n,s,i){return Ik(Wt(t,e,r,n,s,i,!0))}function Jx(t){return t?t.__v_isVNode===!0:!1}function Rd(t,e){return t.type===e.type&&t.key===e.key}const Yx=({key:t})=>t??null,Em=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?mr(t)||Xr(t)||Ke(t)?{i:Js,r:t,k:e,f:!!r}:t:null);function Wt(t,e=null,r=null,n=0,s=null,i=t===Di?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Yx(e),ref:e&&Em(e),scopeId:xx,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Js};return a?(Jv(c,r),i&128&&t.normalize(c)):r&&(c.shapeFlag|=mr(r)?8:16),Vf>0&&!o&&ss&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&ss.push(c),c}const Lo=Sk;function Sk(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===GD)&&(t=Kh),Jx(t)){const a=Jh(t,e,!0);return r&&Jv(a,r),Vf>0&&!i&&ss&&(a.shapeFlag&6?ss[ss.indexOf(t)]=a:ss.push(a)),a.patchFlag=-2,a}if($k(t)&&(t=t.__vccOpts),e){e=Nk(e);let{class:a,style:c}=e;a&&!mr(a)&&(e.class=Dv(a)),tr(c)&&(jv(c)&&!Ve(c)&&(c=yn({},c)),e.style=Rv(c))}const o=mr(t)?1:Kx(t)?128:kD(t)?64:tr(t)?4:Ke(t)?2:0;return Wt(t,e,r,n,s,o,i,!0)}function Nk(t){return t?jv(t)||Lx(t)?yn({},t):t:null}function Jh(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?xk(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Yx(l),ref:e&&e.ref?r&&i?Ve(i)?i.concat(Em(e)):[i,Em(e)]:Em(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Di?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jh(t.ssContent),ssFallback:t.ssFallback&&Jh(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&zv(u,c.clone(u)),u}function Ju(t=" ",e=0){return Lo(ty,null,t,e)}function ki(t){return t==null||typeof t=="boolean"?Lo(Kh):Ve(t)?Lo(Di,null,t.slice()):Jx(t)?wa(t):Lo(ty,null,String(t))}function wa(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Jh(t)}function Jv(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Ve(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Jv(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!Lx(e)?e._ctx=Js:s===3&&Js&&(Js.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:Js},r=32):(e=String(e),n&64?(r=16,e=[Ju(e)]):r=8);t.children=e,t.shapeFlag|=r}function xk(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Dv([e.class,n.class]));else if(s==="style")e.style=Rv([e.style,n.style]);else if(Gw(s)){const i=e[s],o=n[s];o&&i!==o&&!(Ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=n[s])}return e}function hi(t,e,r,n=null){Qi(t,e,7,[r,n])}const Tk=kx();let Pk=0;function Ok(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||Tk,i={uid:Pk++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Z3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mx(n,s),emitsOptions:Gx(n,s),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:n.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=yk.bind(null,i),t.ce&&t.ce(i),i}let Zr=null;const Rk=()=>Zr||Js;let Km,$b;{const t=Qw(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Km=e("__VUE_INSTANCE_SETTERS__",r=>Zr=r),$b=e("__VUE_SSR_SETTERS__",r=>Wf=r)}const ag=t=>{const e=Zr;return Km(t),t.scope.on(),()=>{t.scope.off(),Km(e)}},k1=()=>{Zr&&Zr.scope.off(),Km(null)};function Qx(t){return t.vnode.shapeFlag&4}let Wf=!1;function Dk(t,e=!1,r=!1){e&&$b(e);const{props:n,children:s}=t.vnode,i=Qx(t);sk(t,n,i,e),ck(t,s,r||e);const o=i?kk(t,e):void 0;return e&&$b(!1),o}function kk(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,JD);const{setup:n}=r;if(n){Ho();const s=t.setupContext=n.length>1?Bk(t):null,i=ag(t),o=og(n,t,0,[t.props,s]),a=rx(o);if(zo(),i(),(a||t.sp)&&!Ef(t)&&Tx(t),a){if(o.then(k1,k1),e)return o.then(c=>{U1(t,c)}).catch(c=>{Zw(c,t,0)});t.asyncDep=o}else U1(t,o)}else Zx(t)}function U1(t,e,r){Ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:tr(e)&&(t.setupState=Cx(e)),Zx(t)}function Zx(t,e,r){const n=t.type;t.render||(t.render=n.render||zi);{const s=ag(t);Ho();try{YD(t)}finally{zo(),s()}}}const Uk={get(t,e){return Qr(t,"get",""),t[e]}};function Bk(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Uk),slots:t.slots,emit:t.emit,expose:e}}function Yv(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cx(bD(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in vf)return vf[r](t)},has(e,r){return r in e||r in vf}})):t.proxy}function Lk(t,e=!0){return Ke(t)?t.displayName||t.name:t.name||e&&t.__name}function $k(t){return Ke(t)&&"__vccOpts"in t}const Mk=(t,e)=>ID(t,e,Wf),Fk="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mb;const B1=typeof window<"u"&&window.trustedTypes;if(B1)try{Mb=B1.createPolicy("vue",{createHTML:t=>t})}catch{}const Xx=Mb?t=>Mb.createHTML(t):t=>t,jk="http://www.w3.org/2000/svg",Hk="http://www.w3.org/1998/Math/MathML",mo=typeof document<"u"?document:null,L1=mo&&mo.createElement("template"),zk={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?mo.createElementNS(jk,t):e==="mathml"?mo.createElementNS(Hk,t):r?mo.createElement(t,{is:r}):mo.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>mo.createTextNode(t),createComment:t=>mo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>mo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const o=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{L1.innerHTML=Xx(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=L1.content;if(n==="svg"||n==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},qk=Symbol("_vtc");function Vk(t,e,r){const n=t[qk];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const $1=Symbol("_vod"),Wk=Symbol("_vsh"),Gk=Symbol(""),Kk=/(^|;)\s*display\s*:/;function Jk(t,e,r){const n=t.style,s=mr(r);let i=!1;if(r&&!s){if(e)if(mr(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&vm(n,a,"")}else for(const o in e)r[o]==null&&vm(n,o,"");for(const o in r)o==="display"&&(i=!0),vm(n,o,r[o])}else if(s){if(e!==r){const o=n[Gk];o&&(r+=";"+o),n.cssText=r,i=Kk.test(r)}}else e&&t.removeAttribute("style");$1 in t&&(t[$1]=i?n.display:"",t[Wk]&&(n.display="none"))}const M1=/\s*!important$/;function vm(t,e,r){if(Ve(r))r.forEach(n=>vm(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Yk(t,e);M1.test(r)?t.setProperty(Vl(n),r.replace(M1,""),"important"):t[n]=r}}const F1=["Webkit","Moz","ms"],Xy={};function Yk(t,e){const r=Xy[e];if(r)return r;let n=Is(e);if(n!=="filter"&&n in t)return Xy[e]=n;n=Yw(n);for(let s=0;s<F1.length;s++){const i=F1[s]+n;if(i in t)return Xy[e]=i}return e}const j1="http://www.w3.org/1999/xlink";function H1(t,e,r,n,s,i=Q3(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(j1,e.slice(6,e.length)):t.setAttributeNS(j1,e,r):r==null||i&&!ix(r)?t.removeAttribute(e):t.setAttribute(e,i?"":cc(r)?String(r):r)}function z1(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Xx(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=r==null?t.type==="checkbox"?"on":"":String(r);(a!==c||!("_value"in t))&&(t.value=c),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const a=typeof t[e];a==="boolean"?r=ix(r):r==null&&a==="string"?(r="",o=!0):a==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(s||e)}function Qk(t,e,r,n){t.addEventListener(e,r,n)}function Zk(t,e,r,n){t.removeEventListener(e,r,n)}const q1=Symbol("_vei");function Xk(t,e,r,n,s=null){const i=t[q1]||(t[q1]={}),o=i[e];if(n&&o)o.value=n;else{const[a,c]=eU(e);if(n){const l=i[e]=nU(n,s);Qk(t,a,l,c)}else o&&(Zk(t,a,o,c),i[e]=void 0)}}const V1=/(?:Once|Passive|Capture)$/;function eU(t){let e;if(V1.test(t)){e={};let n;for(;n=t.match(V1);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Vl(t.slice(2)),e]}let e0=0;const tU=Promise.resolve(),rU=()=>e0||(tU.then(()=>e0=0),e0=Date.now());function nU(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Qi(sU(n,r.value),e,5,[n])};return r.value=t,r.attached=rU(),r}function sU(t,e){if(Ve(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const W1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,iU=(t,e,r,n,s,i)=>{const o=s==="svg";e==="class"?Vk(t,n,o):e==="style"?Jk(t,r,n):Gw(e)?Tv(e)||Xk(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):oU(t,e,n,o))?(z1(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&H1(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!mr(n))?z1(t,Is(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),H1(t,e,n,o))};function oU(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&W1(e)&&Ke(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return W1(e)&&mr(r)?!1:e in t}const aU=yn({patchProp:iU},zk);let G1;function cU(){return G1||(G1=uk(aU))}const lU=(...t)=>{const e=cU().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=hU(n);if(!s)return;const i=e._component;!Ke(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=r(s,!1,uU(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function uU(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function hU(t){return mr(t)?document.querySelector(t):t}const dU=Symbol(),K1=Object.getPrototypeOf,Fb=new WeakMap,fU=t=>t&&(Fb.has(t)?Fb.get(t):K1(t)===Object.prototype||K1(t)===Array.prototype),pU=t=>fU(t)&&t[dU]||null,J1=(t,e=!0)=>{Fb.set(t,e)},Jm={},Qv=t=>typeof t=="object"&&t!==null,gU=t=>Qv(t)&&!cg.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),e2=(t,e)=>{const r=jb.get(t);if((r==null?void 0:r[0])===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return J1(n,!0),jb.set(t,[e,n]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(cg.has(i))J1(i,!1);else if(Xa.has(i)){const[c,l]=Xa.get(i);a.value=e2(c,l())}Object.defineProperty(n,s,a)}),Object.preventExtensions(n)},mU=(t,e,r,n)=>({deleteProperty(s,i){const o=Reflect.get(s,i);r(i);const a=Reflect.deleteProperty(s,i);return a&&n(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(Y1(l,o)||Gf.has(o)&&Y1(l,Gf.get(o))))return!0;r(i),Qv(o)&&(o=pU(o)||o);const u=!Xa.has(o)&&yU(o)?zt(o):o;return e(i,u),Reflect.set(s,i,u,a),n(["set",[i],o,l]),!0}}),Xa=new WeakMap,cg=new WeakSet,jb=new WeakMap,sf=[1,1],Gf=new WeakMap;let Y1=Object.is,wU=(t,e)=>new Proxy(t,e),yU=gU,bU=e2,EU=mU;function zt(t={}){if(!Qv(t))throw new Error("object required");const e=Gf.get(t);if(e)return e;let r=sf[0];const n=new Set,s=(m,w=++sf[0])=>{r!==w&&(r=w,n.forEach(E=>E(m,w)))};let i=sf[1];const o=(m=++sf[1])=>(i!==m&&!n.size&&(i=m,c.forEach(([w])=>{const E=w[1](m);E>r&&(r=E)})),r),a=m=>(w,E)=>{const b=[...w];b[1]=[m,...b[1]],s(b,E)},c=new Map,l=(m,w)=>{const E=!cg.has(w)&&Xa.get(w);if(E){if((Jm?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(n.size){const b=E[2](a(m));c.set(m,[E,b])}else c.set(m,[E])}},u=m=>{var w;const E=c.get(m);E&&(c.delete(m),(w=E[1])==null||w.call(E))},h=m=>(n.add(m),n.size===1&&c.forEach(([E,b],C)=>{if((Jm?"production":void 0)!=="production"&&b)throw new Error("remove already exists");const I=E[2](a(C));c.set(C,[E,I])}),()=>{n.delete(m),n.size===0&&c.forEach(([E,b],C)=>{b&&(b(),c.set(C,[E]))})});let d=!0;const f=EU(()=>d,l,u,s),g=wU(t,f);Gf.set(t,g);const p=[t,o,h];return Xa.set(g,p),Reflect.ownKeys(t).forEach(m=>{const w=Object.getOwnPropertyDescriptor(t,m);"value"in w&&w.writable&&(g[m]=t[m])}),d=!1,g}function Br(t,e,r){const n=Xa.get(t);(Jm?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Kf(t){const e=Xa.get(t);(Jm?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[r,n]=e;return bU(r,n())}function Il(t){return cg.add(t),t}function vU(){return{proxyStateMap:Xa,refSet:cg,snapCache:jb,versionHolder:sf,proxyCache:Gf}}function rn(t,e,r,n){let s=t[e];return Br(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}const{proxyStateMap:AU,snapCache:CU}=vU(),Bg=t=>AU.has(t);function _U(t){const e=[];let r=0;const n=new Map,s=new WeakMap,i=()=>{const l=CU.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const h=new Map(n);s.set(u,h)}},o=l=>s.get(l)||n,a={data:e,index:r,epoch:0,get size(){return Bg(this)||i(),o(this).size},get(l){const h=o(this).get(l);if(h===void 0){this.epoch;return}return this.data[h]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Bg(this))throw new Error("Cannot perform mutations on a snapshot");const h=n.get(l);return h===void 0?(n.set(l,this.index),this.data[this.index++]=u):this.data[h]=u,this.epoch++,this},delete(l){if(!Bg(this))throw new Error("Cannot perform mutations on a snapshot");const u=n.get(l);return u===void 0?!1:(delete this.data[u],n.delete(l),this.epoch++,!0)},clear(){if(!Bg(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(l){this.epoch,o(this).forEach((h,d)=>{l(this.data[h],d,this)})},*entries(){this.epoch;const l=o(this);for(const[u,h]of l)yield[u,this.data[h]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=zt(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var Ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function IU(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Q1={};const q={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Q1<"u"?Q1.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},t2={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const r=t.find(i=>i.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return((s=q.CHAIN_NAME_MAP)==null?void 0:s[n])||void 0}},r2=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var SU=20,NU=1,Sl=1e6,Z1=1e6,xU=-7,TU=21,PU=!1,lg="[big.js] ",Wl=lg+"Invalid ",ry=Wl+"decimal places",OU=Wl+"rounding mode",n2=lg+"Division by zero",Ot={},Vi=void 0,RU=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function s2(){function t(e){var r=this;if(!(r instanceof t))return e===Vi?s2():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Wl+"value");e=e===0&&1/e<0?"-0":String(e)}DU(r,e)}r.constructor=t}return t.prototype=Ot,t.DP=SU,t.RM=NU,t.NE=xU,t.PE=TU,t.strict=PU,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function DU(t,e){var r,n,s;if(!RU.test(e))throw Error(Wl+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function Gl(t,e,r,n){var s=t.c;if(r===Vi&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(OU);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Vi))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Vi||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Kl(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}Ot.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ot.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ot.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Sl)throw Error(ry);if(!s[0])throw Error(n2);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,h,d=s.slice(),f=a=s.length,g=n.length,p=n.slice(0,a),m=p.length,w=t,E=w.c=[],b=0,C=o+(w.e=e.e-t.e)+1;for(w.s=i,i=C<0?0:C,d.unshift(0);m++<a;)p.push(0);do{for(l=0;l<10;l++){if(a!=(m=p.length))u=a>m?1:-1;else for(h=-1,u=0;++h<a;)if(s[h]!=p[h]){u=s[h]>p[h]?1:-1;break}if(u<0){for(c=m==a?s:d;m;){if(p[--m]<c[m]){for(h=m;h&&!p[--h];)p[h]=9;--p[h],p[m]+=10}p[m]-=c[m]}for(;!p[0];)p.shift()}else break}E[b++]=u?l:++l,p[0]&&u?p[m]=n[f]||0:p=[n[f]]}while((f++<g||p[0]!==Vi)&&i--);return!E[0]&&b!=1&&(E.shift(),w.e--,C--),b>C&&Gl(w,C,r.RM,p[0]!==Vi),w};Ot.eq=function(t){return this.cmp(t)===0};Ot.gt=function(t){return this.cmp(t)>0};Ot.gte=function(t){return this.cmp(t)>-1};Ot.lt=function(t){return this.cmp(t)<0};Ot.lte=function(t){return this.cmp(t)<1};Ot.minus=Ot.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,h=t.c,d=t.e;if(!l[0]||!h[0])return h[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-d){for((s=a<0)?(a=-a,n=l):(d=u,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=l.length<h.length)?l:h).length,a=c=0;c<r;c++)if(l[c]!=h[c]){s=l[c]<h[c];break}if(s&&(n=l,l=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;r>a;){if(l[--r]<h[r]){for(e=r;e&&!l[--e];)l[e]=9;--l[e],l[r]+=10}l[r]-=h[r]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(t.s=1,l=[d=0]),t.c=l,t.e=d,t};Ot.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(n2);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};Ot.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ot.plus=Ot.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=l):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),e=l.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+l[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ot.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-Z1||t>Z1)throw Error(Wl+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};Ot.prec=function(t,e){if(t!==~~t||t<1||t>Sl)throw Error(Wl+"precision");return Gl(new this.constructor(this),t,e)};Ot.round=function(t,e){if(t===Vi)t=0;else if(t!==~~t||t<-Sl||t>Sl)throw Error(ry);return Gl(new this.constructor(this),t+this.e+1,e)};Ot.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(lg+"No square root");i=Math.sqrt(+Kl(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Gl(t,(s.DP-=4)+t.e+1,s.RM)};Ot.times=Ot.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ot.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Vi){if(t!==~~t||t<0||t>Sl)throw Error(ry);for(r=Gl(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Kl(r,!0,!!n)};Ot.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Vi){if(t!==~~t||t<0||t>Sl)throw Error(ry);for(r=Gl(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Kl(r,!1,!!n)};Ot[Symbol.for("nodejs.util.inspect.custom")]=Ot.toJSON=Ot.toString=function(){var t=this,e=t.constructor;return Kl(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ot.toNumber=function(){var t=+Kl(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(lg+"Imprecise conversion");return t};Ot.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==Vi){if(t!==~~t||t<1||t>Sl)throw Error(Wl+"precision");for(r=Gl(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Kl(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};Ot.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(lg+"valueOf disallowed");return Kl(t,t.e<=e.NE||t.e>=e.PE,!0)};var Dd=s2();const kU={bigNumber(t){return t?new Dd(t):new Dd(0)},multiply(t,e){if(t===void 0||e===void 0)return new Dd(0);const r=new Dd(t),n=new Dd(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},UU=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],BU=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],LU=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],$U={getERC20Abi:t=>q.USDT_CONTRACT_ADDRESSES.includes(t)?LU:UU,getSwapAbi:()=>BU},hn={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},Ue={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function t0(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const De={setItem(t,e){Bu()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Bu())return localStorage.getItem(t)||void 0},removeItem(t){Bu()&&localStorage.removeItem(t)},clear(){Bu()&&localStorage.clear()}};function Bu(){return typeof window<"u"&&typeof localStorage<"u"}function ko(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var X1={};const r0=(typeof process<"u"&&typeof X1<"u"?X1.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",i2=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],MU="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ct={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:r0,SECURE_SITE_DASHBOARD:`${r0}/dashboard`,SECURE_SITE_FAVICON:`${r0}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[q.CHAIN.EVM,q.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[q.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[q.CHAIN.EVM,q.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[q.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[q.CHAIN.EVM,q.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},X={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=X.getActiveNamespace(),e=X.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{De.setItem(Ue.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=De.getItem(Ue.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{De.removeItem(Ue.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{De.setItem(Ue.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{De.setItem(Ue.ACTIVE_CAIP_NETWORK_ID,t),X.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return De.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{De.removeItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=t0(t);De.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=X.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),De.setItem(Ue.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=De.getItem(Ue.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=t0(t);De.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return De.getItem(Ue.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=t0(t);return De.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{De.setItem(Ue.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return De.getItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{De.removeItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return De.getItem(Ue.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=De.getItem(Ue.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{De.setItem(Ue.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return De.getItem(Ue.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=De.getItem(Ue.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));De.setItem(Ue.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=X.getConnectedNamespaces();e.includes(t)||(e.push(t),X.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=X.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),X.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return De.getItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{De.setItem(Ue.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{De.removeItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=De.getItem(Ue.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=X.getBalanceCache();De.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=X.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;X.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=X.getBalanceCache();e[t.caipAddress]=t,De.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=De.getItem(Ue.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=X.getBalanceCache();De.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=X.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),X.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=X.getNativeBalanceCache();e[t.caipAddress]=t,De.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=De.getItem(Ue.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=X.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;X.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=X.getEnsCache();e[t.address]=t,De.setItem(Ue.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=X.getEnsCache();De.setItem(Ue.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=De.getItem(Ue.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=X.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;X.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=X.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},De.setItem(Ue.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=X.getIdentityCache();De.setItem(Ue.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{De.removeItem(Ue.PORTFOLIO_CACHE),De.removeItem(Ue.NATIVE_BALANCE_CACHE),De.removeItem(Ue.ENS_CACHE),De.removeItem(Ue.IDENTITY_CACHE),De.removeItem(Ue.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{De.setItem(Ue.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=De.getItem(Ue.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=X.getConnections(),n=r[e]??[],s=new Map;for(const o of n)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===q.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(h=>h.address.toLowerCase())),u=o.accounts.filter(h=>!l.has(h.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...r,[e]:Array.from(s.values())};De.setItem(Ue.CONNECTIONS,JSON.stringify(i))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=De.getItem(Ue.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=X.getConnections(),s=n[r]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),De.setItem(Ue.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=De.getItem(Ue.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=X.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),De.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=X.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(s=>s.toLowerCase()!==t.toLowerCase()),De.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(X.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=De.getItem(Ue.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var r;try{const s=(r=X.getTransactionsCache()[t])==null?void 0:r[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;X.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const s=X.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:r,transactions:n}},De.setItem(Ue.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=X.getTransactionsCache(),n=(r==null?void 0:r[t])||{},{[e]:s,...i}=n;De.setItem(Ue.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=De.getItem(Ue.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=X.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;X.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=X.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},De.setItem(Ue.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=X.getTokenPriceCache();De.setItem(Ue.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},_e={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return _e.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ct.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ct.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(_e.isClient()&&window.self!==window.top)try{const r=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],n="https://app.safe.global";if(r){const s=new URL(r),i=new URL(n);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ct.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(_e.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!_e.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?X.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var r,n;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(r=window.matchMedia("(display-mode: standalone)"))==null?void 0:r.matches:!1,e=(n=window==null?void 0:window.navigator)==null?void 0:n.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,_e.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const s=Number(t);s&&(r=(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return q.W3M_API_URL},getBlockchainApiUrl(){return q.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return q.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?Ct.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in q.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),l=t.substring(s),u=c+r;return a+u+l}};async function kd(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class ug{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await kd(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await kd(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await kd(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await kd(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await kd(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const FU={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?Ct.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(_e.isTelegram()){if(_e.isIos())return t.filter(e=>e!=="google");if(_e.isMac())return t.filter(e=>e!=="x");if(_e.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Pe=zt({features:Ct.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ct.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),J={state:Pe,subscribeKey(t,e){return rn(Pe,t,e)},setOptions(t){Object.assign(Pe,t)},setRemoteFeatures(t){var r,n;if(!t)return;const e={...Pe.remoteFeatures,...t};Pe.remoteFeatures=e,(r=Pe.remoteFeatures)!=null&&r.socials&&(Pe.remoteFeatures.socials=FU.filterSocialsByPlatform(Pe.remoteFeatures.socials)),(n=Pe.features)!=null&&n.pay&&(Pe.remoteFeatures.email=!1,Pe.remoteFeatures.socials=!1)},setFeatures(t){var r;if(!t)return;Pe.features||(Pe.features=Ct.DEFAULT_FEATURES);const e={...Pe.features,...t};Pe.features=e,(r=Pe.features)!=null&&r.pay&&Pe.remoteFeatures&&(Pe.remoteFeatures.email=!1,Pe.remoteFeatures.socials=!1)},setProjectId(t){Pe.projectId=t},setCustomRpcUrls(t){Pe.customRpcUrls=t},setAllWallets(t){Pe.allWallets=t},setIncludeWalletIds(t){Pe.includeWalletIds=t},setExcludeWalletIds(t){Pe.excludeWalletIds=t},setFeaturedWalletIds(t){Pe.featuredWalletIds=t},setTokens(t){Pe.tokens=t},setTermsConditionsUrl(t){Pe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Pe.privacyPolicyUrl=t},setCustomWallets(t){Pe.customWallets=t},setIsSiweEnabled(t){Pe.isSiweEnabled=t},setIsUniversalProvider(t){Pe.isUniversalProvider=t},setSdkVersion(t){Pe.sdkVersion=t},setMetadata(t){Pe.metadata=t},setDisableAppend(t){Pe.disableAppend=t},setEIP6963Enabled(t){Pe.enableEIP6963=t},setDebug(t){Pe.debug=t},setEnableWalletConnect(t){Pe.enableWalletConnect=t},setEnableWalletGuide(t){Pe.enableWalletGuide=t},setEnableAuthLogger(t){Pe.enableAuthLogger=t},setEnableWallets(t){Pe.enableWallets=t},setPreferUniversalLinks(t){Pe.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(Ct.SIWX_DEFAULTS))t[e]??(t[e]=r);Pe.siwx=t},setConnectMethodsOrder(t){Pe.features={...Pe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Pe.features={...Pe.features,walletFeaturesOrder:t}},setSocialsOrder(t){Pe.remoteFeatures={...Pe.remoteFeatures,socials:t}},setCollapseWallets(t){Pe.features={...Pe.features,collapseWallets:t}},setEnableEmbedded(t){Pe.enableEmbedded=t},setAllowUnsupportedChain(t){Pe.allowUnsupportedChain=t},setManualWCControl(t){Pe.manualWCControl=t},setEnableNetworkSwitch(t){Pe.enableNetworkSwitch=t},setEnableReconnect(t){Pe.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(Pe.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){Pe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Pe.universalProviderConfigOverride},getSnapshot(){return Kf(Pe)}},jU=Object.freeze({enabled:!0,events:[]}),HU=new ug({baseUrl:_e.getAnalyticsUrl(),clientId:null}),zU=5,qU=60*1e3,Xo=zt({...jU}),VU={state:Xo,subscribeKey(t,e){return rn(Xo,t,e)},async sendError(t,e){if(!Xo.enabled)return;const r=Date.now();if(Xo.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<qU}).length>=zU)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Xo.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=J.state;await HU.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:_e.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Xo.enabled=!0},disable(){Xo.enabled=!1},clearEvents(){Xo.events=[]}};class Yh extends Error{constructor(e,r,n){super(e),this.name="AppKitError",this.category=r,this.originalError=n,Object.setPrototypeOf(this,Yh.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const i=n.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Yh):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function eC(t,e){const r=t instanceof Yh?t:new Yh(t instanceof Error?t.message:String(t),e,t);throw VU.sendError(r,r.category),r}function as(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return eC(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return eC(a,e)}},r[n]=i}else r[n]=s}),r}var Qh={};const WU="https://secure.walletconnect.org/sdk",GU=(typeof process<"u"&&typeof Qh<"u"?Qh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||WU,KU=(typeof process<"u"&&typeof Qh<"u"?Qh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",JU=(typeof process<"u"&&typeof Qh<"u"?Qh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ne={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},gr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Bi={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},YU={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===Bi.PHANTOM.id&&!("phantom"in window)){const s=r.startsWith("https")?"https":"http",i=r.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Bi.PHANTOM.url}/ul/browse/${n}?ref=${o}`}t===Bi.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Bi.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===q.CHAIN.SOLANA&&t===Bi.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Bi.COINBASE.url}/dapp?cb_url=${n}`)}},Vn=zt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),QU={state:Vn,subscribeNetworkImages(t){return Br(Vn.networkImages,()=>t(Vn.networkImages))},subscribeKey(t,e){return rn(Vn,t,e)},subscribe(t){return Br(Vn,()=>t(Vn))},setWalletImage(t,e){Vn.walletImages[t]=e},setNetworkImage(t,e){Vn.networkImages[t]=e},setChainImage(t,e){Vn.chainImages[t]=e},setConnectorImage(t,e){Vn.connectorImages={...Vn.connectorImages,[t]:e}},setTokenImage(t,e){Vn.tokenImages[t]=e},setCurrencyImage(t,e){Vn.currencyImages[t]=e}},Ws=as(QU),ZU={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},n0=zt({networkImagePromises:{}}),o2={async fetchWalletImage(t){if(t)return await ke._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(n0.networkImagePromises[t]||(n0.networkImagePromises[t]=ke._fetchNetworkImage(t)),await n0.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Ws.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Ws.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return Ws.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Ws.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Ws.state.connectorImages[t.imageId]},getChainImage(t){return Ws.state.networkImages[ZU[t]]}},ea=zt({message:"",variant:"info",open:!1}),XU={state:ea,subscribeKey(t,e){return rn(ea,t,e)},open(t,e){const{debug:r}=J.state,{code:n,displayMessage:s,debugMessage:i}=t;s&&r&&(ea.message=s,ea.variant=e,ea.open=!0),i&&console.error(typeof i=="function"?i():i,n?{code:n}:void 0)},close(){ea.open=!1,ea.message="",ea.variant="info"}},hr=as(XU),e8=_e.getAnalyticsUrl(),t8=new ug({baseUrl:e8,clientId:null}),r8=["MODAL_CREATED"],ro=zt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Pt={state:ro,subscribe(t){return Br(ro,()=>t(ro))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=J.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=xe.state.address;if(r8.includes(t.data.event)||typeof window>"u")return;await t8.post({path:"/e",params:Pt.getSdkProperties(),body:{eventId:_e.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ro.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===q.HTTP_STATUS_CODES.FORBIDDEN&&!ro.reportedErrors.FORBIDDEN&&(hr.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Bu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ro.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;ro.timestamp=Date.now(),ro.data=t,((e=J.state.features)!=null&&e.analytics||t.event==="INITIALIZE")&&Pt._sendAnalyticsEvent(ro)}},n8=_e.getApiUrl(),En=new ug({baseUrl:n8,clientId:null}),s8=40,tC=4,i8=20,We=zt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ke={state:We,subscribeKey(t,e){return rn(We,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=J.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return J.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${En.baseUrl}/getWalletImage/${t}`,r=await En.getBlob({path:e,params:ke._getSdkProperties()});Ws.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${En.baseUrl}/public/getAssetImage/${t}`,r=await En.getBlob({path:e,params:ke._getSdkProperties()});Ws.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${En.baseUrl}/public/getAssetImage/${t}`,r=await En.getBlob({path:e,params:ke._getSdkProperties()});Ws.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${En.baseUrl}/public/getCurrencyImage/${t}`,r=await En.getBlob({path:e,params:ke._getSdkProperties()});Ws.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${En.baseUrl}/public/getTokenImage/${t}`,r=await En.getBlob({path:e,params:ke._getSdkProperties()});Ws.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){return _e.isMobile()?t==null?void 0:t.filter(r=>r.mobile_link||r.id===Bi.COINBASE.id?!0:x.state.activeChain==="solana"&&(r.id===Bi.SOLFLARE.id||r.id===Bi.PHANTOM.id)):t},async fetchProjectConfig(){return(await En.get({path:"/appkit/v1/config",params:ke._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await En.get({path:"/projects/v1/origins",params:ke._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===q.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=q.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=x.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!o2.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>ke._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=ue.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>ke._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ke._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ke._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ke._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Bi).map(o=>o.id));const n=await En.get({path:"/getWallets",params:{...ke._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ke._filterWalletsByPlatform(n==null?void 0:n.data)||[],count:n==null?void 0:n.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=J.state;if(t!=null&&t.length){const e={...ke._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??tC,include:t},{data:r}=await ke.fetchWallets(e),n=[...r].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=n.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ke._fetchWalletImage(i))),We.featured=n,We.allFeatured=n}},async fetchRecommendedWallets(){try{We.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=J.state,n=[...e??[],...r??[]].filter(Boolean),s=x.getRequestedCaipNetworkIds().join(","),i={page:1,entries:tC,include:t,exclude:n,chains:s},{data:o,count:a}=await ke.fetchWallets(i),c=X.getRecentWallets(),l=o.map(h=>h.image_id).filter(Boolean),u=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(h=>ke._fetchWalletImage(h))),We.recommended=o,We.allRecommended=o,We.count=a??0}catch{}finally{We.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=J.state,s=x.getRequestedCaipNetworkIds().join(","),i=[...We.recommended.map(({id:u})=>u),...r??[],...n??[]].filter(Boolean),o={page:t,entries:s8,include:e,exclude:i,chains:s},{data:a,count:c}=await ke.fetchWallets(o),l=a.slice(0,i8).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ke._fetchWalletImage(u))),We.wallets=_e.uniqueBy([...We.wallets,...ke._filterOutExtensions(a)],"id").filter(u=>{var h;return(h=u.chains)==null?void 0:h.some(d=>s.includes(d))}),We.count=c>We.count?c:We.count,We.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await ke.fetchWallets(e);r&&r.forEach(n=>{We.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=J.state,s=x.getRequestedCaipNetworkIds().join(",");We.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await ke.fetchWallets(i);Pt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ke._fetchWalletImage(c)),_e.wait(300)]),We.search=ke._filterOutExtensions(o)},initPromise(t,e){const r=We.promises[t];return r||(We.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&ke.initPromise("connectorImages",ke.fetchConnectorImages),e&&ke.initPromise("featuredWallets",ke.fetchFeaturedWallets),r&&ke.initPromise("recommendedWallets",ke.fetchRecommendedWallets),n&&ke.initPromise("networkImages",ke.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=J.state.features)!=null&&t.analytics&&ke.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await En.get({path:"/getAnalyticsConfig",params:ke._getSdkProperties()});J.setFeatures({analytics:t})}catch{J.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){We.featured=We.allFeatured,We.recommended=We.allRecommended;return}const e=x.getRequestedCaipNetworkIds().join(",");We.featured=We.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),We.recommended=We.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),We.filteredWallets=We.wallets.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})},clearFilterByNamespaces(){We.filteredWallets=[]},setFilterByNamespace(t){if(!t){We.featured=We.allFeatured,We.recommended=We.allRecommended;return}const e=x.getRequestedCaipNetworkIds().join(",");We.featured=We.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),We.recommended=We.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),We.filteredWallets=We.wallets.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})}},kt=zt({view:"Connect",history:["Connect"],transactionStack:[]}),o8={state:kt,subscribeKey(t,e){return rn(kt,t,e)},pushTransactionStack(t){kt.transactionStack.push(t)},popTransactionStack(t){const e=kt.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:s}=e;switch(t){case"success":r==null||r();break;case"error":n==null||n(),je.goBack();break;case"cancel":s==null||s(),je.goBack();break}},push(t,e){t!==kt.view&&(kt.view=t,kt.history.push(t),kt.data=e)},reset(t,e){kt.view=t,kt.history=[t],kt.data=e},replace(t,e){kt.history.at(-1)===t||(kt.view=t,kt.history[kt.history.length-1]=t,kt.data=e)},goBack(){var n;const t=x.state.activeCaipAddress,e=je.state.view==="ConnectingFarcaster",r=!t&&e;if(kt.history.length>1){kt.history.pop();const[s]=kt.history.slice(-1);s&&(t&&s==="Connect"?kt.view="Account":kt.view=s)}else ht.close();(n=kt.data)!=null&&n.wallet&&(kt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(r){xe.setFarcasterUrl(void 0,x.state.activeChain);const a=ue.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Kf(J.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(kt.history.length>1){kt.history=kt.history.slice(0,t+1);const[e]=kt.history.slice(-1);e&&(kt.view=e)}},goBackOrCloseModal(){je.state.history.length>1?je.goBack():ht.close()}},je=as(o8),no=zt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Hb={state:no,subscribe(t){return Br(no,()=>t(no))},setThemeMode(t){no.themeMode=t;try{const e=ue.getAuthConnector();if(e){const r=Hb.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:ko(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){no.themeVariables={...no.themeVariables,...t};try{const e=ue.getAuthConnector();if(e){const r=Hb.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:ko(no.themeVariables,no.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Kf(no)}},Rn=as(Hb),a2=Object.fromEntries(r2.map(t=>[t,void 0])),a8=Object.fromEntries(r2.map(t=>[t,!0])),ft=zt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:a2,filterByNamespaceMap:a8}),c8={state:ft,subscribe(t){return Br(ft,()=>{t(ft)})},subscribeKey(t,e){return rn(ft,t,e)},initialize(t){t.forEach(e=>{const r=X.getConnectedConnectorId(e);r&&ue.setConnectorId(r,e)})},setActiveConnector(t){t&&(ft.activeConnector=Il(t))},setConnectors(t){t.filter(s=>!ft.allConnectors.some(i=>i.id===s.id&&ue.getConnectorName(i.name)===ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ft.allConnectors.push(Il(s))});const r=ue.getEnabledNamespaces(),n=ue.getEnabledConnectors(r);ft.connectors=ue.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(ft.filterByNamespaceMap).forEach(e=>{ft.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ft.filterByNamespaceMap[e]=!0}),ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ft.filterByNamespaceMap[t]=e,ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ue.getEnabledNamespaces(),e=ue.getEnabledConnectors(t),r=ue.areAllNamespacesEnabled();ft.connectors=ue.mergeMultiChainConnectors(e),r?ke.clearFilterByNamespaces():ke.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ft.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ft.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ft.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ue.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=(s==null?void 0:s.id)===q.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=ue.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===q.CONNECTOR_ID.AUTH){const s=t,i=Kf(J.state),o=Rn.getSnapshot().themeMode,a=Rn.getSnapshot().themeVariables;(r=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(n=s==null?void 0:s.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ko(a,o)}),ue.setConnectors([t])}else ue.setConnectors([t])},getAuthConnector(t){var n;const e=t||x.state.activeChain,r=ft.connectors.find(s=>s.id===q.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return ft.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ft.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||x.state.activeChain;return ft.allConnectors.filter(i=>i.chain===n).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,r=Kf(J.state),n=Rn.getSnapshot().themeMode,s=Rn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:ko(s,n)})},getConnectorsByNamespace(t){const e=ft.allConnectors.filter(r=>r.chain===t);return ue.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return x.checkIfSmartAccountEnabled()&&Fn(t)===gr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=ue.getConnector({id:t.id,rdns:t.rdns});YU.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,x.state.activeChain),e?je.push("ConnectingExternal",{connector:e,wallet:t}):je.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ue.getConnectorsByNamespace(t):ue.mergeMultiChainConnectors(ft.allConnectors)},setFilterByNamespace(t){ft.filterByNamespace=t,ft.connectors=ue.getConnectors(t),ke.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ft.activeConnectorIds={...ft.activeConnectorIds,[e]:t},X.setConnectedConnectorId(e,t))},removeConnectorId(t){ft.activeConnectorIds={...ft.activeConnectorIds,[t]:void 0},X.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ft.activeConnectorIds[t]},isConnected(t){return t?!!ft.activeConnectorIds[t]:Object.values(ft.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ft.activeConnectorIds={...a2}}},ue=as(c8),l8=1e3,Ud={checkNamespaceConnectorId(t,e){return ue.getConnectorId(t)===e},isSocialProvider(t){return Ct.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ue.setActiveConnector(e),s==null||s(_e.isMobile()&&t),n){const l=ht.subscribeKey("open",u=>{u||(je.state.view!==n&&je.replace(n),l(),a(new Error("Modal closed")))})}const c=x.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),r&&ht.close(),c(),o(hn.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,r)=>{const n=x.subscribeKey("activeCaipAddress",s=>{s&&(ht.close(),n(),e(hn.parseCaipAddress(s)))});fe.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:s}){let i=xe.state.socialWindow,o=xe.state.socialProvider,a=!1,c=null;const l=e||x.state.activeChain,u=x.subscribeKey("activeCaipAddress",h=>{h&&(r&&ht.close(),u())});return new Promise((h,d)=>{async function f(p){var m,w;if((m=p.data)!=null&&m.resultUri)if(p.origin===q.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const E=ue.getAuthConnector(l);if(E&&!a){i&&(i.close(),xe.setSocialWindow(void 0,l),i=xe.state.socialWindow),a=!0;const b=p.data.resultUri;if(o&&Pt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){X.setConnectedSocialProvider(o),await fe.connectExternal({id:E.id,type:E.type,socialUri:b},E.chain);const C=x.state.activeCaipAddress;if(!C){d(new Error("Failed to connect"));return}h(hn.parseCaipAddress(C)),Pt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o,caipNetworkId:(w=x.getActiveCaipNetwork())==null?void 0:w.caipNetworkId}})}}}catch{o&&Pt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),d(new Error("Failed to connect"))}}else o&&Pt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function g(){if(t&&(xe.setSocialProvider(t,l),o=xe.state.socialProvider,Pt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){n==null||n();const p=ht.subscribeKey("open",w=>{!w&&t==="farcaster"&&(d(new Error("Popup closed")),s==null||s(),p())}),m=ue.getAuthConnector();if(m&&!xe.state.farcasterUrl)try{const{url:w}=await m.provider.getFarcasterUri();xe.setFarcasterUrl(w,l)}catch{d(new Error("Failed to connect to farcaster"))}}else{const p=ue.getAuthConnector();c=_e.returnOpenHref(`${q.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(p&&o){const{uri:m}=await p.provider.getSocialRedirectUri({provider:o});if(c&&m){xe.setSocialWindow(c,l),i=xe.state.socialWindow,c.location.href=m;const w=setInterval(()=>{i!=null&&i.closed&&!a&&(d(new Error("Popup closed")),clearInterval(w))},1e3);window.addEventListener("message",f,!1)}else c==null||c.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),c==null||c.close()}}}g()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((s,i)=>{if(r==null||r(),e){const a=ht.subscribeKey("open",c=>{c||(je.state.view!==e&&je.replace(e),a(),i(new Error("Modal closed")))})}const o=x.subscribeKey("activeCaipAddress",a=>{a&&(n==null||n(),t&&ht.close(),o(),s(hn.parseCaipAddress(a)))})})},async updateEmail(){const t=X.getConnectedConnectorId(x.state.activeChain),e=ue.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==q.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await ht.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(ht.close(),clearInterval(i),o(),n({email:a}))},l8),o=ht.subscribeKey("open",a=>{a||(je.state.view!=="Connect"&&je.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return x.checkIfSmartAccountEnabled()&&Fn(t)===gr.ACCOUNT_TYPES.EOA}};function c2(){var n,s;const t=((n=x.state.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((s=x.state.activeCaipNetwork)==null?void 0:s.id)||1,r=Ct.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function Fn(t){var r;return(r=x.getAccountData(t))==null?void 0:r.preferredAccountType}function zb(t){var e,r;return t?(r=(e=x.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:r.caipNetwork:x.state.activeCaipNetwork}const Ym={getConnectionStatus(t,e){const r=ue.state.activeConnectorIds[e],n=fe.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const i=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:i}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=J.state.remoteFeatures)!=null&&a.multiWallet),r=ue.state.activeConnectorIds[t],n=fe.getConnections(t),i=(fe.state.recentConnections.get(t)??[]).filter(c=>ue.getConnectorById(c.connectorId)),o=Ym.excludeExistingConnections([...n.map(c=>c.connectorId),...r?[r]:[]],i);return e?{connections:n,recentConnections:o}:{connections:n.filter(c=>c.connectorId.toLowerCase()===(r==null?void 0:r.toLowerCase())),recentConnections:[]}}},Nc=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),lr=zt({...Nc}),u8={state:lr,subscribeKey(t,e){return rn(lr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=_e.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){lr.message=Nc.message,lr.variant=Nc.variant,lr.svg=Nc.svg,lr.open=Nc.open,lr.autoClose=Nc.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Nc.autoClose}){lr.open?(lr.open=!1,setTimeout(()=>{lr.message=t,lr.variant=r,lr.svg=e,lr.open=!0,lr.autoClose=n},150)):(lr.message=t,lr.variant=r,lr.svg=e,lr.open=!0,lr.autoClose=n)}},ji=u8,Gt=zt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),h8={state:Gt,subscribe(t){return Br(Gt,()=>t(Gt))},setLastNetworkInView(t){Gt.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Gt.loading=!0;try{const r=await Le.fetchTransactions({account:t,cursor:Gt.next,chainId:(e=x.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),n=Am.filterSpamTransactions(r.data),s=Am.filterByConnectedChain(n),i=[...Gt.transactions,...s];Gt.loading=!1,Gt.transactions=i,Gt.transactionsByYear=Am.groupTransactionsByYearAndMonth(Gt.transactionsByYear,s),Gt.empty=i.length===0,Gt.next=r.next?r.next:void 0}catch{const n=x.state.activeChain;Pt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:J.state.projectId,cursor:Gt.next,isSmartAccount:Fn(n)===gr.ACCOUNT_TYPES.SMART_ACCOUNT}}),ji.showError("Failed to fetch transactions"),Gt.loading=!1,Gt.empty=!0,Gt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(l=>l.id!==n.id);r[s]={...o,[i]:[...c,n].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var s;return((s=n.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=x.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Gt.next=void 0},resetTransactions(){Gt.transactions=[],Gt.transactionsByYear={},Gt.lastNetworkInView=void 0,Gt.loading=!1,Gt.empty=!1,Gt.next=void 0}},Am=as(h8,"API_ERROR"),lt=zt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let mc;const d8={state:lt,subscribe(t){return Br(lt,()=>t(lt))},subscribeKey(t,e){return rn(lt,t,e)},_getClient(){return lt._client},setClient(t){lt._client=Il(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);fe.syncStorageConnections(e)},syncStorageConnections(t){const e=X.getConnections(),r=t??Array.from(x.state.chains.keys());for(const n of r){const s=e[n]??[],i=new Map(lt.recentConnections);i.set(n,s),lt.recentConnections=i}},getConnections(t){return t?lt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=fe.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect(){var t,e,r,n;if(_e.isTelegram()||_e.isSafari()&&_e.isIos()){if(mc){await mc,mc=void 0;return}if(!_e.isPairingExpired(lt==null?void 0:lt.wcPairingExpiry)){const s=lt.wcUri;lt.wcUri=s;return}mc=(e=(t=fe._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),fe.state.status="connecting",await mc,mc=void 0,lt.wcPairingExpiry=void 0,fe.state.status="connected"}else await((n=(r=fe._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var s,i;const n=await((i=(s=fe._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return r&&x.setActiveNamespace(e),n},async reconnectExternal(t){var r,n;await((n=(r=fe._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||x.state.activeChain;e&&ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var n;if(!e)return;ht.setLoading(!0,x.state.activeChain);const r=ue.getAuthConnector();r&&(xe.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),X.setPreferredAccountTypes(Object.entries(x.state.chains).reduce((s,[i,o])=>{const a=i,c=Fn(a);return c!==void 0&&(s[a]=c),s},{})),await fe.reconnectExternal(r),ht.setLoading(!1,x.state.activeChain),Pt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((n=x.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=fe._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=fe._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=fe._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=fe._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=fe._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=fe._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=fe._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=fe._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=fe._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=fe._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=fe._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=fe._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){lt.wcUri=void 0,lt.wcPairingExpiry=void 0,lt.wcLinking=void 0,lt.recentWallet=void 0,lt.status="disconnected",Am.resetTransactions(),X.deleteWalletConnectDeepLink()},resetUri(){lt.wcUri=void 0,lt.wcPairingExpiry=void 0,mc=void 0},finalizeWcConnection(){var r,n,s;const{wcLinking:t,recentWallet:e}=fe.state;t&&X.setWalletConnectDeepLink(t),e&&X.setAppKitRecent(e),Pt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=je.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown",caipNetworkId:(s=x.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(t){lt.wcBasic=t},setUri(t){lt.wcUri=t,lt.wcPairingExpiry=_e.getPairingExpiry()},setWcLinking(t){lt.wcLinking=t},setWcError(t){lt.wcError=t,lt.buffering=!1},setRecentWallet(t){lt.recentWallet=t},setBuffering(t){lt.buffering=t},setStatus(t){lt.status=t},setIsSwitchingConnection(t){lt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){var n;try{await((n=fe._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e,initialDisconnect:r}))}catch(s){throw new Yh("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const r=new Map(lt.connections);r.set(e,t),lt.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const r=(i=(s=xe.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),n=r&&r.address.toLowerCase()===t.toLowerCase()&&Ud.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await fe.setPreferredAccountType(n,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=ue.getConnectorById(t.connectorId),s=t.connectorId===q.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&r&&await fe.handleAuthAccountSwitch({address:r,namespace:e});else{const i=await fe.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e);return i==null?void 0:i.address}return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){var l,u;const s=ue.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===q.CONNECTOR_ID.AUTH,a=t.connectorId===q.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Ud.isSocialProvider(i)){const{address:h}=await Ud.connectSocial({social:i,closeModalOnConnect:n,onOpenFarcaster(){ht.open({view:"ConnectingFarcaster"})},onConnect(){je.replace("ProfileWallets")}});c=h}else{const{address:h}=await Ud.connectEmail({closeModalOnConnect:n,onOpen(){ht.open({view:"EmailLogin"})},onConnect(){je.replace("ProfileWallets")}});c=h}else if(a){const{address:h}=await Ud.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(d){ht.open({view:d?"AllWallets":"ConnectingWalletConnect"})},onConnect(){je.replace("ProfileWallets")}});c=h}else{const h=await fe.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);h&&(c=h.address)}return o&&r&&await fe.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:s}){let i;const o=xe.getCaipAddress(r);if(o){const{address:c}=hn.parseCaipAddress(o);i=c}const a=Ym.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await fe.handleActiveConnection({connection:t,namespace:r,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:r,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await fe.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&(s==null||s({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},fe=as(d8),nu=zt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ys={state:nu,subscribe(t){return Br(nu,()=>t(nu))},subscribeOpen(t){return rn(nu,"open",t)},set(t){Object.assign(nu,{...nu,...t})}},f8={async getTokenList(){var n;const t=x.state.activeCaipNetwork,e=await Le.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((n=e==null?void 0:e.tokens)==null?void 0:n.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=x.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const r=(e=await(fe==null?void 0:fe.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:r,fast:r,instant:r};case"eip155":default:return await Le.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const s=await Le.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&r&&n){const i=fe.parseUnits(r,n)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await cA.getMyTokensWithBalance(t);return xe.setTokenBalance(e,x.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:c2(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Tt=zt({tokenBalances:[],loading:!1}),p8={state:Tt,subscribe(t){return Br(Tt,()=>t(Tt))},subscribeKey(t,e){return rn(Tt,t,e)},setToken(t){t&&(Tt.token=Il(t))},setTokenAmount(t){Tt.sendTokenAmount=t},setReceiverAddress(t){Tt.receiverAddress=t},setReceiverProfileImageUrl(t){Tt.receiverProfileImageUrl=t},setReceiverProfileName(t){Tt.receiverProfileName=t},setNetworkBalanceInUsd(t){Tt.networkBalanceInUSD=t},setLoading(t){Tt.loading=t},async sendToken(){var t;try{switch(At.setLoading(!0),(t=x.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await At.sendEvmToken();return;case"solana":await At.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{At.setLoading(!1)}},async sendEvmToken(){var r,n,s;const t=x.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Fn(t);if(!At.state.sendTokenAmount||!At.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!At.state.token)throw new Error("A token is required");(r=At.state.token)!=null&&r.address?(Pt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:At.state.token.address,amount:At.state.sendTokenAmount,network:((n=x.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}),await At.sendERC20Token({receiverAddress:At.state.receiverAddress,tokenAddress:At.state.token.address,sendTokenAmount:At.state.sendTokenAmount,decimals:At.state.token.quantity.decimals})):(Pt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:At.state.token.symbol||"",amount:At.state.sendTokenAmount,network:((s=x.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await At.sendNativeToken({receiverAddress:At.state.receiverAddress,sendTokenAmount:At.state.sendTokenAmount,decimals:At.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Tt.loading=!0;const e=(i=x.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=x.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=x.state.activeCaipAddress,s=n?_e.getPlainAddress(n):void 0;if(Tt.lastRetry&&!_e.isAllowedRetry(Tt.lastRetry,30*Ct.ONE_SEC_MS))return Tt.loading=!1,[];try{if(s&&e&&r){const a=await cA.getMyTokensWithBalance();return Tt.tokenBalances=a,Tt.lastRetry=void 0,a}}catch(a){Tt.lastRetry=Date.now(),t==null||t(a),ji.showError("Token Balance Unavailable")}finally{Tt.loading=!1}return[]},fetchNetworkBalance(){if(Tt.tokenBalances.length===0)return;const t=f8.mapBalancesToSwapTokens(Tt.tokenBalances);if(!t)return;const e=t.find(r=>r.address===c2());e&&(Tt.networkBalanceInUSD=e?kU.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;je.pushTransactionStack({});const e=t.receiverAddress,r=xe.state.address,n=fe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await fe.sendTransaction({chainNamespace:q.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)}),Pt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Fn("eip155")===gr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=At.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=x.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=fe._getClient())==null||a.updateBalance("eip155"),At.resetSend()},async sendERC20Token(t){je.pushTransactionStack({onSuccess(){je.replace("Account")}});const e=fe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(xe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=_e.getPlainAddress(t.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");await fe.writeContract({fromAddress:xe.state.address,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:$U.getERC20Abi(r),chainNamespace:q.CHAIN.EVM}),At.resetSend()}},async sendSolanaToken(){var t;if(!At.state.sendTokenAmount||!At.state.receiverAddress)throw new Error("An amount and receiver address are required");je.pushTransactionStack({onSuccess(){je.replace("Account")}}),await fe.sendTransaction({chainNamespace:"solana",to:At.state.receiverAddress,value:At.state.sendTokenAmount}),(t=fe._getClient())==null||t.updateBalance("solana"),At.resetSend()},resetSend(){Tt.token=void 0,Tt.sendTokenAmount=void 0,Tt.receiverAddress=void 0,Tt.receiverProfileImageUrl=void 0,Tt.receiverProfileName=void 0,Tt.loading=!1,Tt.tokenBalances=[]}},At=as(p8),s0={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Lg={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ye=zt({chains:_U(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),g8={state:ye,subscribe(t){return Br(ye,()=>{t(ye)})},subscribeKey(t,e){return rn(ye,t,e)},subscribeChainProp(t,e,r){let n;return Br(ye.chains,()=>{var i;const s=r||ye.activeChain;if(s){const o=(i=ye.chains.get(s))==null?void 0:i[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:s}=X.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(n==null?void 0:n.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=J.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ye.noAdapters=!0),ye.noAdapters||(ye.activeChain=a==null?void 0:a.namespace,ye.activeCaipNetwork=i,x.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ye.activeChain&&Ys.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const h=e==null?void 0:e.filter(g=>g.chainNamespace===u),d=X.getPreferredAccountTypes()||{},f={...J.state.defaultAccountTypes,...d};x.state.chains.set(u,{namespace:u,networkState:zt({...Lg,caipNetwork:h==null?void 0:h[0]}),accountState:zt({...s0,preferredAccountType:f[u]}),caipNetworks:h??[],...r}),x.setRequestedCaipNetworks(h??[],u)})},removeAdapter(t){var e,r;if(ye.activeChain===t){const n=Array.from(ye.chains.entries()).find(([s])=>s!==t);if(n){const s=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];s&&x.setActiveCaipNetwork(s)}}ye.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");ye.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Lg,caipNetwork:n[0]},accountState:s0,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),x.setRequestedCaipNetworks((n==null?void 0:n.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=ye.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(s=>s.id===t.id)||n.push(t),ye.chains.set(t.chainNamespace,{...e,caipNetworks:n}),x.setRequestedCaipNetworks(n,t.chainNamespace),ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var n,s,i;const r=ye.chains.get(t);if(r){const o=((n=ye.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((s=r.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=r==null?void 0:r.caipNetworks)!=null&&i[0])&&x.setActiveCaipNetwork(r.caipNetworks[0]),ye.chains.set(t,{...r,caipNetworks:a}),x.setRequestedCaipNetworks(a||[],t),a.length===0&&ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=ye.chains.get(t);r&&(r.networkState={...r.networkState||Lg,...e},ye.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=ye.chains.get(t);if(n){const s={...n.accountState||s0,...e};ye.chains.set(t,{...n,accountState:s}),(ye.chains.size===1||ye.activeChain===t)&&(e.caipAddress&&(ye.activeCaipAddress=e.caipAddress),xe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=ye.chains.get(t);if(r){const n={...r.networkState||Lg,...e};ye.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){x.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){var n,s;ye.activeChain=t;const e=t?ye.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(ye.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ye.activeCaipNetwork=r,x.setChainNetworkData(t,{caipNetwork:r}),X.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),Ys.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,s,i;if(!t)return;ye.activeChain!==t.chainNamespace&&x.setIsSwitchingNamespace(!0);const e=ye.chains.get(t.chainNamespace);ye.activeChain=t.chainNamespace,ye.activeCaipNetwork=t,x.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?ye.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ye.activeCaipAddress=void 0,x.setAccountProp("caipAddress",ye.activeCaipAddress,t.chainNamespace),e&&xe.replaceState(e.accountState),At.resetSend(),Ys.set({activeChain:ye.activeChain,selectedNetworkId:(i=ye.activeCaipNetwork)==null?void 0:i.caipNetworkId}),X.setActiveCaipNetworkId(t.caipNetworkId),!x.checkIfSupportedNetwork(t.chainNamespace)&&J.state.enableNetworkSwitch&&!J.state.allowUnsupportedChain&&!fe.state.wcBasic&&x.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=ye.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==x.state.activeChain,r=(s=x.getNetworkData(t))==null?void 0:s.caipNetwork,n=x.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await x.switchActiveNetwork(n)},async switchActiveNetwork(t){var i;const e=x.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=x.state.chains.get(e),n=!((i=r==null?void 0:r.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=ye.activeCaipNetwork)==null?void 0:a.id)})),s=x.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),n&&ht.close()}catch{je.goBack()}Pt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ye.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const r=ye.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||ye.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=ye.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){var n;const r=(n=ye.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=ye.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return _e.sortRequestedNetworks(r,n).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=x.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){x.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=x.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=x.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){var e,r;return t?(r=(e=ye.chains.get(t))==null?void 0:e.networkState)==null?void 0:r.caipNetwork:ye.activeCaipNetwork},getActiveCaipAddress(){return ye.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=ye.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=x.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());x.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){var s;const r=e||((s=ye.activeCaipNetwork)==null?void 0:s.caipNetworkId),n=x.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(i=>i.caipNetworkId===r):!0},checkIfSupportedChainId(t){if(!ye.activeChain)return!0;const e=x.getRequestedCaipNetworks(ye.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){x.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=t2.caipNetworkIdToNumber((n=ye.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=ye.activeChain;if(!e||!t)return!1;const r=x.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},showUnsupportedChainUI(){ht.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ye.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Ct.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){x.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=(i=(s=x.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,n=J.state.defaultAccountTypes[e];ye.activeCaipAddress=void 0,x.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ue.removeConnectorId(e)},setIsSwitchingNamespace(t){ye.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(ye.chains.forEach(s=>{q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(n=(r=ye.chains.get(s))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var r;const e=t||ye.activeChain;if(e)return(r=x.state.chains.get(e))==null?void 0:r.accountState},getNetworkData(t){var r;const e=t||ye.activeChain;if(e)return(r=x.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const r=x.state.chains.get(t),n=(s=r==null?void 0:r.caipNetworks)==null?void 0:s.find(a=>a.id===e);return n||((i=r==null?void 0:r.networkState)==null?void 0:i.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ue.state.filterByNamespace;return(t?[ye.chains.get(t)]:Array.from(ye.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?x.getRequestedCaipNetworks(t):x.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ye.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ye.lastConnectedSIWECaipNetwork}},x=as(g8),m8={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},l2=_e.getBlockchainApiUrl(),vn=zt({clientId:null,api:new ug({baseUrl:l2,clientId:null}),supportedChains:{http:[],ws:[]}}),Le={state:vn,async get(t){const{st:e,sv:r}=Le.getSdkProperties(),n=J.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return vn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=J.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{vn.supportedChains.http.length||await Le.getSupportedNetworks()}catch{return!1}return vn.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Le.get({path:"v1/supported-chains"});return vn.supportedChains=t,t}catch{return vn.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Le.isNetworkSupported(e))return{avatar:"",name:""};const n=X.getIdentityFromCacheForAddress(t);if(n)return n;const s=await Le.get({path:`/v1/identity/${t}`,params:{sender:x.state.activeCaipAddress?_e.getPlainAddress(x.state.activeCaipAddress):void 0}});return X.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:s}){var c;if(!await Le.isNetworkSupported((c=x.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=X.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await Le.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:r,cache:n});return X.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){var o;return await Le.isNetworkSupported((o=x.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Le.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await Le.isNetworkSupported((r=x.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Le.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var s;if(!await Le.isNetworkSupported((s=x.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const r=X.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await vn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:J.state.projectId},headers:{"Content-Type":"application/json"}});return X.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await Le.isNetworkSupported((n=x.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Le.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:r}=Le.getSdkProperties();if(!await Le.isNetworkSupported((s=x.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Le.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){var o;if(!await Le.isNetworkSupported((o=x.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return vn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ct.CONVERT_SLIPPAGE_TOLERANCE},projectId:J.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:s}=Le.getSdkProperties();if(!await Le.isNetworkSupported((o=x.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Le.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){var l;const{st:n,sv:s}=Le.getSdkProperties();if(!await Le.isNetworkSupported((l=x.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return ji.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=X.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Le.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return X.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await Le.isNetworkSupported((r=x.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Le.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await Le.isNetworkSupported((r=x.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Le.get({path:`/v1/profile/reverse/${t}`,params:{sender:xe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await Le.isNetworkSupported((r=x.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Le.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var i;return await Le.isNetworkSupported((i=x.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?vn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){var a;return await Le.isNetworkSupported((a=x.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await vn.api.post({path:"/v1/generators/onrampurl",params:{projectId:J.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Le.isNetworkSupported((e=x.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Le.get({path:"/v1/onramp/options"})}catch{return m8}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var s;try{return await Le.isNetworkSupported((s=x.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await vn.api.post({path:"/v1/onramp/quote",params:{projectId:J.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await Le.isNetworkSupported((r=x.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Le.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var s;return await Le.isNetworkSupported((s=x.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?vn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:J.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){vn.clientId=t,vn.api=new ug({baseUrl:l2,clientId:t})}};function hg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ec(t){return hg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const u2="2.33.3";let Bd={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${u2}`},Rt=class qb extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof qb?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof qb&&r.cause.docsPath||r.docsPath,i=(a=Bd.getDocsUrl)==null?void 0:a.call(Bd,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Bd.version?[`Version: ${Bd.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=u2}walk(e){return h2(this,e)}};function h2(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?h2(t.cause,e):e?null:t}class d2 extends Rt{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}let f2=class extends Rt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function gd(t,{dir:e,size:r=32}={}){return typeof t=="string"?w8(t,{dir:e,size:r}):y8(t,{dir:e,size:r})}function w8(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new f2({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function y8(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new f2({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let b8=class extends Rt{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},E8=class extends Rt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Qm(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let s=0;s<r.length-1&&r[e==="left"?s:r.length-s-1].toString()==="0";s++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function md(t,{size:e}){if(ec(t)>e)throw new E8({givenSize:ec(t),maxSize:e})}function Nu(t,e={}){const{signed:r}=e;e.size&&md(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Zm(t,e={}){return Number(Nu(t,e))}const v8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ga(t,e={}){return typeof t=="number"||typeof t=="bigint"?at(t,e):typeof t=="string"?p2(t,e):typeof t=="boolean"?A8(t,e):hc(t,e)}function A8(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(md(r,{size:e.size}),gd(r,{size:e.size})):r}function hc(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=v8[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(md(n,{size:e.size}),gd(n,{dir:"right",size:e.size})):n}function at(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new b8({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?gd(a,{size:n}):a}const C8=new TextEncoder;function p2(t,e={}){const r=C8.encode(t);return hc(r,e)}const _8=new TextEncoder;function g2(t,e={}){return typeof t=="number"||typeof t=="bigint"?S8(t,e):typeof t=="boolean"?I8(t,e):hg(t)?Nl(t,e):m2(t,e)}function I8(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(md(r,{size:e.size}),gd(r,{size:e.size})):r}const so={zero:48,nine:57,A:65,F:70,a:97,f:102};function rC(t){if(t>=so.zero&&t<=so.nine)return t-so.zero;if(t>=so.A&&t<=so.F)return t-(so.A-10);if(t>=so.a&&t<=so.f)return t-(so.a-10)}function Nl(t,e={}){let r=t;e.size&&(md(r,{size:e.size}),r=gd(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=rC(n.charCodeAt(a++)),l=rC(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Rt(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+l}return i}function S8(t,e){const r=at(t,e);return Nl(r)}function m2(t,e={}){const r=_8.encode(t);return typeof e.size=="number"?(md(r,{size:e.size}),gd(r,{dir:"right",size:e.size})):r}const $g=BigInt(2**32-1),nC=BigInt(32);function N8(t,e=!1){return e?{h:Number(t&$g),l:Number(t>>nC&$g)}:{h:Number(t>>nC&$g)|0,l:Number(t&$g)|0}}function x8(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=N8(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const T8=(t,e,r)=>t<<r|e>>>32-r,P8=(t,e,r)=>e<<r|t>>>32-r,O8=(t,e,r)=>e<<r-32|t>>>64-r,R8=(t,e,r)=>t<<r-32|e>>>64-r,su=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function D8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xl(t,...e){if(!D8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function kse(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xm(t.outputLen),Xm(t.blockLen)}function ew(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function w2(t,e){xl(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function k8(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Jf(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function i0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function di(t,e){return t<<32-e|t>>>e}const U8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function B8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function L8(t){for(let e=0;e<t.length;e++)t[e]=B8(t[e]);return t}const sC=U8?t=>t:L8,$8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",M8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Use(t){if(xl(t),$8)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=M8[t[r]];return e}function F8(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Xv(t){return typeof t=="string"&&(t=F8(t)),xl(t),t}function Bse(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];xl(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let y2=class{};function b2(t){const e=n=>t().update(Xv(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function $se(t=32){if(su&&typeof su.getRandomValues=="function")return su.getRandomValues(new Uint8Array(t));if(su&&typeof su.randomBytes=="function")return Uint8Array.from(su.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const j8=BigInt(0),Ld=BigInt(1),H8=BigInt(2),z8=BigInt(7),q8=BigInt(256),V8=BigInt(113),E2=[],v2=[],A2=[];for(let t=0,e=Ld,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],E2.push(2*(5*n+r)),v2.push((t+1)*(t+2)/2%64);let s=j8;for(let i=0;i<7;i++)e=(e<<Ld^(e>>z8)*V8)%q8,e&H8&&(s^=Ld<<(Ld<<BigInt(i))-Ld);A2.push(s)}const C2=x8(A2,!0),W8=C2[0],G8=C2[1],iC=(t,e,r)=>r>32?O8(t,e,r):T8(t,e,r),oC=(t,e,r)=>r>32?R8(t,e,r):P8(t,e,r);function K8(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=iC(l,u,1)^r[a],d=oC(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=v2[o],c=iC(s,i,a),l=oC(s,i,a),u=E2[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=W8[n],t[1]^=G8[n]}Jf(r)}let J8=class _2 extends y2{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,Xm(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=k8(this.state)}clone(){return this._cloneInto()}keccak(){sC(this.state32),K8(this.state32,this.rounds),sC(this.state32),this.posOut=0,this.pos=0}update(e){ew(this),e=Xv(e),xl(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ew(this,!1),xl(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(w2(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Jf(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new _2(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Y8=(t,e,r)=>b2(()=>new J8(e,t,r)),I2=Y8(1,136,256/8);function Q8(t,e){const r=e||"hex",n=I2(hg(t,{strict:!1})?g2(t):t);return r==="bytes"?n:Ga(n)}class Tl extends Rt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let eA=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const o0=new eA(8192);function Z8(t,e){if(o0.has(`${t}.${e}`))return o0.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=Q8(m2(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return o0.set(`${t}.${e}`,i),i}const X8=/^0x[a-fA-F0-9]{40}$/,a0=new eA(8192);function Pl(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(a0.has(n))return a0.get(n);const s=X8.test(t)?t.toLowerCase()===t?!0:r?Z8(t)===t:!0:!1;return a0.set(n,s),s}function Fse(t){return typeof t[0]=="string"?wd(t):eB(t)}function eB(t){let e=0;for(const s of t)e+=s.length;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function wd(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function tB(t,e,r,{strict:n}={}){return hg(t,{strict:!1})?nB(t,e,r,{strict:n}):rB(t,e,r,{strict:n})}function S2(t,e){if(typeof e=="number"&&e>0&&e>ec(t)-1)throw new d2({offset:e,position:"start",size:ec(t)})}function N2(t,e,r){if(typeof e=="number"&&typeof r=="number"&&ec(t)!==r-e)throw new d2({offset:r,position:"end",size:ec(t)})}function rB(t,e,r,{strict:n}={}){S2(t,e);const s=t.slice(e,r);return n&&N2(s,e,r),s}function nB(t,e,r,{strict:n}={}){S2(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&N2(s,e,r),s}class aC extends Rt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class sB extends Rt{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class iB extends Rt{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const oB={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new iB({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new sB({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new aC({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new aC({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function x2(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(oB);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}const yl=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r),aB={ether:-9,wei:9};function T2(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function Vb(t,e="wei"){return T2(t,aB[e])}function cB(t){const e=Object.entries(t).map(([n,s])=>s===void 0||s===!1?null:[n,s]).filter(Boolean),r=e.reduce((n,[s])=>Math.max(n,s.length),0);return e.map(([n,s])=>`  ${`${n}:`.padEnd(r+1)}  ${s}`).join(`
`)}class lB extends Rt{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class uB extends Rt{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",cB(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class hB extends Rt{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}const tA=t=>t;class Cf extends Rt{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${tA(o)}`,e&&`Request body: ${yl(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class P2 extends Rt{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${tA(n)}`,`Request body: ${yl(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class cC extends Rt{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${tA(r)}`,`Request body: ${yl(e)}`],name:"TimeoutError"})}}const dB=-1;class Hn extends Rt{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof P2?e.code:r??dB}}class cs extends Hn{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class Yf extends Hn{constructor(e){super(e,{code:Yf.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Yf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Qf extends Hn{constructor(e){super(e,{code:Qf.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Qf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Zf extends Hn{constructor(e,{method:r}={}){super(e,{code:Zf.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(Zf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Xf extends Hn{constructor(e){super(e,{code:Xf.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Xf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Zh extends Hn{constructor(e){super(e,{code:Zh.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Zh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ep extends Hn{constructor(e){super(e,{code:ep.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class tp extends Hn{constructor(e){super(e,{code:tp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class rp extends Hn{constructor(e){super(e,{code:rp.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(rp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Xh extends Hn{constructor(e){super(e,{code:Xh.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Mc extends Hn{constructor(e,{method:r}={}){super(e,{code:Mc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Mc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ed extends Hn{constructor(e){super(e,{code:ed.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class np extends Hn{constructor(e){super(e,{code:np.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(np,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class bl extends cs{constructor(e){super(e,{code:bl.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(bl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class sp extends cs{constructor(e){super(e,{code:sp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class ip extends cs{constructor(e,{method:r}={}){super(e,{code:ip.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class op extends cs{constructor(e){super(e,{code:op.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(op,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ap extends cs{constructor(e){super(e,{code:ap.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ap,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class cp extends cs{constructor(e){super(e,{code:cp.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(cp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class lp extends cs{constructor(e){super(e,{code:lp.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(lp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class up extends cs{constructor(e){super(e,{code:up.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(up,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class hp extends cs{constructor(e){super(e,{code:hp.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class dp extends cs{constructor(e){super(e,{code:dp.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class fp extends cs{constructor(e){super(e,{code:fp.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class pp extends cs{constructor(e){super(e,{code:pp.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(pp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class gp extends cs{constructor(e){super(e,{code:gp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class fB extends Hn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const pB="modulepreload",gB=function(t){return"/web3-demo/"+t},lC={},Jr=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(r.map(l=>{if(l=gB(l),l in lC)return;lC[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":pB,u||(d.as="script"),d.crossOrigin="",d.href=l,c&&d.setAttribute("nonce",c),document.head.appendChild(d),u)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function Ol(t,e="hex"){const r=O2(t),n=x2(new Uint8Array(r.length));return r.encode(n),e==="hex"?hc(n.bytes):n.bytes}function O2(t){return Array.isArray(t)?mB(t.map(e=>O2(e))):wB(t)}function mB(t){const e=t.reduce((s,i)=>s+i.length,0),r=R2(e);return{length:e<=55?1+e:1+r+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+r),r===1?s.pushUint8(e):r===2?s.pushUint16(e):r===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function wB(t){const e=typeof t=="string"?Nl(t):t,r=R2(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+r),r===1?s.pushUint8(e.length):r===2?s.pushUint16(e.length):r===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function R2(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Rt("Length is too large.")}class rA extends Rt{constructor({cause:e,message:r}={}){var s;const n=(s=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(rA,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(rA,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ny extends Rt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${Vb(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(ny,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class D2 extends Rt{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${Vb(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${Vb(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(D2,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});function nA(t,e){return({exclude:r,format:n})=>({exclude:r,format:s=>{const i=e(s);if(r)for(const o of r)delete i[o];return{...i,...n(s)}},type:t})}const sA=2n**256n-1n,k2={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function iA(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Zm(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Zm(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?k2[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=bB(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const yB=nA("transaction",iA);function bB(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function EB(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:iA(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const vB=nA("block",EB);function U2(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(i=>Nl(i)):t.blobs,s=[];for(const i of n)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return r==="bytes"?s:s.map(i=>hc(i))}function B2(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>Nl(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Nl(o)):t.commitments,i=[];for(let o=0;o<n.length;o++){const a=n[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return r==="bytes"?i:i.map(o=>hc(o))}function AB(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function CB(t,e,r){return t&e^~t&r}function _B(t,e,r){return t&e^t&r^e&r}class IB extends y2{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=i0(this.buffer)}update(e){ew(this),e=Xv(e),xl(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=i0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ew(this),w2(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Jf(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;AB(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=i0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const ta=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SB=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ra=new Uint32Array(64);let NB=class extends IB{constructor(e=32){super(64,e,8,!1),this.A=ta[0]|0,this.B=ta[1]|0,this.C=ta[2]|0,this.D=ta[3]|0,this.E=ta[4]|0,this.F=ta[5]|0,this.G=ta[6]|0,this.H=ta[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)ra[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=ra[h-15],f=ra[h-2],g=di(d,7)^di(d,18)^d>>>3,p=di(f,17)^di(f,19)^f>>>10;ra[h]=p+ra[h-7]+g+ra[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=di(a,6)^di(a,11)^di(a,25),f=u+d+CB(a,c,l)+SB[h]+ra[h]|0,p=(di(n,2)^di(n,13)^di(n,22))+_B(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Jf(ra)}destroy(){this.set(0,0,0,0,0,0,0,0),Jf(this.buffer)}};const xB=b2(()=>new NB),TB=xB;function PB(t,e){return TB(hg(t,{strict:!1})?g2(t):t)}function OB(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),s=PB(e);return s.set([r],0),n==="bytes"?s:hc(s)}function RB(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(OB({commitment:i,to:n,version:r}));return s}const uC=6,L2=32,oA=4096,$2=L2*oA,hC=$2*uC-1-1*oA*uC,M2=1;class DB extends Rt{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class F2 extends Rt{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class kB extends Rt{constructor({hash:e,size:r}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}}class UB extends Rt{constructor({hash:e,version:r}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${M2}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}}function BB(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?Nl(t.data):t.data,n=ec(r);if(!n)throw new F2;if(n>hC)throw new DB({maxSize:hC,size:n});const s=[];let i=!0,o=0;for(;i;){const a=x2(new Uint8Array($2));let c=0;for(;c<oA;){const l=r.slice(o,o+(L2-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>hc(a.bytes))}function LB(t){const{data:e,kzg:r,to:n}=t,s=t.blobs??BB({data:e,to:n}),i=t.commitments??U2({blobs:s,kzg:r,to:n}),o=t.proofs??B2({blobs:s,commitments:i,kzg:r,to:n}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function $B(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new uB({transaction:t})}function MB(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}class sy extends Rt{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function FB(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const c0=new Map;function jB({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const u=c();o();const h=u.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{s&&Array.isArray(d)&&d.sort(s);for(let f=0;f<u.length;f++){const{resolve:g}=u[f];g==null||g([d[f],d])}}).catch(d=>{for(let f=0;f<u.length;f++){const{reject:g}=u[f];g==null||g(d)}})},o=()=>c0.delete(e),a=()=>c().map(({args:u})=>u),c=()=>c0.get(e)||[],l=u=>c0.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:f}=FB();return(r==null?void 0:r([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:d,reject:f}),h):(l({args:u,resolve:d,reject:f}),setTimeout(i,n),h)}}}async function j2(t){return new Promise(e=>setTimeout(e,t))}function HB(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await j2(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<r&&await n({count:a,error:l}))return c({error:l});i(l)}};o()})}const zB={"0x0":"reverted","0x1":"success"};function qB(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>MB(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Zm(t.transactionIndex):null,status:t.status?zB[t.status]:null,type:t.type?k2[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const VB=nA("transactionReceipt",qB),Wb=256;let Mg=Wb,Fg;function WB(t=11){if(!Fg||Mg+t>Wb*2){Fg="",Mg=0;for(let e=0;e<Wb;e++)Fg+=(256+Math.random()*256|0).toString(16).substring(1)}return Fg.substring(Mg,Mg+++t)}const jg=new eA(8192);function GB(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(jg.get(r))return jg.get(r);const n=t().finally(()=>jg.delete(r));return jg.set(r,n),n}function KB(t,e={}){return async(r,n={})=>{var h;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=r;if((h=i==null?void 0:i.exclude)!=null&&h.includes(l))throw new Mc(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Mc(new Error("method not supported"),{method:l});const u=s?p2(`${c}.${yl(r)}`):void 0;return GB(()=>HB(async()=>{try{return await t(r)}catch(d){const f=d;switch(f.code){case Yf.code:throw new Yf(f);case Qf.code:throw new Qf(f);case Zf.code:throw new Zf(f,{method:r.method});case Xf.code:throw new Xf(f);case Zh.code:throw new Zh(f);case ep.code:throw new ep(f);case tp.code:throw new tp(f);case rp.code:throw new rp(f);case Xh.code:throw new Xh(f);case Mc.code:throw new Mc(f,{method:r.method});case ed.code:throw new ed(f);case np.code:throw new np(f);case bl.code:throw new bl(f);case sp.code:throw new sp(f);case ip.code:throw new ip(f);case op.code:throw new op(f);case ap.code:throw new ap(f);case cp.code:throw new cp(f);case lp.code:throw new lp(f);case up.code:throw new up(f);case hp.code:throw new hp(f);case dp.code:throw new dp(f);case fp.code:throw new fp(f);case pp.code:throw new pp(f);case gp.code:throw new gp(f);case 5e3:throw new bl(f);default:throw d instanceof Rt?d:new fB(f)}}},{delay:({count:d,error:f})=>{var g;if(f&&f instanceof Cf){const p=(g=f==null?void 0:f.headers)==null?void 0:g.get("Retry-After");if(p!=null&&p.match(/\d/))return Number.parseInt(p)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>JB(d)}),{enabled:s,id:u})}}function JB(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===ed.code||t.code===Zh.code:t instanceof Cf&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function H2({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=WB();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:KB(n,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function dC(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=YB,retryCount:o,retryDelay:a}=e;return(({chain:c,pollingInterval:l=4e3,timeout:u,...h})=>{let d=t,f=()=>{};const g=H2({key:r,name:n,async request({method:p,params:m}){let w;const E=async(b=0)=>{const C=d[b]({...h,chain:c,retryCount:0,timeout:u});try{const I=await C.request({method:p,params:m});return f({method:p,params:m,response:I,transport:C,status:"success"}),I}catch(I){if(f({error:I,method:p,params:m,transport:C,status:"error"}),i(I)||b===d.length-1||(w??(w=d.slice(b+1).some(_=>{const{include:O,exclude:T}=_({chain:c}).config.methods||{};return O?O.includes(p):T?!T.includes(p):!0})),!w))throw I;return E(b+1)}};return E()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:p=>f=p,transports:d.map(p=>p({chain:c,retryCount:0}))});if(s){const p=typeof s=="object"?s:{};QB({chain:c,interval:p.interval??l,onTransports:m=>d=m,ping:p.ping,sampleCount:p.sampleCount,timeout:p.timeout,transports:d,weights:p.weights})}return g})}function YB(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Xh.code||t.code===bl.code||rA.nodeMessage.test(t.message)||t.code===5e3))}function QB({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const d=await Promise.all(o.map(async p=>{const m=p({chain:t,retryCount:0,timeout:i}),w=Date.now();let E,b;try{await(n?n({transport:m}):m.request({method:"net_listening"})),b=1}catch{b=0}finally{E=Date.now()}return{latency:E-w,success:b}}));u.push(d),u.length>s&&u.shift();const f=Math.max(...u.map(p=>Math.max(...p.map(({latency:m})=>m)))),g=o.map((p,m)=>{const w=u.map(_=>_[m].latency),b=1-w.reduce((_,O)=>_+O,0)/w.length/f,C=u.map(_=>_[m].success),I=C.reduce((_,O)=>_+O,0)/C.length;return I===0?[0,m]:[l*b+c*I,m]}).sort((p,m)=>m[0]-p[0]);r(g.map(([,p])=>o[p])),await j2(e),h()};h()}class ZB extends Rt{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function XB(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function e5(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const fC=e5();function t5(t,e={}){return{async request(r){var h;const{body:n,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const d=await XB(async({signal:g})=>{const p={...a,body:Array.isArray(n)?yl(n.map(b=>({jsonrpc:"2.0",id:b.id??fC.take(),...b}))):yl({jsonrpc:"2.0",id:n.id??fC.take(),...n}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?g:null)},m=new Request(t,p),w=await(s==null?void 0:s(m,p))??{...p,url:t};return await fetch(w.url??t,w)},{errorInstance:new cC({body:n,url:t}),timeout:o,signal:!0});i&&await i(d);let f;if((h=d.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))f=await d.json();else{f=await d.text();try{f=JSON.parse(f||"{}")}catch(g){if(d.ok)throw g;f={error:f}}}if(!d.ok)throw new Cf({body:n,details:yl(f.error)||d.statusText,headers:d.headers,status:d.status,url:t});return f}catch(d){throw d instanceof Cf||d instanceof cC?d:new Cf({body:n,cause:d,url:t})}}}}function Hg(t,e={}){const{batch:r,fetchOptions:n,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:h,retryCount:d,timeout:f})=>{const{batchSize:g=1e3,wait:p=0}=typeof r=="object"?r:{},m=e.retryCount??d,w=f??e.timeout??1e4,E=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!E)throw new ZB;const b=t5(E,{fetchOptions:n,onRequest:a,onResponse:c,timeout:w});return H2({key:s,methods:i,name:o,async request({method:C,params:I}){const _={method:C,params:I},{schedule:O}=jB({id:E,wait:p,shouldSplitBatch(U){return U.length>g},fn:U=>b.request({body:U}),sort:(U,$)=>U.id-$.id}),T=async U=>r?O(U):[await b.request({body:U})],[{error:N,result:k}]=await T(_);if(u)return{error:N,result:k};if(N)throw new P2({body:_,error:N,url:E});return k},retryCount:m,retryDelay:l,timeout:w,type:"http"},{fetchOptions:n,url:E})}}function iy(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function r5(t){const{authorizationList:e}=t;if(e)for(const r of e){const{chainId:n}=r,s=r.address;if(!Pl(s))throw new Tl({address:s});if(n<0)throw new sy({chainId:n})}aA(t)}function n5(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new F2;for(const r of e){const n=ec(r),s=Zm(tB(r,0,1));if(n!==32)throw new kB({hash:r,size:n});if(s!==M2)throw new UB({hash:r,version:s})}}aA(t)}function aA(t){const{chainId:e,maxPriorityFeePerGas:r,maxFeePerGas:n,to:s}=t;if(e<=0)throw new sy({chainId:e});if(s&&!Pl(s))throw new Tl({address:s});if(n&&n>sA)throw new ny({maxFeePerGas:n});if(r&&n&&r>n)throw new D2({maxFeePerGas:n,maxPriorityFeePerGas:r})}function s5(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i}=t;if(e<=0)throw new sy({chainId:e});if(i&&!Pl(i))throw new Tl({address:i});if(r||s)throw new Rt("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>sA)throw new ny({maxFeePerGas:n})}function i5(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i}=t;if(i&&!Pl(i))throw new Tl({address:i});if(typeof e<"u"&&e<=0)throw new sy({chainId:e});if(r||s)throw new Rt("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>sA)throw new ny({maxFeePerGas:n})}function oy(t){if(!t||t.length===0)return[];const e=[];for(let r=0;r<t.length;r++){const{address:n,storageKeys:s}=t[r];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new hB({storageKey:s[i]});if(!Pl(n,{strict:!1}))throw new Tl({address:n});e.push([n,s])}return e}function o5(t,e){const r=$B(t);return r==="eip1559"?l5(t,e):r==="eip2930"?u5(t,e):r==="eip4844"?c5(t,e):r==="eip7702"?a5(t,e):h5(t,e)}function a5(t,e){const{authorizationList:r,chainId:n,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=t;r5(t);const d=oy(u),f=d5(r);return wd(["0x04",Ol([at(n),i?at(i):"0x",l?at(l):"0x",c?at(c):"0x",s?at(s):"0x",o??"0x",a?at(a):"0x",h??"0x",d,f,...dg(t,e)])])}function c5(t,e){const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=t;n5(t);let d=t.blobVersionedHashes,f=t.sidecars;if(t.blobs&&(typeof d>"u"||typeof f>"u")){const b=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(_=>hc(_)),C=t.kzg,I=U2({blobs:b,kzg:C});if(typeof d>"u"&&(d=RB({commitments:I})),typeof f>"u"){const _=B2({blobs:b,commitments:I,kzg:C});f=LB({blobs:b,commitments:I,proofs:_})}}const g=oy(u),p=[at(r),s?at(s):"0x",l?at(l):"0x",c?at(c):"0x",n?at(n):"0x",i??"0x",o?at(o):"0x",h??"0x",g,a?at(a):"0x",d??[],...dg(t,e)],m=[],w=[],E=[];if(f)for(let b=0;b<f.length;b++){const{blob:C,commitment:I,proof:_}=f[b];m.push(C),w.push(I),E.push(_)}return wd(["0x03",Ol(f?[p,m,w,E]:p)])}function l5(t,e){const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;aA(t);const h=oy(l),d=[at(r),s?at(s):"0x",c?at(c):"0x",a?at(a):"0x",n?at(n):"0x",i??"0x",o?at(o):"0x",u??"0x",h,...dg(t,e)];return wd(["0x02",Ol(d)])}function u5(t,e){const{chainId:r,gas:n,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:l}=t;s5(t);const u=oy(c),h=[at(r),i?at(i):"0x",l?at(l):"0x",n?at(n):"0x",o??"0x",a?at(a):"0x",s??"0x",u,...dg(t,e)];return wd(["0x01",Ol(h)])}function h5(t,e){const{chainId:r=0,gas:n,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;i5(t);let l=[i?at(i):"0x",c?at(c):"0x",n?at(n):"0x",o??"0x",a?at(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+e.v-27n);const f=27n+(e.v===27n?0n:1n);if(e.v!==f)throw new lB({v:e.v});return f})(),h=Qm(e.r),d=Qm(e.s);l=[...l,at(u),h==="0x00"?"0x":h,d==="0x00"?"0x":d]}else r>0&&(l=[...l,at(r),"0x","0x"]);return Ol(l)}function dg(t,e){const r=e??t,{v:n,yParity:s}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof n>"u"&&typeof s>"u")return[];const i=Qm(r.r),o=Qm(r.s);return[typeof s=="number"?s?at(1):"0x":n===0n?"0x":n===1n?at(1):n===27n?"0x":at(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function d5(t){if(!t||t.length===0)return[];const e=[];for(const r of t){const{chainId:n,nonce:s,...i}=r,o=r.address;e.push([n?Ga(n):"0x",o,s?Ga(s):"0x",...dg({},i)])}return e}const l0={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return T2(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},cA={async getMyTokensWithBalance(t){const e=xe.state.address,r=x.state.activeCaipNetwork,n=ue.getConnectorId("eip155")===q.CONNECTOR_ID.AUTH;if(!e||!r)return[];const s=`${r.caipNetworkId}:${e}`,i=X.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(r.chainNamespace===q.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await Le.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var r,n;try{const s=l0.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await fe.getCapabilities(t);if(!((n=(r=i==null?void 0:i[s])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await fe.walletGetAssets({account:t,chainFilter:[s]});if(!l0.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>l0.createBalance(l,e.caipNetworkId));return X.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},fi=zt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),f5={state:fi,replaceState(t){t&&Object.assign(fi,Il(t))},subscribe(t){return x.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return x.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){x.setAccountProp("status",t,e)},getCaipAddress(t){var e,r;if(t)return(r=(e=x.state.chains.get(t))==null?void 0:e.accountState)==null?void 0:r.caipAddress},setCaipAddress(t,e){const r=t?_e.getPlainAddress(t):void 0;e===x.state.activeChain&&(x.state.activeCaipAddress=t),x.setAccountProp("caipAddress",t,e),x.setAccountProp("address",r,e)},setBalance(t,e,r){x.setAccountProp("balance",t,r),x.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){x.setAccountProp("profileName",t,e)},setProfileImage(t,e){x.setAccountProp("profileImage",t,e)},setUser(t,e){x.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){x.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){x.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){x.setAccountProp("currentTab",t,x.state.activeChain)},setTokenBalance(t,e){t&&x.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){x.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,r){var s,i;if(!r)return;const n=((i=(s=x.state.chains.get(r))==null?void 0:s.accountState)==null?void 0:i.addressLabels)||new Map;n.set(t,e),x.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){var n,s;if(!e)return;const r=((s=(n=x.state.chains.get(e))==null?void 0:n.accountState)==null?void 0:s.addressLabels)||new Map;r.delete(t),x.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){x.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){x.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&x.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){x.setAccountProp("socialWindow",t?Il(t):void 0,e)},setFarcasterUrl(t,e){x.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;fi.balanceLoading=!0;const e=(i=x.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=x.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=x.state.activeCaipAddress,s=n?_e.getPlainAddress(n):void 0;if(fi.lastRetry&&!_e.isAllowedRetry(fi.lastRetry,30*Ct.ONE_SEC_MS))return fi.balanceLoading=!1,[];try{if(s&&e&&r){const a=await cA.getMyTokensWithBalance();return xe.setTokenBalance(a,r),fi.lastRetry=void 0,fi.balanceLoading=!1,a}}catch(a){fi.lastRetry=Date.now(),t==null||t(a),ji.showError("Token Balance Unavailable")}finally{fi.balanceLoading=!1}return[]},resetAccount(t){x.resetAccount(t)}},xe=as(f5),p5={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=x.state.activeCaipNetwork,n=je.state.data;if(t.id===(r==null?void 0:r.id))return;const i=xe.getCaipAddress(x.state.activeChain),o=t.chainNamespace!==x.state.activeChain,a=xe.getCaipAddress(t.chainNamespace),l=ue.getConnectorId(x.state.activeChain)===q.CONNECTOR_ID.AUTH,u=q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(h=>h===t.chainNamespace);e||l&&u?je.push("SwitchNetwork",{...n,network:t}):i&&o&&!a?je.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):je.push("SwitchNetwork",{...n,network:t})}},An=zt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),g5={state:An,subscribe(t){return Br(An,()=>t(An))},subscribeKey(t,e){return rn(An,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,r=x.state.activeChain,n=e&&e!==r,s=(i=x.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(fe.state.wcBasic?ke.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ke.prefetch(),ue.setFilterByNamespace(t==null?void 0:t.namespace),ht.setLoading(!0,e),e&&n){const a=((o=x.getNetworkData(e))==null?void 0:o.caipNetwork)||x.getRequestedCaipNetworks(e)[0];a&&p5.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=x.state.noAdapters;J.state.manualWCControl||a&&!s?_e.isMobile()?je.reset("AllWallets"):je.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?je.reset(t.view,t.data):s?je.reset("Account"):je.reset("Connect")}An.open=!0,Ys.set({open:!0}),Pt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=J.state.enableEmbedded,e=!!x.state.activeCaipAddress;An.open&&Pt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),An.open=!1,je.reset("Connect"),ht.clearLoading(),t?e?je.replace("Account"):je.push("Connect"):Ys.set({open:!1}),fe.resetUri()},setLoading(t,e){e&&An.loadingNamespaceMap.set(e,t),An.loading=t,Ys.set({loading:t})},clearLoading(){An.loadingNamespaceMap.clear(),An.loading=!1,Ys.set({loading:!1})},shake(){An.shake||(An.shake=!0,setTimeout(()=>{An.shake=!1},500))}},ht=as(g5),_f={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Gb={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},m5={providers:i2,selectedProvider:null,error:null,purchaseCurrency:_f,paymentCurrency:Gb,purchaseCurrencies:[_f],paymentCurrencies:[],quotesLoading:!1},dt=zt(m5),w5={state:dt,subscribe(t){return Br(dt,()=>t(dt))},subscribeKey(t,e){return rn(dt,t,e)},setSelectedProvider(t){var e,r;if(t&&t.name==="meld"){const n=x.state.activeChain,s=n===q.CHAIN.SOLANA?"SOL":"USDC",i=n?((r=(e=x.state.chains.get(n))==null?void 0:e.accountState)==null?void 0:r.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",MU),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",J.state.projectId),dt.selectedProvider={...t,url:o.toString()}}else dt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=i2.filter(n=>e.includes(n.name));dt.providers=r}else dt.providers=[]},setPurchaseCurrency(t){dt.purchaseCurrency=t},setPaymentCurrency(t){dt.paymentCurrency=t},setPurchaseAmount(t){Kb.state.purchaseAmount=t},setPaymentAmount(t){Kb.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Le.getOnrampOptions();dt.purchaseCurrencies=t.purchaseCurrencies,dt.paymentCurrencies=t.paymentCurrencies,dt.paymentCurrency=t.paymentCurrencies[0]||Gb,dt.purchaseCurrency=t.purchaseCurrencies[0]||_f,await ke.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ke.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;dt.quotesLoading=!0;try{const r=await Le.getOnrampQuote({purchaseCurrency:dt.purchaseCurrency,paymentCurrency:dt.paymentCurrency,amount:((t=dt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=dt.purchaseCurrency)==null?void 0:e.symbol});return dt.quotesLoading=!1,dt.purchaseAmount=Number(r==null?void 0:r.purchaseAmount.amount),r}catch(r){return dt.error=r.message,dt.quotesLoading=!1,null}finally{dt.quotesLoading=!1}},resetState(){dt.selectedProvider=null,dt.error=null,dt.purchaseCurrency=_f,dt.paymentCurrency=Gb,dt.purchaseCurrencies=[_f],dt.paymentCurrencies=[],dt.paymentAmount=void 0,dt.purchaseAmount=void 0,dt.quotesLoading=!1}},Kb=as(w5),pC=2147483648,y5={convertEVMChainIdToCoinType(t){if(t>=pC)throw new Error("Invalid chainId");return(pC|t)>>>0}},ls=zt({suggestions:[],loading:!1}),b5={state:ls,subscribe(t){return Br(ls,()=>t(ls))},subscribeKey(t,e){return rn(ls,t,e)},async resolveName(t){var e,r;try{return await Le.lookupEnsName(t)}catch(n){const s=n;throw new Error(((r=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Le.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ls.loading=!0,ls.suggestions=[];const e=await Le.getEnsNameSuggestions(t);return ls.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],ls.suggestions}catch(e){const r=If.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{ls.loading=!1}},async getNamesForAddress(t){try{if(!x.state.activeCaipNetwork)return[];const r=X.getEnsFromCacheForAddress(t);if(r)return r;const n=await Le.reverseLookupEnsName({address:t});return X.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=If.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=x.state.activeCaipNetwork,r=xe.state.address,n=ue.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");ls.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});je.pushTransactionStack({onCancel(){je.replace("RegisterAccountName")}});const i=await fe.signMessage(s);ls.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=y5.convertEVMChainIdToCoinType(Number(o));await Le.registerEnsName({coinType:a,address:r,signature:i,message:s}),xe.setProfileName(t,e.chainNamespace),je.replace("RegisterAccountNameSuccess")}catch(s){const i=If.parseEnsApiError(s,`Error registering name ${t}`);throw je.replace("RegisterAccountName"),new Error(i)}finally{ls.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,s;const r=t;return((s=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:s.description)||e}},If=as(b5);var zg={exports:{}},gC;function E5(){if(gC)return zg.exports;gC=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(I,_,O){return Function.prototype.apply.call(I,_,O)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:r=function(I){return Object.getOwnPropertyNames(I)};function n(C){console&&console.warn&&console.warn(C)}var s=Number.isNaN||function(I){return I!==I};function i(){i.init.call(this)}zg.exports=i,zg.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||s(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||s(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function c(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(I){for(var _=[],O=1;O<arguments.length;O++)_.push(arguments[O]);var T=I==="error",N=this._events;if(N!==void 0)T=T&&N.error===void 0;else if(!T)return!1;if(T){var k;if(_.length>0&&(k=_[0]),k instanceof Error)throw k;var U=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw U.context=k,U}var $=N[I];if($===void 0)return!1;if(typeof $=="function")e($,this,_);else for(var V=$.length,z=g($,V),O=0;O<V;++O)e(z[O],this,_);return!0};function l(C,I,_,O){var T,N,k;if(a(_),N=C._events,N===void 0?(N=C._events=Object.create(null),C._eventsCount=0):(N.newListener!==void 0&&(C.emit("newListener",I,_.listener?_.listener:_),N=C._events),k=N[I]),k===void 0)k=N[I]=_,++C._eventsCount;else if(typeof k=="function"?k=N[I]=O?[_,k]:[k,_]:O?k.unshift(_):k.push(_),T=c(C),T>0&&k.length>T&&!k.warned){k.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=C,U.type=I,U.count=k.length,n(U)}return C}i.prototype.addListener=function(I,_){return l(this,I,_,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(I,_){return l(this,I,_,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,I,_){var O={fired:!1,wrapFn:void 0,target:C,type:I,listener:_},T=u.bind(O);return T.listener=_,O.wrapFn=T,T}i.prototype.once=function(I,_){return a(_),this.on(I,h(this,I,_)),this},i.prototype.prependOnceListener=function(I,_){return a(_),this.prependListener(I,h(this,I,_)),this},i.prototype.removeListener=function(I,_){var O,T,N,k,U;if(a(_),T=this._events,T===void 0)return this;if(O=T[I],O===void 0)return this;if(O===_||O.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete T[I],T.removeListener&&this.emit("removeListener",I,O.listener||_));else if(typeof O!="function"){for(N=-1,k=O.length-1;k>=0;k--)if(O[k]===_||O[k].listener===_){U=O[k].listener,N=k;break}if(N<0)return this;N===0?O.shift():p(O,N),O.length===1&&(T[I]=O[0]),T.removeListener!==void 0&&this.emit("removeListener",I,U||_)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(I){var _,O,T;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[I]),this;if(arguments.length===0){var N=Object.keys(O),k;for(T=0;T<N.length;++T)k=N[T],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=O[I],typeof _=="function")this.removeListener(I,_);else if(_!==void 0)for(T=_.length-1;T>=0;T--)this.removeListener(I,_[T]);return this};function d(C,I,_){var O=C._events;if(O===void 0)return[];var T=O[I];return T===void 0?[]:typeof T=="function"?_?[T.listener||T]:[T]:_?m(T):g(T,T.length)}i.prototype.listeners=function(I){return d(this,I,!0)},i.prototype.rawListeners=function(I){return d(this,I,!1)},i.listenerCount=function(C,I){return typeof C.listenerCount=="function"?C.listenerCount(I):f.call(C,I)},i.prototype.listenerCount=f;function f(C){var I=this._events;if(I!==void 0){var _=I[C];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function g(C,I){for(var _=new Array(I),O=0;O<I;++O)_[O]=C[O];return _}function p(C,I){for(;I+1<C.length;I++)C[I]=C[I+1];C.pop()}function m(C){for(var I=new Array(C.length),_=0;_<I.length;++_)I[_]=C[_].listener||C[_];return I}function w(C,I){return new Promise(function(_,O){function T(k){C.removeListener(I,N),O(k)}function N(){typeof C.removeListener=="function"&&C.removeListener("error",T),_([].slice.call(arguments))}b(C,I,N,{once:!0}),I!=="error"&&E(C,T,{once:!0})})}function E(C,I,_){typeof C.on=="function"&&b(C,"error",I,_)}function b(C,I,_,O){if(typeof C.on=="function")O.once?C.once(I,_):C.on(I,_);else if(typeof C.addEventListener=="function")C.addEventListener(I,function T(N){O.once&&C.removeEventListener(I,T),_(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return zg.exports}var xs=E5();const lA=Zv(xs);var u0={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jb=function(t,e){return Jb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Jb(t,e)};function v5(t,e){Jb(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yb=function(){return Yb=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yb.apply(this,arguments)};function A5(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function C5(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function _5(t,e){return function(r,n){e(r,n,t)}}function I5(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function S5(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function N5(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],s=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function x5(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function T5(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Qb(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function z2(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function P5(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(z2(arguments[e]));return t}function O5(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function mp(t){return this instanceof mp?(this.v=t,this):new mp(t)}function R5(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(g,p){i.push([d,f,g,p])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(g){h(i[0][3],g)}}function c(d){d.value instanceof mp?Promise.resolve(d.value.v).then(l,u):h(i[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function D5(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:mp(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function k5(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Qb=="function"?Qb(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function U5(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function B5(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function L5(t){return t&&t.__esModule?t:{default:t}}function $5(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function M5(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const F5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Yb},__asyncDelegator:D5,__asyncGenerator:R5,__asyncValues:k5,__await:mp,__awaiter:S5,__classPrivateFieldGet:$5,__classPrivateFieldSet:M5,__createBinding:x5,__decorate:C5,__exportStar:T5,__extends:v5,__generator:N5,__importDefault:L5,__importStar:B5,__makeTemplateObject:U5,__metadata:I5,__param:_5,__read:z2,__rest:A5,__spread:P5,__spreadArrays:O5,__values:Qb},Symbol.toStringTag,{value:"Module"})),fg=IU(F5);var h0={},$d={},mC;function j5(){if(mC)return $d;mC=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return $d.delay=t,$d}var wc={},d0={},yc={},wC;function H5(){return wC||(wC=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.ONE_THOUSAND=yc.ONE_HUNDRED=void 0,yc.ONE_HUNDRED=100,yc.ONE_THOUSAND=1e3),yc}var f0={},yC;function z5(){return yC||(yC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(f0)),f0}var bC;function q2(){return bC||(bC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fg;e.__exportStar(H5(),t),e.__exportStar(z5(),t)})(d0)),d0}var EC;function q5(){if(EC)return wc;EC=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.fromMiliseconds=wc.toMiliseconds=void 0;const t=q2();function e(n){return n*t.ONE_THOUSAND}wc.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return wc.fromMiliseconds=r,wc}var vC;function V5(){return vC||(vC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fg;e.__exportStar(j5(),t),e.__exportStar(q5(),t)})(h0)),h0}var iu={},AC;function W5(){if(AC)return iu;AC=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return iu.Watch=t,iu.default=t,iu}var p0={},Md={},CC;function G5(){if(CC)return Md;CC=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.IWatch=void 0;class t{}return Md.IWatch=t,Md}var _C;function K5(){return _C||(_C=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),fg.__exportStar(G5(),t)})(p0)),p0}var IC;function J5(){return IC||(IC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fg;e.__exportStar(V5(),t),e.__exportStar(W5(),t),e.__exportStar(K5(),t),e.__exportStar(q2(),t)})(u0)),u0}var de=J5();class Jl{}let Y5=class extends Jl{constructor(e){super()}};const SC=de.FIVE_SECONDS,Yl={pulse:"heartbeat_pulse"};let Q5=class V2 extends Y5{constructor(e){super(e),this.events=new xs.EventEmitter,this.interval=SC,this.interval=(e==null?void 0:e.interval)||SC}static async init(e){const r=new V2(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),de.toMiliseconds(this.interval))}pulse(){this.events.emit(Yl.pulse)}};const Z5=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,X5=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,eL=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function tL(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){rL(t);return}return e}function rL(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function qg(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!eL.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Z5.test(t)||X5.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,tL)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function nL(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function br(t,...e){try{return nL(t(...e))}catch(r){return Promise.reject(r)}}function sL(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function iL(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Cm(t){if(sL(t))return String(t);if(iL(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Cm(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Zb="base64:";function oL(t){return typeof t=="string"?t:Zb+lL(t)}function aL(t){return typeof t!="string"||!t.startsWith(Zb)?t:cL(t.slice(Zb.length))}function cL(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function lL(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Nn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function uL(...t){return Nn(t.join(":"))}function Vg(t){return t=Nn(t),t?t+":":""}function hL(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function dL(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const fL="memory",pL=()=>{const t=new Map;return{name:fL,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function gL(t={}){const e={mounts:{"":t.driver||pL()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),s=(l,u)=>{if(e.watching){u=Nn(u);for(const h of e.watchListeners)h(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await NC(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,f=g=>{let p=d.get(g.base);return p||(p={driver:g.driver,base:g.base,items:[]},d.set(g.base,p)),p};for(const g of l){const p=typeof g=="string",m=Nn(p?g:g.key),w=p?void 0:g.value,E=p||!g.options?u:{...u,...g.options},b=r(m);f(b).items.push({key:m,value:w,relativeKey:b.relativeKey,options:E})}return Promise.all([...d.values()].map(g=>h(g))).then(g=>g.flat())},c={hasItem(l,u={}){l=Nn(l);const{relativeKey:h,driver:d}=r(l);return br(d.hasItem,h,u)},getItem(l,u={}){l=Nn(l);const{relativeKey:h,driver:d}=r(l);return br(d.getItem,h,u).then(f=>qg(f))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?br(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(f=>({key:uL(h.base,f.key),value:qg(f.value)}))):Promise.all(h.items.map(d=>br(h.driver.getItem,d.relativeKey,d.options).then(f=>({key:d.key,value:qg(f)})))))},getItemRaw(l,u={}){l=Nn(l);const{relativeKey:h,driver:d}=r(l);return d.getItemRaw?br(d.getItemRaw,h,u):br(d.getItem,h,u).then(f=>aL(f))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=Nn(l);const{relativeKey:d,driver:f}=r(l);f.setItem&&(await br(f.setItem,d,Cm(u),h),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return br(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:Cm(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>br(h.driver.setItem,d.relativeKey,Cm(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=Nn(l);const{relativeKey:d,driver:f}=r(l);if(f.setItemRaw)await br(f.setItemRaw,d,u,h);else if(f.setItem)await br(f.setItem,d,oL(u),h);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Nn(l);const{relativeKey:h,driver:d}=r(l);d.removeItem&&(await br(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await br(d.removeItem,h+"$",u),d.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Nn(l);const{relativeKey:h,driver:d}=r(l),f=Object.create(null);if(d.getMeta&&Object.assign(f,await br(d.getMeta,h,u)),!u.nativeOnly){const g=await br(d.getItem,h+"$",u).then(p=>qg(p));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(f,g))}return f},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=Vg(l);const h=n(l,!0);let d=[];const f=[];let g=!0;for(const w of h){(m=w.driver.flags)!=null&&m.maxDepth||(g=!1);const E=await br(w.driver.getKeys,w.relativeBase,u);for(const b of E){const C=w.mountpoint+Nn(b);d.some(I=>C.startsWith(I))||f.push(C)}d=[w.mountpoint,...d.filter(b=>!b.startsWith(w.mountpoint))]}const p=u.maxDepth!==void 0&&!g;return f.filter(w=>(!p||hL(w,u.maxDepth))&&dL(w,l))},async clear(l,u={}){l=Vg(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return br(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(f=>h.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>xC(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Vg(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(NC(u,s,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){var h,d;l=Vg(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(h=e.unwatch)[l])==null||d.call(h),delete e.unwatch[l]),u&&await xC(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Nn(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Nn(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function NC(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function xC(t){typeof t.dispose=="function"&&await br(t.dispose)}function Ql(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function W2(t,e){let r;const n=()=>{if(r)return r;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),r=Ql(s),r.then(i=>{i.onclose=()=>r=void 0},()=>{}),r};return(s,i)=>n().then(o=>i(o.transaction(e,s).objectStore(e)))}let g0;function pg(){return g0||(g0=W2("keyval-store","keyval")),g0}function TC(t,e=pg()){return e("readonly",r=>Ql(r.get(t)))}function mL(t,e,r=pg()){return r("readwrite",n=>(n.put(e,t),Ql(n.transaction)))}function wL(t,e=pg()){return e("readwrite",r=>(r.delete(t),Ql(r.transaction)))}function yL(t=pg()){return t("readwrite",e=>(e.clear(),Ql(e.transaction)))}function bL(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ql(t.transaction)}function EL(t=pg()){return t("readonly",e=>{if(e.getAllKeys)return Ql(e.getAllKeys());const r=[];return bL(e,n=>r.push(n.key)).then(()=>r)})}const vL=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),AL=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Rl(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return AL(t)}catch{return t}}function qo(t){return typeof t=="string"?t:vL(t)||""}const CL="idb-keyval";var _L=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=W2(t.dbName,t.storeName)),{name:CL,options:t,async hasItem(s){return!(typeof await TC(r(s),n)>"u")},async getItem(s){return await TC(r(s),n)??null},setItem(s,i){return mL(r(s),i,n)},removeItem(s){return wL(r(s),n)},getKeys(){return EL(n)},clear(){return yL(n)}}};const IL="WALLET_CONNECT_V2_INDEXED_DB",SL="keyvaluestorage";let NL=class{constructor(){this.indexedDb=gL({driver:_L({dbName:IL,storeName:SL})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,qo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var m0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_m={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof m0<"u"&&m0.localStorage?_m.exports=m0.localStorage:typeof window<"u"&&window.localStorage?_m.exports=window.localStorage:_m.exports=new e})();function xL(t){var e;return[t[0],Rl((e=t[1])!=null?e:"")]}let TL=class{constructor(){this.localStorage=_m.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(xL)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Rl(r)}async setItem(e,r){this.localStorage.setItem(e,qo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const PL="wc_storage_version",PC=1,OL=async(t,e,r)=>{const n=PL,s=await e.getItem(n);if(s&&s>=PC){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,PC),r(e),RL(t,o)},RL=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let DL=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new TL;this.storage=e;try{const r=new NL;OL(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var w0,OC;function kL(){if(OC)return w0;OC=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}w0=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var l=1;l<a;l++)c[l]=i(n[l]);return c.join(" ")}if(typeof r!="string")return r;var u=n.length;if(u===0)return r;for(var h="",d=1-o,f=-1,g=r&&r.length||0,p=0;p<g;){if(r.charCodeAt(p)===37&&p+1<g){switch(f=f>-1?f:0,r.charCodeAt(p+1)){case 100:case 102:if(d>=u||n[d]==null)break;f<p&&(h+=r.slice(f,p)),h+=Number(n[d]),f=p+2,p++;break;case 105:if(d>=u||n[d]==null)break;f<p&&(h+=r.slice(f,p)),h+=Math.floor(Number(n[d])),f=p+2,p++;break;case 79:case 111:case 106:if(d>=u||n[d]===void 0)break;f<p&&(h+=r.slice(f,p));var m=typeof n[d];if(m==="string"){h+="'"+n[d]+"'",f=p+2,p++;break}if(m==="function"){h+=n[d].name||"<anonymous>",f=p+2,p++;break}h+=i(n[d]),f=p+2,p++;break;case 115:if(d>=u)break;f<p&&(h+=r.slice(f,p)),h+=String(n[d]),f=p+2,p++;break;case 37:f<p&&(h+=r.slice(f,p)),h+="%",f=p+2,p++,d--;break}++d}++p}return f===-1?r:(f<g&&(h+=r.slice(f)),h)}return w0}var y0,RC;function UL(){if(RC)return y0;RC=1;const t=kL();y0=s;const e=I().console||{},r={mapHttpRequest:g,mapHttpResponse:g,wrapRequestSerializer:p,wrapResponseSerializer:p,wrapErrorSerializer:p,req:g,res:g,err:d};function n(_,O){return Array.isArray(_)?_.filter(function(N){return N!=="!stdSerializers.err"}):_===!0?Object.keys(O):!1}function s(_){_=_||{},_.browser=_.browser||{};const O=_.browser.transmit;if(O&&typeof O.send!="function")throw Error("pino: transmit option must have a send function");const T=_.browser.write||e;_.browser.write&&(_.browser.asObject=!0);const N=_.serializers||{},k=n(_.browser.serialize,N);let U=_.browser.serialize;Array.isArray(_.browser.serialize)&&_.browser.serialize.indexOf("!stdSerializers.err")>-1&&(U=!1);const $=["error","fatal","warn","info","debug","trace"];typeof T=="function"&&(T.error=T.fatal=T.warn=T.info=T.debug=T.trace=T),_.enabled===!1&&(_.level="silent");const V=_.level||"info",z=Object.create(T);z.log||(z.log=m),Object.defineProperty(z,"levelVal",{get:S}),Object.defineProperty(z,"level",{get:R,set:L});const v={transmit:O,serialize:k,asObject:_.browser.asObject,levels:$,timestamp:f(_)};z.levels=s.levels,z.level=V,z.setMaxListeners=z.getMaxListeners=z.emit=z.addListener=z.on=z.prependListener=z.once=z.prependOnceListener=z.removeListener=z.removeAllListeners=z.listeners=z.listenerCount=z.eventNames=z.write=z.flush=m,z.serializers=N,z._serialize=k,z._stdErrSerialize=U,z.child=F,O&&(z._logEvent=h());function S(){return this.level==="silent"?1/0:this.levels.values[this.level]}function R(){return this._level}function L(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,i(v,z,"error","log"),i(v,z,"fatal","error"),i(v,z,"warn","error"),i(v,z,"info","log"),i(v,z,"debug","log"),i(v,z,"trace","log")}function F(j,K){if(!j)throw new Error("missing bindings for child Pino");K=K||{},k&&j.serializers&&(K.serializers=j.serializers);const Q=K.serializers;if(k&&Q){var ce=Object.assign({},N,Q),ie=_.browser.serialize===!0?Object.keys(ce):k;delete j.serializers,c([j],ie,ce,this._stdErrSerialize)}function we(Te){this._childLevel=(Te._childLevel|0)+1,this.error=l(Te,j,"error"),this.fatal=l(Te,j,"fatal"),this.warn=l(Te,j,"warn"),this.info=l(Te,j,"info"),this.debug=l(Te,j,"debug"),this.trace=l(Te,j,"trace"),ce&&(this.serializers=ce,this._serialize=ie),O&&(this._logEvent=h([].concat(Te._logEvent.bindings,j)))}return we.prototype=this,new we(this)}return z}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:w,epochTime:E,unixTime:b,isoTime:C});function i(_,O,T,N){const k=Object.getPrototypeOf(O);O[T]=O.levelVal>O.levels.values[T]?m:k[T]?k[T]:e[T]||e[N]||m,o(_,O,T)}function o(_,O,T){!_.transmit&&O[T]===m||(O[T]=(function(N){return function(){const U=_.timestamp(),$=new Array(arguments.length),V=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var z=0;z<$.length;z++)$[z]=arguments[z];if(_.serialize&&!_.asObject&&c($,this._serialize,this.serializers,this._stdErrSerialize),_.asObject?N.call(V,a(this,T,$,U)):N.apply(V,$),_.transmit){const v=_.transmit.level||O.level,S=s.levels.values[v],R=s.levels.values[T];if(R<S)return;u(this,{ts:U,methodLevel:T,methodValue:R,transmitValue:s.levels.values[_.transmit.level||O.level],send:_.transmit.send,val:O.levelVal},$)}}})(O[T]))}function a(_,O,T,N){_._serialize&&c(T,_._serialize,_.serializers,_._stdErrSerialize);const k=T.slice();let U=k[0];const $={};N&&($.time=N),$.level=s.levels.values[O];let V=(_._childLevel|0)+1;if(V<1&&(V=1),U!==null&&typeof U=="object"){for(;V--&&typeof k[0]=="object";)Object.assign($,k.shift());U=k.length?t(k.shift(),k):void 0}else typeof U=="string"&&(U=t(k.shift(),k));return U!==void 0&&($.msg=U),$}function c(_,O,T,N){for(const k in _)if(N&&_[k]instanceof Error)_[k]=s.stdSerializers.err(_[k]);else if(typeof _[k]=="object"&&!Array.isArray(_[k]))for(const U in _[k])O&&O.indexOf(U)>-1&&U in T&&(_[k][U]=T[U](_[k][U]))}function l(_,O,T){return function(){const N=new Array(1+arguments.length);N[0]=O;for(var k=1;k<N.length;k++)N[k]=arguments[k-1];return _[T].apply(this,N)}}function u(_,O,T){const N=O.send,k=O.ts,U=O.methodLevel,$=O.methodValue,V=O.val,z=_._logEvent.bindings;c(T,_._serialize||Object.keys(_.serializers),_.serializers,_._stdErrSerialize===void 0?!0:_._stdErrSerialize),_._logEvent.ts=k,_._logEvent.messages=T.filter(function(v){return z.indexOf(v)===-1}),_._logEvent.level.label=U,_._logEvent.level.value=$,N(U,_._logEvent,V),_._logEvent=h(z)}function h(_){return{ts:0,messages:[],bindings:_||[],level:{label:"",value:0}}}function d(_){const O={type:_.constructor.name,msg:_.message,stack:_.stack};for(const T in _)O[T]===void 0&&(O[T]=_[T]);return O}function f(_){return typeof _.timestamp=="function"?_.timestamp:_.timestamp===!1?w:E}function g(){return{}}function p(_){return _}function m(){}function w(){return!1}function E(){return Date.now()}function b(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function I(){function _(O){return typeof O<"u"&&O}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return _(self)||_(window)||_(this)||{}}}return y0}var xu=UL();const gg=Zv(xu),BL={level:"info"},mg="custom_context",uA=1e3*1024;let LL=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},DC=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new LL(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},G2=class{constructor(e,r=uA){this.level=e??"error",this.levelValue=xu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new DC(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===xu.levels.values.error?console.error(e):r===xu.levels.values.warn?console.warn(e):r===xu.levels.values.debug?console.debug(e):r===xu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(qo({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new DC(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(qo({extraMetadata:e})),new Blob(r,{type:"application/json"})}},$L=class{constructor(e,r=uA){this.baseChunkLogger=new G2(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},ML=class{constructor(e,r=uA){this.baseChunkLogger=new G2(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var FL=Object.defineProperty,jL=Object.defineProperties,HL=Object.getOwnPropertyDescriptors,kC=Object.getOwnPropertySymbols,zL=Object.prototype.hasOwnProperty,qL=Object.prototype.propertyIsEnumerable,UC=(t,e,r)=>e in t?FL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tw=(t,e)=>{for(var r in e||(e={}))zL.call(e,r)&&UC(t,r,e[r]);if(kC)for(var r of kC(e))qL.call(e,r)&&UC(t,r,e[r]);return t},rw=(t,e)=>jL(t,HL(e));function yd(t){return rw(tw({},t),{level:(t==null?void 0:t.level)||BL.level})}function VL(t,e=mg){return t[e]||""}function WL(t,e,r=mg){return t[r]=e,t}function zn(t,e=mg){let r="";return typeof t.bindings>"u"?r=VL(t,e):r=t.bindings().context||"",r}function GL(t,e,r=mg){const n=zn(t,r);return n.trim()?`${n}/${e}`:e}function nn(t,e,r=mg){const n=GL(t,e,r),s=t.child({context:n});return WL(s,n,r)}function KL(t){var e,r;const n=new $L((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:gg(rw(tw({},t.opts),{level:"trace",browser:rw(tw({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function JL(t){var e;const r=new ML((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:gg(rw(tw({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function hA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?KL(t):JL(t)}var YL=Object.defineProperty,QL=(t,e,r)=>e in t?YL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,BC=(t,e,r)=>QL(t,typeof e!="symbol"?e+"":e,r);let ZL=class extends Jl{constructor(e){super(),this.opts=e,BC(this,"protocol","wc"),BC(this,"version",2)}};var XL=Object.defineProperty,e4=(t,e,r)=>e in t?XL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t4=(t,e,r)=>e4(t,e+"",r);let r4=class extends Jl{constructor(e,r){super(),this.core=e,this.logger=r,t4(this,"records",new Map)}},n4=class{constructor(e,r){this.logger=e,this.core=r}},s4=class extends Jl{constructor(e,r){super(),this.relayer=e,this.logger=r}},i4=class extends Jl{constructor(e){super()}},o4=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},a4=class extends Jl{constructor(e,r){super(),this.relayer=e,this.logger=r}},c4=class extends Jl{constructor(e,r){super(),this.core=e,this.logger=r}},l4=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},u4=class{constructor(e,r){this.projectId=e,this.logger=r}},h4=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var d4=Object.defineProperty,f4=(t,e,r)=>e in t?d4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,LC=(t,e,r)=>f4(t,typeof e!="symbol"?e+"":e,r);let p4=class{constructor(e){this.opts=e,LC(this,"protocol","wc"),LC(this,"version",2)}},g4=class{constructor(e){this.client=e}};function m4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function K2(t,...e){if(!m4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $C(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function w4(t,e){K2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const ou=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function y4(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function J2(t){return typeof t=="string"&&(t=y4(t)),K2(t),t}let b4=class{clone(){return this._cloneInto()}};function E4(t){const e=n=>t().update(J2(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Y2(t=32){if(ou&&typeof ou.getRandomValues=="function")return ou.getRandomValues(new Uint8Array(t));if(ou&&typeof ou.randomBytes=="function")return ou.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function v4(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}let A4=class extends b4{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=b0(this.buffer)}update(e){$C(this);const{view:r,buffer:n,blockLen:s}=this;e=J2(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=b0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$C(this),w4(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;v4(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=b0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const Wg=BigInt(2**32-1),Xb=BigInt(32);function Q2(t,e=!1){return e?{h:Number(t&Wg),l:Number(t>>Xb&Wg)}:{h:Number(t>>Xb&Wg)|0,l:Number(t&Wg)|0}}function C4(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Q2(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const _4=(t,e)=>BigInt(t>>>0)<<Xb|BigInt(e>>>0),I4=(t,e,r)=>t>>>r,S4=(t,e,r)=>t<<32-r|e>>>r,N4=(t,e,r)=>t>>>r|e<<32-r,x4=(t,e,r)=>t<<32-r|e>>>r,T4=(t,e,r)=>t<<64-r|e>>>r-32,P4=(t,e,r)=>t>>>r-32|e<<64-r,O4=(t,e)=>e,R4=(t,e)=>t,D4=(t,e,r)=>t<<r|e>>>32-r,k4=(t,e,r)=>e<<r|t>>>32-r,U4=(t,e,r)=>e<<r-32|t>>>64-r,B4=(t,e,r)=>t<<r-32|e>>>64-r;function L4(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const $4=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),M4=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,F4=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),j4=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,H4=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),z4=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Ye={fromBig:Q2,split:C4,toBig:_4,shrSH:I4,shrSL:S4,rotrSH:N4,rotrSL:x4,rotrBH:T4,rotrBL:P4,rotr32H:O4,rotr32L:R4,rotlSH:D4,rotlSL:k4,rotlBH:U4,rotlBL:B4,add:L4,add3L:$4,add3H:M4,add4L:F4,add4H:j4,add5H:z4,add5L:H4},[q4,V4]=Ye.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),na=new Uint32Array(80),sa=new Uint32Array(80);let W4=class extends A4{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:g,Hh:p,Hl:m}=this;return[e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m]}set(e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,r){for(let b=0;b<16;b++,r+=4)na[b]=e.getUint32(r),sa[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const C=na[b-15]|0,I=sa[b-15]|0,_=Ye.rotrSH(C,I,1)^Ye.rotrSH(C,I,8)^Ye.shrSH(C,I,7),O=Ye.rotrSL(C,I,1)^Ye.rotrSL(C,I,8)^Ye.shrSL(C,I,7),T=na[b-2]|0,N=sa[b-2]|0,k=Ye.rotrSH(T,N,19)^Ye.rotrBH(T,N,61)^Ye.shrSH(T,N,6),U=Ye.rotrSL(T,N,19)^Ye.rotrBL(T,N,61)^Ye.shrSL(T,N,6),$=Ye.add4L(O,U,sa[b-7],sa[b-16]),V=Ye.add4H($,_,k,na[b-7],na[b-16]);na[b]=V|0,sa[b]=$|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:g,Gh:p,Gl:m,Hh:w,Hl:E}=this;for(let b=0;b<80;b++){const C=Ye.rotrSH(h,d,14)^Ye.rotrSH(h,d,18)^Ye.rotrBH(h,d,41),I=Ye.rotrSL(h,d,14)^Ye.rotrSL(h,d,18)^Ye.rotrBL(h,d,41),_=h&f^~h&p,O=d&g^~d&m,T=Ye.add5L(E,I,O,V4[b],sa[b]),N=Ye.add5H(T,w,C,_,q4[b],na[b]),k=T|0,U=Ye.rotrSH(n,s,28)^Ye.rotrBH(n,s,34)^Ye.rotrBH(n,s,39),$=Ye.rotrSL(n,s,28)^Ye.rotrBL(n,s,34)^Ye.rotrBL(n,s,39),V=n&i^n&a^i&a,z=s&o^s&c^o&c;w=p|0,E=m|0,p=f|0,m=g|0,f=h|0,g=d|0,{h,l:d}=Ye.add(l|0,u|0,N|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=Ye.add3L(k,$,z);n=Ye.add3H(v,N,U,V),s=v|0}({h:n,l:s}=Ye.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ye.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ye.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ye.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Ye.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:g}=Ye.add(this.Fh|0,this.Fl|0,f|0,g|0),{h:p,l:m}=Ye.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:w,l:E}=Ye.add(this.Hh|0,this.Hl|0,w|0,E|0),this.set(n,s,i,o,a,c,l,u,h,d,f,g,p,m,w,E)}roundClean(){na.fill(0),sa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const G4=E4(()=>new W4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dA=BigInt(0),Z2=BigInt(1),K4=BigInt(2);function fA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pA(t){if(!fA(t))throw new Error("Uint8Array expected")}function E0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const J4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gA(t){pA(t);let e="";for(let r=0;r<t.length;r++)e+=J4[t[r]];return e}function X2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dA:BigInt("0x"+t)}const io={_0:48,_9:57,A:65,F:70,a:97,f:102};function MC(t){if(t>=io._0&&t<=io._9)return t-io._0;if(t>=io.A&&t<=io.F)return t-(io.A-10);if(t>=io.a&&t<=io.f)return t-(io.a-10)}function eT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=MC(t.charCodeAt(i)),a=MC(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Y4(t){return X2(gA(t))}function Im(t){return pA(t),X2(gA(Uint8Array.from(t).reverse()))}function tT(t,e){return eT(t.toString(16).padStart(e*2,"0"))}function eE(t,e){return tT(t,e).reverse()}function oo(t,e,r){let n;if(typeof e=="string")try{n=eT(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(fA(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function FC(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];pA(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const v0=t=>typeof t=="bigint"&&dA<=t;function Q4(t,e,r){return v0(t)&&v0(e)&&v0(r)&&e<=t&&t<r}function Fd(t,e,r,n){if(!Q4(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Z4(t){let e;for(e=0;t>dA;t>>=Z2,e+=1);return e}const X4=t=>(K4<<BigInt(t-1))-Z2,e6={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||fA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function mA(t,e,r={}){const n=(s,i,o)=>{const a=e6[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function jC(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Ir=BigInt(0),sr=BigInt(1),Oc=BigInt(2),t6=BigInt(3),tE=BigInt(4),HC=BigInt(5),zC=BigInt(8);function fr(t,e){const r=t%e;return r>=Ir?r:e+r}function r6(t,e,r){if(e<Ir)throw new Error("invalid exponent, negatives unsupported");if(r<=Ir)throw new Error("invalid modulus");if(r===sr)return Ir;let n=sr;for(;e>Ir;)e&sr&&(n=n*t%r),t=t*t%r,e>>=sr;return n}function pi(t,e,r){let n=t;for(;e-- >Ir;)n*=n,n%=r;return n}function qC(t,e){if(t===Ir)throw new Error("invert: expected non-zero number");if(e<=Ir)throw new Error("invert: expected positive modulus, got "+e);let r=fr(t,e),n=e,s=Ir,i=sr;for(;r!==Ir;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==sr)throw new Error("invert: does not exist");return fr(s,e)}function n6(t){const e=(t-sr)/Oc;let r,n,s;for(r=t-sr,n=0;r%Oc===Ir;r/=Oc,n++);for(s=Oc;s<t&&r6(s,e,t)!==t-sr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+sr)/tE;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(r+sr)/Oc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,s),r),u=o.pow(a,i),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let g=o.sqr(h);d<c&&!o.eql(g,o.ONE);d++)g=o.sqr(g);const f=o.pow(l,sr<<BigInt(c-d-1));l=o.sqr(f),u=o.mul(u,f),h=o.mul(h,l),c=d}return u}}function s6(t){if(t%tE===t6){const e=(t+sr)/tE;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%zC===HC){const e=(t-HC)/zC;return function(r,n){const s=r.mul(n,Oc),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Oc),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return n6(t)}const i6=(t,e)=>(fr(t,e)&sr)===sr,o6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function a6(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=o6.reduce((n,s)=>(n[s]="function",n),e);return mA(t,r)}function c6(t,e,r){if(r<Ir)throw new Error("invalid exponent, negatives unsupported");if(r===Ir)return t.ONE;if(r===sr)return e;let n=t.ONE,s=e;for(;r>Ir;)r&sr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=sr;return n}function l6(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function rT(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function nT(t,e,r=!1,n={}){if(t<=Ir)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=rT(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:X4(s),ZERO:Ir,ONE:sr,create:c=>fr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ir<=c&&c<t},is0:c=>c===Ir,isOdd:c=>(c&sr)===sr,neg:c=>fr(-c,t),eql:(c,l)=>c===l,sqr:c=>fr(c*c,t),add:(c,l)=>fr(c+l,t),sub:(c,l)=>fr(c-l,t),mul:(c,l)=>fr(c*l,t),pow:(c,l)=>c6(a,c,l),div:(c,l)=>fr(c*qC(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>qC(c,t),sqrt:n.sqrt||(c=>(o||(o=s6(t)),o(a,c))),invertBatch:c=>l6(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?eE(c,i):tT(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?Im(c):Y4(c)}});return Object.freeze(a)}const VC=BigInt(0),Gg=BigInt(1);function A0(t,e){const r=e.negate();return t?r:e}function sT(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function C0(t,e){sT(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function u6(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function h6(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const _0=new WeakMap,iT=new WeakMap;function I0(t){return iT.get(t)||1}function d6(t,e){return{constTimeNegate:A0,hasPrecomputes(r){return I0(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>VC;)n&Gg&&(s=s.add(i)),i=i.double(),n>>=Gg;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=C0(n,e),o=[];let a=r,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=C0(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let d=0;d<i;d++){const f=d*o;let g=Number(s&l);s>>=h,g>o&&(g-=u,s+=Gg);const p=f,m=f+Math.abs(g)-1,w=d%2!==0,E=g<0;g===0?c=c.add(A0(w,n[p])):a=a.add(A0(E,n[m]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=C0(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(s===VC)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=Gg),f===0)continue;let g=n[d+Math.abs(f)-1];f<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(r,n,s){let i=_0.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&_0.set(n,s(i))),i},wNAFCached(r,n,s){const i=I0(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=I0(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){sT(n,e),iT.set(r,n),_0.delete(r)}}}function f6(t,e,r,n){if(u6(r,t),h6(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Z4(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let h=l;h>=0;h-=o){c.fill(s);for(let f=0;f<n.length;f++){const g=n[f],p=Number(g>>BigInt(h)&BigInt(a));c[p]=c[p].add(r[f])}let d=s;for(let f=c.length-1,g=s;f>0;f--)g=g.add(c[f]),d=d.add(g);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function p6(t){return a6(t.Fp),mA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rT(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Os=BigInt(0),Cn=BigInt(1),Kg=BigInt(2),g6=BigInt(8),m6={zip215:!0};function w6(t){const e=p6(t);return mA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function y6(t){const e=w6(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Kg<<BigInt(a*8)-Cn,u=r.create,h=nT(e.n,e.nBitLength),d=e.uvRatio||((v,S)=>{try{return{isValid:!0,value:r.sqrt(v*r.inv(S))}}catch{return{isValid:!1,value:Os}}}),f=e.adjustScalarBytes||(v=>v),g=e.domain||((v,S,R)=>{if(E0("phflag",R),S.length||R)throw new Error("Contexts/pre-hash are not supported");return v});function p(v,S){Fd("coordinate "+v,S,Os,l)}function m(v){if(!(v instanceof b))throw new Error("ExtendedPoint expected")}const w=jC((v,S)=>{const{ex:R,ey:L,ez:F}=v,j=v.is0();S==null&&(S=j?g6:r.inv(F));const K=u(R*S),Q=u(L*S),ce=u(F*S);if(j)return{x:Os,y:Cn};if(ce!==Cn)throw new Error("invZ was invalid");return{x:K,y:Q}}),E=jC(v=>{const{a:S,d:R}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:L,ey:F,ez:j,et:K}=v,Q=u(L*L),ce=u(F*F),ie=u(j*j),we=u(ie*ie),Te=u(Q*S),ze=u(ie*u(Te+ce)),Xe=u(we+u(R*u(Q*ce)));if(ze!==Xe)throw new Error("bad point: equation left != right (1)");const He=u(L*F),ct=u(j*K);if(He!==ct)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(S,R,L,F){this.ex=S,this.ey=R,this.ez=L,this.et=F,p("x",S),p("y",R),p("z",L),p("t",F),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof b)throw new Error("extended point not allowed");const{x:R,y:L}=S||{};return p("x",R),p("y",L),new b(R,L,Cn,u(R*L))}static normalizeZ(S){const R=r.invertBatch(S.map(L=>L.ez));return S.map((L,F)=>L.toAffine(R[F])).map(b.fromAffine)}static msm(S,R){return f6(b,h,S,R)}_setWindowSize(S){_.setWindowSize(this,S)}assertValidity(){E(this)}equals(S){m(S);const{ex:R,ey:L,ez:F}=this,{ex:j,ey:K,ez:Q}=S,ce=u(R*Q),ie=u(j*F),we=u(L*Q),Te=u(K*F);return ce===ie&&we===Te}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=e,{ex:R,ey:L,ez:F}=this,j=u(R*R),K=u(L*L),Q=u(Kg*u(F*F)),ce=u(S*j),ie=R+L,we=u(u(ie*ie)-j-K),Te=ce+K,ze=Te-Q,Xe=ce-K,He=u(we*ze),ct=u(Te*Xe),rr=u(we*Xe),D=u(ze*Te);return new b(He,ct,D,rr)}add(S){m(S);const{a:R,d:L}=e,{ex:F,ey:j,ez:K,et:Q}=this,{ex:ce,ey:ie,ez:we,et:Te}=S;if(R===BigInt(-1)){const he=u((j-F)*(ie+ce)),ae=u((j+F)*(ie-ce)),se=u(ae-he);if(se===Os)return this.double();const Re=u(K*Kg*Te),ge=u(Q*Kg*we),Oe=ge+Re,Fe=ae+he,rt=ge-Re,Dt=u(Oe*se),vt=u(Fe*rt),Fr=u(Oe*rt),jr=u(se*Fe);return new b(Dt,vt,jr,Fr)}const ze=u(F*ce),Xe=u(j*ie),He=u(Q*L*Te),ct=u(K*we),rr=u((F+j)*(ce+ie)-ze-Xe),D=ct-He,B=ct+He,G=u(Xe-R*ze),ee=u(rr*D),Z=u(B*G),re=u(rr*G),pe=u(D*B);return new b(ee,Z,pe,re)}subtract(S){return this.add(S.negate())}wNAF(S){return _.wNAFCached(this,S,b.normalizeZ)}multiply(S){const R=S;Fd("scalar",R,Cn,n);const{p:L,f:F}=this.wNAF(R);return b.normalizeZ([L,F])[0]}multiplyUnsafe(S,R=b.ZERO){const L=S;return Fd("scalar",L,Os,n),L===Os?I:this.is0()||L===Cn?this:_.wNAFCachedUnsafe(this,L,b.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(S){return w(this,S)}clearCofactor(){const{h:S}=e;return S===Cn?this:this.multiplyUnsafe(S)}static fromHex(S,R=!1){const{d:L,a:F}=e,j=r.BYTES;S=oo("pointHex",S,j),E0("zip215",R);const K=S.slice(),Q=S[j-1];K[j-1]=Q&-129;const ce=Im(K),ie=R?l:r.ORDER;Fd("pointHex.y",ce,Os,ie);const we=u(ce*ce),Te=u(we-Cn),ze=u(L*we-F);let{isValid:Xe,value:He}=d(Te,ze);if(!Xe)throw new Error("Point.fromHex: invalid y coordinate");const ct=(He&Cn)===Cn,rr=(Q&128)!==0;if(!R&&He===Os&&rr)throw new Error("Point.fromHex: x=0 and x_0=1");return rr!==ct&&(He=u(-He)),b.fromAffine({x:He,y:ce})}static fromPrivateKey(S){return N(S).point}toRawBytes(){const{x:S,y:R}=this.toAffine(),L=eE(R,r.BYTES);return L[L.length-1]|=S&Cn?128:0,L}toHex(){return gA(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Cn,u(e.Gx*e.Gy)),b.ZERO=new b(Os,Cn,Cn,Os);const{BASE:C,ZERO:I}=b,_=d6(b,a*8);function O(v){return fr(v,n)}function T(v){return O(Im(v))}function N(v){const S=r.BYTES;v=oo("private key",v,S);const R=oo("hashed private key",i(v),2*S),L=f(R.slice(0,S)),F=R.slice(S,2*S),j=T(L),K=C.multiply(j),Q=K.toRawBytes();return{head:L,prefix:F,scalar:j,point:K,pointBytes:Q}}function k(v){return N(v).pointBytes}function U(v=new Uint8Array,...S){const R=FC(...S);return T(i(g(R,oo("context",v),!!s)))}function $(v,S,R={}){v=oo("message",v),s&&(v=s(v));const{prefix:L,scalar:F,pointBytes:j}=N(S),K=U(R.context,L,v),Q=C.multiply(K).toRawBytes(),ce=U(R.context,Q,j,v),ie=O(K+ce*F);Fd("signature.s",ie,Os,n);const we=FC(Q,eE(ie,r.BYTES));return oo("result",we,r.BYTES*2)}const V=m6;function z(v,S,R,L=V){const{context:F,zip215:j}=L,K=r.BYTES;v=oo("signature",v,2*K),S=oo("message",S),R=oo("publicKey",R,K),j!==void 0&&E0("zip215",j),s&&(S=s(S));const Q=Im(v.slice(K,2*K));let ce,ie,we;try{ce=b.fromHex(R,j),ie=b.fromHex(v.slice(0,K),j),we=C.multiplyUnsafe(Q)}catch{return!1}if(!j&&ce.isSmallOrder())return!1;const Te=U(F,ie.toRawBytes(),ce.toRawBytes(),S);return ie.add(ce.multiplyUnsafe(Te)).subtract(we).clearCofactor().equals(b.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:$,verify:z,ExtendedPoint:b,utils:{getExtendedPublicKey:N,randomPrivateKey:()=>o(r.BYTES),precompute(v=8,S=b.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const wA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),WC=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const b6=BigInt(1),GC=BigInt(2);BigInt(3);const E6=BigInt(5),v6=BigInt(8);function A6(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=wA,o=t*t%i*t%i,a=pi(o,GC,i)*o%i,c=pi(a,b6,i)*t%i,l=pi(c,E6,i)*c%i,u=pi(l,e,i)*l%i,h=pi(u,r,i)*u%i,d=pi(h,n,i)*h%i,f=pi(d,s,i)*d%i,g=pi(f,s,i)*d%i,p=pi(g,e,i)*l%i;return{pow_p_5_8:pi(p,GC,i)*t%i,b2:o}}function C6(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function _6(t,e){const r=wA,n=fr(e*e*e,r),s=fr(n*n*e,r),i=A6(t*s).pow_p_5_8;let o=fr(t*n*i,r);const a=fr(e*o*o,r),c=o,l=fr(o*WC,r),u=a===t,h=a===fr(-t,r),d=a===fr(-t*WC,r);return u&&(o=c),(h||d)&&(o=l),i6(o,r)&&(o=fr(-o,r)),{isValid:u||h,value:o}}const I6=nT(wA,void 0,!0),S6={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:I6,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:v6,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:G4,randomBytes:Y2,adjustScalarBytes:C6,uvRatio:_6},oT=y6(S6),N6="EdDSA",x6="JWT",nw=".",ay="base64url",aT="utf8",cT="utf8",T6=":",P6="did",O6="key",KC="base58btc",R6="z",D6="K36",k6=32;function yA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function lT(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function uT(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=lT(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return yA(r)}function U6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,w=0,E=g.length;w!==E&&g[w]===0;)w++,p++;for(var b=(E-w)*u+1>>>0,C=new Uint8Array(b);w!==E;){for(var I=g[w],_=0,O=b-1;(I!==0||_<m)&&O!==-1;O--,_++)I+=256*C[O]>>>0,C[O]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=_,w++}for(var T=b-m;T!==b&&C[T]===0;)T++;for(var N=c.repeat(p);T<b;++T)N+=t.charAt(C[T]);return N}function d(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,w=0;g[p]===c;)m++,p++;for(var E=(g.length-p)*l+1>>>0,b=new Uint8Array(E);g[p];){var C=r[g.charCodeAt(p)];if(C===255)return;for(var I=0,_=E-1;(C!==0||I<w)&&_!==-1;_--,I++)C+=a*b[_]>>>0,b[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,p++}if(g[p]!==" "){for(var O=E-w;O!==E&&b[O]===0;)O++;for(var T=new Uint8Array(m+(E-O)),N=m;O!==E;)T[N++]=b[O++];return T}}}function f(g){var p=d(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var B6=U6,L6=B6;const hT=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},$6=t=>new TextEncoder().encode(t),M6=t=>new TextDecoder().decode(t);let F6=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},j6=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return dT(this,e)}},H6=class{constructor(e){this.decoders=e}or(e){return dT(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const dT=(t,e)=>new H6({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let z6=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new F6(e,r,n),this.decoder=new j6(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const cy=({name:t,prefix:e,encode:r,decode:n})=>new z6(t,e,r,n),wg=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=L6(r,e);return cy({prefix:t,name:e,encode:n,decode:i=>hT(s(i))})},q6=(t,e,r,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const h=s[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},V6=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Lr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>cy({prefix:e,name:t,encode(s){return V6(s,n,r)},decode(s){return q6(s,n,r,t)}}),W6=cy({prefix:"\0",name:"identity",encode:t=>M6(t),decode:t=>$6(t)});var G6=Object.freeze({__proto__:null,identity:W6});const K6=Lr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var J6=Object.freeze({__proto__:null,base2:K6});const Y6=Lr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Q6=Object.freeze({__proto__:null,base8:Y6});const Z6=wg({prefix:"9",name:"base10",alphabet:"0123456789"});var X6=Object.freeze({__proto__:null,base10:Z6});const e$=Lr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),t$=Lr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var r$=Object.freeze({__proto__:null,base16:e$,base16upper:t$});const n$=Lr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s$=Lr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),i$=Lr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o$=Lr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),a$=Lr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c$=Lr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l$=Lr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),u$=Lr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),h$=Lr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var d$=Object.freeze({__proto__:null,base32:n$,base32upper:s$,base32pad:i$,base32padupper:o$,base32hex:a$,base32hexupper:c$,base32hexpad:l$,base32hexpadupper:u$,base32z:h$});const f$=wg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),p$=wg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var g$=Object.freeze({__proto__:null,base36:f$,base36upper:p$});const m$=wg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),w$=wg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var y$=Object.freeze({__proto__:null,base58btc:m$,base58flickr:w$});const b$=Lr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),E$=Lr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),v$=Lr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),A$=Lr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var C$=Object.freeze({__proto__:null,base64:b$,base64pad:E$,base64url:v$,base64urlpad:A$});const fT=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),_$=fT.reduce((t,e,r)=>(t[r]=e,t),[]),I$=fT.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function S$(t){return t.reduce((e,r)=>(e+=_$[r],e),"")}function N$(t){const e=[];for(const r of t){const n=I$[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const x$=cy({prefix:"🚀",name:"base256emoji",encode:S$,decode:N$});var T$=Object.freeze({__proto__:null,base256emoji:x$}),P$=pT,JC=128,O$=-128,R$=Math.pow(2,31);function pT(t,e,r){e=e||[],r=r||0;for(var n=r;t>=R$;)e[r++]=t&255|JC,t/=128;for(;t&O$;)e[r++]=t&255|JC,t>>>=7;return e[r]=t|0,pT.bytes=r-n+1,e}var D$=rE,k$=128,YC=127;function rE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw rE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&YC)<<s:(o&YC)*Math.pow(2,s),s+=7}while(o>=k$);return rE.bytes=i-n,r}var U$=Math.pow(2,7),B$=Math.pow(2,14),L$=Math.pow(2,21),$$=Math.pow(2,28),M$=Math.pow(2,35),F$=Math.pow(2,42),j$=Math.pow(2,49),H$=Math.pow(2,56),z$=Math.pow(2,63),q$=function(t){return t<U$?1:t<B$?2:t<L$?3:t<$$?4:t<M$?5:t<F$?6:t<j$?7:t<H$?8:t<z$?9:10},V$={encode:P$,decode:D$,encodingLength:q$},gT=V$;const QC=(t,e,r=0)=>(gT.encode(t,e,r),e),ZC=t=>gT.encodingLength(t),nE=(t,e)=>{const r=e.byteLength,n=ZC(t),s=n+ZC(r),i=new Uint8Array(s+r);return QC(t,i,0),QC(r,i,n),i.set(e,s),new W$(t,r,e,i)};let W$=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const mT=({name:t,code:e,encode:r})=>new G$(t,e,r);let G$=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?nE(this.code,r):r.then(n=>nE(this.code,n))}else throw Error("Unknown type, must be binary type")}};const wT=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),K$=mT({name:"sha2-256",code:18,encode:wT("SHA-256")}),J$=mT({name:"sha2-512",code:19,encode:wT("SHA-512")});var Y$=Object.freeze({__proto__:null,sha256:K$,sha512:J$});const yT=0,Q$="identity",bT=hT,Z$=t=>nE(yT,bT(t)),X$={code:yT,name:Q$,encode:bT,digest:Z$};var eM=Object.freeze({__proto__:null,identity:X$});new TextEncoder,new TextDecoder;const XC={...G6,...J6,...Q6,...X6,...r$,...d$,...g$,...y$,...C$,...T$};({...Y$,...eM});function ET(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const e_=ET("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),S0=ET("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=lT(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),vT={utf8:e_,"utf-8":e_,hex:XC.base16,latin1:S0,ascii:S0,binary:S0,...XC};function ly(t,e="utf8"){const r=vT[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function bd(t,e="utf8"){const r=vT[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yA(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function t_(t){return Rl(ly(bd(t,ay),aT))}function sw(t){return ly(bd(qo(t),aT),ay)}function AT(t){const e=bd(D6,KC),r=R6+ly(uT([e,t]),KC);return[P6,O6,r].join(T6)}function tM(t){return ly(t,ay)}function rM(t){return bd(t,ay)}function nM(t){return bd([sw(t.header),sw(t.payload)].join(nw),cT)}function sM(t){return[sw(t.header),sw(t.payload),tM(t.signature)].join(nw)}function sE(t){const e=t.split(nw),r=t_(e[0]),n=t_(e[1]),s=rM(e[2]),i=bd(e.slice(0,2).join(nw),cT);return{header:r,payload:n,signature:s,data:i}}function r_(t=Y2(k6)){const e=oT.getPublicKey(t);return{secretKey:uT([t,e]),publicKey:e}}async function iM(t,e,r,n,s=de.fromMiliseconds(Date.now())){const i={alg:N6,typ:x6},o=AT(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=nM({header:i,payload:c}),u=oT.sign(l,n.secretKey.slice(0,32));return sM({header:i,payload:c,signature:u})}var n_=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},oM=(function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t})(),aM=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),cM=(function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t})(),lM=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),uM=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),hM=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,dM=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,s_=3,fM=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",hM]],i_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function pM(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new uM:typeof navigator<"u"?mM(navigator.userAgent):yM()}function gM(t){return t!==""&&fM.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function mM(t){var e=gM(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new lM;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<s_&&(s=n_(n_([],s,!0),bM(s_-s.length),!0)):s=[];var i=s.join("."),o=wM(t),a=dM.exec(t);return a&&a[1]?new cM(r,i,o,a[1]):new oM(r,i,o)}function wM(t){for(var e=0,r=i_.length;e<r;e++){var n=i_[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function yM(){var t=typeof process<"u"&&process.version;return t?new aM(process.version.slice(1)):null}function bM(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Lt={},o_;function CT(){if(o_)return Lt;o_=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.getLocalStorage=Lt.getLocalStorageOrThrow=Lt.getCrypto=Lt.getCryptoOrThrow=Lt.getLocation=Lt.getLocationOrThrow=Lt.getNavigator=Lt.getNavigatorOrThrow=Lt.getDocument=Lt.getDocumentOrThrow=Lt.getFromWindowOrThrow=Lt.getFromWindow=void 0;function t(d){let f;return typeof window<"u"&&typeof window[d]<"u"&&(f=window[d]),f}Lt.getFromWindow=t;function e(d){const f=t(d);if(!f)throw new Error(`${d} is not defined in Window`);return f}Lt.getFromWindowOrThrow=e;function r(){return e("document")}Lt.getDocumentOrThrow=r;function n(){return t("document")}Lt.getDocument=n;function s(){return e("navigator")}Lt.getNavigatorOrThrow=s;function i(){return t("navigator")}Lt.getNavigator=i;function o(){return e("location")}Lt.getLocationOrThrow=o;function a(){return t("location")}Lt.getLocation=a;function c(){return e("crypto")}Lt.getCryptoOrThrow=c;function l(){return t("crypto")}Lt.getCrypto=l;function u(){return e("localStorage")}Lt.getLocalStorageOrThrow=u;function h(){return t("localStorage")}return Lt.getLocalStorage=h,Lt}var Vo=CT(),jd={},a_;function EM(){if(a_)return jd;a_=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.getWindowMetadata=void 0;const t=CT();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const f=r.getElementsByTagName("link"),g=[];for(let p=0;p<f.length;p++){const m=f[p],w=m.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const E=m.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let b=n.protocol+"//"+n.host;if(E.indexOf("/")===0)b+=E;else{const C=n.pathname.split("/");C.pop();const I=C.join("/");b+=I+"/"+E}g.push(b)}else if(E.indexOf("//")===0){const b=n.protocol+E;g.push(b)}else g.push(E)}}return g}function i(...f){const g=r.getElementsByTagName("meta");for(let p=0;p<g.length;p++){const m=g[p],w=["itemprop","property","name"].map(E=>m.getAttribute(E)).filter(E=>E?f.includes(E):!1);if(w.length&&w){const E=m.getAttribute("content");if(E)return E}}return""}function o(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=r.title),f}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),l=a(),u=n.origin,h=s();return{description:l,url:u,icons:h,name:c}}return jd.getWindowMetadata=e,jd}var vM=EM();function wp(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function iE(t){return wp(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const _T="2.31.0";let Hd={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${_T}`};class Dl extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof Dl?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof Dl&&r.cause.docsPath||r.docsPath,i=(a=Hd.getDocsUrl)==null?void 0:a.call(Hd,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Hd.version?[`Version: ${Hd.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=_T}walk(e){return IT(this,e)}}function IT(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?IT(t.cause,e):e?null:t}class ST extends Dl{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ed(t,{dir:e,size:r=32}={}){return typeof t=="string"?AM(t,{dir:e,size:r}):CM(t,{dir:e,size:r})}function AM(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new ST({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function CM(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new ST({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}class _M extends Dl{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class IM extends Dl{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function vd(t,{size:e}){if(iE(t)>e)throw new IM({givenSize:iE(t),maxSize:e})}function oE(t,e={}){const{signed:r}=e;e.size&&vd(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function SM(t,e={}){return Number(oE(t,e))}const NM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aE(t,e={}){return typeof t=="number"||typeof t=="bigint"?xT(t,e):typeof t=="string"?PM(t,e):typeof t=="boolean"?xM(t,e):NT(t,e)}function xM(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(vd(r,{size:e.size}),Ed(r,{size:e.size})):r}function NT(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=NM[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(vd(n,{size:e.size}),Ed(n,{dir:"right",size:e.size})):n}function xT(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new _M({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Ed(a,{size:n}):a}const TM=new TextEncoder;function PM(t,e={}){const r=TM.encode(t);return NT(r,e)}const OM=new TextEncoder;function RM(t,e={}){return typeof t=="number"||typeof t=="bigint"?kM(t,e):typeof t=="boolean"?DM(t,e):wp(t)?TT(t,e):PT(t,e)}function DM(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(vd(r,{size:e.size}),Ed(r,{size:e.size})):r}const ao={zero:48,nine:57,A:65,F:70,a:97,f:102};function c_(t){if(t>=ao.zero&&t<=ao.nine)return t-ao.zero;if(t>=ao.A&&t<=ao.F)return t-(ao.A-10);if(t>=ao.a&&t<=ao.f)return t-(ao.a-10)}function TT(t,e={}){let r=t;e.size&&(vd(r,{size:e.size}),r=Ed(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=c_(n.charCodeAt(a++)),l=c_(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Dl(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+l}return i}function kM(t,e){const r=xT(t,e);return TT(r)}function PT(t,e={}){const r=OM.encode(t);return typeof e.size=="number"?(vd(r,{size:e.size}),Ed(r,{dir:"right",size:e.size})):r}function OT(t,e){const r=e||"hex",n=I2(wp(t,{strict:!1})?RM(t):t);return r==="bytes"?n:aE(n)}class UM extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const N0=new UM(8192);function BM(t,e){if(N0.has(`${t}.${e}`))return N0.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=OT(PT(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return N0.set(`${t}.${e}`,i),i}function LM(t){const e=OT(`0x${t.substring(4)}`).substring(26);return BM(`0x${e}`)}async function $M({hash:t,signature:e}){const r=wp(t)?t:aE(t),{secp256k1:n}=await Jr(async()=>{const{secp256k1:o}=await import("./secp256k1-Cu48m-Ra.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,f=Number(d??h),g=l_(f);return new n.Signature(oE(l),oE(u)).addRecoveryBit(g)}const o=wp(e)?e:aE(e);if(iE(o)!==65)throw new Error("invalid signature length");const a=SM(`0x${o.slice(130)}`),c=l_(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function l_(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function MM({hash:t,signature:e}){return LM(await $M({hash:t,signature:e}))}function FM(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const f=l.length;for(;d!==f&&l[d]===0;)d++,u++;const g=(f-d)*i+1>>>0,p=new Uint8Array(g);for(;d!==f;){let E=l[d],b=0;for(let C=g-1;(E!==0||b<h)&&C!==-1;C--,b++)E+=256*p[C]>>>0,p[C]=E%r>>>0,E=E/r>>>0;if(E!==0)throw new Error("Non-zero carry");h=b,d++}let m=g-h;for(;m!==g&&p[m]===0;)m++;let w=n.repeat(u);for(;m<g;++m)w+=t.charAt(p[m]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const f=(l.length-u)*s+1>>>0,g=new Uint8Array(f);for(;u<l.length;){const E=l.charCodeAt(u);if(E>255)return;let b=e[E];if(b===255)return;let C=0;for(let I=f-1;(b!==0||C<d)&&I!==-1;I--,C++)b+=r*g[I]>>>0,g[I]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");d=C,u++}let p=f-d;for(;p!==f&&g[p]===0;)p++;const m=new Uint8Array(h+(f-p));let w=h;for(;p!==f;)m[w++]=g[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var jM="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ad=FM(jM);function HM(t){const e=t.length;let r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if((s&4294967168)===0){r++;continue}else if((s&4294965248)===0)r+=2;else{if(s>=55296&&s<=56319&&n<e){const i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?r+=3:r+=4}}return r}function zM(t,e,r){const n=t.length;let s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const qM=new TextEncoder,VM=50;function WM(t,e,r){qM.encodeInto(t,e.subarray(r))}function GM(t,e,r){t.length>VM?WM(t,e,r):zM(t,e,r)}const KM=4096;function RT(t,e,r){let n=e;const s=n+r,i=[];let o="";for(;n<s;){const a=t[n++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[n++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[n++]&63,l=t[n++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[n++]&63,l=t[n++]&63,u=t[n++]&63;let h=(a&7)<<18|c<<12|l<<6|u;h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|h&1023),i.push(h)}else i.push(a);i.length>=KM&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const JM=new TextDecoder,YM=200;function QM(t,e,r){const n=t.subarray(e,e+r);return JM.decode(n)}function ZM(t,e,r){return r>YM?QM(t,e,r):RT(t,e,r)}class Jg{constructor(e,r){this.type=e,this.data=r}}class ts extends Error{constructor(e){super(e);const r=Object.create(ts.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:ts.name})}}const zd=4294967295;function XM(t,e,r){const n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function DT(t,e,r){const n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function kT(t,e){const r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function eF(t,e){const r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}const tF=-1,rF=4294967296-1,nF=17179869184-1;function sF({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=nF)if(e===0&&t<=rF){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{const r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),DT(n,4,t),r}}function iF(t){const e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}function oF(t){if(t instanceof Date){const e=iF(t);return sF(e)}else return null}function aF(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{const r=kT(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new ts(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function cF(t){const e=aF(t);return new Date(e.sec*1e3+e.nsec/1e6)}const lF={type:tF,encode:oF,decode:cF};class iw{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(lF)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{const s=-1-e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){const s=this.builtInEncoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=-1-n;return new Jg(o,i)}}}for(let n=0;n<this.encoders.length;n++){const s=this.encoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=n;return new Jg(o,i)}}}return e instanceof Jg?e:null}decode(e,r,n){const s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new Jg(r,e)}}iw.defaultCodec=new iw;function uF(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function cE(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):uF(t)?new Uint8Array(t):Uint8Array.from(t)}const hF=100,dF=2048;let fF=class UT{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??iw.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??hF,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??dF,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new UT({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){const r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){const r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const n=HM(e);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),GM(e,this.bytes,this.pos),this.pos+=n}encodeObject(e,r){const n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=cE(e);this.writeU8a(n)}encodeArray(e,r){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(const s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){const n=Object.keys(e);this.sortKeys&&n.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of n){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){if(typeof e.data=="function"){const n=e.data(this.pos+6),s=n.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(n);return}const r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),XM(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),DT(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function pF(t,e){return new fF(e).encodeSharedRef(t)}function x0(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const gF=16,mF=16;class wF{constructor(e=gF,r=mF){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){const s=this.caches[n-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){const n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){const s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;const i=RT(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}}const lE="array",Sf="map_key",BT="map_value",yF=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new ts("The type of key must be string or number but "+typeof t)};class bF{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const r=this.getUninitializedStateFromPool();r.type=lE,r.position=0,r.size=e,r.array=new Array(e)}pushMapState(e){const r=this.getUninitializedStateFromPool();r.type=Sf,r.readCount=0,r.size=e,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===lE){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===Sf||e.type===BT){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const qd=-1,bA=new DataView(new ArrayBuffer(0)),EF=new Uint8Array(bA.buffer);try{bA.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const u_=new RangeError("Insufficient data"),vF=new wF;let AF=class LT{constructor(e){this.totalPos=0,this.pos=0,this.view=bA,this.bytes=EF,this.headByte=qd,this.stack=new bF,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??iw.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??zd,this.maxBinLength=(e==null?void 0:e.maxBinLength)??zd,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??zd,this.maxMapLength=(e==null?void 0:e.maxMapLength)??zd,this.maxExtLength=(e==null?void 0:e.maxExtLength)??zd,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:vF,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??yF}clone(){return new LT({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=qd,this.stack.reset()}setBuffer(e){const r=cE(e);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===qd&&!this.hasRemaining(1))this.setBuffer(e);else{const r=this.bytes.subarray(this.pos),n=cE(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r=!1,n;for await(const a of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${x0(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){if(this.entered){yield*this.clone().decodeMultiAsync(e,r);return}try{this.entered=!0;let n=r,s=-1;for await(const i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{const s=e-160;r=this.decodeString(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(e===217){const s=this.lookU8();r=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();r=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();r=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){const s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();r=this.decodeExtension(s,4)}else throw new ts(`Unrecognized type byte: ${x0(e)}`);this.complete();const n=this.stack;for(;n.length>0;){const s=n.top();if(s.type===lE)if(s.array[s.position]=r,s.position++,s.position===s.size)r=s.array,n.release(s);else continue e;else if(s.type===Sf){if(r==="__proto__")throw new ts("The key __proto__ is not allowed");s.key=this.mapKeyConverter(r),s.type=BT;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)r=s.map,n.release(s);else{s.key=null,s.type=Sf;continue e}}return r}}readHeadByte(){return this.headByte===qd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=qd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new ts(`Unrecognized array type byte: ${x0(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new ts(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new ts(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,r):this.decodeBinary(e,r)}decodeUtf8String(e,r){var i;if(e>this.maxStrLength)throw new ts(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw u_;const n=this.pos+r;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,n,e):s=ZM(this.bytes,n,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Sf:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new ts(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw u_;const n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new ts(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=eF(this.view,this.pos);return this.pos+=8,e}readI64(){const e=kT(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function CF(t,e){return new AF(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _F(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $T(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function ow(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function EA(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function uE(t){if(!Array.isArray(t))throw new Error("array expected")}function aw(t,e){if(!$T(!0,e))throw new Error(`${t}: array of strings expected`)}function IF(t,e){if(!$T(!1,e))throw new Error(`${t}: array of numbers expected`)}function SF(...t){const e=i=>i,r=(i,o)=>a=>i(o(a)),n=t.map(i=>i.encode).reduceRight(r,e),s=t.map(i=>i.decode).reduce(r,e);return{encode:n,decode:s}}function NF(t){const e=typeof t=="string"?t.split(""):t,r=e.length;aw("alphabet",e);const n=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(uE(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(uE(s),s.map(i=>{ow("alphabet.decode",i);const o=n.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function xF(t=""){return ow("join",t),{encode:e=>(aw("join.decode",e),e.join(t)),decode:e=>(ow("join.decode",e),e.split(t))}}function TF(t,e="="){return EA(t),ow("padding",e),{encode(r){for(aw("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){aw("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}const MT=(t,e)=>e===0?t:MT(e,t%e),cw=(t,e)=>t+(e-MT(t,e)),T0=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function h_(t,e,r,n){if(uE(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(cw(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${cw(e,r)}`);let s=0,i=0;const o=T0[e],a=T0[r]-1,c=[];for(const l of t){if(EA(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=r;i-=r)c.push((s>>i-r&a)>>>0);const u=T0[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<r-i&a,!n&&i>=e)throw new Error("Excess padding");if(!n&&s>0)throw new Error(`Non-zero padding: ${s}`);return n&&i>0&&c.push(s>>>0),c}function PF(t,e=!1){if(EA(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(cw(8,t)>32||cw(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!_F(r))throw new Error("radix2.encode input should be Uint8Array");return h_(Array.from(r),8,t,!e)},decode:r=>(IF("radix2.decode",r),Uint8Array.from(h_(r,t,8,e)))}}const OF=SF(PF(5),NF("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),TF(5),xF(""));function vA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function FT(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?vA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Nf(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=FT(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return vA(r)}function RF(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,w=0,E=g.length;w!==E&&g[w]===0;)w++,p++;for(var b=(E-w)*u+1>>>0,C=new Uint8Array(b);w!==E;){for(var I=g[w],_=0,O=b-1;(I!==0||_<m)&&O!==-1;O--,_++)I+=256*C[O]>>>0,C[O]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=_,w++}for(var T=b-m;T!==b&&C[T]===0;)T++;for(var N=c.repeat(p);T<b;++T)N+=t.charAt(C[T]);return N}function d(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,w=0;g[p]===c;)m++,p++;for(var E=(g.length-p)*l+1>>>0,b=new Uint8Array(E);g[p];){var C=r[g.charCodeAt(p)];if(C===255)return;for(var I=0,_=E-1;(C!==0||I<w)&&_!==-1;_--,I++)C+=a*b[_]>>>0,b[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,p++}if(g[p]!==" "){for(var O=E-w;O!==E&&b[O]===0;)O++;for(var T=new Uint8Array(m+(E-O)),N=m;O!==E;)T[N++]=b[O++];return T}}}function f(g){var p=d(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var DF=RF,kF=DF;const UF=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},BF=t=>new TextEncoder().encode(t),LF=t=>new TextDecoder().decode(t);class $F{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class MF{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jT(this,e)}}class FF{constructor(e){this.decoders=e}or(e){return jT(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jT=(t,e)=>new FF({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class jF{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new $F(e,r,n),this.decoder=new MF(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const uy=({name:t,prefix:e,encode:r,decode:n})=>new jF(t,e,r,n),yg=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=kF(r,e);return uy({prefix:t,name:e,encode:n,decode:i=>UF(s(i))})},HF=(t,e,r,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const h=s[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},zF=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},$r=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>uy({prefix:e,name:t,encode(s){return zF(s,n,r)},decode(s){return HF(s,n,r,t)}}),qF=uy({prefix:"\0",name:"identity",encode:t=>LF(t),decode:t=>BF(t)}),VF=Object.freeze(Object.defineProperty({__proto__:null,identity:qF},Symbol.toStringTag,{value:"Module"})),WF=$r({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),GF=Object.freeze(Object.defineProperty({__proto__:null,base2:WF},Symbol.toStringTag,{value:"Module"})),KF=$r({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),JF=Object.freeze(Object.defineProperty({__proto__:null,base8:KF},Symbol.toStringTag,{value:"Module"})),YF=yg({prefix:"9",name:"base10",alphabet:"0123456789"}),QF=Object.freeze(Object.defineProperty({__proto__:null,base10:YF},Symbol.toStringTag,{value:"Module"})),ZF=$r({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),XF=$r({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),e9=Object.freeze(Object.defineProperty({__proto__:null,base16:ZF,base16upper:XF},Symbol.toStringTag,{value:"Module"})),t9=$r({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),r9=$r({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),n9=$r({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),s9=$r({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),i9=$r({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),o9=$r({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),a9=$r({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),c9=$r({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),l9=$r({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),u9=Object.freeze(Object.defineProperty({__proto__:null,base32:t9,base32hex:i9,base32hexpad:a9,base32hexpadupper:c9,base32hexupper:o9,base32pad:n9,base32padupper:s9,base32upper:r9,base32z:l9},Symbol.toStringTag,{value:"Module"})),h9=yg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d9=yg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),f9=Object.freeze(Object.defineProperty({__proto__:null,base36:h9,base36upper:d9},Symbol.toStringTag,{value:"Module"})),p9=yg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),g9=yg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),m9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:p9,base58flickr:g9},Symbol.toStringTag,{value:"Module"})),w9=$r({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y9=$r({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),b9=$r({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),E9=$r({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),v9=Object.freeze(Object.defineProperty({__proto__:null,base64:w9,base64pad:y9,base64url:b9,base64urlpad:E9},Symbol.toStringTag,{value:"Module"})),HT=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),A9=HT.reduce((t,e,r)=>(t[r]=e,t),[]),C9=HT.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function _9(t){return t.reduce((e,r)=>(e+=A9[r],e),"")}function I9(t){const e=[];for(const r of t){const n=C9[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const S9=uy({prefix:"🚀",name:"base256emoji",encode:_9,decode:I9}),N9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:S9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const d_={...VF,...GF,...JF,...QF,...e9,...u9,...f9,...m9,...v9,...N9};function zT(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const f_=zT("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),P0=zT("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=FT(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),qT={utf8:f_,"utf-8":f_,hex:d_.base16,latin1:P0,ascii:P0,binary:P0,...d_};function _s(t,e="utf8"){const r=qT[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?vA(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function $n(t,e="utf8"){const r=qT[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const x9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var O0,p_;function VT(){if(p_)return O0;p_=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function r(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function n(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let l=`
`+o+" = ";for(let u=0;u<a.length;u+=2){if(c===32)l+=n(a[u]).toUpperCase(),l+=" ",l+=n(a[u+1]).toUpperCase();else if(c===64)l+=n(a[u+1]).toUpperCase(),l+=n(a[u]).toUpperCase();else throw new Error("Invalid size "+c);u%6===4?l+=`
`+new Array(o.length+4).join(" "):u<a.length-2&&(l+=" ")}console.log(l)}function i(o,a,c){let l=new Date().getTime();const u=new Uint8Array(a);for(let d=0;d<a;d++)u[d]=d%256;const h=new Date().getTime();console.log("Generated random input in "+(h-l)+"ms"),l=h;for(let d=0;d<c;d++){const f=o(u),g=new Date().getTime(),p=g-l;l=g,console.log("Hashed in "+p+"ms: "+f.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(p/1e3)*100)/100+" MB PER SECOND")}}return O0={normalizeInput:e,toHex:r,debugPrint:s,testSpeed:i},O0}var R0,g_;function T9(){if(g_)return R0;g_=1;const t=VT();function e(w,E,b){const C=w[E]+w[b];let I=w[E+1]+w[b+1];C>=4294967296&&I++,w[E]=C,w[E+1]=I}function r(w,E,b,C){let I=w[E]+b;b<0&&(I+=4294967296);let _=w[E+1]+C;I>=4294967296&&_++,w[E]=I,w[E+1]=_}function n(w,E){return w[E]^w[E+1]<<8^w[E+2]<<16^w[E+3]<<24}function s(w,E,b,C,I,_){const O=l[I],T=l[I+1],N=l[_],k=l[_+1];e(c,w,E),r(c,w,O,T);let U=c[C]^c[w],$=c[C+1]^c[w+1];c[C]=$,c[C+1]=U,e(c,b,C),U=c[E]^c[b],$=c[E+1]^c[b+1],c[E]=U>>>24^$<<8,c[E+1]=$>>>24^U<<8,e(c,w,E),r(c,w,N,k),U=c[C]^c[w],$=c[C+1]^c[w+1],c[C]=U>>>16^$<<16,c[C+1]=$>>>16^U<<16,e(c,b,C),U=c[E]^c[b],$=c[E+1]^c[b+1],c[E]=$>>>31^U<<1,c[E+1]=U>>>31^$<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(w){return w*2})),c=new Uint32Array(32),l=new Uint32Array(32);function u(w,E){let b=0;for(b=0;b<16;b++)c[b]=w.h[b],c[b+16]=i[b];for(c[24]=c[24]^w.t,c[25]=c[25]^w.t/4294967296,E&&(c[28]=~c[28],c[29]=~c[29]),b=0;b<32;b++)l[b]=n(w.b,4*b);for(b=0;b<12;b++)s(0,8,16,24,a[b*16+0],a[b*16+1]),s(2,10,18,26,a[b*16+2],a[b*16+3]),s(4,12,20,28,a[b*16+4],a[b*16+5]),s(6,14,22,30,a[b*16+6],a[b*16+7]),s(0,10,20,30,a[b*16+8],a[b*16+9]),s(2,12,22,24,a[b*16+10],a[b*16+11]),s(4,14,16,26,a[b*16+12],a[b*16+13]),s(6,8,18,28,a[b*16+14],a[b*16+15]);for(b=0;b<16;b++)w.h[b]=w.h[b]^c[b]^c[b+16]}const h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function d(w,E,b,C){if(w===0||w>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(E&&E.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(b&&b.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(C&&C.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const I={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:w};h.fill(0),h[0]=w,E&&(h[1]=E.length),h[2]=1,h[3]=1,b&&h.set(b,32),C&&h.set(C,48);for(let _=0;_<16;_++)I.h[_]=i[_]^n(h,_*4);return E&&(f(I,E),I.c=128),I}function f(w,E){for(let b=0;b<E.length;b++)w.c===128&&(w.t+=w.c,u(w,!1),w.c=0),w.b[w.c++]=E[b]}function g(w){for(w.t+=w.c;w.c<128;)w.b[w.c++]=0;u(w,!0);const E=new Uint8Array(w.outlen);for(let b=0;b<w.outlen;b++)E[b]=w.h[b>>2]>>8*(b&3);return E}function p(w,E,b,C,I){b=b||64,w=t.normalizeInput(w),C&&(C=t.normalizeInput(C)),I&&(I=t.normalizeInput(I));const _=d(b,E,C,I);return f(_,w),g(_)}function m(w,E,b,C,I){const _=p(w,E,b,C,I);return t.toHex(_)}return R0={blake2b:p,blake2bHex:m,blake2bInit:d,blake2bUpdate:f,blake2bFinal:g},R0}var D0,m_;function P9(){if(m_)return D0;m_=1;const t=VT();function e(g,p){return g[p]^g[p+1]<<8^g[p+2]<<16^g[p+3]<<24}function r(g,p,m,w,E,b){o[g]=o[g]+o[p]+E,o[w]=n(o[w]^o[g],16),o[m]=o[m]+o[w],o[p]=n(o[p]^o[m],12),o[g]=o[g]+o[p]+b,o[w]=n(o[w]^o[g],8),o[m]=o[m]+o[w],o[p]=n(o[p]^o[m],7)}function n(g,p){return g>>>p^g<<32-p}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(g,p){let m=0;for(m=0;m<8;m++)o[m]=g.h[m],o[m+8]=s[m];for(o[12]^=g.t,o[13]^=g.t/4294967296,p&&(o[14]=~o[14]),m=0;m<16;m++)a[m]=e(g.b,4*m);for(m=0;m<10;m++)r(0,4,8,12,a[i[m*16+0]],a[i[m*16+1]]),r(1,5,9,13,a[i[m*16+2]],a[i[m*16+3]]),r(2,6,10,14,a[i[m*16+4]],a[i[m*16+5]]),r(3,7,11,15,a[i[m*16+6]],a[i[m*16+7]]),r(0,5,10,15,a[i[m*16+8]],a[i[m*16+9]]),r(1,6,11,12,a[i[m*16+10]],a[i[m*16+11]]),r(2,7,8,13,a[i[m*16+12]],a[i[m*16+13]]),r(3,4,9,14,a[i[m*16+14]],a[i[m*16+15]]);for(m=0;m<8;m++)g.h[m]^=o[m]^o[m+8]}function l(g,p){if(!(g>0&&g<=32))throw new Error("Incorrect output length, should be in [1, 32]");const m=p?p.length:0;if(p&&!(m>0&&m<=32))throw new Error("Incorrect key length, should be in [1, 32]");const w={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:g};return w.h[0]^=16842752^m<<8^g,m>0&&(u(w,p),w.c=64),w}function u(g,p){for(let m=0;m<p.length;m++)g.c===64&&(g.t+=g.c,c(g,!1),g.c=0),g.b[g.c++]=p[m]}function h(g){for(g.t+=g.c;g.c<64;)g.b[g.c++]=0;c(g,!0);const p=new Uint8Array(g.outlen);for(let m=0;m<g.outlen;m++)p[m]=g.h[m>>2]>>8*(m&3)&255;return p}function d(g,p,m){m=m||32,g=t.normalizeInput(g);const w=l(m,p);return u(w,g),h(w)}function f(g,p,m){const w=d(g,p,m);return t.toHex(w)}return D0={blake2s:d,blake2sHex:f,blake2sInit:l,blake2sUpdate:u,blake2sFinal:h},D0}var k0,w_;function O9(){if(w_)return k0;w_=1;const t=T9(),e=P9();return k0={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},k0}var R9=O9(),D9={};const k9=":";function Yu(t){const[e,r]=t.split(k9);return{namespace:e,reference:r}}function WT(t,e){return t.includes(":")?[t]:e.chains||[]}var U9=Object.defineProperty,B9=Object.defineProperties,L9=Object.getOwnPropertyDescriptors,y_=Object.getOwnPropertySymbols,$9=Object.prototype.hasOwnProperty,M9=Object.prototype.propertyIsEnumerable,hE=(t,e,r)=>e in t?U9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b_=(t,e)=>{for(var r in e||(e={}))$9.call(e,r)&&hE(t,r,e[r]);if(y_)for(var r of y_(e))M9.call(e,r)&&hE(t,r,e[r]);return t},F9=(t,e)=>B9(t,L9(e)),E_=(t,e,r)=>hE(t,typeof e!="symbol"?e+"":e,r);const j9="ReactNative",is={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},H9="js";function lw(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function dc(){return!Vo.getDocument()&&!!Vo.getNavigator()&&navigator.product===j9}function z9(){return dc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function q9(){return dc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Cd(){return!lw()&&!!Vo.getNavigator()&&!!Vo.getDocument()}function bg(){return dc()?is.reactNative:lw()?is.node:Cd()?is.browser:is.unknown}function v_(){var t;try{return dc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function V9(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function W9(t){var e,r;const n=GT();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),F9(b_(b_({},n),t),{url:(t==null?void 0:t.url)||n.url,name:(t==null?void 0:t.name)||n.name,description:(t==null?void 0:t.description)||n.description,icons:(r=t==null?void 0:t.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function GT(){return vM.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function G9(){if(bg()===is.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=pM();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function K9(){var t;const e=bg();return e===is.browser?[e,((t=Vo.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function KT(t,e,r){const n=G9(),s=K9();return[[t,e].join("-"),[H9,r].join("-"),n,s].join("/")}function J9({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=KT(t,e,n),h={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=V9(l[1]||"",h);return l[0]+"?"+d}function Fc(t,e){return t.filter(r=>e.includes(r)).length===t.length}function dE(t){return Object.fromEntries(t.entries())}function fE(t){return new Map(Object.entries(t))}function xc(t=de.FIVE_MINUTES,e){const r=de.toMiliseconds(t||de.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,s=c})}}function qa(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function JT(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Y9(t){return JT("topic",t)}function Q9(t){return JT("id",t)}function YT(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function dr(t,e){return de.fromMiliseconds(Date.now()+de.toMiliseconds(t))}function ya(t){return Date.now()>=de.toMiliseconds(t)}function _t(t,e){return`${t}${e?`:${e}`:""}`}function Wi(t=[],e=[]){return[...new Set([...t,...e])]}async function Z9({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=X9(i,t,e),a=bg();if(a===is.browser){if(!((n=Vo.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e7(o)}else a===is.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function X9(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${s7(n,!0)}`}else s=`${s}/wc?${n}`;return s}function e7(t){let e="_self";n7()?e="_top":(r7()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function t7(t,e){let r="";try{if(Cd()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function A_(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function C_(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function AA(){return typeof process<"u"&&D9.IS_VITEST==="true"}function r7(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function n7(){try{return window.self!==window.top}catch{return!1}}function s7(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function QT(t){return Buffer.from(t,"base64").toString("utf-8")}function i7(t){return new Promise(e=>setTimeout(e,t))}let o7=class{constructor({limit:e}){E_(this,"limit"),E_(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const Yg=BigInt(2**32-1),__=BigInt(32);function ZT(t,e=!1){return e?{h:Number(t&Yg),l:Number(t>>__&Yg)}:{h:Number(t>>__&Yg)|0,l:Number(t&Yg)|0}}function XT(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=ZT(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const I_=(t,e,r)=>t>>>r,S_=(t,e,r)=>t<<32-r|e>>>r,ba=(t,e,r)=>t>>>r|e<<32-r,Ea=(t,e,r)=>t<<32-r|e>>>r,of=(t,e,r)=>t<<64-r|e>>>r-32,af=(t,e,r)=>t>>>r-32|e<<64-r,a7=(t,e)=>e,c7=(t,e)=>t,l7=(t,e,r)=>t<<r|e>>>32-r,u7=(t,e,r)=>e<<r|t>>>32-r,h7=(t,e,r)=>e<<r-32|t>>>64-r,d7=(t,e,r)=>t<<r-32|e>>>64-r;function Bs(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const CA=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),_A=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,f7=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),p7=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,g7=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),m7=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,au=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function IA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Wo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ss(t,...e){if(!IA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function SA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Wo(t.outputLen),Wo(t.blockLen)}function tc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NA(t,e){Ss(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function yp(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ns(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function U0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function gi(t,e){return t<<32-e|t>>>e}const eP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function tP(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const fo=eP?t=>t:t=>tP(t);function w7(t){for(let e=0;e<t.length;e++)t[e]=tP(t[e]);return t}const va=eP?t=>t:w7,rP=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",y7=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bp(t){if(Ss(t),rP)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=y7[t[r]];return e}const co={_0:48,_9:57,A:65,F:70,a:97,f:102};function N_(t){if(t>=co._0&&t<=co._9)return t-co._0;if(t>=co.A&&t<=co.F)return t-(co.A-10);if(t>=co.a&&t<=co.f)return t-(co.a-10)}function xA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(rP)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=N_(t.charCodeAt(i)),a=N_(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function b7(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ti(t){return typeof t=="string"&&(t=b7(t)),Ss(t),t}function jc(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Ss(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let hy=class{};function Eg(t){const e=n=>t().update(ti(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function E7(t){const e=(n,s)=>t(s).update(ti(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function _d(t=32){if(au&&typeof au.getRandomValues=="function")return au.getRandomValues(new Uint8Array(t));if(au&&typeof au.randomBytes=="function")return Uint8Array.from(au.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const v7=BigInt(0),Vd=BigInt(1),A7=BigInt(2),C7=BigInt(7),_7=BigInt(256),I7=BigInt(113),nP=[],sP=[],iP=[];for(let t=0,e=Vd,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],nP.push(2*(5*n+r)),sP.push((t+1)*(t+2)/2%64);let s=v7;for(let i=0;i<7;i++)e=(e<<Vd^(e>>C7)*I7)%_7,e&A7&&(s^=Vd<<(Vd<<BigInt(i))-Vd);iP.push(s)}const oP=XT(iP,!0),S7=oP[0],N7=oP[1],x_=(t,e,r)=>r>32?h7(t,e,r):l7(t,e,r),T_=(t,e,r)=>r>32?d7(t,e,r):u7(t,e,r);function x7(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=x_(l,u,1)^r[a],d=T_(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=sP[o],c=x_(s,i,a),l=T_(s,i,a),u=nP[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=S7[n],t[1]^=N7[n]}Ns(r)}let T7=class aP extends hy{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,Wo(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=yp(this.state)}clone(){return this._cloneInto()}keccak(){va(this.state32),x7(this.state32,this.rounds),va(this.state32),this.posOut=0,this.pos=0}update(e){tc(this),e=ti(e),Ss(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){tc(this,!1),Ss(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Wo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(NA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ns(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new aP(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const P7=(t,e,r)=>Eg(()=>new T7(e,t,r)),O7=P7(1,136,256/8);function R7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function D7(t,e,r){return t&e^~t&r}function k7(t,e,r){return t&e^t&r^e&r}let cP=class extends hy{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=U0(this.buffer)}update(e){tc(this),e=ti(e),Ss(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=U0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tc(this),NA(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Ns(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;R7(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=U0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const ia=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),zr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),U7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),oa=new Uint32Array(64);let B7=class extends cP{constructor(e=32){super(64,e,8,!1),this.A=ia[0]|0,this.B=ia[1]|0,this.C=ia[2]|0,this.D=ia[3]|0,this.E=ia[4]|0,this.F=ia[5]|0,this.G=ia[6]|0,this.H=ia[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)oa[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=oa[h-15],f=oa[h-2],g=gi(d,7)^gi(d,18)^d>>>3,p=gi(f,17)^gi(f,19)^f>>>10;oa[h]=p+oa[h-7]+g+oa[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=gi(a,6)^gi(a,11)^gi(a,25),f=u+d+D7(a,c,l)+U7[h]+oa[h]|0,g=(gi(n,2)^gi(n,13)^gi(n,22))+k7(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Ns(oa)}destroy(){this.set(0,0,0,0,0,0,0,0),Ns(this.buffer)}};const lP=XT(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),L7=lP[0],$7=lP[1],aa=new Uint32Array(80),ca=new Uint32Array(80);let TA=class extends cP{constructor(e=64){super(128,e,16,!1),this.Ah=zr[0]|0,this.Al=zr[1]|0,this.Bh=zr[2]|0,this.Bl=zr[3]|0,this.Ch=zr[4]|0,this.Cl=zr[5]|0,this.Dh=zr[6]|0,this.Dl=zr[7]|0,this.Eh=zr[8]|0,this.El=zr[9]|0,this.Fh=zr[10]|0,this.Fl=zr[11]|0,this.Gh=zr[12]|0,this.Gl=zr[13]|0,this.Hh=zr[14]|0,this.Hl=zr[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:g,Hh:p,Hl:m}=this;return[e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m]}set(e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,r){for(let b=0;b<16;b++,r+=4)aa[b]=e.getUint32(r),ca[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const C=aa[b-15]|0,I=ca[b-15]|0,_=ba(C,I,1)^ba(C,I,8)^I_(C,I,7),O=Ea(C,I,1)^Ea(C,I,8)^S_(C,I,7),T=aa[b-2]|0,N=ca[b-2]|0,k=ba(T,N,19)^of(T,N,61)^I_(T,N,6),U=Ea(T,N,19)^af(T,N,61)^S_(T,N,6),$=f7(O,U,ca[b-7],ca[b-16]),V=p7($,_,k,aa[b-7],aa[b-16]);aa[b]=V|0,ca[b]=$|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:g,Gh:p,Gl:m,Hh:w,Hl:E}=this;for(let b=0;b<80;b++){const C=ba(h,d,14)^ba(h,d,18)^of(h,d,41),I=Ea(h,d,14)^Ea(h,d,18)^af(h,d,41),_=h&f^~h&p,O=d&g^~d&m,T=g7(E,I,O,$7[b],ca[b]),N=m7(T,w,C,_,L7[b],aa[b]),k=T|0,U=ba(n,s,28)^of(n,s,34)^of(n,s,39),$=Ea(n,s,28)^af(n,s,34)^af(n,s,39),V=n&i^n&a^i&a,z=s&o^s&c^o&c;w=p|0,E=m|0,p=f|0,m=g|0,f=h|0,g=d|0,{h,l:d}=Bs(l|0,u|0,N|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=CA(k,$,z);n=_A(v,N,U,V),s=v|0}({h:n,l:s}=Bs(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Bs(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Bs(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Bs(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Bs(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:g}=Bs(this.Fh|0,this.Fl|0,f|0,g|0),{h:p,l:m}=Bs(this.Gh|0,this.Gl|0,p|0,m|0),{h:w,l:E}=Bs(this.Hh|0,this.Hl|0,w|0,E|0),this.set(n,s,i,o,a,c,l,u,h,d,f,g,p,m,w,E)}roundClean(){Ns(aa,ca)}destroy(){Ns(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},M7=class extends TA{constructor(){super(48),this.Ah=Hr[0]|0,this.Al=Hr[1]|0,this.Bh=Hr[2]|0,this.Bl=Hr[3]|0,this.Ch=Hr[4]|0,this.Cl=Hr[5]|0,this.Dh=Hr[6]|0,this.Dl=Hr[7]|0,this.Eh=Hr[8]|0,this.El=Hr[9]|0,this.Fh=Hr[10]|0,this.Fl=Hr[11]|0,this.Gh=Hr[12]|0,this.Gl=Hr[13]|0,this.Hh=Hr[14]|0,this.Hl=Hr[15]|0}};const qr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class F7 extends TA{constructor(){super(32),this.Ah=qr[0]|0,this.Al=qr[1]|0,this.Bh=qr[2]|0,this.Bl=qr[3]|0,this.Ch=qr[4]|0,this.Cl=qr[5]|0,this.Dh=qr[6]|0,this.Dl=qr[7]|0,this.Eh=qr[8]|0,this.El=qr[9]|0,this.Fh=qr[10]|0,this.Fl=qr[11]|0,this.Gh=qr[12]|0,this.Gl=qr[13]|0,this.Hh=qr[14]|0,this.Hl=qr[15]|0}}const dy=Eg(()=>new B7),j7=Eg(()=>new TA),H7=Eg(()=>new M7),z7=Eg(()=>new F7),q7=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),ur=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),be=new Uint32Array(32);function la(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=be[2*t],l=be[2*t+1],u=be[2*e],h=be[2*e+1],d=be[2*r],f=be[2*r+1],g=be[2*n],p=be[2*n+1],m=CA(c,u,o);l=_A(m,l,h,a),c=m|0,{Dh:p,Dl:g}={Dh:p^l,Dl:g^c},{Dh:p,Dl:g}={Dh:a7(p,g),Dl:c7(p)},{h:f,l:d}=Bs(f,d,p,g),{Bh:h,Bl:u}={Bh:h^f,Bl:u^d},{Bh:h,Bl:u}={Bh:ba(h,u,24),Bl:Ea(h,u,24)},be[2*t]=c,be[2*t+1]=l,be[2*e]=u,be[2*e+1]=h,be[2*r]=d,be[2*r+1]=f,be[2*n]=g,be[2*n+1]=p}function ua(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=be[2*t],l=be[2*t+1],u=be[2*e],h=be[2*e+1],d=be[2*r],f=be[2*r+1],g=be[2*n],p=be[2*n+1],m=CA(c,u,o);l=_A(m,l,h,a),c=m|0,{Dh:p,Dl:g}={Dh:p^l,Dl:g^c},{Dh:p,Dl:g}={Dh:ba(p,g,16),Dl:Ea(p,g,16)},{h:f,l:d}=Bs(f,d,p,g),{Bh:h,Bl:u}={Bh:h^f,Bl:u^d},{Bh:h,Bl:u}={Bh:of(h,u,63),Bl:af(h,u,63)},be[2*t]=c,be[2*t+1]=l,be[2*e]=u,be[2*e+1]=h,be[2*r]=d,be[2*r+1]=f,be[2*n]=g,be[2*n+1]=p}function V7(t,e={},r,n,s){if(Wo(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class W7 extends hy{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Wo(e),Wo(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=yp(this.buffer)}update(e){tc(this),e=ti(e),Ss(e);const{blockLen:r,buffer:n,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===r&&(va(s),this.compress(s,0,!1),va(s),this.pos=0);const l=Math.min(r-this.pos,i-c),u=o+c;if(l===r&&!(u%4)&&c+l<i){const h=new Uint32Array(a,u,Math.floor((i-c)/4));va(h);for(let d=0;c+r<i;d+=s.length,c+=r)this.length+=r,this.compress(h,d,!1);va(h);continue}n.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){tc(this),NA(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Ns(this.buffer.subarray(r)),va(n),this.compress(n,0,!0),va(n);const s=yp(e);this.get().forEach((i,o)=>s[o]=fo(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=i,e.finished=s,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class G7 extends W7{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=ur[0]|0,this.v0h=ur[1]|0,this.v1l=ur[2]|0,this.v1h=ur[3]|0,this.v2l=ur[4]|0,this.v2h=ur[5]|0,this.v3l=ur[6]|0,this.v3h=ur[7]|0,this.v4l=ur[8]|0,this.v4h=ur[9]|0,this.v5l=ur[10]|0,this.v5h=ur[11]|0,this.v6l=ur[12]|0,this.v6h=ur[13]|0,this.v7l=ur[14]|0,this.v7h=ur[15]|0,V7(r,e,64,16,16);let{key:n,personalization:s,salt:i}=e,o=0;if(n!==void 0&&(n=ti(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=ti(i);const a=yp(i);this.v4l^=fo(a[0]),this.v4h^=fo(a[1]),this.v5l^=fo(a[2]),this.v5h^=fo(a[3])}if(s!==void 0){s=ti(s);const a=yp(s);this.v6l^=fo(a[0]),this.v6h^=fo(a[1]),this.v7l^=fo(a[2]),this.v7h^=fo(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:h,v5h:d,v6l:f,v6h:g,v7l:p,v7h:m}=this;return[e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m]}set(e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=h|0,this.v5h=d|0,this.v6l=f|0,this.v6h=g|0,this.v7l=p|0,this.v7h=m|0}compress(e,r,n){this.get().forEach((c,l)=>be[l]=c),be.set(ur,16);let{h:s,l:i}=ZT(BigInt(this.length));be[24]=ur[8]^i,be[25]=ur[9]^s,n&&(be[28]=~be[28],be[29]=~be[29]);let o=0;const a=q7;for(let c=0;c<12;c++)la(0,4,8,12,e,r+2*a[o++]),ua(0,4,8,12,e,r+2*a[o++]),la(1,5,9,13,e,r+2*a[o++]),ua(1,5,9,13,e,r+2*a[o++]),la(2,6,10,14,e,r+2*a[o++]),ua(2,6,10,14,e,r+2*a[o++]),la(3,7,11,15,e,r+2*a[o++]),ua(3,7,11,15,e,r+2*a[o++]),la(0,5,10,15,e,r+2*a[o++]),ua(0,5,10,15,e,r+2*a[o++]),la(1,6,11,12,e,r+2*a[o++]),ua(1,6,11,12,e,r+2*a[o++]),la(2,7,8,13,e,r+2*a[o++]),ua(2,7,8,13,e,r+2*a[o++]),la(3,4,9,14,e,r+2*a[o++]),ua(3,4,9,14,e,r+2*a[o++]);this.v0l^=be[0]^be[16],this.v0h^=be[1]^be[17],this.v1l^=be[2]^be[18],this.v1h^=be[3]^be[19],this.v2l^=be[4]^be[20],this.v2h^=be[5]^be[21],this.v3l^=be[6]^be[22],this.v3h^=be[7]^be[23],this.v4l^=be[8]^be[24],this.v4h^=be[9]^be[25],this.v5l^=be[10]^be[26],this.v5h^=be[11]^be[27],this.v6l^=be[12]^be[28],this.v6h^=be[13]^be[29],this.v7l^=be[14]^be[30],this.v7h^=be[15]^be[31],Ns(be)}destroy(){this.destroyed=!0,Ns(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const K7=E7(t=>new G7(t)),J7="https://rpc.walletconnect.org/v1";function uP(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(O7(r)).toString("hex")}async function Y7(t,e,r,n,s,i){switch(r.t){case"eip191":return await Q7(t,e,r.s);case"eip1271":return await Z7(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function Q7(t,e,r){return(await MM({hash:uP(e),signature:r})).toLowerCase()===t.toLowerCase()}async function Z7(t,e,r,n,s,i){const o=Yu(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=r.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),h=(e.startsWith("0x")?e:uP(e)).substring(2),d=a+h+c+u+l,f=await fetch(`${i||J7}/?chainId=${n}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:X7(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:g}=await f.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function X7(){return Date.now()+Math.floor(Math.random()*1e3)}function ej(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ad.encode(i)}function tj(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const s=K7(n,{dkLen:32});return Ad.encode(s)}function P_(t){const e=new Uint8Array(dy(rj(t)));return Ad.encode(e)}function rj(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function O_(t){const e=Buffer.from(t,"base64"),r=CF(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=pF(r),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(n)]),o=z7(i);return OF.encode(o).replace(/=+$/,"")}function B0(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function nj(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(B0(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(B0(r.length)),s.push(r),s.push(Buffer.from([26])),s.push(B0(n.length)),s.push(n);const i=Buffer.concat(s),o=dy(i);return Buffer.from(o).toString("hex").toUpperCase()}var sj=Object.defineProperty,ij=Object.defineProperties,oj=Object.getOwnPropertyDescriptors,R_=Object.getOwnPropertySymbols,aj=Object.prototype.hasOwnProperty,cj=Object.prototype.propertyIsEnumerable,D_=(t,e,r)=>e in t?sj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lj=(t,e)=>{for(var r in e||(e={}))aj.call(e,r)&&D_(t,r,e[r]);if(R_)for(var r of R_(e))cj.call(e,r)&&D_(t,r,e[r]);return t},uj=(t,e)=>ij(t,oj(e));const hj="did:pkh:",PA=t=>t==null?void 0:t.split(":"),dj=t=>{const e=t&&PA(t);if(e)return t.includes(hj)?e[3]:e[1]},pE=t=>{const e=t&&PA(t);if(e)return e[2]+":"+e[3]},uw=t=>{const e=t&&PA(t);if(e)return e.pop()};async function k_(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=hP(s,s.iss),o=uw(s.iss);return await Y7(o,i,n,pE(s.iss),r)}const hP=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=uw(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${dj(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(p=>`
- ${p}`).join("")}`:void 0,g=Sm(t.resources);if(g){const p=Ep(g);s=vj(s,p)}return[r,n,"",s,"",i,o,a,c,l,u,h,d,f].filter(p=>p!=null).join(`
`)};function fj(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function pj(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function kl(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function gj(t,e,r,n={}){return r==null||r.sort((s,i)=>s.localeCompare(i)),{att:{[t]:mj(e,r,n)}}}function mj(t,e,r={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function dP(t){return kl(t),`urn:recap:${fj(t).replace(/=/g,"")}`}function Ep(t){const e=pj(t.replace("urn:recap:",""));return kl(e),e}function wj(t,e,r){const n=gj(t,e,r);return dP(n)}function yj(t){return t&&t.includes("urn:recap:")}function bj(t,e){const r=Ep(t),n=Ep(e),s=Ej(r,n);return dP(s)}function Ej(t,e){kl(t),kl(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[s]=uj(lj({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),n}function vj(t="",e){kl(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(s++,`(${s}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function U_(t){var e;const r=Ep(t);kl(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function B_(t){const e=Ep(t);kl(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function Sm(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return yj(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function fP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gE(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function L0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function kn(t,...e){if(!fP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function L_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Aj(t,e){kn(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Ka(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function td(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Cj(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const _j=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ij(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function mE(t){if(typeof t=="string")t=Ij(t);else if(fP(t))t=wE(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Sj(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Nj(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const xj=(t,e)=>{function r(n,...s){if(kn(n),!_j)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?kn(l):kn(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&kn(s[1]);const o=e(n,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");kn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,kn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(kn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function $_(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Pj(e))throw new Error("invalid output, must be aligned");return e}function M_(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function Tj(t,e,r){gE(r);const n=new Uint8Array(16),s=Cj(n);return M_(s,0,BigInt(e),r),M_(s,8,BigInt(t),r),n}function Pj(t){return t.byteOffset%4===0}function wE(t){return Uint8Array.from(t)}const pP=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Oj=pP("expand 16-byte k"),Rj=pP("expand 32-byte k"),Dj=Ka(Oj),kj=Ka(Rj);function pt(t,e){return t<<e|t>>>32-e}function yE(t){return t.byteOffset%4===0}const Qg=64,Uj=16,gP=2**32-1,F_=new Uint32Array;function Bj(t,e,r,n,s,i,o,a){const c=s.length,l=new Uint8Array(Qg),u=Ka(l),h=yE(s)&&yE(i),d=h?Ka(s):F_,f=h?Ka(i):F_;for(let g=0;g<c;o++){if(t(e,r,n,u,o,a),o>=gP)throw new Error("arx: counter overflow");const p=Math.min(Qg,c-g);if(h&&p===Qg){const m=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let w=0,E;w<Uj;w++)E=m+w,f[E]=d[E]^u[w];g+=Qg;continue}for(let m=0,w;m<p;m++)w=g+m,i[w]=s[w]^l[m];g+=p}}function Lj(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=Sj({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return L0(s),L0(o),gE(i),gE(r),(a,c,l,u,h=0)=>{kn(a),kn(c),kn(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),kn(u),L0(h),h<0||h>=gP)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const f=[];let g=a.length,p,m;if(g===32)f.push(p=wE(a)),m=kj;else if(g===16&&r)p=new Uint8Array(32),p.set(a),p.set(a,16),m=Dj,f.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);yE(c)||f.push(c=wE(c));const w=Ka(p);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(m,w,Ka(c.subarray(0,16)),w),c=c.subarray(16)}const E=16-s;if(E!==c.length)throw new Error(`arx: nonce must be ${E} or 16 bytes`);if(E!==12){const C=new Uint8Array(12);C.set(c,i?0:12-c.length),c=C,f.push(c)}const b=Ka(c);return Bj(t,m,w,b,l,u,h,o),td(...f),u}}const Nr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class $j{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=mE(e),kn(e,32);const r=Nr(e,0),n=Nr(e,2),s=Nr(e,4),i=Nr(e,6),o=Nr(e,8),a=Nr(e,10),c=Nr(e,12),l=Nr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Nr(e,16+2*u)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],f=o[6],g=o[7],p=o[8],m=o[9],w=Nr(e,r+0),E=Nr(e,r+2),b=Nr(e,r+4),C=Nr(e,r+6),I=Nr(e,r+8),_=Nr(e,r+10),O=Nr(e,r+12),T=Nr(e,r+14);let N=i[0]+(w&8191),k=i[1]+((w>>>13|E<<3)&8191),U=i[2]+((E>>>10|b<<6)&8191),$=i[3]+((b>>>7|C<<9)&8191),V=i[4]+((C>>>4|I<<12)&8191),z=i[5]+(I>>>1&8191),v=i[6]+((I>>>14|_<<2)&8191),S=i[7]+((_>>>11|O<<5)&8191),R=i[8]+((O>>>8|T<<8)&8191),L=i[9]+(T>>>5|s),F=0,j=F+N*a+k*(5*m)+U*(5*p)+$*(5*g)+V*(5*f);F=j>>>13,j&=8191,j+=z*(5*d)+v*(5*h)+S*(5*u)+R*(5*l)+L*(5*c),F+=j>>>13,j&=8191;let K=F+N*c+k*a+U*(5*m)+$*(5*p)+V*(5*g);F=K>>>13,K&=8191,K+=z*(5*f)+v*(5*d)+S*(5*h)+R*(5*u)+L*(5*l),F+=K>>>13,K&=8191;let Q=F+N*l+k*c+U*a+$*(5*m)+V*(5*p);F=Q>>>13,Q&=8191,Q+=z*(5*g)+v*(5*f)+S*(5*d)+R*(5*h)+L*(5*u),F+=Q>>>13,Q&=8191;let ce=F+N*u+k*l+U*c+$*a+V*(5*m);F=ce>>>13,ce&=8191,ce+=z*(5*p)+v*(5*g)+S*(5*f)+R*(5*d)+L*(5*h),F+=ce>>>13,ce&=8191;let ie=F+N*h+k*u+U*l+$*c+V*a;F=ie>>>13,ie&=8191,ie+=z*(5*m)+v*(5*p)+S*(5*g)+R*(5*f)+L*(5*d),F+=ie>>>13,ie&=8191;let we=F+N*d+k*h+U*u+$*l+V*c;F=we>>>13,we&=8191,we+=z*a+v*(5*m)+S*(5*p)+R*(5*g)+L*(5*f),F+=we>>>13,we&=8191;let Te=F+N*f+k*d+U*h+$*u+V*l;F=Te>>>13,Te&=8191,Te+=z*c+v*a+S*(5*m)+R*(5*p)+L*(5*g),F+=Te>>>13,Te&=8191;let ze=F+N*g+k*f+U*d+$*h+V*u;F=ze>>>13,ze&=8191,ze+=z*l+v*c+S*a+R*(5*m)+L*(5*p),F+=ze>>>13,ze&=8191;let Xe=F+N*p+k*g+U*f+$*d+V*h;F=Xe>>>13,Xe&=8191,Xe+=z*u+v*l+S*c+R*a+L*(5*m),F+=Xe>>>13,Xe&=8191;let He=F+N*m+k*p+U*g+$*f+V*d;F=He>>>13,He&=8191,He+=z*h+v*u+S*l+R*c+L*a,F+=He>>>13,He&=8191,F=(F<<2)+F|0,F=F+j|0,j=F&8191,F=F>>>13,K+=F,i[0]=j,i[1]=K,i[2]=Q,i[3]=ce,i[4]=ie,i[5]=we,i[6]=Te,i[7]=ze,i[8]=Xe,i[9]=He}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;td(n)}update(e){L_(this),e=mE(e),kn(e);const{buffer:r,blockLen:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){td(this.h,this.r,this.buffer,this.pad)}digestInto(e){L_(this),Aj(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Mj(t){const e=(n,s)=>t(s).update(mE(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Fj=Mj(t=>new $j(t));function jj(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],f=e[3],g=e[4],p=e[5],m=e[6],w=e[7],E=s,b=r[0],C=r[1],I=r[2],_=o,O=a,T=c,N=l,k=u,U=h,$=d,V=f,z=g,v=p,S=m,R=w,L=E,F=b,j=C,K=I;for(let ce=0;ce<i;ce+=2)_=_+k|0,L=pt(L^_,16),z=z+L|0,k=pt(k^z,12),_=_+k|0,L=pt(L^_,8),z=z+L|0,k=pt(k^z,7),O=O+U|0,F=pt(F^O,16),v=v+F|0,U=pt(U^v,12),O=O+U|0,F=pt(F^O,8),v=v+F|0,U=pt(U^v,7),T=T+$|0,j=pt(j^T,16),S=S+j|0,$=pt($^S,12),T=T+$|0,j=pt(j^T,8),S=S+j|0,$=pt($^S,7),N=N+V|0,K=pt(K^N,16),R=R+K|0,V=pt(V^R,12),N=N+V|0,K=pt(K^N,8),R=R+K|0,V=pt(V^R,7),_=_+U|0,K=pt(K^_,16),S=S+K|0,U=pt(U^S,12),_=_+U|0,K=pt(K^_,8),S=S+K|0,U=pt(U^S,7),O=O+$|0,L=pt(L^O,16),R=R+L|0,$=pt($^R,12),O=O+$|0,L=pt(L^O,8),R=R+L|0,$=pt($^R,7),T=T+V|0,F=pt(F^T,16),z=z+F|0,V=pt(V^z,12),T=T+V|0,F=pt(F^T,8),z=z+F|0,V=pt(V^z,7),N=N+k|0,j=pt(j^N,16),v=v+j|0,k=pt(k^v,12),N=N+k|0,j=pt(j^N,8),v=v+j|0,k=pt(k^v,7);let Q=0;n[Q++]=o+_|0,n[Q++]=a+O|0,n[Q++]=c+T|0,n[Q++]=l+N|0,n[Q++]=u+k|0,n[Q++]=h+U|0,n[Q++]=d+$|0,n[Q++]=f+V|0,n[Q++]=g+z|0,n[Q++]=p+v|0,n[Q++]=m+S|0,n[Q++]=w+R|0,n[Q++]=E+L|0,n[Q++]=b+F|0,n[Q++]=C+j|0,n[Q++]=I+K|0}const Hj=Lj(jj,{counterRight:!1,counterLength:4,allowShortKeys:!1}),zj=new Uint8Array(16),j_=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(zj.subarray(r))},qj=new Uint8Array(32);function H_(t,e,r,n,s){const i=t(e,r,qj),o=Fj.create(i);s&&j_(o,s),j_(o,n);const a=Tj(n.length,s?s.length:0,!0);o.update(a);const c=o.digest();return td(i,a),c}const Vj=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=$_(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=H_(t,e,r,a,n);return i.set(c,o),td(c),i},decrypt(s,i){i=$_(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=H_(t,e,r,o,n);if(!Nj(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),td(c),i}}),mP=xj({blockSize:64,nonceLength:12,tagLength:16},Vj(Hj));let wP=class extends hy{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,SA(e);const n=ti(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ns(i)}update(e){return tc(this),this.iHash.update(e),this}digestInto(e){tc(this),Ss(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const fy=(t,e,r)=>new wP(t,e).update(r).digest();fy.create=(t,e)=>new wP(t,e);function Wj(t,e,r){return SA(t),r===void 0&&(r=new Uint8Array(t.outputLen)),fy(t,ti(r),ti(e))}const $0=Uint8Array.from([0]),z_=Uint8Array.of();function Gj(t,e,r,n=32){SA(t),Wo(n);const s=t.outputLen;if(n>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/s);r===void 0&&(r=z_);const o=new Uint8Array(i*s),a=fy.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)$0[0]=u+1,c.update(u===0?z_:l).update(r).update($0).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Ns(l,$0),o.slice(0,n)}const Kj=(t,e,r,n,s)=>Gj(t,Wj(t,e,r),n,s),py=dy,OA=BigInt(0),bE=BigInt(1);function hw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Zg(t){const e=t.toString(16);return e.length&1?"0"+e:e}function yP(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?OA:BigInt("0x"+t)}function gy(t){return yP(bp(t))}function dw(t){return Ss(t),yP(bp(Uint8Array.from(t).reverse()))}function RA(t,e){return xA(t.toString(16).padStart(e*2,"0"))}function DA(t,e){return RA(t,e).reverse()}function Dn(t,e,r){let n;if(typeof e=="string")try{n=xA(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(IA(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const M0=t=>typeof t=="bigint"&&OA<=t;function Jj(t,e,r){return M0(t)&&M0(e)&&M0(r)&&e<=t&&t<r}function EE(t,e,r,n){if(!Jj(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Yj(t){let e;for(e=0;t>OA;t>>=bE,e+=1);return e}const my=t=>(bE<<BigInt(t))-bE;function Qj(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=d=>new Uint8Array(d),s=d=>Uint8Array.of(d);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...d)=>r(o,i,...d),u=(d=n(0))=>{o=l(s(0),d),i=l(),d.length!==0&&(o=l(s(1),d),i=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){i=l();const g=i.slice();f.push(g),d+=i.length}return jc(...f)};return(d,f)=>{c(),u(d);let g;for(;!(g=f(h()));)u();return c(),g}}function wy(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function q_(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Ln=BigInt(0),mn=BigInt(1),Hc=BigInt(2),Zj=BigInt(3),bP=BigInt(4),EP=BigInt(5),vP=BigInt(8);function Cs(t,e){const r=t%e;return r>=Ln?r:e+r}function Us(t,e,r){let n=t;for(;e-- >Ln;)n*=n,n%=r;return n}function V_(t,e){if(t===Ln)throw new Error("invert: expected non-zero number");if(e<=Ln)throw new Error("invert: expected positive modulus, got "+e);let r=Cs(t,e),n=e,s=Ln,i=mn;for(;r!==Ln;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==mn)throw new Error("invert: does not exist");return Cs(s,e)}function AP(t,e){const r=(t.ORDER+mn)/bP,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function Xj(t,e){const r=(t.ORDER-EP)/vP,n=t.mul(e,Hc),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,Hc),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function eH(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-mn,r=0;for(;e%Hc===Ln;)e/=Hc,r++;let n=Hc;const s=Id(t);for(;W_(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return AP;let i=s.pow(n,e);const o=(e+mn)/Hc;return function(a,c){if(a.is0(c))return c;if(W_(a,c)!==1)throw new Error("Cannot find square root");let l=r,u=a.mul(a.ONE,i),h=a.pow(c,e),d=a.pow(c,o);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let f=1,g=a.sqr(h);for(;!a.eql(g,a.ONE);)if(f++,g=a.sqr(g),f===l)throw new Error("Cannot find square root");const p=mn<<BigInt(l-f-1),m=a.pow(u,p);l=f,u=a.sqr(m),h=a.mul(h,u),d=a.mul(d,m)}return d}}function tH(t){return t%bP===Zj?AP:t%vP===EP?Xj:eH(t)}const rH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nH(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=rH.reduce((n,s)=>(n[s]="function",n),e);return wy(t,r),t}function sH(t,e,r){if(r<Ln)throw new Error("invalid exponent, negatives unsupported");if(r===Ln)return t.ONE;if(r===mn)return e;let n=t.ONE,s=e;for(;r>Ln;)r&mn&&(n=t.mul(n,s)),s=t.sqr(s),r>>=mn;return n}function CP(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function W_(t,e){const r=(t.ORDER-mn)/Hc,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function iH(t,e){e!==void 0&&Wo(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Id(t,e,r=!1,n={}){if(t<=Ln)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(r=u.isLE)}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=iH(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:a,MASK:my(o),ZERO:Ln,ONE:mn,create:u=>Cs(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ln<=u&&u<t},is0:u=>u===Ln,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&mn)===mn,neg:u=>Cs(-u,t),eql:(u,h)=>u===h,sqr:u=>Cs(u*u,t),add:(u,h)=>Cs(u+h,t),sub:(u,h)=>Cs(u-h,t),mul:(u,h)=>Cs(u*h,t),pow:(u,h)=>sH(l,u,h),div:(u,h)=>Cs(u*V_(h,t),t),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>V_(u,t),sqrt:i||(u=>(c||(c=tH(t)),c(l,u))),toBytes:u=>r?DA(u,a):RA(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return r?dw(u):gy(u)},invertBatch:u=>CP(l,u),cmov:(u,h,d)=>d?h:u});return Object.freeze(l)}function _P(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function IP(t){const e=_P(t);return e+Math.ceil(e/2)}function oH(t,e,r=!1){const n=t.length,s=_P(e),i=IP(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?dw(t):gy(t),a=Cs(o,e-mn)+mn;return r?DA(a,s):RA(a,s)}const rd=BigInt(0),zc=BigInt(1);function xf(t,e){const r=e.negate();return t?r:e}function aH(t,e,r){const n=i=>i.pz,s=CP(t.Fp,r.map(n));return r.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function SP(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function F0(t,e){SP(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=my(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function G_(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=zc);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:f,offsetF:l}}function cH(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function lH(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const j0=new WeakMap,NP=new WeakMap;function H0(t){return NP.get(t)||1}function K_(t){if(t!==rd)throw new Error("invalid wNAF")}function uH(t,e){return{constTimeNegate:xf,hasPrecomputes(r){return H0(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>rd;)n&zc&&(s=s.add(i)),i=i.double(),n>>=zc;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=F0(n,e),o=[];let a=r,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){let i=t.ZERO,o=t.BASE;const a=F0(r,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:h,isNeg:d,isNegF:f,offsetF:g}=G_(s,c,a);s=l,h?o=o.add(xf(f,n[g])):i=i.add(xf(d,n[u]))}return K_(s),{p:i,f:o}},wNAFUnsafe(r,n,s,i=t.ZERO){const o=F0(r,e);for(let a=0;a<o.windows&&s!==rd;a++){const{nextN:c,offset:l,isZero:u,isNeg:h}=G_(s,a,o);if(s=c,!u){const d=n[l];i=i.add(h?d.negate():d)}}return K_(s),i},getPrecomputes(r,n,s){let i=j0.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&(typeof s=="function"&&(i=s(i)),j0.set(n,i))),i},wNAFCached(r,n,s){const i=H0(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=H0(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){SP(n,e),NP.set(r,n),j0.delete(r)}}}function hH(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>rd||n>rd;)r&zc&&(i=i.add(s)),n&zc&&(o=o.add(s)),s=s.double(),r>>=zc,n>>=zc;return{p1:i,p2:o}}function dH(t,e,r,n){cH(r,t),lH(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Yj(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=my(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let f=h;f>=0;f-=c){u.fill(o);for(let p=0;p<i;p++){const m=n[p],w=Number(m>>BigInt(f)&l);u[w]=u[w].add(r[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(d=d.add(g),f!==0)for(let p=0;p<c;p++)d=d.double()}return d}function J_(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return nH(e),e}else return Id(t)}function fH(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>rd))throw new Error(`CURVE.${o} must be positive bigint`)}const n=J_(e.p,r.Fp),s=J_(e.n,r.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Wd=BigInt(0),cu=BigInt(1),Xg=BigInt(2);function pH(t){return wy(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function gH(t){const e=pH(t),{P:r,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||_d,l=a?255:448,u=a?32:56,h=BigInt(a?9:5),d=BigInt(a?121665:39081),f=a?Xg**BigInt(254):Xg**BigInt(447),g=a?BigInt(8)*Xg**BigInt(251)-cu:BigInt(4)*Xg**BigInt(445)-cu,p=f+g+cu,m=N=>Cs(N,r),w=E(h);function E(N){return DA(m(N),u)}function b(N){const k=Dn("u coordinate",N,u);return a&&(k[31]&=127),m(dw(k))}function C(N){return dw(s(Dn("scalar",N,u)))}function I(N,k){const U=T(b(k),C(N));if(U===Wd)throw new Error("invalid private or public key received");return E(U)}function _(N){return I(N,w)}function O(N,k,U){const $=m(N*(k-U));return k=m(k-$),U=m(U+$),{x_2:k,x_3:U}}function T(N,k){EE("u",N,Wd,r),EE("scalar",k,f,p);const U=k,$=N;let V=cu,z=Wd,v=N,S=cu,R=Wd;for(let F=BigInt(l-1);F>=Wd;F--){const j=U>>F&cu;R^=j,{x_2:V,x_3:v}=O(R,V,v),{x_2:z,x_3:S}=O(R,z,S),R=j;const K=V+z,Q=m(K*K),ce=V-z,ie=m(ce*ce),we=Q-ie,Te=v+S,ze=v-S,Xe=m(ze*K),He=m(Te*ce),ct=Xe+He,rr=Xe-He;v=m(ct*ct),S=m($*m(rr*rr)),V=m(Q*ie),z=m(we*(Q+m(d*we)))}({x_2:V,x_3:v}=O(R,V,v)),{x_2:z,x_3:S}=O(R,z,S);const L=i(z);return m(V*L)}return{scalarMult:I,scalarMultBase:_,getSharedSecret:(N,k)=>I(N,k),getPublicKey:N=>_(N),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const mH=BigInt(1),Y_=BigInt(2),wH=BigInt(3),yH=BigInt(5);BigInt(8);const xP={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function bH(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=xP.p,o=t*t%i*t%i,a=Us(o,Y_,i)*o%i,c=Us(a,mH,i)*t%i,l=Us(c,yH,i)*c%i,u=Us(l,e,i)*l%i,h=Us(u,r,i)*u%i,d=Us(h,n,i)*h%i,f=Us(d,s,i)*d%i,g=Us(f,s,i)*d%i,p=Us(g,e,i)*l%i;return{pow_p_5_8:Us(p,Y_,i)*t%i,b2:o}}function EH(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const vE=(()=>{const t=xP.p;return gH({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=bH(e);return Cs(Us(r,wH,t)*n,t)},adjustScalarBytes:EH})})();function Q_(t){t.lowS!==void 0&&hw("lowS",t.lowS),t.prehash!==void 0&&hw("prehash",t.prehash)}class vH extends Error{constructor(e=""){super(e)}}const bo={Err:vH,_tlv:{encode:(t,e)=>{const{Err:r}=bo;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=Zg(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?Zg(s.length/2|128):"";return Zg(t)+i+s+e},decode(t,e){const{Err:r}=bo;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=bo;if(t<Tf)throw new e("integer: negative integers are not allowed");let r=Zg(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=bo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gy(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=bo,s=Dn("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=bo,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Tf=BigInt(0),Pf=BigInt(1),AH=BigInt(2),em=BigInt(3),CH=BigInt(4);function _H(t,e,r){function n(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),r)}return n}function TP(t,e,r){const{BYTES:n}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Dn("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(r&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function IH(t,e={}){const{Fp:r,Fn:n}=fH("weierstrass",t,e),{h:s,n:i}=t;wy(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!r.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,N,k){const{x:U,y:$}=N.toAffine(),V=r.toBytes(U);if(hw("isCompressed",k),k){a();const z=!r.isOdd($);return jc(PP(z),V)}else return jc(Uint8Array.of(4),V,r.toBytes($))}function l(T){Ss(T);const N=r.BYTES,k=N+1,U=2*N+1,$=T.length,V=T[0],z=T.subarray(1);if($===k&&(V===2||V===3)){const v=r.fromBytes(z);if(!r.isValid(v))throw new Error("bad point: is not on curve, wrong x");const S=d(v);let R;try{R=r.sqrt(S)}catch(F){const j=F instanceof Error?": "+F.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}a();const L=r.isOdd(R);return(V&1)===1!==L&&(R=r.neg(R)),{x:v,y:R}}else if($===U&&V===4){const v=r.fromBytes(z.subarray(N*0,N*1)),S=r.fromBytes(z.subarray(N*1,N*2));if(!f(v,S))throw new Error("bad point: is not on curve");return{x:v,y:S}}else throw new Error(`bad point: got length ${$}, expected compressed=${k} or uncompressed=${U}`)}const u=e.toBytes||c,h=e.fromBytes||l,d=_H(r,t.a,t.b);function f(T,N){const k=r.sqr(N),U=d(T);return r.eql(k,U)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(t.a,em),CH),p=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(g,p)))throw new Error("bad curve params: a or b");function m(T,N,k=!1){if(!r.isValid(N)||k&&r.is0(N))throw new Error(`bad point coordinate ${T}`);return N}function w(T){if(!(T instanceof I))throw new Error("ProjectivePoint expected")}const E=q_((T,N)=>{const{px:k,py:U,pz:$}=T;if(r.eql($,r.ONE))return{x:k,y:U};const V=T.is0();N==null&&(N=V?r.ONE:r.inv($));const z=r.mul(k,N),v=r.mul(U,N),S=r.mul($,N);if(V)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:z,y:v}}),b=q_(T=>{if(T.is0()){if(e.allowInfinityPoint&&!r.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:N,y:k}=T.toAffine();if(!r.isValid(N)||!r.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(N,k))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function C(T,N,k,U,$){return k=new I(r.mul(k.px,T),k.py,k.pz),N=xf(U,N),k=xf($,k),N.add(k)}class I{constructor(N,k,U){this.px=m("x",N),this.py=m("y",k,!0),this.pz=m("z",U),Object.freeze(this)}static fromAffine(N){const{x:k,y:U}=N||{};if(!N||!r.isValid(k)||!r.isValid(U))throw new Error("invalid affine point");if(N instanceof I)throw new Error("projective point not allowed");return r.is0(k)&&r.is0(U)?I.ZERO:new I(k,U,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){return aH(I,"pz",N)}static fromBytes(N){return Ss(N),I.fromHex(N)}static fromHex(N){const k=I.fromAffine(h(Dn("pointHex",N)));return k.assertValidity(),k}static fromPrivateKey(N){const k=TP(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return I.BASE.multiply(k(N))}static msm(N,k){return dH(I,n,N,k)}precompute(N=8,k=!0){return O.setWindowSize(this,N),k||this.multiply(em),this}_setWindowSize(N){this.precompute(N)}assertValidity(){b(this)}hasEvenY(){const{y:N}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(N)}equals(N){w(N);const{px:k,py:U,pz:$}=this,{px:V,py:z,pz:v}=N,S=r.eql(r.mul(k,v),r.mul(V,$)),R=r.eql(r.mul(U,v),r.mul(z,$));return S&&R}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){const{a:N,b:k}=t,U=r.mul(k,em),{px:$,py:V,pz:z}=this;let v=r.ZERO,S=r.ZERO,R=r.ZERO,L=r.mul($,$),F=r.mul(V,V),j=r.mul(z,z),K=r.mul($,V);return K=r.add(K,K),R=r.mul($,z),R=r.add(R,R),v=r.mul(N,R),S=r.mul(U,j),S=r.add(v,S),v=r.sub(F,S),S=r.add(F,S),S=r.mul(v,S),v=r.mul(K,v),R=r.mul(U,R),j=r.mul(N,j),K=r.sub(L,j),K=r.mul(N,K),K=r.add(K,R),R=r.add(L,L),L=r.add(R,L),L=r.add(L,j),L=r.mul(L,K),S=r.add(S,L),j=r.mul(V,z),j=r.add(j,j),L=r.mul(j,K),v=r.sub(v,L),R=r.mul(j,F),R=r.add(R,R),R=r.add(R,R),new I(v,S,R)}add(N){w(N);const{px:k,py:U,pz:$}=this,{px:V,py:z,pz:v}=N;let S=r.ZERO,R=r.ZERO,L=r.ZERO;const F=t.a,j=r.mul(t.b,em);let K=r.mul(k,V),Q=r.mul(U,z),ce=r.mul($,v),ie=r.add(k,U),we=r.add(V,z);ie=r.mul(ie,we),we=r.add(K,Q),ie=r.sub(ie,we),we=r.add(k,$);let Te=r.add(V,v);return we=r.mul(we,Te),Te=r.add(K,ce),we=r.sub(we,Te),Te=r.add(U,$),S=r.add(z,v),Te=r.mul(Te,S),S=r.add(Q,ce),Te=r.sub(Te,S),L=r.mul(F,we),S=r.mul(j,ce),L=r.add(S,L),S=r.sub(Q,L),L=r.add(Q,L),R=r.mul(S,L),Q=r.add(K,K),Q=r.add(Q,K),ce=r.mul(F,ce),we=r.mul(j,we),Q=r.add(Q,ce),ce=r.sub(K,ce),ce=r.mul(F,ce),we=r.add(we,ce),K=r.mul(Q,we),R=r.add(R,K),K=r.mul(Te,we),S=r.mul(ie,S),S=r.sub(S,K),K=r.mul(ie,Q),L=r.mul(Te,L),L=r.add(L,K),new I(S,R,L)}subtract(N){return this.add(N.negate())}is0(){return this.equals(I.ZERO)}multiply(N){const{endo:k}=e;if(!n.isValidNot0(N))throw new Error("invalid scalar: out of range");let U,$;const V=z=>O.wNAFCached(this,z,I.normalizeZ);if(k){const{k1neg:z,k1:v,k2neg:S,k2:R}=k.splitScalar(N),{p:L,f:F}=V(v),{p:j,f:K}=V(R);$=F.add(K),U=C(k.beta,L,j,z,S)}else{const{p:z,f:v}=V(N);U=z,$=v}return I.normalizeZ([U,$])[0]}multiplyUnsafe(N){const{endo:k}=e,U=this;if(!n.isValid(N))throw new Error("invalid scalar: out of range");if(N===Tf||U.is0())return I.ZERO;if(N===Pf)return U;if(O.hasPrecomputes(this))return this.multiply(N);if(k){const{k1neg:$,k1:V,k2neg:z,k2:v}=k.splitScalar(N),{p1:S,p2:R}=hH(I,U,V,v);return C(k.beta,S,R,$,z)}else return O.wNAFCachedUnsafe(U,N)}multiplyAndAddUnsafe(N,k,U){const $=this.multiplyUnsafe(k).add(N.multiplyUnsafe(U));return $.is0()?void 0:$}toAffine(N){return E(this,N)}isTorsionFree(){const{isTorsionFree:N}=e;return s===Pf?!0:N?N(I,this):O.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:N}=e;return s===Pf?this:N?N(I,this):this.multiplyUnsafe(s)}toBytes(N=!0){return hw("isCompressed",N),this.assertValidity(),u(I,this,N)}toRawBytes(N=!0){return this.toBytes(N)}toHex(N=!0){return bp(this.toBytes(N))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(t.Gx,t.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO),I.Fp=r,I.Fn=n;const _=n.BITS,O=uH(I,e.endo?Math.ceil(_/2):_);return I}function PP(t){return Uint8Array.of(t?2:3)}function SH(t,e,r={}){wy(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||_d,s=e.hmac||((U,...$)=>fy(e.hash,U,jc(...$))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(U){const $=a>>Pf;return U>$}function u(U){return l(U)?o.neg(U):U}function h(U,$){if(!o.isValidNot0($))throw new Error(`invalid signature ${U}: out of range 1..CURVE.n`)}class d{constructor($,V,z){h("r",$),h("s",V),this.r=$,this.s=V,z!=null&&(this.recovery=z),Object.freeze(this)}static fromCompact($){const V=o.BYTES,z=Dn("compactSignature",$,V*2);return new d(o.fromBytes(z.subarray(0,V)),o.fromBytes(z.subarray(V,V*2)))}static fromDER($){const{r:V,s:z}=bo.toSig(Dn("DER",$));return new d(V,z)}assertValidity(){}addRecoveryBit($){return new d(this.r,this.s,$)}recoverPublicKey($){const V=i.ORDER,{r:z,s:v,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*AH<V&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=S===2||S===3?z+a:z;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const L=i.toBytes(R),F=t.fromHex(jc(PP((S&1)===0),L)),j=o.inv(R),K=b(Dn("msgHash",$)),Q=o.create(-K*j),ce=o.create(v*j),ie=t.BASE.multiplyUnsafe(Q).add(F.multiplyUnsafe(ce));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,o.neg(this.s),this.recovery):this}toBytes($){if($==="compact")return jc(o.toBytes(this.r),o.toBytes(this.s));if($==="der")return xA(bo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bp(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bp(this.toBytes("compact"))}}const f=TP(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey),g={isValidPrivateKey(U){try{return f(U),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const U=a;return oH(n(IP(U)),U)},precompute(U=8,$=t.BASE){return $.precompute(U,!1)}};function p(U,$=!0){return t.fromPrivateKey(U).toBytes($)}function m(U){if(typeof U=="bigint")return!1;if(U instanceof t)return!0;const $=Dn("key",U).length,V=i.BYTES,z=V+1,v=2*V+1;if(!(r.allowedPrivateKeyLengths||o.BYTES===z))return $===z||$===v}function w(U,$,V=!0){if(m(U)===!0)throw new Error("first arg must be private key");if(m($)===!1)throw new Error("second arg must be public key");return t.fromHex($).multiply(f(U)).toBytes(V)}const E=e.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");const $=gy(U),V=U.length*8-c;return V>0?$>>BigInt(V):$},b=e.bits2int_modN||function(U){return o.create(E(U))},C=my(c);function I(U){return EE("num < 2^"+c,U,Tf,C),o.toBytes(U)}function _(U,$,V=O){if(["recovered","canonical"].some(ie=>ie in V))throw new Error("sign() legacy options not supported");const{hash:z}=e;let{lowS:v,prehash:S,extraEntropy:R}=V;v==null&&(v=!0),U=Dn("msgHash",U),Q_(V),S&&(U=Dn("prehashed msgHash",z(U)));const L=b(U),F=f($),j=[I(F),I(L)];if(R!=null&&R!==!1){const ie=R===!0?n(i.BYTES):R;j.push(Dn("extraEntropy",ie))}const K=jc(...j),Q=L;function ce(ie){const we=E(ie);if(!o.isValidNot0(we))return;const Te=o.inv(we),ze=t.BASE.multiply(we).toAffine(),Xe=o.create(ze.x);if(Xe===Tf)return;const He=o.create(Te*o.create(Q+Xe*F));if(He===Tf)return;let ct=(ze.x===Xe?0:2)|Number(ze.y&Pf),rr=He;return v&&l(He)&&(rr=u(He),ct^=1),new d(Xe,rr,ct)}return{seed:K,k2sig:ce}}const O={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function N(U,$,V=O){const{seed:z,k2sig:v}=_(U,$,V);return Qj(e.hash.outputLen,o.BYTES,s)(z,v)}t.BASE.precompute(8);function k(U,$,V,z=T){const v=U;$=Dn("msgHash",$),V=Dn("publicKey",V),Q_(z);const{lowS:S,prehash:R,format:L}=z;if("strict"in z)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&!["compact","der","js"].includes(L))throw new Error('format must be "compact", "der" or "js"');const F=typeof v=="string"||IA(v),j=!F&&!L&&typeof v=="object"&&v!==null&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!F&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,Q;try{if(j)if(L===void 0||L==="js")K=new d(v.r,v.s);else throw new Error("invalid format");if(F){try{L!=="compact"&&(K=d.fromDER(v))}catch(ct){if(!(ct instanceof bo.Err))throw ct}!K&&L!=="der"&&(K=d.fromCompact(v))}Q=t.fromHex(V)}catch{return!1}if(!K||S&&K.hasHighS())return!1;R&&($=e.hash($));const{r:ce,s:ie}=K,we=b($),Te=o.inv(ie),ze=o.create(we*Te),Xe=o.create(ce*Te),He=t.BASE.multiplyUnsafe(ze).add(Q.multiplyUnsafe(Xe));return He.is0()?!1:o.create(He.x)===ce}return Object.freeze({getPublicKey:p,getSharedSecret:w,sign:N,verify:k,utils:g,Point:t,Signature:d})}function NH(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Id(e.n,t.nBitLength),s={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function xH(t){const{CURVE:e,curveOpts:r}=NH(t),n={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,ecdsaOpts:n}}function TH(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function PH(t){const{CURVE:e,curveOpts:r,ecdsaOpts:n}=xH(t),s=IH(e,r),i=SH(s,n,r);return TH(t,i)}function AE(t,e){const r=n=>PH({...t,hash:n});return{...r(e),create:r}}const OP={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},RP={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},DP={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},OH=Id(OP.p),RH=Id(RP.p),DH=Id(DP.p),kH=AE({...OP,Fp:OH,lowS:!1},dy);AE({...RP,Fp:RH,lowS:!1},H7),AE({...DP,Fp:DH,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},j7);const UH=kH,kP="base10",wn="base16",Qs="base64pad",_a="base64url",vg="utf8",UP=0,$o=1,Ag=2,BH=0,Z_=1,Of=12,kA=32;function LH(){const t=vE.utils.randomPrivateKey(),e=vE.getPublicKey(t);return{privateKey:$n(t,wn),publicKey:$n(e,wn)}}function CE(){const t=_d(kA);return $n(t,wn)}function $H(t,e){const r=vE.getSharedSecret(_s(t,wn),_s(e,wn)),n=Kj(py,r,void 0,void 0,kA);return $n(n,wn)}function Nm(t){const e=py(_s(t,wn));return $n(e,wn)}function Li(t){const e=py(_s(t,vg));return $n(e,wn)}function BP(t){return _s(`${t}`,kP)}function Ul(t){return Number($n(t,kP))}function LP(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function $P(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function MH(t){const e=BP(typeof t.type<"u"?t.type:UP);if(Ul(e)===$o&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?_s(t.senderPublicKey,wn):void 0,n=typeof t.iv<"u"?_s(t.iv,wn):_d(Of),s=_s(t.symKey,wn),i=mP(s,n).encrypt(_s(t.message,vg)),o=MP({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===_a?LP(o):o}function FH(t){const e=_s(t.symKey,wn),{sealed:r,iv:n}=vp({encoded:t.encoded,encoding:t.encoding}),s=mP(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return $n(s,vg)}function jH(t,e){const r=BP(Ag),n=_d(Of),s=_s(t,vg),i=MP({type:r,sealed:s,iv:n});return e===_a?LP(i):i}function HH(t,e){const{sealed:r}=vp({encoded:t,encoding:e});return $n(r,vg)}function MP(t){if(Ul(t.type)===Ag)return $n(Nf([t.type,t.sealed]),Qs);if(Ul(t.type)===$o){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return $n(Nf([t.type,t.senderPublicKey,t.iv,t.sealed]),Qs)}return $n(Nf([t.type,t.iv,t.sealed]),Qs)}function vp(t){const e=(t.encoding||Qs)===_a?$P(t.encoded):t.encoded,r=_s(e,Qs),n=r.slice(BH,Z_),s=Z_;if(Ul(n)===$o){const c=s+kA,l=c+Of,u=r.slice(s,c),h=r.slice(c,l),d=r.slice(l);return{type:n,sealed:d,iv:h,senderPublicKey:u}}if(Ul(n)===Ag){const c=r.slice(s),l=_d(Of);return{type:n,sealed:c,iv:l}}const i=s+Of,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function zH(t,e){const r=vp({encoded:t,encoding:e==null?void 0:e.encoding});return FP({type:Ul(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?$n(r.senderPublicKey,wn):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function FP(t){const e=(t==null?void 0:t.type)||UP;if(e===$o){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function X_(t){return t.type===$o&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function eI(t){return t.type===Ag}function qH(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return Nf([new Uint8Array([4]),e,r])}function VH(t,e){const[r,n,s]=t.split("."),i=Buffer.from($P(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,l=py(c),u=qH(e);if(!UH.verify(Nf([o,a]),l,u))throw new Error("Invalid signature");return sE(t).payload}const WH="irn";function fw(t){return(t==null?void 0:t.relay)||{protocol:WH}}function cf(t){const e=x9[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function GH(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function tI(t){if(!t.includes("wc:")){const l=QT(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:KH(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:GH(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function KH(t){return t.startsWith("//")?t.substring(2):t}function JH(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function rI(t){const e=new URLSearchParams,r=JH(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function tm(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var YH=Object.defineProperty,QH=Object.defineProperties,ZH=Object.getOwnPropertyDescriptors,nI=Object.getOwnPropertySymbols,XH=Object.prototype.hasOwnProperty,ez=Object.prototype.propertyIsEnumerable,sI=(t,e,r)=>e in t?YH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tz=(t,e)=>{for(var r in e||(e={}))XH.call(e,r)&&sI(t,r,e[r]);if(nI)for(var r of nI(e))ez.call(e,r)&&sI(t,r,e[r]);return t},rz=(t,e)=>QH(t,ZH(e));function Sd(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function nz(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Sd(r.accounts))}),e}function sz(t,e){const r=[];return Object.values(t).forEach(n=>{Sd(n.accounts).includes(e)&&r.push(...n.methods)}),r}function iz(t,e){const r=[];return Object.values(t).forEach(n=>{Sd(n.accounts).includes(e)&&r.push(...n.events)}),r}function yy(t){return t.includes(":")}function Lu(t){return yy(t)?t.split(":")[0]:t}function iI(t){var e,r,n;const s={};if(!Gi(t))return s;for(const[i,o]of Object.entries(t)){const a=yy(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Lu(i);s[u]=rz(tz({},s[u]),{chains:Wi(a,(e=s[u])==null?void 0:e.chains),methods:Wi(c,(r=s[u])==null?void 0:r.methods),events:Wi(l,(n=s[u])==null?void 0:n.events)})}return s}function oz(t){const e={};return t==null||t.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function oI(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=oz(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Wi(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}function az(t,e){var r,n,s,i,o,a;const c=iI(t),l=iI(e),u={},h=Object.keys(c).concat(Object.keys(l));for(const d of h)u[d]={chains:Wi((r=c[d])==null?void 0:r.chains,(n=l[d])==null?void 0:n.chains),methods:Wi((s=c[d])==null?void 0:s.methods,(i=l[d])==null?void 0:i.methods),events:Wi((o=c[d])==null?void 0:o.events,(a=l[d])==null?void 0:a.events)};return u}const cz={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},lz={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function le(t,e){const{message:r,code:n}=lz[t];return{message:e?`${r} ${e}`:r,code:n}}function Jt(t,e){const{message:r,code:n}=cz[t];return{message:e?`${r} ${e}`:r,code:n}}function Mo(t,e){return!!Array.isArray(t)}function Gi(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Rr(t){return typeof t>"u"}function ar(t,e){return e&&Rr(t)?!0:typeof t=="string"&&!!t.trim().length}function UA(t,e){return e&&Rr(t)?!0:typeof t=="number"&&!isNaN(t)}function uz(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return Fc(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Sd(a),h=r[o];(!Fc(WT(o,h),u)||!Fc(h.methods,c)||!Fc(h.events,l))&&(i=!1)}),i):!1}function pw(t){return ar(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function hz(t){if(ar(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&pw(r)}}return!1}function dz(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(ar(t,!1)){if(e(t))return!0;const r=QT(t);return e(r)}}catch{}return!1}function fz(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function pz(t){return t==null?void 0:t.topic}function gz(t,e){let r=null;return ar(t==null?void 0:t.publicKey,!1)||(r=le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function aI(t){let e=!0;return Mo(t)?t.length&&(e=t.every(r=>ar(r,!1))):e=!1,e}function mz(t,e,r){let n=null;return Mo(e)&&e.length?e.forEach(s=>{n||pw(s)||(n=Jt("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):pw(t)||(n=Jt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function wz(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=mz(s,WT(s,i),`${e} ${r}`);o&&(n=o)}),n}function yz(t,e){let r=null;return Mo(t)?t.forEach(n=>{r||hz(n)||(r=Jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function bz(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=yz(n==null?void 0:n.accounts,`${e} namespace`);s&&(r=s)}),r}function Ez(t,e){let r=null;return aI(t==null?void 0:t.methods)?aI(t==null?void 0:t.events)||(r=Jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function jP(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=Ez(n,`${e}, namespace`);s&&(r=s)}),r}function vz(t,e,r){let n=null;if(t&&Gi(t)){const s=jP(t,e);s&&(n=s);const i=wz(t,e,r);i&&(n=i)}else n=le("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function z0(t,e){let r=null;if(t&&Gi(t)){const n=jP(t,e);n&&(r=n);const s=bz(t,e);s&&(r=s)}else r=le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function HP(t){return ar(t.protocol,!0)}function Az(t,e){let r=!1;return t?t&&Mo(t)&&t.length&&t.forEach(n=>{r=HP(n)}):r=!0,r}function Cz(t){return typeof t=="number"}function xn(t){return typeof t<"u"&&typeof t!==null}function _z(t){return!(!t||typeof t!="object"||!t.code||!UA(t.code,!1)||!t.message||!ar(t.message,!1))}function Iz(t){return!(Rr(t)||!ar(t.method,!1))}function Sz(t){return!(Rr(t)||Rr(t.result)&&Rr(t.error)||!UA(t.id,!1)||!ar(t.jsonrpc,!1))}function Nz(t){return!(Rr(t)||!ar(t.name,!1))}function cI(t,e){return!(!pw(e)||!nz(t).includes(e))}function xz(t,e,r){return ar(r,!1)?sz(t,e).includes(r):!1}function Tz(t,e,r){return ar(r,!1)?iz(t,e).includes(r):!1}function lI(t,e,r){let n=null;const s=Pz(t),i=Oz(e),o=Object.keys(s),a=Object.keys(i),c=uI(Object.keys(t)),l=uI(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Fc(o,a)||(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=Sd(e[h].accounts);d.includes(h)||(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(Fc(s[h].methods,i[h].methods)?Fc(s[h].events,i[h].events)||(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function Pz(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function uI(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Oz(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Sd(t[r].accounts);n==null||n.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Rz(t,e){return UA(t,!1)&&t<=e.max&&t>=e.min}function hI(){const t=bg();return new Promise(e=>{switch(t){case is.browser:e(Dz());break;case is.reactNative:e(kz());break;case is.node:e(Uz());break;default:e(!0)}})}function Dz(){return Cd()&&(navigator==null?void 0:navigator.onLine)}async function kz(){if(dc()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Uz(){return!0}function Bz(t){switch(bg()){case is.browser:Lz(t);break;case is.reactNative:$z(t);break}}function Lz(t){!dc()&&Cd()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function $z(t){dc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Mz(){var t;return Cd()&&Vo.getDocument()?((t=Vo.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const q0={};class Gd{static get(e){return q0[e]}static set(e,r){q0[e]=r}static delete(e){delete q0[e]}}function Fz(t){const e=Ad.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function jz({publicKey:t,signature:e,payload:r}){var n;const s=_E(r.method),i=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=qz(r.address),a=r.era==="00"?new Uint8Array([0]):_E(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${zz(r.tip)}`),h=Wz(u),d=new Uint8Array([0,...t,o,...e,...a,...l,...h,...s]),f=Vz(d.length+1);return new Uint8Array([...f,i,...d])}function Hz(t){const e=_E(t),r=R9.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function _E(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function zz(t){return t.startsWith("0x")?t.slice(2):t}function qz(t){const e=Ad.decode(t)[0];return e===42?0:e===60?2:1}function Vz(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Wz(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Gz(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=Fz(t.transaction.address),n=jz({publicKey:r,signature:e,payload:t.transaction}),s=Buffer.from(n).toString("hex");return Hz(s)}const Kz="PARSE_ERROR",Jz="INVALID_REQUEST",Yz="METHOD_NOT_FOUND",Qz="INVALID_PARAMS",zP="INTERNAL_ERROR",BA="SERVER_ERROR",Zz=[-32700,-32600,-32601,-32602,-32603],Rf={[Kz]:{code:-32700,message:"Parse error"},[Jz]:{code:-32600,message:"Invalid Request"},[Yz]:{code:-32601,message:"Method not found"},[Qz]:{code:-32602,message:"Invalid params"},[zP]:{code:-32603,message:"Internal error"},[BA]:{code:-32e3,message:"Server error"}},qP=BA;function Xz(t){return Zz.includes(t)}function dI(t){return Object.keys(Rf).includes(t)?Rf[t]:Rf[qP]}function eq(t){const e=Object.values(Rf).find(r=>r.code===t);return e||Rf[qP]}function VP(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var V0={},lo={},fI;function tq(){if(fI)return lo;fI=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.isBrowserCryptoAvailable=lo.getSubtleCrypto=lo.getBrowerCrypto=void 0;function t(){return(Ui==null?void 0:Ui.crypto)||(Ui==null?void 0:Ui.msCrypto)||{}}lo.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}lo.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return lo.isBrowserCryptoAvailable=r,lo}var uo={},pI;function rq(){if(pI)return uo;pI=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.isBrowser=uo.isNode=uo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}uo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}uo.isNode=e;function r(){return!t()&&!e()}return uo.isBrowser=r,uo}var gI;function nq(){return gI||(gI=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fg;e.__exportStar(tq(),t),e.__exportStar(rq(),t)})(V0)),V0}var sq=nq();function vi(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function qc(t=6){return BigInt(vi(t))}function Va(t,e,r){return{id:r||vi(),jsonrpc:"2.0",method:t,params:e}}function by(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ey(t,e,r){return{id:t,jsonrpc:"2.0",error:iq(e)}}function iq(t,e){return typeof t>"u"?dI(zP):(typeof t=="string"&&(t=Object.assign(Object.assign({},dI(BA)),{message:t})),Xz(t.code)&&(t=eq(t.code)),t)}let oq=class{},aq=class extends oq{constructor(){super()}},cq=class extends aq{constructor(e){super()}};const lq="^https?:",uq="^wss?:";function hq(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function WP(t,e){const r=hq(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function mI(t){return WP(t,lq)}function wI(t){return WP(t,uq)}function dq(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function GP(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function LA(t){return GP(t)&&"method"in t}function vy(t){return GP(t)&&(Ai(t)||vs(t))}function Ai(t){return"result"in t}function vs(t){return"error"in t}let Ts=class extends cq{constructor(e){super(e),this.events=new xs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Va(e.method,e.params||[],e.id||qc().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{vs(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),vy(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const fq=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),pq=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",yI=t=>t.split("?")[0],bI=10,gq=fq();let mq=class{constructor(e){if(this.url=e,this.events=new xs.EventEmitter,this.registering=!1,!wI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(qo(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!wI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=sq.isReactNative()?void 0:{rejectUnauthorized:!dq(e)},i=new gq(e,[],s);pq()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Rl(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Ey(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return VP(e,yI(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>bI&&this.events.setMaxListeners(bI)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${yI(this.url)}`));return this.events.emit("register_error",r),r}};var wq={};const KP="wc",JP=2,IE="core",Zi=`${KP}@2:${IE}:`,yq={logger:"error"},bq={database:":memory:"},Eq="crypto",EI="client_ed25519_seed",vq=de.ONE_DAY,Aq="keychain",Cq="0.3",_q="messages",Iq="0.3",vI=de.SIX_HOURS,Sq="publisher",YP="irn",Nq="error",QP="wss://relay.walletconnect.org",xq="relayer",Ar={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Tq="_subscription",us={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Pq=.1,SE="2.21.5",Vt={link_mode:"link_mode",relay:"relay"},xm={inbound:"inbound",outbound:"outbound"},Oq="0.3",Rq="WALLETCONNECT_CLIENT_ID",AI="WALLETCONNECT_LINK_MODE_APPS",Jn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Dq="subscription",kq="0.3",Uq="pairing",Bq="0.3",Kd={wc_pairingDelete:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:de.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:de.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:de.ONE_DAY,prompt:!1,tag:0},res:{ttl:de.ONE_DAY,prompt:!1,tag:0}}},Rc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Rs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Lq="history",$q="0.3",Mq="expirer",ps={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Fq="0.3",jq="verify-api",Hq="https://verify.walletconnect.com",ZP="https://verify.walletconnect.org",Df=ZP,zq=`${Df}/v3`,qq=[Hq,ZP],Vq="echo",Wq="https://echo.walletconnect.com",bi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},po={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ds={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},bc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ec={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Jd={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Gq=.1,Kq="event-client",Jq=86400,Yq="https://pulse.walletconnect.org/batch";function Qq(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,w=0,E=g.length;w!==E&&g[w]===0;)w++,p++;for(var b=(E-w)*u+1>>>0,C=new Uint8Array(b);w!==E;){for(var I=g[w],_=0,O=b-1;(I!==0||_<m)&&O!==-1;O--,_++)I+=256*C[O]>>>0,C[O]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=_,w++}for(var T=b-m;T!==b&&C[T]===0;)T++;for(var N=c.repeat(p);T<b;++T)N+=t.charAt(C[T]);return N}function d(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,w=0;g[p]===c;)m++,p++;for(var E=(g.length-p)*l+1>>>0,b=new Uint8Array(E);g[p];){var C=r[g.charCodeAt(p)];if(C===255)return;for(var I=0,_=E-1;(C!==0||I<w)&&_!==-1;_--,I++)C+=a*b[_]>>>0,b[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,p++}if(g[p]!==" "){for(var O=E-w;O!==E&&b[O]===0;)O++;for(var T=new Uint8Array(m+(E-O)),N=m;O!==E;)T[N++]=b[O++];return T}}}function f(g){var p=d(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var Zq=Qq,Xq=Zq;const XP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},eV=t=>new TextEncoder().encode(t),tV=t=>new TextDecoder().decode(t);class rV{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class nV{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return eO(this,e)}}class sV{constructor(e){this.decoders=e}or(e){return eO(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const eO=(t,e)=>new sV({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class iV{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new rV(e,r,n),this.decoder=new nV(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ay=({name:t,prefix:e,encode:r,decode:n})=>new iV(t,e,r,n),Cg=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=Xq(r,e);return Ay({prefix:t,name:e,encode:n,decode:i=>XP(s(i))})},oV=(t,e,r,n)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const h=s[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},aV=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Mr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ay({prefix:e,name:t,encode(s){return aV(s,n,r)},decode(s){return oV(s,n,r,t)}}),cV=Ay({prefix:"\0",name:"identity",encode:t=>tV(t),decode:t=>eV(t)});var lV=Object.freeze({__proto__:null,identity:cV});const uV=Mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hV=Object.freeze({__proto__:null,base2:uV});const dV=Mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var fV=Object.freeze({__proto__:null,base8:dV});const pV=Cg({prefix:"9",name:"base10",alphabet:"0123456789"});var gV=Object.freeze({__proto__:null,base10:pV});const mV=Mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wV=Mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yV=Object.freeze({__proto__:null,base16:mV,base16upper:wV});const bV=Mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),EV=Mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vV=Mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),AV=Mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),CV=Mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_V=Mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),IV=Mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),SV=Mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),NV=Mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xV=Object.freeze({__proto__:null,base32:bV,base32upper:EV,base32pad:vV,base32padupper:AV,base32hex:CV,base32hexupper:_V,base32hexpad:IV,base32hexpadupper:SV,base32z:NV});const TV=Cg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),PV=Cg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var OV=Object.freeze({__proto__:null,base36:TV,base36upper:PV});const RV=Cg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DV=Cg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kV=Object.freeze({__proto__:null,base58btc:RV,base58flickr:DV});const UV=Mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),BV=Mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),LV=Mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$V=Mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var MV=Object.freeze({__proto__:null,base64:UV,base64pad:BV,base64url:LV,base64urlpad:$V});const tO=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),FV=tO.reduce((t,e,r)=>(t[r]=e,t),[]),jV=tO.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function HV(t){return t.reduce((e,r)=>(e+=FV[r],e),"")}function zV(t){const e=[];for(const r of t){const n=jV[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const qV=Ay({prefix:"🚀",name:"base256emoji",encode:HV,decode:zV});var VV=Object.freeze({__proto__:null,base256emoji:qV}),WV=rO,CI=128,GV=-128,KV=Math.pow(2,31);function rO(t,e,r){e=e||[],r=r||0;for(var n=r;t>=KV;)e[r++]=t&255|CI,t/=128;for(;t&GV;)e[r++]=t&255|CI,t>>>=7;return e[r]=t|0,rO.bytes=r-n+1,e}var JV=NE,YV=128,_I=127;function NE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw NE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&_I)<<s:(o&_I)*Math.pow(2,s),s+=7}while(o>=YV);return NE.bytes=i-n,r}var QV=Math.pow(2,7),ZV=Math.pow(2,14),XV=Math.pow(2,21),eW=Math.pow(2,28),tW=Math.pow(2,35),rW=Math.pow(2,42),nW=Math.pow(2,49),sW=Math.pow(2,56),iW=Math.pow(2,63),oW=function(t){return t<QV?1:t<ZV?2:t<XV?3:t<eW?4:t<tW?5:t<rW?6:t<nW?7:t<sW?8:t<iW?9:10},aW={encode:WV,decode:JV,encodingLength:oW},nO=aW;const II=(t,e,r=0)=>(nO.encode(t,e,r),e),SI=t=>nO.encodingLength(t),xE=(t,e)=>{const r=e.byteLength,n=SI(t),s=n+SI(r),i=new Uint8Array(s+r);return II(t,i,0),II(r,i,n),i.set(e,s),new cW(t,r,e,i)};class cW{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const sO=({name:t,code:e,encode:r})=>new lW(t,e,r);class lW{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?xE(this.code,r):r.then(n=>xE(this.code,n))}else throw Error("Unknown type, must be binary type")}}const iO=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),uW=sO({name:"sha2-256",code:18,encode:iO("SHA-256")}),hW=sO({name:"sha2-512",code:19,encode:iO("SHA-512")});var dW=Object.freeze({__proto__:null,sha256:uW,sha512:hW});const oO=0,fW="identity",aO=XP,pW=t=>xE(oO,aO(t)),gW={code:oO,name:fW,encode:aO,digest:pW};var mW=Object.freeze({__proto__:null,identity:gW});new TextEncoder,new TextDecoder;const NI={...lV,...hV,...fV,...gV,...yV,...xV,...OV,...kV,...MV,...VV};({...dW,...mW});function cO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function wW(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?cO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function lO(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xI=lO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),W0=lO("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=wW(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),yW={utf8:xI,"utf-8":xI,hex:NI.base16,latin1:W0,ascii:W0,binary:W0,...NI};function bW(t,e="utf8"){const r=yW[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?cO(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var EW=Object.defineProperty,vW=(t,e,r)=>e in t?EW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mi=(t,e,r)=>vW(t,typeof e!="symbol"?e+"":e,r);class AW{constructor(e,r){this.core=e,this.logger=r,mi(this,"keychain",new Map),mi(this,"name",Aq),mi(this,"version",Cq),mi(this,"initialized",!1),mi(this,"storagePrefix",Zi),mi(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),mi(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),mi(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),mi(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=le("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),mi(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=nn(r,this.name)}get context(){return zn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,dE(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?fE(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var CW=Object.defineProperty,_W=(t,e,r)=>e in t?CW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xr=(t,e,r)=>_W(t,typeof e!="symbol"?e+"":e,r);class IW{constructor(e,r,n){this.core=e,this.logger=r,xr(this,"name",Eq),xr(this,"keychain"),xr(this,"randomSessionIdentifier",CE()),xr(this,"initialized",!1),xr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),xr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),xr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=r_(s);return AT(i.publicKey)}),xr(this,"generateKeyPair",()=>{this.isInitialized();const s=LH();return this.setPrivateKey(s.publicKey,s.privateKey)}),xr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=r_(i),a=this.randomSessionIdentifier;return await iM(a,s,vq,o)}),xr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=$H(a,i);return this.setSymKey(c,o)}),xr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Nm(s);return await this.keychain.set(o,s),o}),xr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),xr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),xr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=FP(o),c=qo(i);if(eI(a))return jH(c,o==null?void 0:o.encoding);if(X_(a)){const d=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(d,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:h}=a;return MH({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),xr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=zH(i,o);if(eI(a)){const c=HH(i,o==null?void 0:o.encoding);return Rl(c)}if(X_(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=FH({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Rl(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),xr(this,"getPayloadType",(s,i=Qs)=>{const o=vp({encoded:s,encoding:i});return Ul(o.type)}),xr(this,"getPayloadSenderPublicKey",(s,i=Qs)=>{const o=vp({encoded:s,encoding:i});return o.senderPublicKey?$n(o.senderPublicKey,wn):void 0}),this.core=e,this.logger=nn(r,this.name),this.keychain=n||new AW(this.core,this.logger)}get context(){return zn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(EI)}catch{e=CE(),await this.keychain.set(EI,e)}return bW(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var SW=Object.defineProperty,NW=Object.defineProperties,xW=Object.getOwnPropertyDescriptors,TI=Object.getOwnPropertySymbols,TW=Object.prototype.hasOwnProperty,PW=Object.prototype.propertyIsEnumerable,TE=(t,e,r)=>e in t?SW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,OW=(t,e)=>{for(var r in e||(e={}))TW.call(e,r)&&TE(t,r,e[r]);if(TI)for(var r of TI(e))PW.call(e,r)&&TE(t,r,e[r]);return t},RW=(t,e)=>NW(t,xW(e)),Wn=(t,e,r)=>TE(t,typeof e!="symbol"?e+"":e,r);class DW extends n4{constructor(e,r){super(e,r),this.logger=e,this.core=r,Wn(this,"messages",new Map),Wn(this,"messagesWithoutClientAck",new Map),Wn(this,"name",_q),Wn(this,"version",Iq),Wn(this,"initialized",!1),Wn(this,"storagePrefix",Zi),Wn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Wn(this,"set",async(n,s,i)=>{this.isInitialized();const o=Li(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===xm.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,RW(OW({},c),{[o]:s}))}return await this.persist(),o}),Wn(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),Wn(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Wn(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=Li(s);return typeof i[o]<"u"}),Wn(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=Li(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),Wn(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=nn(e,this.name),this.core=r}get context(){return zn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,dE(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,dE(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?fE(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?fE(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kW=Object.defineProperty,UW=Object.defineProperties,BW=Object.getOwnPropertyDescriptors,PI=Object.getOwnPropertySymbols,LW=Object.prototype.hasOwnProperty,$W=Object.prototype.propertyIsEnumerable,PE=(t,e,r)=>e in t?kW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rm=(t,e)=>{for(var r in e||(e={}))LW.call(e,r)&&PE(t,r,e[r]);if(PI)for(var r of PI(e))$W.call(e,r)&&PE(t,r,e[r]);return t},G0=(t,e)=>UW(t,BW(e)),ks=(t,e,r)=>PE(t,typeof e!="symbol"?e+"":e,r);class MW extends s4{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ks(this,"events",new xs.EventEmitter),ks(this,"name",Sq),ks(this,"queue",new Map),ks(this,"publishTimeout",de.toMiliseconds(de.ONE_MINUTE)),ks(this,"initialPublishTimeout",de.toMiliseconds(de.ONE_SECOND*15)),ks(this,"needsTransportRestart",!1),ks(this,"publish",async(n,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||vI,c=fw(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,h=(i==null?void 0:i.id)||qc().toString(),d={topic:n,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const g=new Promise(async p=>{const m=({id:E})=>{d.opts.id===E&&(this.removeRequestFromQueue(E),this.relayer.events.removeListener(Ar.publish,m),p(d))};this.relayer.events.on(Ar.publish,m);const w=qa(new Promise((E,b)=>{this.rpcPublish({topic:n,message:s,ttl:a,prompt:l,tag:u,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(E).catch(C=>{this.logger.warn(C,C==null?void 0:C.message),b(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await w,this.events.removeListener(Ar.publish,m)}catch(E){this.queue.set(h,G0(rm({},d),{attempt:1})),this.logger.warn(E,E==null?void 0:E.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:s,opts:i}}),await qa(g,this.publishTimeout,f)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw g}finally{this.queue.delete(h)}}),ks(this,"on",(n,s)=>{this.events.on(n,s)}),ks(this,"once",(n,s)=>{this.events.once(n,s)}),ks(this,"off",(n,s)=>{this.events.off(n,s)}),ks(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=nn(r,this.name),this.registerEventListeners()}get context(){return zn(this.logger)}async rpcPublish(e){var r,n,s,i;const{topic:o,message:a,ttl:c=vI,prompt:l,tag:u,id:h,attestation:d,tvf:f}=e,g={method:cf(fw().protocol).publish,params:rm({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},f),id:h};Rr((r=g.params)==null?void 0:r.prompt)&&((n=g.params)==null||delete n.prompt),Rr((s=g.params)==null?void 0:s.tag)&&((i=g.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const p=await this.relayer.request(g);return this.relayer.events.emit(Ar.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,G0(rm({},e),{attempt:n}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(G0(rm({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Yl.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ar.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ar.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var FW=Object.defineProperty,jW=(t,e,r)=>e in t?FW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lu=(t,e,r)=>jW(t,typeof e!="symbol"?e+"":e,r);class HW{constructor(){lu(this,"map",new Map),lu(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),lu(this,"get",e=>this.map.get(e)||[]),lu(this,"exists",(e,r)=>this.get(e).includes(r)),lu(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),lu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var zW=Object.defineProperty,qW=Object.defineProperties,VW=Object.getOwnPropertyDescriptors,OI=Object.getOwnPropertySymbols,WW=Object.prototype.hasOwnProperty,GW=Object.prototype.propertyIsEnumerable,OE=(t,e,r)=>e in t?zW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yd=(t,e)=>{for(var r in e||(e={}))WW.call(e,r)&&OE(t,r,e[r]);if(OI)for(var r of OI(e))GW.call(e,r)&&OE(t,r,e[r]);return t},K0=(t,e)=>qW(t,VW(e)),$t=(t,e,r)=>OE(t,typeof e!="symbol"?e+"":e,r);class KW extends a4{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,$t(this,"subscriptions",new Map),$t(this,"topicMap",new HW),$t(this,"events",new xs.EventEmitter),$t(this,"name",Dq),$t(this,"version",kq),$t(this,"pending",new Map),$t(this,"cached",[]),$t(this,"initialized",!1),$t(this,"storagePrefix",Zi),$t(this,"subscribeTimeout",de.toMiliseconds(de.ONE_MINUTE)),$t(this,"initialSubscribeTimeout",de.toMiliseconds(de.ONE_SECOND*15)),$t(this,"clientId"),$t(this,"batchSubscribeTopicsLimit",500),$t(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),$t(this,"subscribe",async(n,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=fw(s),o={topic:n,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),$t(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),$t(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),$t(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),$t(this,"on",(n,s)=>{this.events.on(n,s)}),$t(this,"once",(n,s)=>{this.events.once(n,s)}),$t(this,"off",(n,s)=>{this.events.off(n,s)}),$t(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),$t(this,"start",async()=>{await this.onConnect()}),$t(this,"stop",async()=>{await this.onDisconnect()}),$t(this,"restart",async()=>{await this.restore(),await this.onRestart()}),$t(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),$t(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Yl.pulse,async()=>{await this.checkPending()}),this.events.on(Jn.created,async n=>{const s=Jn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(Jn.deleted,async n=>{const s=Jn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=nn(r,this.name),this.clientId=""}get context(){return zn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=fw(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=Jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s;(!n||(n==null?void 0:n.transportType)===Vt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const i={method:cf(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Vt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},de.toMiliseconds(de.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(Jn.created,h),u(d.id))};this.events.on(Jn.created,h);try{const d=await qa(new Promise((f,g)=>{this.relayer.request(i).catch(p=>{this.logger.warn(p,p==null?void 0:p.message),g(p)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Jn.created,h),u(d)}catch{}}),l=await qa(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ar.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:cf(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await qa(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ar.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:cf(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await qa(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ar.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:cf(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,K0(Yd({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Yd({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Yd({},r)),this.topicMap.set(r.topic,e),this.events.emit(Jn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Jn.deleted,K0(Yd({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Jn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Jn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>K0(Yd({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await i7(de.toMiliseconds(de.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Li(e+await this.getClientId())}}var JW=Object.defineProperty,RI=Object.getOwnPropertySymbols,YW=Object.prototype.hasOwnProperty,QW=Object.prototype.propertyIsEnumerable,RE=(t,e,r)=>e in t?JW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,DI=(t,e)=>{for(var r in e||(e={}))YW.call(e,r)&&RE(t,r,e[r]);if(RI)for(var r of RI(e))QW.call(e,r)&&RE(t,r,e[r]);return t},gt=(t,e,r)=>RE(t,typeof e!="symbol"?e+"":e,r);class ZW extends i4{constructor(e){super(e),gt(this,"protocol","wc"),gt(this,"version",2),gt(this,"core"),gt(this,"logger"),gt(this,"events",new xs.EventEmitter),gt(this,"provider"),gt(this,"messages"),gt(this,"subscriber"),gt(this,"publisher"),gt(this,"name",xq),gt(this,"transportExplicitlyClosed",!1),gt(this,"initialized",!1),gt(this,"connectionAttemptInProgress",!1),gt(this,"relayUrl"),gt(this,"projectId"),gt(this,"packageName"),gt(this,"bundleId"),gt(this,"hasExperiencedNetworkDisruption",!1),gt(this,"pingTimeout"),gt(this,"heartBeatTimeout",de.toMiliseconds(de.THIRTY_SECONDS+de.FIVE_SECONDS)),gt(this,"reconnectTimeout"),gt(this,"connectPromise"),gt(this,"reconnectInProgress",!1),gt(this,"requestsInFlight",[]),gt(this,"connectTimeout",de.toMiliseconds(de.ONE_SECOND*15)),gt(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||qc().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),gt(this,"resetPingTimeout",()=>{lw()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),gt(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),gt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Ar.connect)}),gt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),gt(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Ar.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),gt(this,"registerProviderListeners",()=>{this.provider.on(us.payload,this.onPayloadHandler),this.provider.on(us.connect,this.onConnectHandler),this.provider.on(us.disconnect,this.onDisconnectHandler),this.provider.on(us.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?nn(e.logger,this.name):gg(yd({level:e.logger||Nq})),this.messages=new DW(this.logger,e.core),this.subscriber=new KW(this,this.logger),this.publisher=new MW(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||QP,this.projectId=e.projectId,z9()?this.packageName=v_():q9()&&(this.bundleId=v_()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return zn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Vt.relay},xm.outbound)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Jn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Jn.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,DI({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await qa(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await hI())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=dr(de.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(Ar.message,e),await this.recordMessageEvent(e,xm.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(us.disconnect,i),await qa(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(us.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(us.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(us.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,de.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(lw())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ts(new mq(J9({sdkVersion:SE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),LA(e)){if(!e.method.endsWith(Tq))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Vt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(DI({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else vy(e)&&this.events.emit(Ar.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,xm.inbound),this.events.emit(Ar.message,e))}async acknowledgePayload(e){const r=by(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(us.payload,this.onPayloadHandler),this.provider.off(us.connect,this.onConnectHandler),this.provider.off(us.disconnect,this.onDisconnectHandler),this.provider.off(us.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await hI();Bz(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Yl.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Mz())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r==null?void 0:r.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Ar.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},de.toMiliseconds(Pq)))))}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function XW(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function kI(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function UI(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const eG="[object RegExp]",tG="[object String]",rG="[object Number]",nG="[object Boolean]",BI="[object Arguments]",sG="[object Symbol]",iG="[object Date]",oG="[object Map]",aG="[object Set]",cG="[object Array]",lG="[object Function]",uG="[object ArrayBuffer]",J0="[object Object]",hG="[object Error]",dG="[object DataView]",fG="[object Uint8Array]",pG="[object Uint8ClampedArray]",gG="[object Uint16Array]",mG="[object Uint32Array]",wG="[object BigUint64Array]",yG="[object Int8Array]",bG="[object Int16Array]",EG="[object Int32Array]",vG="[object BigInt64Array]",AG="[object Float32Array]",CG="[object Float64Array]";function _G(){}function LI(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function IG(t,e,r){return lf(t,e,void 0,void 0,void 0,void 0,r)}function lf(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return kf(t,e,i,o)}return kf(t,e,i,o)}function kf(t,e,r,n){if(Object.is(t,e))return!0;let s=UI(t),i=UI(e);if(s===BI&&(s=J0),i===BI&&(i=J0),s!==i)return!1;switch(s){case tG:return t.toString()===e.toString();case rG:{const c=t.valueOf(),l=e.valueOf();return XW(c,l)}case nG:case iG:case sG:return Object.is(t.valueOf(),e.valueOf());case eG:return t.source===e.source&&t.flags===e.flags;case lG:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case oG:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!lf(l,e.get(c),c,t,e,r,n))return!1;return!0}case aG:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(f=>lf(h,f,void 0,t,e,r,n));if(d===-1)return!1;l.splice(d,1)}return!0}case cG:case fG:case pG:case gG:case mG:case wG:case yG:case bG:case EG:case vG:case AG:case CG:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!lf(t[c],e[c],c,t,e,r,n))return!1;return!0}case uG:return t.byteLength!==e.byteLength?!1:kf(new Uint8Array(t),new Uint8Array(e),r,n);case dG:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:kf(new Uint8Array(t),new Uint8Array(e),r,n);case hG:return t.name===e.name&&t.message===e.message;case J0:{if(!(kf(t.constructor,e.constructor,r,n)||LI(t)&&LI(e)))return!1;const c=[...Object.keys(t),...kI(t)],l=[...Object.keys(e),...kI(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=t[h];if(!Object.hasOwn(e,h))return!1;const f=e[h];if(!lf(d,f,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function SG(t,e){return IG(t,e,_G)}var NG=Object.defineProperty,$I=Object.getOwnPropertySymbols,xG=Object.prototype.hasOwnProperty,TG=Object.prototype.propertyIsEnumerable,DE=(t,e,r)=>e in t?NG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,MI=(t,e)=>{for(var r in e||(e={}))xG.call(e,r)&&DE(t,r,e[r]);if($I)for(var r of $I(e))TG.call(e,r)&&DE(t,r,e[r]);return t},_n=(t,e,r)=>DE(t,typeof e!="symbol"?e+"":e,r);class Zl extends o4{constructor(e,r,n,s=Zi,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,_n(this,"map",new Map),_n(this,"version",Oq),_n(this,"cached",[]),_n(this,"initialized",!1),_n(this,"getKey"),_n(this,"storagePrefix",Zi),_n(this,"recentlyDeleted",[]),_n(this,"recentlyDeletedLimit",200),_n(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Rr(o)?this.map.set(this.getKey(o),o):fz(o)?this.map.set(o.id,o):pz(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),_n(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),_n(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),_n(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>SG(a[c],o[c]))):this.values)),_n(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=MI(MI({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),_n(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=nn(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return zn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=le("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var PG=Object.defineProperty,OG=(t,e,r)=>e in t?PG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nt=(t,e,r)=>OG(t,typeof e!="symbol"?e+"":e,r);class RG{constructor(e,r){this.core=e,this.logger=r,nt(this,"name",Uq),nt(this,"version",Bq),nt(this,"events",new lA),nt(this,"pairings"),nt(this,"initialized",!1),nt(this,"storagePrefix",Zi),nt(this,"ignoredPayloadTypes",[$o]),nt(this,"registeredMethods",[]),nt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),nt(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),nt(this,"create",async n=>{this.isInitialized();const s=CE(),i=await this.core.crypto.setSymKey(s),o=dr(de.FIVE_MINUTES),a={protocol:YP},c={topic:i,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=rI({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Rc.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n==null?void 0:n.transportType}),{topic:i,uri:l}}),nt(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[bi.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=tI(n.uri);s.props.properties.topic=i,s.addTrace(bi.pairing_uri_validation_success),s.addTrace(bi.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(bi.existing_pairing),u.active)throw s.setError(po.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(bi.pairing_not_expired)}const h=c||dr(de.FIVE_MINUTES),d={topic:i,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(i,h),await this.pairings.set(i,d),s.addTrace(bi.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Rc.create,d),s.addTrace(bi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(bi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(po.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(po.subscribe_pairing_topic_failure),f}return s.addTrace(bi.subscribe_pairing_topic_success),d}),nt(this,"activate",async({topic:n})=>{this.isInitialized();const s=dr(de.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),nt(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=xc();this.events.once(_t("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),nt(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),nt(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),nt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),nt(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Jt("USER_DISCONNECTED")),await this.deletePairing(s))}),nt(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return rI({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),nt(this,"sendRequest",async(n,s,i)=>{const o=Va(s,i),a=await this.core.crypto.encode(n,o),c=Kd[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),nt(this,"sendResult",async(n,s,i)=>{const o=by(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,l=Kd[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),nt(this,"sendError",async(n,s,i)=>{const o=Ey(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,l=Kd[c]?Kd[c].res:Kd.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),nt(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),nt(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>ya(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),nt(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),nt(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),nt(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(Rc.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),nt(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Ai(s)?this.events.emit(_t("pairing_ping",i),{}):vs(s)&&this.events.emit(_t("pairing_ping",i),{error:s.error})},500)}),nt(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Rc.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),nt(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Jt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),nt(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Jt("WC_METHOD_UNSUPPORTED",n))}),nt(this,"isValidPair",(n,s)=>{var i;if(!xn(n)){const{message:a}=le("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(po.malformed_pairing_uri),new Error(a)}if(!dz(n.uri)){const{message:a}=le("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(po.malformed_pairing_uri),new Error(a)}const o=tI(n==null?void 0:n.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=le("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(po.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=le("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(po.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&de.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(po.pairing_expired);const{message:a}=le("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),nt(this,"isValidPing",async n=>{if(!xn(n)){const{message:i}=le("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),nt(this,"isValidDisconnect",async n=>{if(!xn(n)){const{message:i}=le("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),nt(this,"isValidPairingTopic",async n=>{if(!ar(n,!1)){const{message:s}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(ya(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=le("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=nn(r,this.name),this.pairings=new Zl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return zn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ar.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Vt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);LA(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):vy(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ps.expired,async e=>{const{topic:r}=YT(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Rc.expire,{topic:r}))})}}var DG=Object.defineProperty,kG=(t,e,r)=>e in t?DG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tr=(t,e,r)=>kG(t,typeof e!="symbol"?e+"":e,r);class UG extends r4{constructor(e,r){super(e,r),this.core=e,this.logger=r,Tr(this,"records",new Map),Tr(this,"events",new xs.EventEmitter),Tr(this,"name",Lq),Tr(this,"version",$q),Tr(this,"cached",[]),Tr(this,"initialized",!1),Tr(this,"storagePrefix",Zi),Tr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Tr(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:dr(de.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Rs.created,o)}),Tr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=vs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(Rs.updated,s))}),Tr(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),Tr(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Rs.deleted,i)}}),this.persist()}),Tr(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),Tr(this,"on",(n,s)=>{this.events.on(n,s)}),Tr(this,"once",(n,s)=>{this.events.once(n,s)}),Tr(this,"off",(n,s)=>{this.events.off(n,s)}),Tr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=nn(r,this.name)}get context(){return zn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Va(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Rs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Rs.created,e=>{const r=Rs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Rs.updated,e=>{const r=Rs.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Rs.deleted,e=>{const r=Rs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Yl.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{de.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Rs.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var BG=Object.defineProperty,LG=(t,e,r)=>e in t?BG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vr=(t,e,r)=>LG(t,typeof e!="symbol"?e+"":e,r);class $G extends c4{constructor(e,r){super(e,r),this.core=e,this.logger=r,Vr(this,"expirations",new Map),Vr(this,"events",new xs.EventEmitter),Vr(this,"name",Mq),Vr(this,"version",Fq),Vr(this,"cached",[]),Vr(this,"initialized",!1),Vr(this,"storagePrefix",Zi),Vr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Vr(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Vr(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ps.created,{target:i,expiration:o})}),Vr(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),Vr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ps.deleted,{target:s,expiration:i})}}),Vr(this,"on",(n,s)=>{this.events.on(n,s)}),Vr(this,"once",(n,s)=>{this.events.once(n,s)}),Vr(this,"off",(n,s)=>{this.events.off(n,s)}),Vr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=nn(r,this.name)}get context(){return zn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Y9(e);if(typeof e=="number")return Q9(e);const{message:r}=le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ps.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;de.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(ps.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Yl.pulse,()=>this.checkExpirations()),this.events.on(ps.created,e=>{const r=ps.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(ps.expired,e=>{const r=ps.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(ps.deleted,e=>{const r=ps.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var MG=Object.defineProperty,FG=(t,e,r)=>e in t?MG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,or=(t,e,r)=>FG(t,typeof e!="symbol"?e+"":e,r);class jG extends l4{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,or(this,"name",jq),or(this,"abortController"),or(this,"isDevEnv"),or(this,"verifyUrlV3",zq),or(this,"storagePrefix",Zi),or(this,"version",JP),or(this,"publicKey"),or(this,"fetchPromise"),or(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&de.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),or(this,"register",async s=>{if(!Cd()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Vo.getDocument(),u=this.startAbortTimer(de.ONE_SECOND*5),h=await new Promise((d,f)=>{const g=()=>{window.removeEventListener("message",m),l.body.removeChild(p),f("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const p=l.createElement("iframe");p.src=c,p.style.display="none",p.addEventListener("error",g,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const E=JSON.parse(w.data);if(E.type==="verify_attestation"){if(sE(E.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(p),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",m),d(E.attestation===null?"":E.attestation)}}catch(E){this.logger.warn(E)}};l.body.appendChild(p),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),or(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(sE(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),or(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(de.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),or(this,"getVerifyUrl",s=>{let i=s||Df;return qq.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Df}`),i=Df),i}),or(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(de.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),or(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),or(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),or(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),or(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),or(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),or(this,"validateAttestation",(s,i)=>{const o=VH(s,i.publicKey),a={hasExpired:de.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=nn(r,this.name),this.abortController=new AbortController,this.isDevEnv=AA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return zn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),de.toMiliseconds(e))}}var HG=Object.defineProperty,zG=(t,e,r)=>e in t?HG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,FI=(t,e,r)=>zG(t,typeof e!="symbol"?e+"":e,r);class qG extends u4{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,FI(this,"context",Vq),FI(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${Wq}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=nn(r,this.context)}}var VG=Object.defineProperty,jI=Object.getOwnPropertySymbols,WG=Object.prototype.hasOwnProperty,GG=Object.prototype.propertyIsEnumerable,kE=(t,e,r)=>e in t?VG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qd=(t,e)=>{for(var r in e||(e={}))WG.call(e,r)&&kE(t,r,e[r]);if(jI)for(var r of jI(e))GG.call(e,r)&&kE(t,r,e[r]);return t},wr=(t,e,r)=>kE(t,typeof e!="symbol"?e+"":e,r);class KG extends h4{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,wr(this,"context",Kq),wr(this,"storagePrefix",Zi),wr(this,"storageVersion",Gq),wr(this,"events",new Map),wr(this,"shouldPersist",!1),wr(this,"init",async()=>{if(!AA())try{const s={eventId:C_(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:KT(this.core.relayer.protocol,this.core.relayer.version,SE)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),wr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=C_(),u=this.core.projectId||"",h=Date.now(),d=Qd({eventId:l,timestamp:h,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),wr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Qd(Qd({},a),this.setMethods(a.eventId))}),wr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),wr(this,"setEventListeners",()=>{this.core.heartbeat.on(Yl.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{de.fromMiliseconds(Date.now())-de.fromMiliseconds(s.timestamp)>Jq&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),wr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),wr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),wr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),wr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),wr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Qd(Qd({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),wr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),wr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Yq}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${SE}${i}`,{method:"POST",body:JSON.stringify(s)})}),wr(this,"getAppDomain",()=>GT().url),this.logger=nn(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var JG=Object.defineProperty,HI=Object.getOwnPropertySymbols,YG=Object.prototype.hasOwnProperty,QG=Object.prototype.propertyIsEnumerable,UE=(t,e,r)=>e in t?JG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zI=(t,e)=>{for(var r in e||(e={}))YG.call(e,r)&&UE(t,r,e[r]);if(HI)for(var r of HI(e))QG.call(e,r)&&UE(t,r,e[r]);return t},Ft=(t,e,r)=>UE(t,typeof e!="symbol"?e+"":e,r);let ZG=class uO extends ZL{constructor(e){var r;super(e),Ft(this,"protocol",KP),Ft(this,"version",JP),Ft(this,"name",IE),Ft(this,"relayUrl"),Ft(this,"projectId"),Ft(this,"customStoragePrefix"),Ft(this,"events",new xs.EventEmitter),Ft(this,"logger"),Ft(this,"heartbeat"),Ft(this,"relayer"),Ft(this,"crypto"),Ft(this,"storage"),Ft(this,"history"),Ft(this,"expirer"),Ft(this,"pairing"),Ft(this,"verify"),Ft(this,"echoClient"),Ft(this,"linkModeSupportedApps"),Ft(this,"eventClient"),Ft(this,"initialized",!1),Ft(this,"logChunkController"),Ft(this,"on",(a,c)=>this.events.on(a,c)),Ft(this,"once",(a,c)=>this.events.once(a,c)),Ft(this,"off",(a,c)=>this.events.off(a,c)),Ft(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ft(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Vt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||QP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=yd({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:yq.logger,name:IE}),{logger:i,chunkLoggerController:o}=hA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=nn(i,this.name),this.heartbeat=new Q5,this.crypto=new IW(this,this.logger,e==null?void 0:e.keychain),this.history=new UG(this,this.logger),this.expirer=new $G(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new DL(zI(zI({},bq),e==null?void 0:e.storageOptions)),this.relayer=new ZW({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new RG(this,this.logger),this.verify=new jG(this,this.logger,this.storage),this.echoClient=new qG(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new KG(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new uO(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Rq,n),r}get context(){return zn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(AI,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(AI)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&wq.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const XG=ZG,hO="wc",dO=2,fO="client",$A=`${hO}@${dO}:${fO}:`,Y0={name:fO,logger:"error"},qI="WALLETCONNECT_DEEPLINK_CHOICE",eK="proposal",VI="Proposal expired",tK="session",uu=de.SEVEN_DAYS,rK="engine",yr={wc_sessionPropose:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1104},res:{ttl:de.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1106},res:{ttl:de.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:de.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1112},res:{ttl:de.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:de.ONE_DAY,prompt:!1,tag:1114},res:{ttl:de.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:de.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:de.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:de.FIVE_MINUTES,prompt:!1,tag:1119}}},Q0={min:de.FIVE_MINUTES,max:de.SEVEN_DAYS},wi={idle:"IDLE",active:"ACTIVE"},nK={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},sK="request",iK=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],oK="wc",aK="auth",cK="authKeys",lK="pairingTopics",uK="requests",Cy=`${oK}@${1.5}:${aK}:`,Tm=`${Cy}:PUB_KEY`;var hK=Object.defineProperty,dK=Object.defineProperties,fK=Object.getOwnPropertyDescriptors,WI=Object.getOwnPropertySymbols,pK=Object.prototype.hasOwnProperty,gK=Object.prototype.propertyIsEnumerable,BE=(t,e,r)=>e in t?hK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qt=(t,e)=>{for(var r in e||(e={}))pK.call(e,r)&&BE(t,r,e[r]);if(WI)for(var r of WI(e))gK.call(e,r)&&BE(t,r,e[r]);return t},In=(t,e)=>dK(t,fK(e)),te=(t,e,r)=>BE(t,typeof e!="symbol"?e+"":e,r);class mK extends g4{constructor(e){super(e),te(this,"name",rK),te(this,"events",new lA),te(this,"initialized",!1),te(this,"requestQueue",{state:wi.idle,queue:[]}),te(this,"sessionRequestQueue",{state:wi.idle,queue:[]}),te(this,"emittedSessionRequests",new o7({limit:500})),te(this,"requestQueueDelay",de.ONE_SECOND),te(this,"expectedPairingMethodMap",new Map),te(this,"recentlyDeletedMap",new Map),te(this,"recentlyDeletedLimit",200),te(this,"relayMessageCache",[]),te(this,"pendingSessions",new Map),te(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(yr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},de.toMiliseconds(this.requestQueueDelay)))}),te(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=In(qt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n),n.optionalNamespaces=az(n.requiredNamespaces,n.optionalNamespaces),n.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=s,h,d=!1;try{if(u){const _=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=_.active}}catch(_){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),_}if(!u||!d){const{topic:_,uri:O}=await this.client.core.pairing.create();u=_,h=O}if(!u){const{message:_}=le("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(_)}const f=await this.client.core.crypto.generateKeyPair(),g=yr.wc_sessionPropose.req.ttl||de.FIVE_MINUTES,p=dr(g),m=In(qt(qt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:YP}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:vi()}),w=_t("session_connect",m.id),{reject:E,resolve:b,done:C}=xc(g,VI),I=({id:_})=>{_===m.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(m.id),this.events.emit(w,{error:{message:VI,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(w,({error:_,session:O})=>{this.client.events.off("proposal_expire",I),_?E(_):O&&b(O)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:h,approval:C}}),te(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),te(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Ds.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(N){throw o.setError(bc.no_internet_connection),N}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(N){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(bc.proposal_not_found),N}try{await this.isValidApprove(r)}catch(N){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(bc.session_approve_namespace_validation_failure),N}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=r,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:p,requiredNamespaces:m,optionalNamespaces:w}=f;let E=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});E||(E=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ds.session_approve_started,properties:{topic:g,trace:[Ds.session_approve_started,Ds.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),C=p.publicKey,I=await this.client.core.crypto.generateSharedKey(b,C),_=qt(qt(qt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:dr(uu)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),O=Vt.relay;E.addTrace(Ds.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:O})}catch(N){throw E.setError(bc.subscribe_session_topic_failure),N}E.addTrace(Ds.subscribe_session_topic_success);const T=In(qt({},_),{topic:I,requiredNamespaces:m,optionalNamespaces:w,pairingTopic:g,acknowledged:!1,self:_.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:b,transportType:Vt.relay});await this.client.session.set(I,T),E.addTrace(Ds.store_session);try{E.addTrace(Ds.publishing_session_settle),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0}).catch(N=>{throw E==null||E.setError(bc.session_settle_publish_failure),N}),E.addTrace(Ds.session_settle_publish_success),E.addTrace(Ds.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(N=>{throw E==null||E.setError(bc.session_approve_publish_failure),N}),E.addTrace(Ds.session_approve_publish_success)}catch(N){throw this.client.logger.error(N),this.client.session.delete(I,Jt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),N}return this.client.core.eventClient.deleteEvent({eventId:E.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(I,dr(uu)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),te(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&await this.sendError({id:n,topic:i,error:s,rpcOpts:yr.wc_sessionPropose.reject}),await this.deleteProposal(n)}),te(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=xc(),c=vi(),l=qc().toString(),u=this.client.session.get(n).namespaces;return this.events.once(_t("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:i}}),te(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=vi(),{done:i,resolve:o,reject:a}=xc();return this.events.once(_t("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,dr(uu)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),te(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:n,request:s,topic:i,expiry:o=yr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Vt.relay&&await this.confirmOnlineStateOrThrow();const c=vi(),l=qc().toString(),{done:u,resolve:h,reject:d}=xc(o,"Request expired. Please try again.");this.events.once(_t("session_request",c),({error:m,result:w})=>{m?d(m):h(w)});const f="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:In(qt({},s),{expiryTimestamp:dr(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(m=>d(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await u();const p={request:In(qt({},s),{expiryTimestamp:dr(o)}),chainId:n};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:p,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,p)}).catch(w=>d(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),m()}),new Promise(async m=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const E=await t7(this.client.core.storage,qI);await Z9({id:c,topic:i,wcDeepLink:E})}m()}),u()]).then(m=>m[2])}),te(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Vt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ai(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):vs(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),te(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=vi(),i=qc().toString(),{done:o,resolve:a,reject:c}=xc();this.events.once(_t("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),te(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=qc().toString(),a=vi();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),te(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Jt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=le("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),te(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>uz(n,r)))),te(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),te(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Vt.link_mode:Vt.relay;o===Vt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:f,nbf:g,methods:p=[],expiry:m}=r,w=[...r.resources||[]],{topic:E,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:E,uri:b}});const C=await this.client.core.crypto.generateKeyPair(),I=Nm(C);if(await Promise.all([this.client.auth.authKeys.set(Tm,{responseTopic:I,publicKey:C}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:E})]),await this.client.core.relayer.subscribe(I,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${E}`),p.length>0){const{namespace:F}=Yu(a[0]);let j=wj(F,"request",p);Sm(w)&&(j=bj(j,w.pop())),w.push(j)}const _=m&&m>yr.wc_sessionAuthenticate.req.ttl?m:yr.wc_sessionAuthenticate.req.ttl,O={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:f,nbf:g,resources:w},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:dr(_)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},N={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:E,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:dr(yr.wc_sessionPropose.req.ttl),id:vi()},{done:k,resolve:U,reject:$}=xc(_,"Request expired"),V=vi(),z=_t("session_connect",N.id),v=_t("session_request",V),S=async({error:F,session:j})=>{this.events.off(v,R),F?$(F):j&&U({session:j})},R=async F=>{var j,K,Q;if(await this.deletePendingAuthRequest(V,{message:"fulfilled",code:0}),F.error){const He=Jt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return F.error.code===He.code?void 0:(this.events.off(z,S),$(F.error.message))}await this.deleteProposal(N.id),this.events.off(z,S);const{cacaos:ce,responder:ie}=F.result,we=[],Te=[];for(const He of ce){await k_({cacao:He,projectId:this.client.core.projectId})||(this.client.logger.error(He,"Signature verification failed"),$(Jt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ct}=He,rr=Sm(ct.resources),D=[pE(ct.iss)],B=uw(ct.iss);if(rr){const G=U_(rr),ee=B_(rr);we.push(...G),D.push(...ee)}for(const G of D)Te.push(`${G}:${B}`)}const ze=await this.client.core.crypto.generateSharedKey(C,ie.publicKey);let Xe;we.length>0&&(Xe={topic:ze,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:ie,controller:ie.publicKey,expiry:dr(uu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:E,namespaces:oI([...new Set(we)],[...new Set(Te)]),transportType:o},await this.client.core.relayer.subscribe(ze,{transportType:o}),await this.client.session.set(ze,Xe),E&&await this.client.core.pairing.updateMetadata({topic:E,metadata:ie.metadata}),Xe=this.client.session.get(ze)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(K=ie.metadata.redirect)!=null&&K.linkMode&&(Q=ie.metadata.redirect)!=null&&Q.universal&&n&&(this.client.core.addLinkModeSupportedApp(ie.metadata.redirect.universal),this.client.session.update(ze,{transportType:Vt.link_mode})),U({auths:ce,session:Xe})};this.events.once(z,S),this.events.once(v,R);let L;try{if(i){const F=Va("wc_sessionAuthenticate",O,V);this.client.core.history.set(E,F);const j=await this.client.core.crypto.encode("",F,{type:Ag,encoding:_a});L=tm(n,E,j)}else await Promise.all([this.sendRequest({topic:E,method:"wc_sessionAuthenticate",params:O,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:V}),this.sendRequest({topic:E,method:"wc_sessionPropose",params:N,expiry:yr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:N.id})])}catch(F){throw this.events.off(z,S),this.events.off(v,R),F}return await this.setProposal(N.id,N),await this.setAuthRequest(V,{request:In(qt({},O),{verifyContext:{}}),pairingTopic:E,transportType:o}),{uri:L??b,response:k}}),te(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Ec.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(Jd.no_internet_connection),m}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(Jd.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Vt.relay;a===Vt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Nm(c),h={type:$o,receiverPublicKey:c,senderPublicKey:l},d=[],f=[];for(const m of s){if(!await k_({cacao:m,projectId:this.client.core.projectId})){i.setError(Jd.invalid_cacao);const I=Jt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:I,encodeOpts:h}),new Error(I.message)}i.addTrace(Ec.cacaos_verified);const{p:w}=m,E=Sm(w.resources),b=[pE(w.iss)],C=uw(w.iss);if(E){const I=U_(E),_=B_(E);d.push(...I),b.push(..._)}for(const I of b)f.push(`${I}:${C}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Ec.create_authenticated_session_topic);let p;if((d==null?void 0:d.length)>0){p={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:dr(uu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:oI([...new Set(d)],[...new Set(f)]),transportType:a},i.addTrace(Ec.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(m){throw i.setError(Jd.subscribe_authenticated_session_topic_failure),m}i.addTrace(Ec.subscribe_authenticated_session_topic_success),await this.client.session.set(g,p),i.addTrace(Ec.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Ec.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(Jd.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:p}}),te(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Vt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Nm(o),l={type:$o,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:l,rpcOpts:yr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),te(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return hP(n,s)}),te(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),te(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),te(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Jt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(qI).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Jt("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=wi.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),te(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(bc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Jt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),te(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=wi.idle,this.client.events.emit("session_request_expire",{id:r}))}),te(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),te(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),te(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,dr(yr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),te(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Vt.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),te(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||dr(yr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),te(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=r,d=Va(s,i,c);let f;const g=!!u;try{const w=g?_a:Qs;f=await this.client.core.crypto.encode(n,d,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),w}let p;if(iK.includes(s)){const w=Li(JSON.stringify(d)),E=Li(f);p=await this.client.core.verify.register({id:E,decryptedId:w})}const m=yr[s].req;if(m.attestation=p,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(n,d),g){const w=tm(u,n,f);await global.Linking.openURL(w,this.client.name)}else{const w=yr[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=In(qt({},h),{correlationId:d.id}),l?(w.internal=In(qt({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,w)):this.client.core.relayer.publish(n,f,w).catch(E=>this.client.logger.error(E))}return d.id}),te(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=by(n,i);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=h?_a:Qs;u=await this.client.core.crypto.encode(s,l,In(qt({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let d,f;try{d=await this.client.core.history.get(s,n);const g=d.request;try{f=this.getTVFParams(n,g.params,i)}catch(p){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${p==null?void 0:p.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),g}if(h){const g=tm(c,s,u);await global.Linking.openURL(g,this.client.name)}else{const g=d.request.method,p=yr[g].res;p.tvf=In(qt({},f),{correlationId:n}),o?(p.internal=In(qt({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,p)):this.client.core.relayer.publish(s,u,p).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),te(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Ey(n,i);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=h?_a:Qs;u=await this.client.core.crypto.encode(s,l,In(qt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let d;try{d=await this.client.core.history.get(s,n)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),f}if(h){const f=tm(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=d.request.method,g=a||yr[f].res;this.client.core.relayer.publish(s,u,g)}await this.client.core.history.resolve(l)}),te(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;ya(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ya(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),te(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),te(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),te(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===wi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=wi.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=wi.idle}),te(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),te(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),te(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=le("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),te(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),te(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(po.proposal_listener_not_found)),this.isValidConnect(qt({},s.params));const u=a.expiryTimestamp||dr(yr.wc_sessionPropose.req.ttl),h=qt({id:c,pairingTopic:n,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:i,hash:Li(JSON.stringify(s)),encryptedId:o,metadata:h.proposer.metadata});l==null||l.addTrace(bi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:yr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),te(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Ai(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:r,proposalId:i,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(vs(n)){await this.deleteProposal(i);const o=_t("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),te(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=n.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===r);if(!f)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(f.proposalId),p=In(qt(qt(qt({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:Vt.relay});await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit(_t("session_connect",f.proposalId),{session:p}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:n.id,topic:r,result:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),te(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Ai(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(_t("session_approve",s),{})):vs(n)&&(await this.client.session.delete(r,Jt("USER_DISCONNECTED")),this.events.emit(_t("session_approve",s),{error:n.error}))}),te(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=Gd.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:Jt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(qt({topic:r},s));try{Gd.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0})}catch(c){throw Gd.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),te(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),te(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=_t("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ai(n)?this.events.emit(_t("session_update",s),{}):vs(n)&&this.events.emit(_t("session_update",s),{error:n.error})}),te(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,dr(uu)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),te(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=_t("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ai(n)?this.events.emit(_t("session_extend",s),{}):vs(n)&&this.events.emit(_t("session_extend",s),{error:n.error})}),te(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),te(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=_t("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ai(n)?this.events.emit(_t("session_ping",s),{}):vs(n)&&this.events.emit(_t("session_ping",s),{error:n.error})},500)}),te(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Ar.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Jt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),te(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(qt({topic:o},d));const f=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Li(JSON.stringify(Va("wc_sessionRequest",d,h))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),p={id:h,topic:o,params:d,verifyContext:g};await this.setPendingSessionRequest(p),u===Vt.link_mode&&(n=f.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(f){await this.sendError({id:h,topic:o,error:f}),this.client.logger.error(f)}}),te(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=_t("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ai(n)?this.events.emit(_t("session_request",s),{result:n.result}):vs(n)&&this.events.emit(_t("session_request",s),{error:n.error})}),te(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=Gd.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(qt({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),Gd.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),te(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Ai(n)?this.events.emit(_t("session_request",s),{result:n.result}):vs(n)&&this.events.emit(_t("session_request",s),{error:n.error})}),te(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=i.params,d=await this.getVerifyContext({attestationId:o,hash:Li(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Vt.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:$o,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:yr.wc_sessionAuthenticate.autoReject,appLink:d})}}),te(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),te(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=wi.idle,this.processSessionRequestQueue()},de.toMiliseconds(this.requestQueueDelay))}),te(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=_t("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(_t("session_request",i.request.id),{error:n})})}),te(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===wi.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),te(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=wi.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),te(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Va("wc_sessionPropose",In(qt({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),te(this,"isValidConnect",async r=>{if(!xn(r)){const{message:l}=le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Rr(n)||await this.isValidPairingTopic(n),!Az(c)){const{message:l}=le("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Rr(s)&&Gi(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Rr(i)&&Gi(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Rr(o)||this.validateSessionProps(o,"sessionProperties"),!Rr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),te(this,"validateNamespaces",(r,n)=>{const s=vz(r,"connect()",n);if(s)throw new Error(s.message)}),te(this,"isValidApprove",async r=>{if(!xn(r))throw new Error(le("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=z0(s,"approve()");if(l)throw new Error(l.message);const u=lI(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!ar(i,!0)){const{message:h}=le("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}if(Rr(o)||this.validateSessionProps(o,"sessionProperties"),!Rr(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(s));if(!Object.keys(a).every(d=>h.has(d.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),te(this,"isValidReject",async r=>{if(!xn(r)){const{message:i}=le("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!_z(s)){const{message:i}=le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),te(this,"isValidSessionSettleRequest",r=>{if(!xn(r)){const{message:l}=le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!HP(n)){const{message:l}=le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=gz(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=z0(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ya(o)){const{message:l}=le("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),te(this,"isValidUpdate",async r=>{if(!xn(r)){const{message:c}=le("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=z0(s,"update()");if(o)throw new Error(o.message);const a=lI(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),te(this,"isValidExtend",async r=>{if(!xn(r)){const{message:s}=le("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),te(this,"isValidRequest",async r=>{if(!xn(r)){const{message:c}=le("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!cI(a,i)){const{message:c}=le("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Iz(s)){const{message:c}=le("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!xz(a,i,s.method)){const{message:c}=le("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Rz(o,Q0)){const{message:c}=le("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Q0.min} and ${Q0.max}`);throw new Error(c)}}),te(this,"isValidRespond",async r=>{var n;if(!xn(r)){const{message:o}=le("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!Sz(i)){const{message:o}=le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),te(this,"isValidPing",async r=>{if(!xn(r)){const{message:s}=le("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),te(this,"isValidEmit",async r=>{if(!xn(r)){const{message:a}=le("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!cI(o,i)){const{message:a}=le("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!Nz(s)){const{message:a}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Tz(o,i,s.name)){const{message:a}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),te(this,"isValidDisconnect",async r=>{if(!xn(r)){const{message:s}=le("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),te(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!ar(s,!1))throw new Error("uri is required parameter");if(!ar(i,!1))throw new Error("domain is required parameter");if(!ar(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Yu(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Yu(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),te(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Df,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Vt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),te(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=le("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),te(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),te(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),te(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=le("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),te(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,l,u,h,d;return!r||n!==Vt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),te(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r==null?void 0:r.redirect)==null?void 0:s.universal:void 0}),te(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=A_(r,"topic")||"",s=decodeURIComponent(A_(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Vt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),te(this,"registerLinkModeListeners",async()=>{var r;if(AA()||dc()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),te(this,"getTVFParams",(r,n,s)=>{var i,o,a;if(!((i=n.request)!=null&&i.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const l=this.extractTxHashesFromResult(n.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),te(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),te(this,"extractTxHashesFromResult",(r,n)=>{var s;try{if(!n)return[];const i=r.method,o=nK[i];if(i==="sui_signTransaction")return[tj(n.transactionBytes)];if(i==="near_signTransaction")return[P_(n)];if(i==="near_signTransactions")return n.map(c=>P_(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=n.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Gz({transaction:r.params.transactionPayload,signature:n.signature})];if(i==="algo_signTxn")return Mo(n)?n.map(c=>O_(c)):[O_(n)];if(i==="cosmos_signDirect")return[nj(n)];if(typeof n=="string")return[n];const a=n[o.key];if(Mo(a))return i==="solana_signAllTransactions"?a.map(c=>ej(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ar.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Tm)?this.client.auth.authKeys.get(Tm):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Vt.link_mode?_a:Qs});LA(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:Li(n)})):vy(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ps.expired,async e=>{const{topic:r,id:n}=YT(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,le("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,le("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Rc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Rc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ar(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(ya(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=le("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!ar(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(ya(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=le("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=le("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ar(e,!1)){const{message:r}=le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Cz(e)){const{message:r}=le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(ya(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=le("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class wK extends Zl{constructor(e,r){super(e,r,eK,$A),this.core=e,this.logger=r}}let yK=class extends Zl{constructor(e,r){super(e,r,tK,$A),this.core=e,this.logger=r}};class bK extends Zl{constructor(e,r){super(e,r,sK,$A,n=>n.id),this.core=e,this.logger=r}}class EK extends Zl{constructor(e,r){super(e,r,cK,Cy,()=>Tm),this.core=e,this.logger=r}}class vK extends Zl{constructor(e,r){super(e,r,lK,Cy),this.core=e,this.logger=r}}class AK extends Zl{constructor(e,r){super(e,r,uK,Cy,n=>n.id),this.core=e,this.logger=r}}var CK=Object.defineProperty,_K=(t,e,r)=>e in t?CK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Z0=(t,e,r)=>_K(t,typeof e!="symbol"?e+"":e,r);class IK{constructor(e,r){this.core=e,this.logger=r,Z0(this,"authKeys"),Z0(this,"pairingTopics"),Z0(this,"requests"),this.authKeys=new EK(this.core,this.logger),this.pairingTopics=new vK(this.core,this.logger),this.requests=new AK(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var SK=Object.defineProperty,NK=(t,e,r)=>e in t?SK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,st=(t,e,r)=>NK(t,typeof e!="symbol"?e+"":e,r);let xK=class pO extends p4{constructor(e){super(e),st(this,"protocol",hO),st(this,"version",dO),st(this,"name",Y0.name),st(this,"metadata"),st(this,"core"),st(this,"logger"),st(this,"events",new xs.EventEmitter),st(this,"engine"),st(this,"session"),st(this,"proposal"),st(this,"pendingRequest"),st(this,"auth"),st(this,"signConfig"),st(this,"on",(n,s)=>this.events.on(n,s)),st(this,"once",(n,s)=>this.events.once(n,s)),st(this,"off",(n,s)=>this.events.off(n,s)),st(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),st(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),st(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),st(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),st(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),st(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Y0.name,this.metadata=W9(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gg(yd({level:(e==null?void 0:e.logger)||Y0.logger}));this.core=(e==null?void 0:e.core)||new XG(e),this.logger=nn(r,this.name),this.session=new yK(this.core,this.logger),this.proposal=new wK(this.core,this.logger),this.pendingRequest=new bK(this.core,this.logger),this.engine=new mK(this),this.auth=new IK(this.core,this.logger)}static async init(e){const r=new pO(e);return await r.initialize(),r}get context(){return zn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var nm={exports:{}},GI;function TK(){return GI||(GI=1,(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ui<"u"&&Ui,n=(function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Ui<"u"&&Ui||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(v){return v&&DataView.prototype.isPrototypeOf(v)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(v){return v&&u.indexOf(Object.prototype.toString.call(v))>-1};function d(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function f(v){return typeof v!="string"&&(v=String(v)),v}function g(v){var S={next:function(){var R=v.shift();return{done:R===void 0,value:R}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function p(v){this.map={},v instanceof p?v.forEach(function(S,R){this.append(R,S)},this):Array.isArray(v)?v.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(S){this.append(S,v[S])},this)}p.prototype.append=function(v,S){v=d(v),S=f(S);var R=this.map[v];this.map[v]=R?R+", "+S:S},p.prototype.delete=function(v){delete this.map[d(v)]},p.prototype.get=function(v){return v=d(v),this.has(v)?this.map[v]:null},p.prototype.has=function(v){return this.map.hasOwnProperty(d(v))},p.prototype.set=function(v,S){this.map[d(v)]=f(S)},p.prototype.forEach=function(v,S){for(var R in this.map)this.map.hasOwnProperty(R)&&v.call(S,this.map[R],R,this)},p.prototype.keys=function(){var v=[];return this.forEach(function(S,R){v.push(R)}),g(v)},p.prototype.values=function(){var v=[];return this.forEach(function(S){v.push(S)}),g(v)},p.prototype.entries=function(){var v=[];return this.forEach(function(S,R){v.push([R,S])}),g(v)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function w(v){return new Promise(function(S,R){v.onload=function(){S(v.result)},v.onerror=function(){R(v.error)}})}function E(v){var S=new FileReader,R=w(S);return S.readAsArrayBuffer(v),R}function b(v){var S=new FileReader,R=w(S),L=/charset=([A-Za-z0-9_-]+)/.exec(v.type),F=L?L[1]:"utf-8";return S.readAsText(v,F),R}function C(v){for(var S=new Uint8Array(v),R=new Array(S.length),L=0;L<S.length;L++)R[L]=String.fromCharCode(S[L]);return R.join("")}function I(v){if(v.slice)return v.slice(0);var S=new Uint8Array(v.byteLength);return S.set(new Uint8Array(v)),S.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:c.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:c.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():c.arrayBuffer&&c.blob&&l(v)?(this._bodyArrayBuffer=I(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||h(v))?this._bodyArrayBuffer=I(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=m(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(E);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(v){var S=v.toUpperCase();return O.indexOf(S)>-1?S:v}function N(v,S){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var R=S.body;if(v instanceof N){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,S.headers||(this.headers=new p(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!R&&v._bodyInit!=null&&(R=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new p(S.headers)),this.method=T(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||(function(){if("AbortController"in a){var j=new AbortController;return j.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var L=/([?&])_=[^&]*/;if(L.test(this.url))this.url=this.url.replace(L,"$1_="+new Date().getTime());else{var F=/\?/;this.url+=(F.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function k(v){var S=new FormData;return v.trim().split("&").forEach(function(R){if(R){var L=R.split("="),F=L.shift().replace(/\+/g," "),j=L.join("=").replace(/\+/g," ");S.append(decodeURIComponent(F),decodeURIComponent(j))}}),S}function U(v){var S=new p,R=v.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function(L){return L.indexOf(`
`)===0?L.substr(1,L.length):L}).forEach(function(L){var F=L.split(":"),j=F.shift().trim();if(j){var K=F.join(":").trim();try{S.append(j,K)}catch(Q){console.warn("Response "+Q.message)}}}),S}_.call(N.prototype);function $(v,S){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new p(S.headers),this.url=S.url||"",this._initBody(v)}_.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},$.error=function(){var v=new $(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var V=[301,302,303,307,308];$.redirect=function(v,S){if(V.indexOf(S)===-1)throw new RangeError("Invalid status code");return new $(null,{status:S,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,R){this.message=S,this.name=R;var L=Error(S);this.stack=L.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function z(v,S){return new Promise(function(R,L){var F=new N(v,S);if(F.signal&&F.signal.aborted)return L(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function K(){j.abort()}j.onload=function(){var ie={statusText:j.statusText,headers:U(j.getAllResponseHeaders()||"")};F.url.indexOf("file://")===0&&(j.status<200||j.status>599)?ie.status=200:ie.status=j.status,ie.url="responseURL"in j?j.responseURL:ie.headers.get("X-Request-URL");var we="response"in j?j.response:j.responseText;setTimeout(function(){R(new $(we,ie))},0)},j.onerror=function(){setTimeout(function(){L(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){L(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){L(new o.DOMException("Aborted","AbortError"))},0)};function Q(ie){try{return ie===""&&a.location.href?a.location.href:ie}catch{return ie}}if(j.open(F.method,Q(F.url),!0),F.credentials==="include"?j.withCredentials=!0:F.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof p||a.Headers&&S.headers instanceof a.Headers)){var ce=[];Object.getOwnPropertyNames(S.headers).forEach(function(ie){ce.push(d(ie)),j.setRequestHeader(ie,f(S.headers[ie]))}),F.headers.forEach(function(ie,we){ce.indexOf(we)===-1&&j.setRequestHeader(we,ie)})}else F.headers.forEach(function(ie,we){j.setRequestHeader(we,ie)});F.signal&&(F.signal.addEventListener("abort",K),j.onreadystatechange=function(){j.readyState===4&&F.signal.removeEventListener("abort",K)}),j.send(typeof F._bodyInit>"u"?null:F._bodyInit)})}return z.polyfill=!0,a.fetch||(a.fetch=z,a.Headers=p,a.Request=N,a.Response=$),o.Headers=p,o.Request=N,o.Response=$,o.fetch=z,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(nm,nm.exports)),nm.exports}var PK=TK();const KI=Zv(PK);var OK=Object.defineProperty,RK=Object.defineProperties,DK=Object.getOwnPropertyDescriptors,JI=Object.getOwnPropertySymbols,kK=Object.prototype.hasOwnProperty,UK=Object.prototype.propertyIsEnumerable,YI=(t,e,r)=>e in t?OK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,QI=(t,e)=>{for(var r in e||(e={}))kK.call(e,r)&&YI(t,r,e[r]);if(JI)for(var r of JI(e))UK.call(e,r)&&YI(t,r,e[r]);return t},ZI=(t,e)=>RK(t,DK(e));const BK={Accept:"application/json","Content-Type":"application/json"},LK="POST",XI={headers:BK,method:LK},eS=10;let oi=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new xs.EventEmitter,this.isAvailable=!1,this.registering=!1,!mI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=qo(e),n=await(await KI(this.url,ZI(QI({},XI),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!mI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=qo({id:1,jsonrpc:"2.0",method:"test",params:[]});await KI(e,ZI(QI({},XI),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Rl(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Ey(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return VP(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>eS&&this.events.setMaxListeners(eS)}};const tS="error",$K="wss://relay.walletconnect.org",MK="wc",FK="universal_provider",sm=`${MK}@2:${FK}:`,gO="https://rpc.walletconnect.org/v1/",Tu="generic",jK=`${gO}bundler`,Ps={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function MA(t){return t==null||typeof t!="object"&&typeof t!="function"}function mO(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function wO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const HK="[object RegExp]",yO="[object String]",bO="[object Number]",EO="[object Boolean]",vO="[object Arguments]",zK="[object Symbol]",qK="[object Date]",VK="[object Map]",WK="[object Set]",GK="[object Array]",KK="[object ArrayBuffer]",JK="[object Object]",YK="[object DataView]",QK="[object Uint8Array]",ZK="[object Uint8ClampedArray]",XK="[object Uint16Array]",eJ="[object Uint32Array]",tJ="[object Int8Array]",rJ="[object Int16Array]",nJ="[object Int32Array]",sJ="[object Float32Array]",iJ="[object Float64Array]";function FA(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oJ(t,e){return $u(t,void 0,t,new Map,e)}function $u(t,e,r,n=new Map,s=void 0){const i=s==null?void 0:s(t,e,r,n);if(i!=null)return i;if(MA(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=$u(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,$u(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add($u(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(FA(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=$u(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Dc(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Dc(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Dc(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Dc(o,t,r,n,s),o}if(typeof t=="object"&&aJ(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Dc(o,t,r,n,s),o}return t}function Dc(t,e,r=t,n,s){const i=[...Object.keys(e),...mO(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=$u(e[a],a,r,n,s))}}function aJ(t){switch(wO(t)){case vO:case GK:case KK:case YK:case EO:case qK:case sJ:case iJ:case tJ:case rJ:case nJ:case VK:case bO:case JK:case HK:case WK:case yO:case zK:case QK:case ZK:case XK:case eJ:return!0;default:return!1}}function cJ(t,e){return oJ(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case bO:case yO:case EO:{const o=new t.constructor(t==null?void 0:t.valueOf());return Dc(o,t),o}case vO:{const o={};return Dc(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function rS(t){return cJ(t)}function nS(t){return t!==null&&typeof t=="object"&&wO(t)==="[object Arguments]"}function sS(t){return typeof t=="object"&&t!==null}function lJ(){}function uJ(t){return FA(t)}function hJ(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function dJ(t){if(MA(t))return t;if(Array.isArray(t)||FA(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function fJ(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=LE(s,o,n,new Map)}return s}function LE(t,e,r,n){if(MA(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return dJ(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...mO(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(nS(a)&&(a={...a}),nS(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=rS(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const f=h[d];u[f]=c[f]}c=u}else c=[];const l=r(c,a,o,t,e,n);l!=null?t[o]=l:Array.isArray(a)||sS(c)&&sS(a)?t[o]=LE(c,a,r,n):c==null&&hJ(a)?t[o]=LE({},a,r,n):c==null&&uJ(a)?t[o]=rS(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function pJ(t,...e){return fJ(t,...e,lJ)}var gJ=Object.defineProperty,mJ=Object.defineProperties,wJ=Object.getOwnPropertyDescriptors,iS=Object.getOwnPropertySymbols,yJ=Object.prototype.hasOwnProperty,bJ=Object.prototype.propertyIsEnumerable,oS=(t,e,r)=>e in t?gJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,im=(t,e)=>{for(var r in e||(e={}))yJ.call(e,r)&&oS(t,r,e[r]);if(iS)for(var r of iS(e))bJ.call(e,r)&&oS(t,r,e[r]);return t},EJ=(t,e)=>mJ(t,wJ(e));function os(t,e,r){var n;const s=Yu(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${gO}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function Xl(t){return t.includes(":")?t.split(":")[1]:t}function AO(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function vJ(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function aS(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,s;return((n=r==null?void 0:r.chains)==null?void 0:n.length)&&((s=r==null?void 0:r.chains)==null?void 0:s.length)>0}))}function om(t={},e={}){const r=aS(cS(t)),n=aS(cS(e));return pJ(r,n)}function cS(t){var e,r,n,s,i;const o={};if(!Gi(t))return o;for(const[a,c]of Object.entries(t)){const l=yy(a)?[a]:c.chains,u=c.methods||[],h=c.events||[],d=c.rpcMap||{},f=Lu(a);o[f]=EJ(im(im({},o[f]),c),{chains:Wi(l,(e=o[f])==null?void 0:e.chains),methods:Wi(u,(r=o[f])==null?void 0:r.methods),events:Wi(h,(n=o[f])==null?void 0:n.events)}),(Gi(d)||Gi(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=im(im({},d),(i=o[f])==null?void 0:i.rpcMap))}return o}function lS(t){return t.includes(":")?t.split(":")[2]:t}function uS(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=yy(r)?[r]:n.chains?n.chains:AO(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function X0(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const CO={},Et=t=>CO[t],eb=(t,e)=>{CO[t]=e};var AJ=Object.defineProperty,hS=Object.getOwnPropertySymbols,CJ=Object.prototype.hasOwnProperty,_J=Object.prototype.propertyIsEnumerable,dS=(t,e,r)=>e in t?AJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fS=(t,e)=>{for(var r in e||(e={}))CJ.call(e,r)&&dS(t,r,e[r]);if(hS)for(var r of hS(e))_J.call(e,r)&&dS(t,r,e[r]);return t};const pS="eip155",IJ=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],SJ=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,tb=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,gS=t=>Object.keys(t).filter(e=>IJ.includes(e)).reduce((e,r)=>(e[r]=t[r],e),{}),NJ=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:s={}}=t,i={};if(!Gi(s)&&!Gi(n))return;const o=gS(n);for(const a of r){const c=SJ(a);if(!c)continue;i[tb(c)]=o;const l=s==null?void 0:s[`${pS}:${c}`];if(l){const u=l==null?void 0:l[`${pS}:${c}:${e}`];i[tb(c)]=fS(fS({},i[tb(c)]),gS(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var xJ=Object.defineProperty,TJ=(t,e,r)=>e in t?xJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hu=(t,e,r)=>TJ(t,typeof e!="symbol"?e+"":e,r);class PJ{constructor(e){hu(this,"name","polkadot"),hu(this,"client"),hu(this,"httpProviders"),hu(this,"events"),hu(this,"namespace"),hu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var OJ=Object.defineProperty,RJ=Object.defineProperties,DJ=Object.getOwnPropertyDescriptors,mS=Object.getOwnPropertySymbols,kJ=Object.prototype.hasOwnProperty,UJ=Object.prototype.propertyIsEnumerable,$E=(t,e,r)=>e in t?OJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wS=(t,e)=>{for(var r in e||(e={}))kJ.call(e,r)&&$E(t,r,e[r]);if(mS)for(var r of mS(e))UJ.call(e,r)&&$E(t,r,e[r]);return t},yS=(t,e)=>RJ(t,DJ(e)),du=(t,e,r)=>$E(t,typeof e!="symbol"?e+"":e,r);class BJ{constructor(e){du(this,"name","eip155"),du(this,"client"),du(this,"chainId"),du(this,"namespace"),du(this,"httpProviders"),du(this,"events"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||os(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(Xl(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s,i,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},h=`${a}${c.join(",")}`,d=u==null?void 0:u[h];if(d)return d;let f;try{f=NJ(l,a,c)}catch(p){console.warn("Failed to extract capabilities from session",p)}if(f)return f;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:yS(wS({},l.sessionProperties||{}),{capabilities:yS(wS({},u||{}),{[h]:g})})})}catch(p){console.warn("Failed to update session with capabilities",p)}return g}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Va("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${jK}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var LJ=Object.defineProperty,$J=(t,e,r)=>e in t?LJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fu=(t,e,r)=>$J(t,typeof e!="symbol"?e+"":e,r);class MJ{constructor(e){fu(this,"name","solana"),fu(this,"client"),fu(this,"httpProviders"),fu(this,"events"),fu(this,"namespace"),fu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var FJ=Object.defineProperty,jJ=(t,e,r)=>e in t?FJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pu=(t,e,r)=>jJ(t,typeof e!="symbol"?e+"":e,r);class HJ{constructor(e){pu(this,"name","cosmos"),pu(this,"client"),pu(this,"httpProviders"),pu(this,"events"),pu(this,"namespace"),pu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var zJ=Object.defineProperty,qJ=(t,e,r)=>e in t?zJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gu=(t,e,r)=>qJ(t,typeof e!="symbol"?e+"":e,r);class VJ{constructor(e){gu(this,"name","algorand"),gu(this,"client"),gu(this,"httpProviders"),gu(this,"events"),gu(this,"namespace"),gu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||os(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Ts(new oi(n,Et("disableProviderPing")))}}var WJ=Object.defineProperty,GJ=(t,e,r)=>e in t?WJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mu=(t,e,r)=>GJ(t,typeof e!="symbol"?e+"":e,r);class KJ{constructor(e){mu(this,"name","cip34"),mu(this,"client"),mu(this,"httpProviders"),mu(this,"events"),mu(this,"namespace"),mu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=Xl(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var JJ=Object.defineProperty,YJ=(t,e,r)=>e in t?JJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wu=(t,e,r)=>YJ(t,typeof e!="symbol"?e+"":e,r);class QJ{constructor(e){wu(this,"name","elrond"),wu(this,"client"),wu(this,"httpProviders"),wu(this,"events"),wu(this,"namespace"),wu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var ZJ=Object.defineProperty,XJ=(t,e,r)=>e in t?ZJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yu=(t,e,r)=>XJ(t,typeof e!="symbol"?e+"":e,r);class eY{constructor(e){yu(this,"name","multiversx"),yu(this,"client"),yu(this,"httpProviders"),yu(this,"events"),yu(this,"namespace"),yu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Xl(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var tY=Object.defineProperty,rY=(t,e,r)=>e in t?tY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bu=(t,e,r)=>rY(t,typeof e!="symbol"?e+"":e,r);class nY{constructor(e){bu(this,"name","near"),bu(this,"client"),bu(this,"httpProviders"),bu(this,"events"),bu(this,"namespace"),bu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||os(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace);return typeof n>"u"?void 0:new Ts(new oi(n,Et("disableProviderPing")))}}var sY=Object.defineProperty,iY=(t,e,r)=>e in t?sY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Eu=(t,e,r)=>iY(t,typeof e!="symbol"?e+"":e,r);class oY{constructor(e){Eu(this,"name","tezos"),Eu(this,"client"),Eu(this,"httpProviders"),Eu(this,"events"),Eu(this,"namespace"),Eu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||os(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace);return typeof n>"u"?void 0:new Ts(new oi(n))}}var aY=Object.defineProperty,cY=(t,e,r)=>e in t?aY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vu=(t,e,r)=>cY(t,typeof e!="symbol"?e+"":e,r);class lY{constructor(e){vu(this,"name",Tu),vu(this,"client"),vu(this,"httpProviders"),vu(this,"events"),vu(this,"namespace"),vu(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Ps.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=Yu(s);n[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||os(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ts(new oi(n,Et("disableProviderPing")))}}var uY=Object.defineProperty,hY=Object.defineProperties,dY=Object.getOwnPropertyDescriptors,bS=Object.getOwnPropertySymbols,fY=Object.prototype.hasOwnProperty,pY=Object.prototype.propertyIsEnumerable,ME=(t,e,r)=>e in t?uY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,am=(t,e)=>{for(var r in e||(e={}))fY.call(e,r)&&ME(t,r,e[r]);if(bS)for(var r of bS(e))pY.call(e,r)&&ME(t,r,e[r]);return t},rb=(t,e)=>hY(t,dY(e)),hs=(t,e,r)=>ME(t,typeof e!="symbol"?e+"":e,r);class jA{constructor(e){hs(this,"client"),hs(this,"namespaces"),hs(this,"optionalNamespaces"),hs(this,"sessionProperties"),hs(this,"scopedProperties"),hs(this,"events",new lA),hs(this,"rpcProviders",{}),hs(this,"session"),hs(this,"providerOpts"),hs(this,"logger"),hs(this,"uri"),hs(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:gg(yd({level:(e==null?void 0:e.logger)||tS})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new jA(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:am({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,by(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=uS(this.session.namespaces);this.namespaces=om(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=uS(s.namespaces);return this.namespaces=om(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e),i=this.getProvider(n);i.name===Tu?i.setDefaultChain(`${n}:${s}`,r):i.setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Mo(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await xK.init({core:this.providerOpts.core,logger:this.providerOpts.logger||tS,relayUrl:this.providerOpts.relayUrl||$K,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Lu(r)))];eb("client",this.client),eb("events",this.events),eb("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=vJ(r,this.session);if((n==null?void 0:n.length)===0)return;const s=AO(n),i=om(this.namespaces,this.optionalNamespaces),o=rb(am({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new BJ({namespace:o});break;case"algorand":this.rpcProviders[r]=new VJ({namespace:o});break;case"solana":this.rpcProviders[r]=new MJ({namespace:o});break;case"cosmos":this.rpcProviders[r]=new HJ({namespace:o});break;case"polkadot":this.rpcProviders[r]=new PJ({namespace:o});break;case"cip34":this.rpcProviders[r]=new KJ({namespace:o});break;case"elrond":this.rpcProviders[r]=new QJ({namespace:o});break;case"multiversx":this.rpcProviders[r]=new eY({namespace:o});break;case"near":this.rpcProviders[r]=new nY({namespace:o});break;case"tezos":this.rpcProviders[r]=new oY({namespace:o});break;default:this.rpcProviders[Tu]?this.rpcProviders[Tu].updateNamespace(o):this.rpcProviders[Tu]=new lY({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Mo(o)&&this.events.emit("accountsChanged",o.map(lS))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Lu(o),l=X0(o)!==X0(a)?`${c}:${X0(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=rb(am({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",rb(am({},Jt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Ps.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Tu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=om(r,n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Lu(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Lu(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s),this.events.emit("chainChanged",s);const i=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(lS);if(!Mo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${sm}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${sm}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${sm}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(sm)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}let vc=null;const rs={getSIWX(){return J.state.siwx},async initializeIfEnabled(t=x.getActiveCaipAddress()){var i,o,a;const e=J.state.siwx;if(!(e&&t))return;const[r,n,s]=t.split(":");if(x.checkIfSupportedNetwork(r,`${r}:${n}`))try{if((i=J.state.remoteFeatures)!=null&&i.emailCapture){const l=(o=x.getAccountData(r))==null?void 0:o.user;await ht.open({view:"DataCapture",data:{email:(l==null?void 0:l.email)??void 0}});return}if(vc&&await vc,(await e.getSessions(`${r}:${n}`,s)).length)return;await ht.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),Pt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((a=fe._getClient())==null?void 0:a.disconnect().catch(console.error)),je.reset("Connect"),ji.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=J.state.siwx,e=_e.getPlainAddress(x.getActiveCaipAddress()),r=zb(),n=fe._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();ue.getConnectorId(r.chainNamespace)===q.CONNECTOR_ID.AUTH&&je.pushTransactionStack({});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),x.setLastConnectedSIWECaipNetwork(r),ht.close(),Pt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ht.state.open||je.state.view==="ApproveTransaction")&&await ht.open({view:"SIWXSignMessage"}),ji.showError("Error signing message"),Pt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const n=x.getLastConnectedSIWECaipNetwork();if(n){const s=await(e==null?void 0:e.getSessions(n==null?void 0:n.caipNetworkId,_e.getPlainAddress(x.getActiveCaipAddress())||""));s&&s.length>0?await x.switchActiveNetwork(n):await fe.disconnect()}else await fe.disconnect()}else ht.close();ht.close(),Pt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=x.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const s=await(t==null?void 0:t.getSessions(n.caipNetworkId,_e.getPlainAddress(x.getActiveCaipAddress())||""));s&&r.push(...s)})),r},async getSessions(t){const e=J.state.siwx;let r=t==null?void 0:t.address;if(!r){const s=x.getActiveCaipAddress();r=_e.getPlainAddress(s)}let n=t==null?void 0:t.caipNetworkId;if(!n){const s=x.getActiveCaipNetwork();n=s==null?void 0:s.caipNetworkId}return e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=je.state.view==="ApproveTransaction",n=je.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:s}){var u;const i=rs.getSIWX();if(!i||!s.includes(q.CHAIN.EVM)||(u=J.state.remoteFeatures)!=null&&u.emailCapture){const h=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}const o=`${s}:${e}`,a=await i.createMessage({chainId:o,accountAddress:"<<AccountAddress>>"}),c={accountAddress:a.accountAddress,chainId:a.chainId,domain:a.domain,uri:a.uri,version:a.version,nonce:a.nonce,notBefore:a.notBefore,statement:a.statement,resources:a.resources,requestId:a.requestId,issuedAt:a.issuedAt,expirationTime:a.expirationTime,serializedMessage:a.toString()},l=await t.connect({chainId:e,socialUri:r,siwxMessage:c,preferredAccountType:n});return c.accountAddress=l.address,c.serializedMessage=l.message||"",l.signature&&l.message&&await rs.addEmbeddedWalletSession(c,l.message,l.signature),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,r){if(vc)return vc;const n=rs.getSIWX();return n?(vc=n.addSession({data:t,message:e,signature:r}).finally(()=>{vc=null}),vc):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,l;const n=rs.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const i=await n.createMessage({chainId:((a=zb())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:r,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(ji.showLoading("Authenticating...",{autoClose:!1}),xe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(h=>{const d=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||i.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(u),Pt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:rs.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Pt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:rs.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{ji.hide()}}return!0},getSIWXEventProperties(){var e;const t=x.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=x.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Fn(t)===gr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},yt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:q.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},$i={ConnectorExplorerIds:{[q.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[q.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[q.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[q.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[q.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[yt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[yt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[yt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[yt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[yt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[yt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[yt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[yt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[yt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[yt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[yt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[q.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[q.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[q.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[q.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[q.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[q.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[q.CONNECTOR_ID.INJECTED]:"Browser Wallet",[q.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[q.CONNECTOR_ID.COINBASE]:"Coinbase",[q.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[q.CONNECTOR_ID.LEDGER]:"Ledger",[q.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[q.CONNECTOR_ID.INJECTED]:"INJECTED",[q.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[q.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[q.CONNECTOR_ID.AUTH]:"AUTH",[yt.CONNECTOR_TYPE_AUTH]:"AUTH"}},_r={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${yt.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=x.state.activeChain;return q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ue.getConnectorId(e)===q.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(s=>{async function i(){return n+=1,await t()?s(!0):n>=r?s(!1):(setTimeout(i,e),null)}i()})}},gY=new AbortController,Yr={EmbeddedWalletAbortController:gY,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Bu()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system’s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},mY={createLogger(t,e="error"){const r=yd({level:e}),{logger:n}=hA({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},wY="rpc.walletconnect.org";function ES(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const nb=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Pu={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===wY}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:q.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${q.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var s,i,o;const n=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return nb.includes(e)?ES(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var d,f,g,p,m,w,E;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(g=(f=(d=t.rpcUrls)==null?void 0:d.default)==null?void 0:f.http)==null?void 0:g[0],a=this.getDefaultRpcUrl(t,i,r),c=((w=(m=(p=t==null?void 0:t.rpcUrls)==null?void 0:p.chainDefault)==null?void 0:m.http)==null?void 0:w[0])||o,l=((E=n==null?void 0:n[i])==null?void 0:E.map(b=>b.url))||[],u=[...l,...a?[a]:[]],h=[...l];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:$i.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Pu.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){var s,i,o;const n=[];return r==null||r.forEach(a=>{n.push(Hg(a.url,a.config))}),nb.includes(t.caipNetworkId)&&n.push(Hg(ES(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{n.push(Hg(a))}),dC(n)},extendWagmiTransports(t,e,r){if(nb.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return dC([r,Hg(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:q.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=X.getActiveCaipNetworkId(),r=x.getAllRequestedCaipNetworks(),n=Array.from(((c=x.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?n.includes(s):!1,o=r==null?void 0:r.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},gw={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Sn=zt({providers:{...gw},providerIds:{...gw}}),wt={state:Sn,subscribeKey(t,e){return rn(Sn,t,e)},subscribe(t){return Br(Sn,()=>{t(Sn)})},subscribeProviders(t){return Br(Sn.providers,()=>t(Sn.providers))},setProvider(t,e){t&&e&&(Sn.providers[t]=Il(e))},getProvider(t){if(t)return Sn.providers[t]},setProviderId(t,e){e&&(Sn.providerIds[t]=e)},getProviderId(t){if(t)return Sn.providerIds[t]},reset(){Sn.providers={...gw},Sn.providerIds={...gw}},resetChain(t){Sn.providers[t]=void 0,Sn.providerIds[t]=void 0}},vS={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Pr={set(t,e){ns.isClient&&localStorage.setItem(`${Ne.STORAGE_KEY}${t}`,e)},get(t){return ns.isClient?localStorage.getItem(`${Ne.STORAGE_KEY}${t}`):null},delete(t,e){ns.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ne.STORAGE_KEY}${t}`))}},cm=30*1e3,ns={checkIfAllowedToTriggerEmail(){const t=Pr.get(Ne.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<cm){const r=Math.ceil((cm-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=Pr.get(Ne.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<cm)return Math.ceil((cm-e)/1e3)}return 0},checkIfRequestExists(t){return gr.NOT_SAFE_RPC_METHODS.includes(t.method)||gr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(vS.transactionHash))||(t==null?void 0:t.match(vS.signedMessage)))?Ne.RPC_RESPONSE_TYPE_TX:Ne.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return gr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var bt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(bt||(bt={}));var FE;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(FE||(FE={}));const Ee=bt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ia=t=>{switch(typeof t){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return isNaN(t)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(t)?Ee.array:t===null?Ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ee.promise:typeof Map<"u"&&t instanceof Map?Ee.map:typeof Set<"u"&&t instanceof Set?Ee.set:typeof Date<"u"&&t instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},oe=bt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yY=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ri extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,bt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ri.create=t=>new ri(t);const Ap=(t,e)=>{let r;switch(t.code){case oe.invalid_type:t.received===Ee.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,bt.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:r=`Unrecognized key(s) in object: ${bt.joinValues(t.keys,", ")}`;break;case oe.invalid_union:r="Invalid input";break;case oe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${bt.joinValues(t.options)}`;break;case oe.invalid_enum_value:r=`Invalid enum value. Expected ${bt.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:r="Invalid function arguments";break;case oe.invalid_return_type:r="Invalid function return type";break;case oe.invalid_date:r="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:bt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case oe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case oe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case oe.custom:r="Invalid input";break;case oe.invalid_intersection_types:r="Intersection results could not be merged";break;case oe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:r="Number must be finite";break;default:r=e.defaultError,bt.assertNever(t)}return{message:r}};let _O=Ap;function bY(t){_O=t}function mw(){return _O}const ww=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},EY=[];function Ce(t,e){const r=ww({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,mw(),Ap].filter(n=>!!n)});t.common.issues.push(r)}class tn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return qe;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return tn.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return qe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const qe=Object.freeze({status:"aborted"}),IO=t=>({status:"dirty",value:t}),bn=t=>({status:"valid",value:t}),jE=t=>t.status==="aborted",HE=t=>t.status==="dirty",Cp=t=>t.status==="valid",yw=t=>typeof Promise<"u"&&t instanceof Promise;var Be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Be||(Be={}));class Xi{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const AS=(t,e)=>{if(Cp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ri(t.common.issues);return this._error=r,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class Ze{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ia(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ia(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tn,ctx:{common:e.parent.common,data:e.data,parsedType:Ia(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(yw(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ia(e)},i=this._parseSync({data:e,path:s.path,parent:s});return AS(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ia(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(yw(s)?s:Promise.resolve(s));return AS(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:oe.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new si({schema:this,typeName:Me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Fo.create(this,this._def)}nullable(){return $l.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ni.create(this,this._def)}promise(){return sd.create(this,this._def)}or(e){return Np.create([this,e],this._def)}and(e){return xp.create(this,e,this._def)}transform(e){return new si({...Ge(this._def),schema:this,typeName:Me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Dp({...Ge(this._def),innerType:this,defaultValue:r,typeName:Me.ZodDefault})}brand(){return new NO({typeName:Me.ZodBranded,type:this,...Ge(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Aw({...Ge(this._def),innerType:this,catchValue:r,typeName:Me.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return _g.create(this,e)}readonly(){return _w.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vY=/^c[^\s-]{8,}$/i,AY=/^[a-z][a-z0-9]*$/,CY=/^[0-9A-HJKMNP-TV-Z]{26}$/,_Y=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,IY=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,SY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sb;const NY=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,xY=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,TY=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function PY(t,e){return!!((e==="v4"||!e)&&NY.test(t)||(e==="v6"||!e)&&xY.test(t))}class Zs extends Ze{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ee.string){const i=this._getOrReturnCtx(e);return Ce(i,{code:oe.invalid_type,expected:Ee.string,received:i.parsedType}),qe}const n=new tn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ce(s,{code:oe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ce(s,{code:oe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")IY.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"email",code:oe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")sb||(sb=new RegExp(SY,"u")),sb.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"emoji",code:oe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")_Y.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"uuid",code:oe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")vY.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"cuid",code:oe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")AY.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"cuid2",code:oe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")CY.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"ulid",code:oe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ce(s,{validation:"url",code:oe.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"regex",code:oe.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?TY(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?PY(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ce(s,{validation:"ip",code:oe.invalid_string,message:i.message}),n.dirty()):bt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:oe.invalid_string,...Be.errToObj(n)})}_addCheck(e){return new Zs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Be.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...Be.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Be.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...Be.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Be.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Be.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Be.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Be.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Be.errToObj(r)})}nonempty(e){return this.min(1,Be.errToObj(e))}trim(){return new Zs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Zs.create=t=>{var e;return new Zs({checks:[],typeName:Me.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};function OY(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class rc extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ee.number){const i=this._getOrReturnCtx(e);return Ce(i,{code:oe.invalid_type,expected:Ee.number,received:i.parsedType}),qe}let n;const s=new tn;for(const i of this._def.checks)i.kind==="int"?bt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?OY(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.not_finite,message:i.message}),s.dirty()):bt.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Be.toString(r))}setLimit(e,r,n,s){return new rc({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Be.toString(s)}]})}_addCheck(e){return new rc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Be.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Be.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&bt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}rc.create=t=>new rc({checks:[],typeName:Me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class nc extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ee.bigint){const i=this._getOrReturnCtx(e);return Ce(i,{code:oe.invalid_type,expected:Ee.bigint,received:i.parsedType}),qe}let n;const s=new tn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:oe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):bt.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Be.toString(r))}setLimit(e,r,n,s){return new nc({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Be.toString(s)}]})}_addCheck(e){return new nc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Be.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}nc.create=t=>{var e;return new nc({checks:[],typeName:Me.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};class _p extends Ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ee.boolean){const n=this._getOrReturnCtx(e);return Ce(n,{code:oe.invalid_type,expected:Ee.boolean,received:n.parsedType}),qe}return bn(e.data)}}_p.create=t=>new _p({typeName:Me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class Bl extends Ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ee.date){const i=this._getOrReturnCtx(e);return Ce(i,{code:oe.invalid_type,expected:Ee.date,received:i.parsedType}),qe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ce(i,{code:oe.invalid_date}),qe}const n=new tn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ce(s,{code:oe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):bt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bl({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Be.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Be.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Bl.create=t=>new Bl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Me.ZodDate,...Ge(t)});class bw extends Ze{_parse(e){if(this._getType(e)!==Ee.symbol){const n=this._getOrReturnCtx(e);return Ce(n,{code:oe.invalid_type,expected:Ee.symbol,received:n.parsedType}),qe}return bn(e.data)}}bw.create=t=>new bw({typeName:Me.ZodSymbol,...Ge(t)});class Ip extends Ze{_parse(e){if(this._getType(e)!==Ee.undefined){const n=this._getOrReturnCtx(e);return Ce(n,{code:oe.invalid_type,expected:Ee.undefined,received:n.parsedType}),qe}return bn(e.data)}}Ip.create=t=>new Ip({typeName:Me.ZodUndefined,...Ge(t)});class Sp extends Ze{_parse(e){if(this._getType(e)!==Ee.null){const n=this._getOrReturnCtx(e);return Ce(n,{code:oe.invalid_type,expected:Ee.null,received:n.parsedType}),qe}return bn(e.data)}}Sp.create=t=>new Sp({typeName:Me.ZodNull,...Ge(t)});class nd extends Ze{constructor(){super(...arguments),this._any=!0}_parse(e){return bn(e.data)}}nd.create=t=>new nd({typeName:Me.ZodAny,...Ge(t)});class El extends Ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return bn(e.data)}}El.create=t=>new El({typeName:Me.ZodUnknown,...Ge(t)});class Go extends Ze{_parse(e){const r=this._getOrReturnCtx(e);return Ce(r,{code:oe.invalid_type,expected:Ee.never,received:r.parsedType}),qe}}Go.create=t=>new Go({typeName:Me.ZodNever,...Ge(t)});class Ew extends Ze{_parse(e){if(this._getType(e)!==Ee.undefined){const n=this._getOrReturnCtx(e);return Ce(n,{code:oe.invalid_type,expected:Ee.void,received:n.parsedType}),qe}return bn(e.data)}}Ew.create=t=>new Ew({typeName:Me.ZodVoid,...Ge(t)});class ni extends Ze{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==Ee.array)return Ce(r,{code:oe.invalid_type,expected:Ee.array,received:r.parsedType}),qe;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(Ce(r,{code:o?oe.too_big:oe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Ce(r,{code:oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Ce(r,{code:oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Xi(r,o,r.path,a)))).then(o=>tn.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Xi(r,o,r.path,a)));return tn.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new ni({...this._def,minLength:{value:e,message:Be.toString(r)}})}max(e,r){return new ni({...this._def,maxLength:{value:e,message:Be.toString(r)}})}length(e,r){return new ni({...this._def,exactLength:{value:e,message:Be.toString(r)}})}nonempty(e){return this.min(1,e)}}ni.create=(t,e)=>new ni({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Me.ZodArray,...Ge(e)});function Ou(t){if(t instanceof Yt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Fo.create(Ou(n))}return new Yt({...t._def,shape:()=>e})}else return t instanceof ni?new ni({...t._def,type:Ou(t.element)}):t instanceof Fo?Fo.create(Ou(t.unwrap())):t instanceof $l?$l.create(Ou(t.unwrap())):t instanceof eo?eo.create(t.items.map(e=>Ou(e))):t}class Yt extends Ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=bt.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Ee.object){const l=this._getOrReturnCtx(e);return Ce(l,{code:oe.invalid_type,expected:Ee.object,received:l.parsedType}),qe}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Go&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],h=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Xi(s,h,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Go){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ce(s,{code:oe.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const h=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Xi(s,h,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const h=await u.key;l.push({key:h,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>tn.mergeObjectSync(n,l)):tn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Be.errToObj,new Yt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Be.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Yt({...this._def,unknownKeys:"strip"})}passthrough(){return new Yt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Yt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Yt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Me.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Yt({...this._def,catchall:e})}pick(e){const r={};return bt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Yt({...this._def,shape:()=>r})}omit(e){const r={};return bt.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Yt({...this._def,shape:()=>r})}deepPartial(){return Ou(this)}partial(e){const r={};return bt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new Yt({...this._def,shape:()=>r})}required(e){const r={};return bt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Fo;)i=i._def.innerType;r[n]=i}}),new Yt({...this._def,shape:()=>r})}keyof(){return SO(bt.objectKeys(this.shape))}}Yt.create=(t,e)=>new Yt({shape:()=>t,unknownKeys:"strip",catchall:Go.create(),typeName:Me.ZodObject,...Ge(e)});Yt.strictCreate=(t,e)=>new Yt({shape:()=>t,unknownKeys:"strict",catchall:Go.create(),typeName:Me.ZodObject,...Ge(e)});Yt.lazycreate=(t,e)=>new Yt({shape:t,unknownKeys:"strip",catchall:Go.create(),typeName:Me.ZodObject,...Ge(e)});class Np extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ri(a.ctx.common.issues));return Ce(r,{code:oe.invalid_union,unionErrors:o}),qe}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const l={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ri(c));return Ce(r,{code:oe.invalid_union,unionErrors:a}),qe}}get options(){return this._def.options}}Np.create=(t,e)=>new Np({options:t,typeName:Me.ZodUnion,...Ge(e)});const Pm=t=>t instanceof Pp?Pm(t.schema):t instanceof si?Pm(t.innerType()):t instanceof Op?[t.value]:t instanceof sc?t.options:t instanceof Rp?Object.keys(t.enum):t instanceof Dp?Pm(t._def.innerType):t instanceof Ip?[void 0]:t instanceof Sp?[null]:null;class _y extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.object)return Ce(r,{code:oe.invalid_type,expected:Ee.object,received:r.parsedType}),qe;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(Ce(r,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=Pm(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new _y({typeName:Me.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Ge(n)})}}function zE(t,e){const r=Ia(t),n=Ia(e);if(t===e)return{valid:!0,data:t};if(r===Ee.object&&n===Ee.object){const s=bt.objectKeys(e),i=bt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=zE(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===Ee.array&&n===Ee.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=zE(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===Ee.date&&n===Ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xp extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(jE(i)||jE(o))return qe;const a=zE(i.value,o.value);return a.valid?((HE(i)||HE(o))&&r.dirty(),{status:r.value,value:a.data}):(Ce(n,{code:oe.invalid_intersection_types}),qe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xp.create=(t,e,r)=>new xp({left:t,right:e,typeName:Me.ZodIntersection,...Ge(r)});class eo extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.array)return Ce(n,{code:oe.invalid_type,expected:Ee.array,received:n.parsedType}),qe;if(n.data.length<this._def.items.length)return Ce(n,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qe;!this._def.rest&&n.data.length>this._def.items.length&&(Ce(n,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Xi(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>tn.mergeArray(r,o)):tn.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new eo({...this._def,rest:e})}}eo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new eo({items:t,typeName:Me.ZodTuple,rest:null,...Ge(e)})};class Tp extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.object)return Ce(n,{code:oe.invalid_type,expected:Ee.object,received:n.parsedType}),qe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Xi(n,a,n.path,a)),value:o._parse(new Xi(n,n.data[a],n.path,a))});return n.common.async?tn.mergeObjectAsync(r,s):tn.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ze?new Tp({keyType:e,valueType:r,typeName:Me.ZodRecord,...Ge(n)}):new Tp({keyType:Zs.create(),valueType:e,typeName:Me.ZodRecord,...Ge(r)})}}class vw extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.map)return Ce(n,{code:oe.invalid_type,expected:Ee.map,received:n.parsedType}),qe;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],l)=>({key:s._parse(new Xi(n,a,n.path,[l,"key"])),value:i._parse(new Xi(n,c,n.path,[l,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return qe;(l.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(l.value,u.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return qe;(l.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(l.value,u.value)}return{status:r.value,value:a}}}}vw.create=(t,e,r)=>new vw({valueType:e,keyType:t,typeName:Me.ZodMap,...Ge(r)});class Ll extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.set)return Ce(n,{code:oe.invalid_type,expected:Ee.set,received:n.parsedType}),qe;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Ce(n,{code:oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Ce(n,{code:oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return qe;u.status==="dirty"&&r.dirty(),l.add(u.value)}return{status:r.value,value:l}}const a=[...n.data.values()].map((c,l)=>i._parse(new Xi(n,c,n.path,l)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new Ll({...this._def,minSize:{value:e,message:Be.toString(r)}})}max(e,r){return new Ll({...this._def,maxSize:{value:e,message:Be.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Ll.create=(t,e)=>new Ll({valueType:t,minSize:null,maxSize:null,typeName:Me.ZodSet,...Ge(e)});class Qu extends Ze{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.function)return Ce(r,{code:oe.invalid_type,expected:Ee.function,received:r.parsedType}),qe;function n(a,c){return ww({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,mw(),Ap].filter(l=>!!l),issueData:{code:oe.invalid_arguments,argumentsError:c}})}function s(a,c){return ww({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,mw(),Ap].filter(l=>!!l),issueData:{code:oe.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof sd){const a=this;return bn(async function(...c){const l=new ri([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(n(c,f)),l}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,i).catch(f=>{throw l.addIssue(s(h,f)),l})})}else{const a=this;return bn(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new ri([n(c,l.error)]);const u=Reflect.apply(o,this,l.data),h=a._def.returns.safeParse(u,i);if(!h.success)throw new ri([s(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Qu({...this._def,args:eo.create(e).rest(El.create())})}returns(e){return new Qu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Qu({args:e||eo.create([]).rest(El.create()),returns:r||El.create(),typeName:Me.ZodFunction,...Ge(n)})}}class Pp extends Ze{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Pp.create=(t,e)=>new Pp({getter:t,typeName:Me.ZodLazy,...Ge(e)});class Op extends Ze{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ce(r,{received:r.data,code:oe.invalid_literal,expected:this._def.value}),qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Op.create=(t,e)=>new Op({value:t,typeName:Me.ZodLiteral,...Ge(e)});function SO(t,e){return new sc({values:t,typeName:Me.ZodEnum,...Ge(e)})}class sc extends Ze{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ce(r,{expected:bt.joinValues(n),received:r.parsedType,code:oe.invalid_type}),qe}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return Ce(r,{received:r.data,code:oe.invalid_enum_value,options:n}),qe}return bn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return sc.create(e)}exclude(e){return sc.create(this.options.filter(r=>!e.includes(r)))}}sc.create=SO;class Rp extends Ze{_parse(e){const r=bt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ee.string&&n.parsedType!==Ee.number){const s=bt.objectValues(r);return Ce(n,{expected:bt.joinValues(s),received:n.parsedType,code:oe.invalid_type}),qe}if(r.indexOf(e.data)===-1){const s=bt.objectValues(r);return Ce(n,{received:n.data,code:oe.invalid_enum_value,options:s}),qe}return bn(e.data)}get enum(){return this._def.values}}Rp.create=(t,e)=>new Rp({values:t,typeName:Me.ZodNativeEnum,...Ge(e)});class sd extends Ze{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.promise&&r.common.async===!1)return Ce(r,{code:oe.invalid_type,expected:Ee.promise,received:r.parsedType}),qe;const n=r.parsedType===Ee.promise?r.data:Promise.resolve(r.data);return bn(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}sd.create=(t,e)=>new sd({type:t,typeName:Me.ZodPromise,...Ge(e)});class si extends Ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ce(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?qe:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?qe:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Cp(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Cp(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);bt.assertNever(s)}}si.create=(t,e,r)=>new si({schema:t,typeName:Me.ZodEffects,effect:e,...Ge(r)});si.createWithPreprocess=(t,e,r)=>new si({schema:e,effect:{type:"preprocess",transform:t},typeName:Me.ZodEffects,...Ge(r)});class Fo extends Ze{_parse(e){return this._getType(e)===Ee.undefined?bn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fo.create=(t,e)=>new Fo({innerType:t,typeName:Me.ZodOptional,...Ge(e)});class $l extends Ze{_parse(e){return this._getType(e)===Ee.null?bn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$l.create=(t,e)=>new $l({innerType:t,typeName:Me.ZodNullable,...Ge(e)});class Dp extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Ee.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Dp.create=(t,e)=>new Dp({innerType:t,typeName:Me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class Aw extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yw(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ri(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ri(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Aw.create=(t,e)=>new Aw({innerType:t,typeName:Me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class Cw extends Ze{_parse(e){if(this._getType(e)!==Ee.nan){const n=this._getOrReturnCtx(e);return Ce(n,{code:oe.invalid_type,expected:Ee.nan,received:n.parsedType}),qe}return{status:"valid",value:e.data}}}Cw.create=t=>new Cw({typeName:Me.ZodNaN,...Ge(t)});const RY=Symbol("zod_brand");class NO extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class _g extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?qe:i.status==="dirty"?(r.dirty(),IO(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?qe:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new _g({in:e,out:r,typeName:Me.ZodPipeline})}}class _w extends Ze{_parse(e){const r=this._def.innerType._parse(e);return Cp(r)&&(r.value=Object.freeze(r.value)),r}}_w.create=(t,e)=>new _w({innerType:t,typeName:Me.ZodReadonly,...Ge(e)});const xO=(t,e={},r)=>t?nd.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):nd.create(),DY={object:Yt.lazycreate};var Me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Me||(Me={}));const kY=(t,e={message:`Input not instance of ${t.name}`})=>xO(r=>r instanceof t,e),TO=Zs.create,PO=rc.create,UY=Cw.create,BY=nc.create,OO=_p.create,LY=Bl.create,$Y=bw.create,MY=Ip.create,FY=Sp.create,jY=nd.create,HY=El.create,zY=Go.create,qY=Ew.create,VY=ni.create,WY=Yt.create,GY=Yt.strictCreate,KY=Np.create,JY=_y.create,YY=xp.create,QY=eo.create,ZY=Tp.create,XY=vw.create,eQ=Ll.create,tQ=Qu.create,rQ=Pp.create,nQ=Op.create,sQ=sc.create,iQ=Rp.create,oQ=sd.create,CS=si.create,aQ=Fo.create,cQ=$l.create,lQ=si.createWithPreprocess,uQ=_g.create,hQ=()=>TO().optional(),dQ=()=>PO().optional(),fQ=()=>OO().optional(),pQ={string:(t=>Zs.create({...t,coerce:!0})),number:(t=>rc.create({...t,coerce:!0})),boolean:(t=>_p.create({...t,coerce:!0})),bigint:(t=>nc.create({...t,coerce:!0})),date:(t=>Bl.create({...t,coerce:!0}))},gQ=qe;var A=Object.freeze({__proto__:null,defaultErrorMap:Ap,setErrorMap:bY,getErrorMap:mw,makeIssue:ww,EMPTY_PATH:EY,addIssueToContext:Ce,ParseStatus:tn,INVALID:qe,DIRTY:IO,OK:bn,isAborted:jE,isDirty:HE,isValid:Cp,isAsync:yw,get util(){return bt},get objectUtil(){return FE},ZodParsedType:Ee,getParsedType:Ia,ZodType:Ze,ZodString:Zs,ZodNumber:rc,ZodBigInt:nc,ZodBoolean:_p,ZodDate:Bl,ZodSymbol:bw,ZodUndefined:Ip,ZodNull:Sp,ZodAny:nd,ZodUnknown:El,ZodNever:Go,ZodVoid:Ew,ZodArray:ni,ZodObject:Yt,ZodUnion:Np,ZodDiscriminatedUnion:_y,ZodIntersection:xp,ZodTuple:eo,ZodRecord:Tp,ZodMap:vw,ZodSet:Ll,ZodFunction:Qu,ZodLazy:Pp,ZodLiteral:Op,ZodEnum:sc,ZodNativeEnum:Rp,ZodPromise:sd,ZodEffects:si,ZodTransformer:si,ZodOptional:Fo,ZodNullable:$l,ZodDefault:Dp,ZodCatch:Aw,ZodNaN:Cw,BRAND:RY,ZodBranded:NO,ZodPipeline:_g,ZodReadonly:_w,custom:xO,Schema:Ze,ZodSchema:Ze,late:DY,get ZodFirstPartyTypeKind(){return Me},coerce:pQ,any:jY,array:VY,bigint:BY,boolean:OO,date:LY,discriminatedUnion:JY,effect:CS,enum:sQ,function:tQ,instanceof:kY,intersection:YY,lazy:rQ,literal:nQ,map:XY,nan:UY,nativeEnum:iQ,never:zY,null:FY,nullable:cQ,number:PO,object:WY,oboolean:fQ,onumber:dQ,optional:aQ,ostring:hQ,pipeline:uQ,preprocess:lQ,promise:oQ,record:ZY,set:eQ,strictObject:GY,string:TO,symbol:$Y,transformer:CS,tuple:QY,undefined:MY,union:KY,unknown:HY,void:qY,NEVER:gQ,ZodIssueCode:oe,quotelessJson:yY,ZodError:ri});const Zt=A.object({message:A.string()});function ve(t){return A.literal(Ne[t])}const Iy=A.object({serializedMessage:A.string().optional(),accountAddress:A.string(),chainId:A.string(),notBefore:A.string().optional(),domain:A.string(),uri:A.string(),version:A.string(),nonce:A.string(),statement:A.string().optional(),resources:A.array(A.string()).optional(),requestId:A.string().optional(),issuedAt:A.string().optional(),expirationTime:A.string().optional()});A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const mQ=A.object({chainId:A.string().or(A.number()),rpcUrl:A.optional(A.string())}),wQ=A.object({email:A.string().email()}),yQ=A.object({otp:A.string()}),bQ=A.object({uri:A.string(),preferredAccountType:A.optional(A.string()),chainId:A.optional(A.string().or(A.number())),siwxMessage:A.optional(Iy),rpcUrl:A.optional(A.string())}),EQ=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string()),siwxMessage:A.optional(Iy),rpcUrl:A.optional(A.string())}),vQ=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),AQ=A.object({email:A.string().email()}),CQ=A.object({otp:A.string()}),_Q=A.object({otp:A.string()}),IQ=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),SQ=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),NQ=A.object({type:A.string()}),xQ=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),TQ=A.object({url:A.string()}),PQ=A.object({userName:A.string()}),OQ=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([gr.ACCOUNT_TYPES.EOA,gr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string()),signature:A.string().optional(),message:A.string().optional(),siwxMessage:A.optional(Iy)}),RQ=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),DQ=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([gr.ACCOUNT_TYPES.EOA,gr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string()),signature:A.string().optional(),message:A.string().optional(),siwxMessage:A.optional(Iy)}),kQ=A.object({uri:A.string()}),UQ=A.object({isConnected:A.boolean()}),BQ=A.object({chainId:A.string().or(A.number())}),LQ=A.object({chainId:A.string().or(A.number())}),$Q=A.object({newEmail:A.string().email()}),MQ=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const FQ=A.object({version:A.string().optional()}),jQ=A.object({type:A.string(),address:A.string()}),HQ=A.any(),zQ=A.object({method:A.literal("eth_accounts")}),qQ=A.object({method:A.literal("eth_blockNumber")}),VQ=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),WQ=A.object({method:A.literal("eth_chainId")}),GQ=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),KQ=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),JQ=A.object({method:A.literal("eth_gasPrice")}),YQ=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),QQ=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),ZQ=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),XQ=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),eZ=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),tZ=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),rZ=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),nZ=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),sZ=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),iZ=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),oZ=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),aZ=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),cZ=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),lZ=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),uZ=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),hZ=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),dZ=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),fZ=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),pZ=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),gZ=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),mZ=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),wZ=A.object({method:A.literal("eth_newBlockFilter")}),yZ=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),bZ=A.object({method:A.literal("eth_newPendingTransactionFilter")}),EZ=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),vZ=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),AZ=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),_S=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),CZ=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),_Z=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),IZ=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),SZ=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),NZ=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),xZ=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),TZ=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),PZ=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),OZ=A.object({method:A.literal("wallet_getCapabilities"),params:A.array(A.string().or(A.number()).optional()).optional()}),RZ=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),DZ=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),kZ=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),IS=A.object({token:A.string()}),Ae=A.object({id:A.string().optional()}),ib={appEvent:Ae.extend({type:ve("APP_SWITCH_NETWORK"),payload:mQ}).or(Ae.extend({type:ve("APP_CONNECT_EMAIL"),payload:wQ})).or(Ae.extend({type:ve("APP_CONNECT_DEVICE")})).or(Ae.extend({type:ve("APP_CONNECT_OTP"),payload:yQ})).or(Ae.extend({type:ve("APP_CONNECT_SOCIAL"),payload:bQ})).or(Ae.extend({type:ve("APP_GET_FARCASTER_URI")})).or(Ae.extend({type:ve("APP_CONNECT_FARCASTER")})).or(Ae.extend({type:ve("APP_GET_USER"),payload:A.optional(EQ)})).or(Ae.extend({type:ve("APP_GET_SOCIAL_REDIRECT_URI"),payload:vQ})).or(Ae.extend({type:ve("APP_SIGN_OUT")})).or(Ae.extend({type:ve("APP_IS_CONNECTED"),payload:A.optional(IS)})).or(Ae.extend({type:ve("APP_GET_CHAIN_ID")})).or(Ae.extend({type:ve("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ae.extend({type:ve("APP_INIT_SMART_ACCOUNT")})).or(Ae.extend({type:ve("APP_SET_PREFERRED_ACCOUNT"),payload:NQ})).or(Ae.extend({type:ve("APP_RPC_REQUEST"),payload:_S.or(kZ).or(zQ).or(qQ).or(VQ).or(WQ).or(GQ).or(KQ).or(JQ).or(YQ).or(QQ).or(ZQ).or(XQ).or(eZ).or(tZ).or(rZ).or(nZ).or(sZ).or(iZ).or(oZ).or(aZ).or(cZ).or(lZ).or(uZ).or(hZ).or(dZ).or(fZ).or(pZ).or(gZ).or(mZ).or(wZ).or(yZ).or(bZ).or(EZ).or(vZ).or(AZ).or(_S).or(CZ).or(_Z).or(IZ).or(SZ).or(NZ).or(xZ).or(PZ).or(TZ).or(OZ).or(RZ).or(DZ).and(A.object({chainId:A.string().or(A.number()).optional(),chainNamespace:A.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:A.string().optional()}))})).or(Ae.extend({type:ve("APP_UPDATE_EMAIL"),payload:AQ})).or(Ae.extend({type:ve("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:CQ})).or(Ae.extend({type:ve("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:_Q})).or(Ae.extend({type:ve("APP_SYNC_THEME"),payload:IQ})).or(Ae.extend({type:ve("APP_SYNC_DAPP_DATA"),payload:SQ})).or(Ae.extend({type:ve("APP_RELOAD")})).or(Ae.extend({type:ve("APP_RPC_ABORT")})),frameEvent:Ae.extend({type:ve("FRAME_SWITCH_NETWORK_ERROR"),payload:Zt}).or(Ae.extend({type:ve("FRAME_SWITCH_NETWORK_SUCCESS"),payload:LQ})).or(Ae.extend({type:ve("FRAME_CONNECT_EMAIL_SUCCESS"),payload:xQ})).or(Ae.extend({type:ve("FRAME_CONNECT_EMAIL_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:TQ})).or(Ae.extend({type:ve("FRAME_GET_FARCASTER_URI_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:PQ})).or(Ae.extend({type:ve("FRAME_CONNECT_FARCASTER_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_CONNECT_OTP_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_CONNECT_OTP_SUCCESS")})).or(Ae.extend({type:ve("FRAME_CONNECT_DEVICE_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ae.extend({type:ve("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:OQ})).or(Ae.extend({type:ve("FRAME_CONNECT_SOCIAL_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_GET_USER_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_GET_USER_SUCCESS"),payload:DQ})).or(Ae.extend({type:ve("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:kQ})).or(Ae.extend({type:ve("FRAME_SIGN_OUT_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_SIGN_OUT_SUCCESS")})).or(Ae.extend({type:ve("FRAME_IS_CONNECTED_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_IS_CONNECTED_SUCCESS"),payload:UQ})).or(Ae.extend({type:ve("FRAME_GET_CHAIN_ID_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_GET_CHAIN_ID_SUCCESS"),payload:BQ})).or(Ae.extend({type:ve("FRAME_RPC_REQUEST_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_RPC_REQUEST_SUCCESS"),payload:HQ})).or(Ae.extend({type:ve("FRAME_SESSION_UPDATE"),payload:IS})).or(Ae.extend({type:ve("FRAME_UPDATE_EMAIL_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_UPDATE_EMAIL_SUCCESS"),payload:RQ})).or(Ae.extend({type:ve("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ae.extend({type:ve("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:$Q})).or(Ae.extend({type:ve("FRAME_SYNC_THEME_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_SYNC_THEME_SUCCESS")})).or(Ae.extend({type:ve("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ae.extend({type:ve("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:MQ})).or(Ae.extend({type:ve("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:jQ})).or(Ae.extend({type:ve("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_READY"),payload:FQ})).or(Ae.extend({type:ve("FRAME_RELOAD_ERROR"),payload:Zt})).or(Ae.extend({type:ve("FRAME_RELOAD_SUCCESS")}))};function ob(t,e={}){var r;return typeof(e==null?void 0:e.type)=="string"&&((r=e==null?void 0:e.type)==null?void 0:r.includes(t))}function UZ({projectId:t,chainId:e,enableLogger:r,rpcUrl:n=q.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(GU);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",JU),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",n),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class BZ{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=q.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:h}){var f;if(!ob(Ne.FRAME_EVENT_KEY,h))return;const d=ib.frameEvent.safeParse(h);if(!d.success){console.warn("W3mFrame: invalid frame event",d.error.message);return}((f=d.data)==null?void 0:f.id)===a&&(c(d.data),window.removeEventListener("message",u))}ns.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{ns.isClient&&window.addEventListener("message",({data:c})=>{if(!ob(Ne.FRAME_EVENT_KEY,c))return;const l=ib.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{ns.isClient&&window.addEventListener("message",({data:c})=>{if(!ob(Ne.APP_EVENT_KEY,c))return;const l=ib.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{var c;if(ns.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(ns.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,r&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),ns.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=UZ({projectId:e,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var l;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class LZ{constructor(e){var i;const r=yd({level:KU}),{logger:n,chunkLoggerController:s}=hA({opts:r});this.logger=nn(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class $Z{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=[],this.isInitialized=!1,n&&(this.w3mLogger=new LZ(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const l=this.getRpcUrl(r);this.w3mFrame=new BZ({projectId:e,isAppClient:!0,chainId:r,enableLogger:n,rpcUrl:l,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===Ne.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Pr.get(Ne.EMAIL_LOGIN_USED_KEY)}getEmail(){return Pr.get(Ne.EMAIL)}getUsername(){return Pr.get(Ne.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ne.APP_RELOAD})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(e){var r;try{ns.checkIfAllowedToTriggerEmail(),await this.init();const n=await this.appEvent({type:Ne.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:Ne.APP_CONNECT_DEVICE})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting device"),r}}async connectOtp(e){var r;try{return this.appEvent({type:Ne.APP_CONNECT_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const r=await this.appEvent({type:Ne.APP_IS_CONNECTED});return r!=null&&r.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error checking connection"),r}}async getChainId(){var e;try{const r=await this.appEvent({type:Ne.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(e){var r;try{return await this.init(),this.appEvent({type:Ne.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var r;try{const n=await this.appEvent({type:Ne.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var r;try{return this.appEvent({type:Ne.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var r;try{const n=await this.appEvent({type:Ne.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var r;try{return this.appEvent({type:Ne.APP_SYNC_THEME,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var r;try{return this.appEvent({type:Ne.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const r=await this.appEvent({type:Ne.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(e){var r;try{return this.appEvent({type:Ne.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var r,n;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ne.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting"),s}}async getUser(e){var r;try{await this.init();const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ne.APP_GET_USER,payload:{...e,chainId:n,rpcUrl:this.getRpcUrl(n)}});return this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async connectSocial({uri:e,chainId:r,preferredAccountType:n}){var s;try{await this.init();const i=this.getRpcUrl(r),o=await this.appEvent({type:Ne.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:r,rpcUrl:i,preferredAccountType:n}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ne.APP_GET_FARCASTER_URI})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){var e;try{const r=await this.appEvent({type:Ne.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork({chainId:e}){var r;try{const n=this.getRpcUrl(e),s=await this.appEvent({type:Ne.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:n}});return this.setLastUsedChainId(s.chainId),s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async n=>{const s=setTimeout(()=>{n()},3e3);await this.appEvent({type:Ne.APP_SIGN_OUT}),clearTimeout(s),n()})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error disconnecting"),r}}async request(e){var n,s,i,o,a;const r=e;try{if(gr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(n=this.getActiveCaipNetwork(c))==null?void 0:n.id;r.chainNamespace=c,r.chainId=l,r.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ne.APP_RPC_REQUEST,payload:r});return(i=this.rpcSuccessHandler)==null||i.call(this,u,r),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,r),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ne.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ne.FRAME_IS_CONNECTED_ERROR&&e(),r.type===Ne.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ne.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ne.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Ne.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===Ne.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:gr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:r,method:n})=>{gr.SAFE_RPC_METHODS.includes(n)||r.abort(),await this.appEvent({type:Ne.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(r){(e=this.w3mLogger)==null||e.logger.error({error:r},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[Ne.APP_SYNC_DAPP_DATA,Ne.APP_SYNC_THEME,Ne.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[Ne.APP_CONNECT_EMAIL,Ne.APP_CONNECT_DEVICE,Ne.APP_CONNECT_OTP,Ne.APP_CONNECT_SOCIAL,Ne.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,g,p;const u=Math.random().toString(36).substring(7);(p=(f=this.w3mLogger)==null?void 0:(g=f.logger).info)==null||p.call(g,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const h=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:h}]}h.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function d(m,w){var E,b,C;m.id===u&&((b=w==null?void 0:(E=w.logger).info)==null||b.call(E,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in m&&l(new Error(((C=m.payload)==null?void 0:C.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>d(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Pr.set(Ne.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Pr.set(Ne.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Pr.set(Ne.EMAIL,e),Pr.set(Ne.EMAIL_LOGIN_USED_KEY,"true"),Pr.delete(Ne.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Pr.delete(Ne.EMAIL_LOGIN_USED_KEY),Pr.delete(Ne.EMAIL),Pr.delete(Ne.LAST_USED_CHAIN_KEY),Pr.delete(Ne.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Pr.set(Ne.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Pr.get(Ne.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){Pr.set(Ne.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let r=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?r=(i=hn.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?r="eip155":r="solana");const n=this.getCaipNetworks(r),s=e?n.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):n[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}class Uf{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var c;return Uf.instance||(Uf.instance=new $Z({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((c=J.state.remoteFeatures)!=null&&c.emailCapture)})),Uf.instance}}var SS={};const MZ={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof SS<"u"?SS.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},qE={filterOutDuplicatesByRDNS(t){const e=J.state.enableEIP6963?ue.state.connectors:[],r=X.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&_e.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=X.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ue.state,{featuredWalletIds:r}=J.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r!=null&&r.length){const l=r.indexOf(o.id),u=r.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=J.state.features)==null?void 0:c.connectMethodsOrder),n=e||ue.state.connectors;if(r)return r;const{injected:s,announced:i}=Om.getConnectorsByType(n,ke.state.recommended,ke.state.featured),o=s.filter(Om.showConnector),a=i.filter(Om.showConnector);return o.length||a.length?["wallet","email","social"]:MZ.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ke.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&ke.state.excludedWallets.some(n=>_r.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))}},Om={getConnectorsByType(t,e,r){const{customWallets:n}=J.state,s=X.getRecentWallets(),i=qE.filterOutDuplicateWallets(e),o=qE.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),l=t.filter(h=>h.type==="INJECTED"),u=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,r=!!e&&ke.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!t.name&&ke.state.excludedWallets.some(i=>_r.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!_e.isMobile()||_e.isMobile()&&!e&&!fe.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(x.state.chains.values()).some(r=>ue.getConnectorId(r.namespace)===q.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=J.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const d=[{type:"walletConnect",isEnabled:J.state.enableWalletConnect},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(d.map(m=>m.type)),g=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),p=d.filter(({type:m})=>!g.some(({type:E})=>E===m));return Array.from(new Set([...g,...p].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,r;try{if(t.name==="Browser Wallet"&&!_e.isMobile())return{accounts:[],chainId:void 0};if(t.id===q.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[n,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(r=t.provider)==null?void 0:r.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:n,chainId:s}}catch(n){return console.warn(`Failed to fetch provider data for ${t.name}`,n),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rm=globalThis,HA=Rm.ShadowRoot&&(Rm.ShadyCSS===void 0||Rm.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zA=Symbol(),NS=new WeakMap;let RO=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==zA)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(HA&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=NS.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&NS.set(r,e))}return e}toString(){return this.cssText}};const fs=t=>new RO(typeof t=="string"?t:t+"",void 0,zA),Zu=(t,...e)=>{const r=t.length===1?t[0]:e.reduce(((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1]),t[0]);return new RO(r,t,zA)},FZ=(t,e)=>{if(HA)t.adoptedStyleSheets=e.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of e){const n=document.createElement("style"),s=Rm.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},xS=HA?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return fs(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:jZ,defineProperty:HZ,getOwnPropertyDescriptor:zZ,getOwnPropertyNames:qZ,getOwnPropertySymbols:VZ,getPrototypeOf:WZ}=Object,Ja=globalThis,TS=Ja.trustedTypes,GZ=TS?TS.emptyScript:"",ab=Ja.reactiveElementPolyfillSupport,Bf=(t,e)=>t,VE={toAttribute(t,e){switch(e){case Boolean:t=t?GZ:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},DO=(t,e)=>!jZ(t,e),PS={attribute:!0,type:String,converter:VE,reflect:!1,useDefault:!1,hasChanged:DO};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Ja.litPropertyMetadata??(Ja.litPropertyMetadata=new WeakMap);let Ru=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=PS){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&HZ(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=zZ(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??PS}static _$Ei(){if(this.hasOwnProperty(Bf("elementProperties")))return;const e=WZ(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Bf("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Bf("properties"))){const r=this.properties,n=[...qZ(r),...VZ(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(xS(s))}else e!==void 0&&r.push(xS(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise((r=>this.enableUpdating=r)),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach((r=>r(this)))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return FZ(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach((r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)}))}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach((r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)}))}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var i;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)==null?void 0:i.toAttribute)!==void 0?n.converter:VE).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var i,o;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=n.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:VE;this._$Em=s;const l=c.fromAttribute(r,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,r,n){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(n??(n=i.getPropertyOptions(e)),!((n.hasChanged??DO)(o,r)||n.useDefault&&n.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach((s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)})),this.update(r)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach((n=>{var s;return(s=n.hostUpdated)==null?void 0:s.call(n)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((r=>this._$ET(r,this[r])))),this._$EM()}updated(e){}firstUpdated(e){}};Ru.elementStyles=[],Ru.shadowRootOptions={mode:"open"},Ru[Bf("elementProperties")]=new Map,Ru[Bf("finalized")]=new Map,ab==null||ab({ReactiveElement:Ru}),(Ja.reactiveElementVersions??(Ja.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lf=globalThis,Iw=Lf.trustedTypes,OS=Iw?Iw.createPolicy("lit-html",{createHTML:t=>t}):void 0,kO="$lit$",Sa=`lit$${Math.random().toFixed(9).slice(2)}$`,UO="?"+Sa,KZ=`<${UO}>`,Ml=document,kp=()=>Ml.createComment(""),Up=t=>t===null||typeof t!="object"&&typeof t!="function",qA=Array.isArray,JZ=t=>qA(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",cb=`[ 	
\f\r]`,Zd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,RS=/-->/g,DS=/>/g,Ac=RegExp(`>|${cb}(?:([^\\s"'>=/]+)(${cb}*=${cb}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kS=/'/g,US=/"/g,BO=/^(?:script|style|textarea|title)$/i,LO=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Uie=LO(1),Bie=LO(2),id=Symbol.for("lit-noChange"),Cr=Symbol.for("lit-nothing"),BS=new WeakMap,Vc=Ml.createTreeWalker(Ml,129);function $O(t,e){if(!qA(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return OS!==void 0?OS.createHTML(e):e}const YZ=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Zd;for(let a=0;a<r;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===Zd?u[1]==="!--"?o=RS:u[1]!==void 0?o=DS:u[2]!==void 0?(BO.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Ac):u[3]!==void 0&&(o=Ac):o===Ac?u[0]===">"?(o=s??Zd,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Ac:u[3]==='"'?US:kS):o===US||o===kS?o=Ac:o===RS||o===DS?o=Zd:(o=Ac,s=void 0);const f=o===Ac&&t[a+1].startsWith("/>")?" ":"";i+=o===Zd?c+KZ:h>=0?(n.push(l),c.slice(0,h)+kO+c.slice(h)+Sa+f):c+Sa+(h===-2?a:f)}return[$O(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class Bp{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=YZ(e,r);if(this.el=Bp.createElement(l,n),Vc.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=Vc.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(kO)){const d=u[o++],f=s.getAttribute(h).split(Sa),g=/([.?@])?(.*)/.exec(d);c.push({type:1,index:i,name:g[2],strings:f,ctor:g[1]==="."?ZZ:g[1]==="?"?XZ:g[1]==="@"?eX:Sy}),s.removeAttribute(h)}else h.startsWith(Sa)&&(c.push({type:6,index:i}),s.removeAttribute(h));if(BO.test(s.tagName)){const h=s.textContent.split(Sa),d=h.length-1;if(d>0){s.textContent=Iw?Iw.emptyScript:"";for(let f=0;f<d;f++)s.append(h[f],kp()),Vc.nextNode(),c.push({type:2,index:++i});s.append(h[d],kp())}}}else if(s.nodeType===8)if(s.data===UO)c.push({type:2,index:i});else{let h=-1;for(;(h=s.data.indexOf(Sa,h+1))!==-1;)c.push({type:7,index:i}),h+=Sa.length-1}i++}}static createElement(e,r){const n=Ml.createElement("template");return n.innerHTML=e,n}}function od(t,e,r=t,n){var o,a;if(e===id)return e;let s=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const i=Up(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=od(t,s._$AS(t,e.values),s,n)),e}class QZ{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=((e==null?void 0:e.creationScope)??Ml).importNode(r,!0);Vc.currentNode=s;let i=Vc.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Ig(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new tX(i,this,e)),this._$AV.push(l),c=n[++a]}o!==(c==null?void 0:c.index)&&(i=Vc.nextNode(),o++)}return Vc.currentNode=Ml,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Ig{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=Cr,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=od(this,e,r),Up(e)?e===Cr||e==null||e===""?(this._$AH!==Cr&&this._$AR(),this._$AH=Cr):e!==this._$AH&&e!==id&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):JZ(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Cr&&Up(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ml.createTextNode(e)),this._$AH=e}$(e){var i;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Bp.createElement($O(n.h,n.h[0]),this.options)),n);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(r);else{const o=new QZ(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=BS.get(e.strings);return r===void 0&&BS.set(e.strings,r=new Bp(e)),r}k(e){qA(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new Ig(this.O(kp()),this.O(kp()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class Sy{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=Cr,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Cr}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=od(this,e,r,0),o=!Up(e)||e!==this._$AH&&e!==id,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=od(this,a[n+c],r,c),l===id&&(l=this._$AH[c]),o||(o=!Up(l)||l!==this._$AH[c]),l===Cr?e=Cr:e!==Cr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Cr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ZZ extends Sy{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Cr?void 0:e}}class XZ extends Sy{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Cr)}}class eX extends Sy{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=od(this,e,r,0)??Cr)===id)return;const n=this._$AH,s=e===Cr&&n!==Cr||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==Cr&&(n===Cr||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class tX{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){od(this,e)}}const lb=Lf.litHtmlPolyfillSupport;lb==null||lb(Bp,Ig),(Lf.litHtmlVersions??(Lf.litHtmlVersions=[])).push("3.3.1");const rX=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let s=n._$litPart$;if(s===void 0){const i=(r==null?void 0:r.renderBefore)??null;n._$litPart$=s=new Ig(e.insertBefore(kp(),i),i,void 0,r??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vl=globalThis;class Dm extends Ru{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=rX(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return id}}var XN;Dm._$litElement$=!0,Dm.finalized=!0,(XN=vl.litElementHydrateSupport)==null||XN.call(vl,{LitElement:Dm});const ub=vl.litElementPolyfillSupport;ub==null||ub({LitElement:Dm});(vl.litElementVersions??(vl.litElementVersions=[])).push("4.2.1");let $f,Ya,Qa;function Lie(t,e){$f=document.createElement("style"),Ya=document.createElement("style"),Qa=document.createElement("style"),$f.textContent=Xu(t).core.cssText,Ya.textContent=Xu(t).dark.cssText,Qa.textContent=Xu(t).light.cssText,document.head.appendChild($f),document.head.appendChild(Ya),document.head.appendChild(Qa),MO(e)}function MO(t){Ya&&Qa&&(t==="light"?(Ya.removeAttribute("media"),Qa.media="enabled"):(Qa.removeAttribute("media"),Ya.media="enabled"))}function nX(t){$f&&Ya&&Qa&&($f.textContent=Xu(t).core.cssText,Ya.textContent=Xu(t).dark.cssText,Qa.textContent=Xu(t).light.cssText)}function Xu(t){return{core:Zu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${fs(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${fs((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${fs((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${fs((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${fs((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Zu`
      :root {
        --w3m-color-mix: ${fs((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${fs(ko(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${fs(ko(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Zu`
      :root {
        --w3m-color-mix: ${fs((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${fs(ko(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${fs(ko(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const $ie=Zu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Mie=Zu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Fie=Zu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,eh={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([eh.getAddresses(t),eh.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var n,s;const r=((n=e.rpcUrls.chainDefault)==null?void 0:n.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:eh.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[$i.NetworkImageIds[e.id]]}]})}},Au={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},sX={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},iX={block:vB({format(t){var r;return{transactions:(r=t.transactions)==null?void 0:r.map(n=>{if(typeof n=="string")return n;const s=iA(n);return s.typeHex==="0x7e"&&(s.isSystemTx=n.isSystemTx,s.mint=n.mint?Nu(n.mint):void 0,s.sourceHash=n.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:yB({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?Nu(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:VB({format(t){return{l1GasPrice:t.l1GasPrice?Nu(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?Nu(t.l1GasUsed):null,l1Fee:t.l1Fee?Nu(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function oX(t,e){return lX(t)?cX(t):o5(t,e)}const aX={transaction:oX};function cX(t){uX(t);const{sourceHash:e,data:r,from:n,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,l=[e,n,a??"0x",o?Ga(o):"0x",c?Ga(c):"0x",s?Ga(s):"0x",i?"0x1":"0x",r??"0x"];return wd(["0x7e",Ol(l)])}function lX(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function uX(t){const{from:e,to:r}=t;if(e&&!Pl(e))throw new Tl({address:e});if(r&&!Pl(r))throw new Tl({address:r})}const LS={blockTime:2e3,contracts:sX,formatters:iX,serializers:aX},Xd=1,FO=iy({...LS,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...LS.contracts,disputeGameFactory:{[Xd]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Xd]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Xd]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Xd]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Xd});({...FO});const hX=iy({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),dX=iy({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}});function Sg(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const $S=Sg({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),MS=Sg({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Sg({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Sg({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Sg({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const fX={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ki={getMethodsByChainNamespace(t){return fX[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=n[o];switch(u.chains.push(l),l){case $S.caipNetworkId:u.chains.push($S.deprecatedCaipNetworkId);break;case MS.caipNetworkId:u.chains.push(MS.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await If.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,r){for(const n of[...e,...r])if(n.includes("*")){const i=`^${n.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(n).origin===t)return!0}catch{if(n===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){r&&t.on("connect",()=>{const a=Ki.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),s&&t.on("session_event",a=>{if(Ki.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(h=>_e.isCaipAddress(h)).map(h=>hn.parseCaipAddress(h)).filter(h=>h.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const r=new Set,n=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>hn.parseCaipAddress(c)).filter(({address:c})=>r.has(c.toLowerCase())?!1:(r.add(c.toLowerCase()),!0));return n&&n.length>0?n:[]}};class pX{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case q.CHAIN.EVM:await this.syncEVMConnections(e);break;case q.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case q.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===q.CONNECTOR_ID.WALLET_CONNECT){const c=Ki.getWalletConnectAccounts(n,this.namespace),l=r.find(u=>{var h,d;return u.chainNamespace===this.namespace&&u.id.toString()===((d=(h=c[0])==null?void 0:h.chainId)==null?void 0:d.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await Om.fetchProviderData(a);if(c.length>0&&l){const u=r.find(h=>h.chainNamespace===this.namespace&&h.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(h=>({address:h})),caipNetwork:u}),a.provider&&a.id!==q.CONNECTOR_ID.AUTH&&a.id!==q.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===q.CONNECTOR_ID.WALLET_CONNECT){const c=Ki.getWalletConnectAccounts(n,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:r})}else{const c=await a.connect({chainId:r==null?void 0:r.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:r}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var d,f,g,p,m,w;if(a.id===q.CONNECTOR_ID.WALLET_CONNECT){const E=Ki.getWalletConnectAccounts(n,this.namespace);E.length>0&&i({connectorId:a.id,accounts:E.map(b=>({address:b.address})),caipNetwork:r});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(E=>_e.createAccount(q.CHAIN.BITCOIN,E.address,E.purpose||"payment",E.publicKey,E.path));if(u&&u.length>1&&(u=[{namespace:q.CHAIN.BITCOIN,publicKey:((d=u[Au.ACCOUNT_INDEXES.PAYMENT])==null?void 0:d.publicKey)??"",path:((f=u[Au.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((g=u[Au.ACCOUNT_INDEXES.PAYMENT])==null?void 0:g.address)??"",type:"payment"},{namespace:q.CHAIN.BITCOIN,publicKey:((p=u[Au.ACCOUNT_INDEXES.ORDINAL])==null?void 0:p.publicKey)??"",path:((m=u[Au.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((w=u[Au.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.address)??"",type:"ordinal"}]),!(a.chains.find(E=>E.id===(r==null?void 0:r.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(E=>({address:E.address,type:E.type})),caipNetwork:r}))}))}getConnection({address:e,connectorId:r,connections:n,connectors:s}){if(r){const o=n.find(l=>_r.isLowerCaseMatch(l.connectorId,r));if(!o)return null;const a=s.find(l=>_r.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>_r.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=n.find(o=>o.accounts.length>0&&s.some(a=>_r.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>_r.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const Uo={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class VA{constructor({provider:e,namespace:r}){this.id=q.CONNECTOR_ID.WALLET_CONNECT,this.name=$i.ConnectorNamesMap[q.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=$i.ConnectorImageIds[q.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=x.getCaipNetworks.bind(x),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=J.state.universalProviderConfigOverride,s=Ki.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return rs.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:gX})}}const gX=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],mX=[q.CONNECTOR_ID.AUTH,q.CONNECTOR_ID.WALLET_CONNECT];class jO{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>x.getCaipNetworks(r),this.getConnectorId=r=>ue.getConnectorId(r),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new pX({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(r==null?void 0:r.toString()));e&&n&&this.addConnection({connectorId:q.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:q.CONNECTOR_ID.AUTH,type:"AUTH",name:q.CONNECTOR_NAMES.AUTH,provider:e,imageId:$i.ConnectorImageIds[q.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>!_r.isLowerCaseMatch(r.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){xe.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const i=s,o=Fn(r.chainNamespace);await i.switchNetwork({chainId:r.caipNetworkId});const a=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof VA);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:s}=_e.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:s,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=_e.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,r,n=!0){var s,i;if(e.length>0){const{address:o}=_e.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});o&&_r.isLowerCaseMatch(this.getConnectorId(q.CHAIN.EVM),r)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:r,accounts:e.map(c=>{const{address:l}=_e.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),_r.isLowerCaseMatch(this.getConnectorId(q.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){var o;const n=typeof e=="string"&&e.startsWith("0x")?eh.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===n);s&&this.addConnection({connectorId:r,accounts:s.accounts,caipNetwork:i}),_r.isLowerCaseMatch(this.getConnectorId(q.CHAIN.EVM),r)&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(mX.includes(e))return;const n=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",i),r.on("accountsChanged",n),r.on("chainChanged",s),this.providerHandlers[e]={provider:r,disconnect:i,accountsChanged:n,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",s),r.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var r,n;const e=(r=this.connectionManager)==null?void 0:r.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(n=e.caipNetwork)==null?void 0:n.id,connector:e.connector})}}}class wX extends jO{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new VA({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const r=this.provider,n=((a=(o=(i=(s=r==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:n.map(c=>_e.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Ct.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(xe.state.balanceLoading&&e.chainId===((c=x.state.activeCaipNetwork)==null?void 0:c.id))return{balance:xe.state.balance||"0.00",symbol:xe.state.balanceSymbol||""};const s=(await xe.fetchTokenBalance()).find(u=>{var h,d;return u.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&u.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=x.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===q.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Ad.encode(new TextEncoder().encode(n)),pubkey:s}},(a=x.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},(c=x.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===q.CHAIN.EVM)try{await((s=n.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ga(r.id)}]}))}catch(u){if(u.code===Uo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Uo.ERROR_INVALID_CHAIN_ID||u.code===Uo.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Uo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=n.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ga(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const yX=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture"],lm={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Ct.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?Ct.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Ct.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ct.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Ct.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ct.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Ct.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ct.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ct.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ct.DEFAULT_REMOTE_FEATURES.multiWallet}},bX={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=lm[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,s){const i=lm[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(i.apiFeatureName,r);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return lm[t].processApi(e)},processFallbackFeature(t,e){return lm[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,s=!1;try{n=await ke.fetchProjectConfig(),s=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Ct.DEFAULT_REMOTE_FEATURES:Ct.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of yX){const a=this.processFeature(o,r,n,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Ct.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;hr.open({debugMessage:Yr.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class EX{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{var s,i,o;if(r){const a=(s=x.getCaipNetworks(r))==null?void 0:s.find(u=>u.id===n);if(a)return a;const c=(i=x.getNetworkData(r))==null?void 0:i.caipNetwork;return c||((o=x.getRequestedCaipNetworks(r).filter(u=>u.chainNamespace===r))==null?void 0:o[0])}return x.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>x.getCaipNetworks(r),this.getActiveChainNamespace=()=>x.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{x.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>x.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>{var n,s;return x.state.activeChain===r||!r?x.state.activeCaipAddress:(s=(n=x.state.chains.get(r))==null?void 0:n.accountState)==null?void 0:s.caipAddress},this.setClientId=r=>{Le.setClientId(r)},this.getProvider=r=>wt.getProvider(r),this.getProviderType=r=>wt.getProviderId(r),this.getPreferredAccountType=r=>Fn(r),this.setCaipAddress=(r,n)=>{xe.setCaipAddress(r,n)},this.setBalance=(r,n,s)=>{xe.setBalance(r,n,s)},this.setProfileName=(r,n)=>{xe.setProfileName(r,n)},this.setProfileImage=(r,n)=>{xe.setProfileImage(r,n)},this.setUser=(r,n)=>{xe.setUser(r,n)},this.resetAccount=r=>{xe.resetAccount(r)},this.setCaipNetwork=r=>{x.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{x.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{xe.setStatus(r,n),ue.isConnected()?X.setConnectionStatus("connected"):X.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>{var n,s;return(s=(n=x.state.chains.get(r))==null?void 0:n.accountState)==null?void 0:s.address},this.setConnectors=r=>{const n=[...ue.state.allConnectors,...r];ue.setConnectors(n)},this.setConnections=(r,n)=>{X.setConnections(r,n),fe.setConnections(r,n)},this.fetchIdentity=r=>Le.fetchIdentity(r),this.getReownName=r=>If.getNamesForAddress(r),this.getConnectors=()=>ue.getConnectors(),this.getConnectorImage=r=>o2.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?Ym.getConnectionsData(r).connections:(hr.open(q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?Ym.getConnectionsData(r).recentConnections:(hr.open(q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){hr.open(q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await fe.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){hr.open(q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}X.deleteAddressFromConnection(r),fe.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const s=wt.getProviderId(n),i=r?{...r,type:s}:void 0;xe.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!x.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{xe.addAddressLabel(r,n,s)},this.removeAddressLabel=(r,n)=>{xe.removeAddressLabel(r,n)},this.getAddress=r=>{var n,s;return x.state.activeChain===r||!r?xe.state.address:(s=(n=x.state.chains.get(r))==null?void 0:n.accountState)==null?void 0:s.address},this.setApprovedCaipNetworksData=r=>x.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{x.resetNetwork(r)},this.addConnector=r=>{ue.addConnector(r)},this.resetWcConnection=()=>{fe.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{xe.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{xe.setSmartAccountDeployed(r,n)},this.setPreferredAccountType=(r,n)=>{x.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{J.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(n!=null&&n.length)return[...new Set(n)];const s=r==null?void 0:r.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var r,n,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),J.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await bX.fetchRemoteFeatures(e),J.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Kb.setOnrampProviders(this.remoteFeatures.onramp),((r=J.state.remoteFeatures)!=null&&r.email||Array.isArray((n=J.state.remoteFeatures)==null?void 0:n.socials)&&((s=J.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await ke.fetchAllowedOrigins();if(!e||!_e.isClient()){hr.open(Yr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const r=window.location.origin;Ki.isOriginAllowed(r,e,Uo.DEFAULT_ALLOWED_ANCESTORS)||hr.open(Yr.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){hr.open(Yr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":hr.open(Yr.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;hr.open({displayMessage:Yr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Yr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}default:hr.open(Yr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,delete r.universalProvider,Pt.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(s=>s.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Rn.setThemeMode(e.themeMode),e.themeVariables&&Rn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");x.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&x.setActiveCaipNetwork(r)}initializeConnectionController(e){fe.initialize(e.adapters??[]),fe.setWcBasic(e.basic??!1)}initializeConnectorController(){ue.initialize(this.chainNamespaces)}initializeProjectSettings(e){J.setProjectId(e.projectId),J.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;J.setDebug(e.debug!==!1),J.setEnableWalletConnect(e.enableWalletConnect!==!1),J.setEnableWalletGuide(e.enableWalletGuide!==!1),J.setEnableWallets(e.enableWallets!==!1),J.setEIP6963Enabled(e.enableEIP6963!==!1),J.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),J.setEnableReconnect(e.enableReconnect!==!1),J.setEnableAuthLogger(e.enableAuthLogger!==!1),J.setCustomRpcUrls(e.customRpcUrls),J.setEnableEmbedded(e.enableEmbedded),J.setAllWallets(e.allWallets),J.setIncludeWalletIds(e.includeWalletIds),J.setExcludeWalletIds(e.excludeWalletIds),J.setFeaturedWalletIds(e.featuredWalletIds),J.setTokens(e.tokens),J.setTermsConditionsUrl(e.termsConditionsUrl),J.setPrivacyPolicyUrl(e.privacyPolicyUrl),J.setCustomWallets(e.customWallets),J.setFeatures(e.features),J.setAllowUnsupportedChain(e.allowUnsupportedChain),J.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),J.setPreferUniversalLinks(e.experimental_preferUniversalLinks),J.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),J.setMetadata(e.metadata),J.setDisableAppend(e.disableAppend),J.setEnableEmbedded(e.enableEmbedded),J.setSIWX(e.siwx),!e.projectId){hr.open(Yr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===q.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");J.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,s;return _e.isClient()?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Pu.getUnsupportedNetwork(`${r}:${e}`);x.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Pu.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Pu.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Pu.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return r?Pu.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,r){var n,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(n=x.state.chains.get(e))==null?void 0:n.accountState)==null?void 0:s.caipAddress)||!J.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:r})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var l;const e=x.state.activeChain,r=this.getAdapter(e),n=(l=this.getCaipNetwork(e))==null?void 0:l.id,s=fe.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),X.setConnectedNamespaces([...x.state.chains.keys()]),await this.syncWalletConnectAccount(),await rs.initializeIfEnabled()},connectExternal:async({id:e,address:r,info:n,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{var g,p,m,w,E,b;const l=x.state.activeChain,u=o||l,h=this.getAdapter(u);if(o&&o!==l&&!a){const C=this.getCaipNetworks().find(I=>I.chainNamespace===o);C&&this.setCaipNetwork(C)}if(!u)throw new Error("connectExternal: namespace not found");if(!h)throw new Error("connectExternal: adapter not found");const d=this.getCaipNetwork(u),f=await h.connect({id:e,address:r,info:n,type:s,provider:i,socialUri:c,chainId:(a==null?void 0:a.id)||(d==null?void 0:d.id),rpcUrl:((m=(p=(g=a==null?void 0:a.rpcUrls)==null?void 0:g.default)==null?void 0:p.http)==null?void 0:m[0])||((b=(E=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:E.http)==null?void 0:b[0])});if(f)return X.addConnectedNamespace(u),this.syncProvider({...f,chainNamespace:u}),this.setStatus("connected",u),this.syncConnectedWalletInfo(u),X.removeDisconnectedConnectorId(e,u),{address:f.address}},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{var a;const i=x.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),X.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var l;const{id:r,chainNamespace:n,initialDisconnect:s}=e||{},i=n||x.state.activeChain,o=ue.getConnectorId(i),a=r===q.CONNECTOR_ID.AUTH||o===q.CONNECTOR_ID.AUTH,c=r===q.CONNECTOR_ID.WALLET_CONNECT||o===q.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(x.state.chains.keys());let h=n?[n]:u;(c||a)&&(h=u);const d=h.map(async p=>{const m=ue.getConnectorId(p),w=await this.disconnectNamespace(p,r||m);w&&(a&&X.deleteConnectedSocialProvider(),w.connections.forEach(E=>{X.addDisconnectedConnectorId(E.connectorId,p)})),s&&this.onDisconnectNamespace({chainNamespace:p,closeModal:!1})}),f=await Promise.allSettled(d);At.resetSend(),fe.resetWcConnection(),(l=rs.getSIWX())!=null&&l.signOutOnDisconnect&&await rs.clearSessions(),ue.setFilterByNamespace(void 0),fe.syncStorageConnections();const g=f.filter(p=>p.status==="rejected");if(g.length>0)throw new Error(g.map(p=>p.reason.message).join(", "));Pt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=x.state.activeChain,n=this.getAdapter(x.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");const s=await(n==null?void 0:n.signMessage({message:e,address:xe.state.address,provider:wt.getProvider(r)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(Ct.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const s=wt.getProvider(r),i=await(n==null?void 0:n.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===q.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const s=wt.getProvider(r),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(n==null?void 0:n.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var r;const e=x.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:xe.state.address,chainId:Number((r=this.getCaipNetwork())==null?void 0:r.id),chainNamespace:e}),xe.state.profileImage||!1},getEnsAddress:async e=>await Ki.resolveReownName(e),writeContract:async e=>{const r=x.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=wt.getProvider(r);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(n==null?void 0:n.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,r)=>{const n=this.getAdapter(x.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(x.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(x.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(x.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(x.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(x.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await(r==null?void 0:r.walletGetAssets(e))??{}},updateBalance:e=>{const r=this.getCaipNetwork(e);!r||!xe.state.address||this.updateNativeBalance(xe.state.address,r==null?void 0:r.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},fe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,s,i,o;if(wt.getProviderId(x.state.activeChain)===yt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=wt.getProvider(r),i=wt.getProviderId(r);if(e.chainNamespace===x.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===yt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=hn.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===n);return s?(s.construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),r[n]=s):r[n]=new wX({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),await((r=this.chainAdapters)==null?void 0:r[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=X.getConnectionStatus();J.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(X.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{var l,u;const o=this.getCaipNetworks().find(h=>h.id.toString()===i.toString()||h.caipNetworkId.toString()===i.toString()),a=x.state.activeChain===e,c=(u=(l=x.state.chains.get(e))==null?void 0:l.accountState)==null?void 0:u.address;if(o){const h=a&&s?s:c;h&&this.syncAccount({address:h,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(fe.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=xe.state.address,i=x.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i,connector:o})=>{var c,l;const a=x.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&((c=x.state.activeCaipNetwork)!=null&&c.id)?this.syncAccount({address:s,chainId:(l=x.state.activeCaipNetwork)==null?void 0:l.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),X.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var r,n,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null?void 0:s.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>fe.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===q.CHAIN.EVM&&_e.isSafeApp()&&ue.setConnectorId(q.CONNECTOR_ID.SAFE,e);const r=ue.getConnectorId(e);switch(this.setStatus("connecting",e),r){case q.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case q.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};x.resetAccount(r),x.resetNetwork(r),X.removeConnectedNamespace(r);const s=Array.from(x.state.chains.keys());(r?[r]:s).forEach(o=>X.addDisconnectedConnectorId(ue.getConnectorId(o)||"",o)),ue.removeConnectorId(r),wt.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(void 0,r),n!==!1&&ht.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const r=this.getCaipAddress(e),n=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!r,caipNetwork:n,getConnectorStorageInfo(i){const a=X.getConnections()[e]??[];return{hasDisconnected:X.isConnectorDisconnected(i,e),hasConnected:a.some(c=>_r.isLowerCaseMatch(c.connectorId,i))}}})}))}async syncAdapterConnection(e){var a,c,l;const r=this.getAdapter(e),n=ue.getConnectorId(e),s=this.getCaipNetwork(e),o=ue.getConnectors(e).find(u=>u.id===n);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(r==null?void 0:r.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));u?(this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var n,s;const e=Object.keys(((s=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:s.namespaces)||{}),r=this.chainNamespaces.map(async i=>{var u,h,d,f,g;const o=this.getAdapter(i);if(!o)return;const a=((f=(d=(h=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:h.namespaces)==null?void 0:d[i])==null?void 0:f.accounts)||[],c=(g=x.state.activeCaipNetwork)==null?void 0:g.id,l=a.find(p=>{const{chainId:m}=hn.parseCaipAddress(p);return m===(c==null?void 0:c.toString())})||a[0];if(l){const p=hn.validateCaipAddress(l),{chainId:m,address:w}=hn.parseCaipAddress(p);if(wt.setProviderId(i,yt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&x.state.activeCaipNetwork&&o.namespace!==q.CHAIN.EVM){const E=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:x.state.activeCaipNetwork});wt.setProvider(i,E)}else wt.setProvider(i,this.universalProvider);ue.setConnectorId(q.CONNECTOR_ID.WALLET_CONNECT,i),X.addConnectedNamespace(i),await this.syncAccount({address:w,chainId:m,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await x.setApprovedCaipNetworksData(i)});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){wt.setProviderId(s,e),wt.setProvider(s,r),ue.setConnectorId(n,s)}async syncAccount(e){var h,d;const r=e.chainNamespace===x.state.activeChain,n=x.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=X.getActiveNetworkProps(),c=i||a,l=((h=x.state.activeCaipNetwork)==null?void 0:h.name)===q.UNSUPPORTED_NETWORK_NAME,u=x.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),g=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!f&&!g){const m=this.getApprovedCaipNetworkIds()||[],w=m.find(b=>{var C;return((C=hn.parseCaipNetworkId(b))==null?void 0:C.chainId)===c.toString()}),E=m.find(b=>{var C;return((C=hn.parseCaipNetworkId(b))==null?void 0:C.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===w),g=this.getCaipNetworks().find(b=>b.caipNetworkId===E||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===E)}const p=f||g;(p==null?void 0:p.chainNamespace)===x.state.activeChain?J.state.enableNetworkSwitch&&!J.state.allowUnsupportedChain&&((d=x.state.activeCaipNetwork)==null?void 0:d.name)===q.UNSUPPORTED_NETWORK_NAME?x.showUnsupportedChainUI():this.setCaipNetwork(p):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),_r.isLowerCaseMatch(s,xe.state.address)||this.syncAccountInfo(s,p==null?void 0:p.id,o),r?await this.syncBalance({address:s,chainId:p==null?void 0:p.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var s;const r=ue.getConnectorId(e),n=wt.getProviderId(e);if(n===yt.CONNECTOR_TYPE_ANNOUNCED||n===yt.CONNECTOR_TYPE_INJECTED){if(r){const o=this.getConnectors().find(a=>{var h,d;const c=a.id===r,l=((h=a.info)==null?void 0:h.rdns)===r,u=(d=a.connectors)==null?void 0:d.some(f=>{var g;return f.id===r||((g=f.info)==null?void 0:g.rdns)===r});return c||l||!!u});if(o){const{info:a,name:c,imageUrl:l}=o,u=l||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:u,...a},e)}}}else if(n===yt.CONNECTOR_TYPE_WALLET_CONNECT){const i=wt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(r&&(r===q.CONNECTOR_ID.COINBASE_SDK||r===q.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(l=>l.id===r),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!t2.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>{var s;return n.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=x.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){var n,s,i,o,a,c,l,u,h,d;const e=mY.createLogger((f,...g)=>{f&&this.handleAlertError(f),console.error(...g)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};J.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await jA.init(r),J.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Ki.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{fe.setUri(r)},onConnect:()=>{fe.finalizeWcConnection()},onDisconnect:()=>{x.state.noAdapters&&this.resetAccount(e),fe.resetWcConnection()},onChainChanged:r=>{const n=x.state.activeChain,s=n&&ue.state.activeConnectorIds[n]===q.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(x.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(r);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:r=>{const n=x.state.activeChain,s=n&&ue.state.activeConnectorIds[n]===q.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(x.state.noAdapters||s)&&r.length>0){const i=r[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&_e.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Pt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Yr.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Yr.ALERT_ERRORS[o];a&&(hr.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var s;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&fe.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ht.open({...e,data:{swap:e.arguments}})}return ht.open(e)}async close(){await this.injectModalUi(),ht.close()}setLoading(e,r){ht.setLoading(e,r)}async disconnect(e){await fe.disconnect({namespace:e})}getSIWX(){return J.state.siwx}getError(){return""}getChainId(){var e;return(e=x.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){hr.open(Yr.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await x.switchActiveNetwork(r)}getWalletProvider(){return x.state.activeChain?wt.state.providers[x.state.activeChain]:null}getWalletProviderType(){return wt.getProviderId(x.state.activeChain)}subscribeProviders(e){return wt.subscribeProviders(e)}getThemeMode(){return Rn.state.themeMode}getThemeVariables(){return Rn.state.themeVariables}setThemeMode(e){Rn.setThemeMode(e),MO(Rn.state.themeMode)}setTermsConditionsUrl(e){J.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){J.setPrivacyPolicyUrl(e)}setThemeVariables(e){Rn.setThemeVariables(e),nX(Rn.state.themeVariables)}subscribeTheme(e){return Rn.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?fe.subscribe(e):(hr.open(q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var r,n;return e?(n=(r=x.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:n.connectedWalletInfo:xe.state.connectedWalletInfo}getAccount(e){const r=e||x.state.activeChain,n=ue.getAuthConnector(r),s=x.getAccountData(r),i=X.getConnectedConnectorId(x.state.activeChain),o=fe.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u})=>_e.createAccount(r,l,u||"eoa")));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:_e.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:n&&i===q.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:X.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Fn(r),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?x.subscribeChainProp("accountState",n,r):x.subscribe(n),ue.subscribe(n)}subscribeNetwork(e){return x.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e,r){return r?xe.subscribeKey("connectedWalletInfo",e,r):xe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){xe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){x.subscribeKey("activeCaipNetwork",e)}getState(){return Ys.state}getRemoteFeatures(){return J.state.remoteFeatures}subscribeState(e){return Ys.subscribe(e)}subscribeRemoteFeatures(e){return J.subscribeKey("remoteFeatures",e)}showErrorMessage(e){ji.showError(e)}showSuccessMessage(e){ji.showSuccess(e)}getEvent(){return{...Pt.state}}subscribeEvents(e){return Pt.subscribe(e)}replace(e){je.replace(e)}redirect(e){je.push(e)}popTransactionStack(e){je.popTransactionStack(e)}isOpen(){return ht.state.open}isTransactionStackEmpty(){return je.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){J.setFeatures(e)}updateRemoteFeatures(e){J.setRemoteFeatures(e)}updateOptions(e){const n={...J.state||{},...e};J.setOptions(n)}setConnectMethodsOrder(e){J.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){J.setWalletFeaturesOrder(e)}setCollapseWallets(e){J.setCollapseWallets(e)}setSocialsOrder(e){J.setSocialsOrder(e)}getConnectMethodsOrder(){return qE.getConnectOrderMethod(J.state.features,ue.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||x.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&x.removeNetwork(e,r)}}let FS=!1;class vX extends EX{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await rs.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const r=x.state.activeChain;if(!r)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const n=r===q.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=J.state.defaultAccountTypes[r],i=Fn(r),o=e.preferredAccountType||i||s;_r.isLowerCaseMatch(e.address,xe.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:r}),this.setCaipAddress(n,r);const{signature:a,siwxMessage:c,message:l,...u}=e;this.setUser({...xe.state.user||{},...u},r),this.setSmartAccountDeployed(!!e.smartAccountDeployed,r),this.setPreferredAccountType(o,r),this.setLoading(!1,r)}setupAuthConnectorListeners(e){e.onRpcRequest(r=>{ns.checkIfRequestExists(r)?ns.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(gr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(gr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((r,n)=>{const s=ns.checkIfRequestIsSafe(n),i=xe.state.address,o=x.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const r=x.state.activeChain;if(!r)throw new Error("AppKit:onNotConnected - namespace is required");ue.getConnectorId(r)===q.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:r,type:n})=>{const s=x.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");r&&this.setPreferredAccountType(n,s)})}async syncAuthConnectorTheme(e){if(!e)return;const r=Rn.getSnapshot(),n=J.getSnapshot();await Promise.all([e.syncDappData({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e.syncTheme({themeMode:r.themeMode,themeVariables:r.themeVariables,w3mThemeVariables:ko(r.themeVariables,r.themeMode)})])}async syncAuthConnector(e,r){var l,u,h,d;const n=q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r),s=r===x.state.activeChain;if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const o=e.getEmail(),a=e.getUsername();this.setUser({...((l=xe.state)==null?void 0:l.user)||{},username:a,email:o},r),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),r&&n&&s){const f=await e.getSmartAccountEnabledNetworks();x.setSmartAccountEnabledNetworks((f==null?void 0:f.smartAccountEnabledNetworks)||[],r),c&&((u=this.connectionControllerClient)!=null&&u.connectExternal)?(await((d=this.connectionControllerClient)==null?void 0:d.connectExternal({id:q.CONNECTOR_ID.AUTH,info:{name:q.CONNECTOR_ID.AUTH},type:yt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=x.state.activeCaipNetwork)==null?void 0:h.id,chain:r})),this.setStatus("connected",r)):ue.getConnectorId(r)===q.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),X.removeConnectedNamespace(r))}this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){var r,n;try{if(!_e.isTelegram())return;const s=X.getTelegramSocialProvider();if(!s||!_e.isClient())return;const o=new URL(window.location.href).searchParams.get("result_uri");if(!o)return;xe.setSocialProvider(s,e),await((r=this.authProvider)==null?void 0:r.init());const a=ue.getAuthConnector();s&&a&&(this.setLoading(!0,e),await fe.connectExternal({id:a.id,type:a.type,socialUri:o},a.chain),X.setConnectedSocialProvider(s),X.removeTelegramSocialProvider(),Pt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s,caipNetworkId:(n=x.getActiveCaipNetwork())==null?void 0:n.caipNetworkId}}))}catch(s){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",s)}try{const s=new URL(window.location.href);s.searchParams.delete("result_uri"),window.history.replaceState({},document.title,s.toString())}catch(s){console.error("tma social login failed",s)}}createAuthProvider(e){var l,u,h,d;if(!q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=n||s,a=_r.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((h=this.options)!=null&&h.projectId)&&i&&(this.authProvider=Uf.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(d=this.getCaipNetwork(a))==null?void 0:d.caipNetworkId,abortController:Yr.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?hr.open(Yr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?hr.open(Yr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&hr.open(Yr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:f=>zb(f),getCaipNetworks:f=>x.getCaipNetworks(f)}),Ys.subscribeOpen(f=>{var g;!f&&this.isTransactionStackEmpty()&&((g=this.authProvider)==null||g.rejectRpcRequests())}));const c=e===x.state.activeChain&&J.state.enableReconnect;J.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var r,n,s;this.createAuthProvider(e),this.authProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setAuthProvider)==null||s.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ke.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const r=x.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(n);if(n===r&&s){const c=this.getAdapter(n),l=wt.getProvider(n),u=wt.getProviderId(n);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=wt.getProviderId(r)===yt.CONNECTOR_TYPE_AUTH,u=wt.getProviderId(n),h=u===yt.CONNECTOR_TYPE_AUTH,d=q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((l&&u===void 0||h)&&d)try{if(x.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(n);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:q.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:yt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const g=this.getAdapter(n);await(g==null?void 0:g.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else if(u===yt.CONNECTOR_TYPE_WALLET_CONNECT){if(!x.state.noAdapters){const f=this.getAdapter(n),g=wt.getProvider(n),p=wt.getProviderId(n);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:g,providerType:p}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n})}}async initialize(e){var r;await super.initialize(e),(r=this.chainNamespaces)==null||r.forEach(n=>{this.createAuthProviderForAdapter(n)}),await this.injectModalUi(),Ys.set({initialized:!0})}async syncIdentity({address:e,chainId:r,chainNamespace:n}){var o;const s=`${n}:${r}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(n!==q.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,n),this.setProfileImage(c,n)}catch{await this.syncReownName(e,n),r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=wt.getProviderId(e);if(r===yt.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=X.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(_e.isClient()&&!FS)try{const e={...Ct.DEFAULT_FEATURES,...this.options.features},r=this.remoteFeatures;if(await this.loadModalComponents(e,r),_e.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!J.state.disableAppend&&!J.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}FS=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,r){if(!_e.isClient())return;const n=[];(r.email||r.socials&&r.socials.length>0)&&n.push(Jr(()=>import("./embedded-wallet-DruBfr1d.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),r.email&&n.push(Jr(()=>import("./email-BovNVxse.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),r.socials&&n.push(Jr(()=>import("./socials-DxKgYmqJ.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),r.swaps&&r.swaps.length>0&&n.push(Jr(()=>import("./swaps-2ysZ9Prq.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&n.push(Jr(()=>import("./send-Gw_90e5x.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&n.push(Jr(()=>import("./receive-CvSAwhsf.js"),__vite__mapDeps([28,1,29,3,19]))),r.onramp&&r.onramp.length>0&&n.push(Jr(()=>import("./onramp-CeZgQxoJ.js"),__vite__mapDeps([30,1,31,3,5,10,15,4,16,32,11,9,18,6]))),r.activity&&n.push(Jr(()=>import("./transactions-Bo6TRNWL.js"),__vite__mapDeps([33,1,34,10,11,3,20]))),e.pay&&n.push(Jr(()=>import("./index-DZelwJ4r.js"),__vite__mapDeps([35,1,9,5,36,3,10,7,31,27,18]))),r.emailCapture&&n.push(Jr(()=>import("./ui-5bl-ua3I.js"),__vite__mapDeps([37,1,12,11,5,10,4,9,13,6]))),await Promise.all([...n,Jr(()=>import("./index-5vuh3PDy.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,31,9,8,36,34,11,20,22,27,4,6,13,15,16,17,2,18,29,19,32])),Jr(()=>import("./w3m-modal-BQiIOanM.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}function AX(t){const e=qi(x.state.activeChain),r=qi(x.state.chains),n=qi({allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0});function s(a,c){var f;const l=X.getConnectedConnectorId(c),u=c?ue.getAuthConnector(c):void 0,h=c||x.state.activeChain,d=h?(f=a.get(h))==null?void 0:f.accountState:void 0;n.value.address=_e.getPlainAddress(d==null?void 0:d.caipAddress),n.value.caipAddress=d==null?void 0:d.caipAddress,n.value.status=d==null?void 0:d.status,n.value.isConnected=!!(d!=null&&d.caipAddress),n.value.embeddedWalletInfo=u&&l===q.CONNECTOR_ID.AUTH?{user:d==null?void 0:d.user,authProvider:(d==null?void 0:d.socialProvider)??"email",accountType:Fn(h),isSmartAccountDeployed:!!(d!=null&&d.smartAccountDeployed)}:void 0}const i=x.subscribeKey("activeChain",a=>{e.value=a,s(r.value,e.value)}),o=x.subscribe(a=>{r.value=a.chains,s(r.value,e.value)});return qv(()=>{s(r.value,e.value)}),uc(()=>{o(),i()}),n}function CX(){async function t(e){await fe.disconnect(e)}return{disconnect:t}}let ut;function _X(t){t&&(ut=t)}function IX(){if(!ut)throw new Error('Please call "createAppKit" before using "useAppKitTheme" hook');function t(i){i&&(ut==null||ut.setThemeMode(i))}function e(i){i&&(ut==null||ut.setThemeVariables(i))}const r=qi(ut.getThemeMode()),n=qi(ut.getThemeVariables()),s=ut==null?void 0:ut.subscribeTheme(i=>{r.value=i.themeMode,n.value=i.themeVariables});return uc(()=>{s==null||s()}),lc({setThemeMode:t,setThemeVariables:e,themeMode:r,themeVariables:n})}function SX(){if(!ut)throw new Error('Please call "createAppKit" before using "useAppKit" composable');async function t(r){await(ut==null?void 0:ut.open(r))}async function e(){await(ut==null?void 0:ut.close())}return lc({open:t,close:e})}function NX(t){if(!ut)throw new Error('Please call "createAppKit" before using "useAppKit" composable');const e=qi(ut.getWalletInfo(t)),r=ut.subscribeWalletInfo(n=>{e.value=n},t);return uc(()=>{r==null||r()}),lc({walletInfo:e})}function xX(){if(!ut)throw new Error('Please call "createAppKit" before using "useAppKitState" composable');const t=ut.getState(),e=ut.getRemoteFeatures(),r=qi(t.open),n=qi(e),s=qi(t.selectedNetworkId),i=ut==null?void 0:ut.subscribeState(o=>{r.value=o.open,s.value=o.selectedNetworkId});return uc(()=>{i==null||i()}),lc({open:r,remoteFeatures:n,selectedNetworkId:s})}function TX(){if(!ut)throw new Error('Please call "createAppKit" before using "useAppKitEvents" composable');const t=lc(ut.getEvent()),e=ut==null?void 0:ut.subscribeEvents(r=>{t.data=r.data,t.timestamp=r.timestamp});return uc(()=>{e==null||e()}),t}const PX="1.7.17";let Wc;function OX(t){return Wc||(Wc=new vX({...t,sdkVersion:_e.generateSdkVersion(t.adapters??[],"html",PX)}),_X(Wc)),Wc}function RX(){var r,n;const t=qi({caipNetwork:x.state.activeCaipNetwork,chainId:(r=x.state.activeCaipNetwork)==null?void 0:r.id,caipNetworkId:(n=x.state.activeCaipNetwork)==null?void 0:n.caipNetworkId,switchNetwork:s=>{Wc==null||Wc.switchNetwork(s)}}),e=x.subscribeKey("activeCaipNetwork",s=>{t.value.caipNetwork=s,t.value.chainId=s==null?void 0:s.id,t.value.caipNetworkId=s==null?void 0:s.caipNetworkId});return uc(()=>{e()}),t}const DX="6.15.0";function kX(t,e,r){const n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function cn(t){const e=Object.keys(t);return(await Promise.all(e.map(n=>Promise.resolve(t[n])))).reduce((n,s,i)=>(n[e[i]]=s,n),{})}function $e(t,e,r){for(let n in e){let s=e[n];const i=r?r[n]:null;i&&kX(s,i,n),Object.defineProperty(t,n,{enumerable:!0,value:s,writable:!1})}}function Mu(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(r=>Mu(r,e)).join(", ")+" ]";if(t instanceof Uint8Array){const r="0123456789abcdef";let n="0x";for(let s=0;s<t.length;s++)n+=r[t[s]>>4],n+=r[t[s]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return Mu(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const r=Object.keys(t);return r.sort(),"{ "+r.map(n=>`${Mu(n,e)}: ${Mu(t[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function kr(t,e){return t&&t.code===e}function WA(t){return kr(t,"CALL_EXCEPTION")}function Kt(t,e,r){let n=t;{const i=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${Mu(r)}`);for(const o in r){if(o==="shortMessage")continue;const a=r[o];i.push(o+"="+Mu(a))}}i.push(`code=${e}`),i.push(`version=${DX}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return $e(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&$e(s,{shortMessage:n}),s}function Y(t,e,r,n){if(!t)throw Kt(e,r,n)}function M(t,e,r,n){Y(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function HO(t,e,r){r==null&&(r=""),r&&(r=": "+r),Y(t>=e,"missing argument"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Y(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function Ng(t,e,r){if(r==null&&(r=""),t!==e){let n=r,s="new";r&&(n+=".",s+=" "+r),Y(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function zO(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(t.substring(s,s+2),16),s+=2;return n}M(!1,"invalid BytesLike value",e||"value",t)}function et(t,e){return zO(t,e,!1)}function dn(t,e){return zO(t,e,!0)}function Mt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function GA(t){return Mt(t,!0)||t instanceof Uint8Array}const jS="0123456789abcdef";function me(t){const e=et(t);let r="0x";for(let n=0;n<e.length;n++){const s=e[n];r+=jS[(s&240)>>4]+jS[s&15]}return r}function er(t){return"0x"+t.map(e=>me(e).substring(2)).join("")}function th(t){return Mt(t,!0)?(t.length-2)/2:et(t).length}function Xt(t,e,r){const n=et(t);return r!=null&&r>n.length&&Y(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),me(n.slice(e??0,r??n.length))}function qO(t,e,r){const n=et(t);Y(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),me(s)}function Ko(t,e){return qO(t,e,!0)}function UX(t,e){return qO(t,e,!1)}const Ny=BigInt(0),Ks=BigInt(1),Fu=9007199254740991;function Sw(t,e){const r=xy(t,"value"),n=BigInt(Je(e,"width"));if(Y(r>>n===Ny,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-Ks){const s=(Ks<<n)-Ks;return-((~r&s)+Ks)}return r}function VO(t,e){let r=Se(t,"value");const n=BigInt(Je(e,"width")),s=Ks<<n-Ks;if(r<Ny){r=-r,Y(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ks<<n)-Ks;return(~r&i)+Ks}else Y(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return r}function Gc(t,e){const r=xy(t,"value"),n=BigInt(Je(e,"bits"));return r&(Ks<<n)-Ks}function Se(t,e){switch(typeof t){case"bigint":return t;case"number":return M(Number.isInteger(t),"underflow",e||"value",t),M(t>=-Fu&&t<=Fu,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(r){M(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}M(!1,"invalid BigNumberish value",e||"value",t)}function xy(t,e){const r=Se(t,e);return Y(r>=Ny,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const HS="0123456789abcdef";function Ty(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=HS[r>>4],e+=HS[r&15];return BigInt(e)}return Se(t)}function Je(t,e){switch(typeof t){case"bigint":return M(t>=-Fu&&t<=Fu,"overflow",e||"value",t),Number(t);case"number":return M(Number.isInteger(t),"underflow",e||"value",t),M(t>=-Fu&&t<=Fu,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Je(BigInt(t),e)}catch(r){M(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}M(!1,"invalid numeric value",e||"value",t)}function BX(t){return Je(Ty(t))}function ic(t,e){let n=xy(t,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const s=Je(e,"width");for(Y(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<s*2;)n="0"+n}return"0x"+n}function pr(t){const e=xy(t,"value");if(e===Ny)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(r.substring(i,i+2),16)}return n}function Gs(t){let e=me(GA(t)?t:pr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const zS="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const qS=BigInt(58);function LX(t){const e=et(t);let r=Ty(e),n="";for(;r;)n=zS[Number(r%qS)]+n,r/=qS;for(let s=0;s<e.length&&!e[s];s++)n=zS[0]+n;return n}function $X(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return et(e)}function MX(t){const e=et(t);let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return btoa(r)}var ah;class WO{constructor(e,r,n){H(this,"filter");H(this,"emitter");W(this,ah);P(this,ah,r),$e(this,{emitter:e,filter:n})}async removeListener(){y(this,ah)!=null&&await this.emitter.off(this.filter,y(this,ah))}}ah=new WeakMap;function FX(t,e,r,n,s){M(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function GO(t,e,r,n,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?r.length-e-1:0}function jX(t,e,r,n,s){return t==="OVERLONG"?(M(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),GO(t,e,r))}const HX=Object.freeze({error:FX,ignore:GO,replace:jX});function zX(t,e){e==null&&(e=HX.error);const r=et(t,"bytes"),n=[];let s=0;for(;s<r.length;){const i=r[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,r,n):s+=e("BAD_PREFIX",s-1,r,n);continue}if(s-1+o>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=r[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,r,n),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,r,n,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,r,n,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,r,n,c);continue}n.push(c)}}return n}function Ji(t,e){M(typeof t=="string","invalid string value","str",t);let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);M(n<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return new Uint8Array(r)}function qX(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Nw(t,e){return qX(zX(t,e))}function KO(t){async function e(r,n){Y(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=r.url.split(":")[0].toLowerCase();Y(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),Y(s==="https"||!r.credentials||r.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Kt("request timeout","TIMEOUT"),o.abort()},r.timeout);n&&n.addListener(()=>{i=Kt("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:r.method,headers:new Headers(Array.from(r)),body:r.body||void 0,signal:o.signal});let l;try{l=await fetch(r.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,g)=>{u[g.toLowerCase()]=f});const h=await l.arrayBuffer(),d=h==null?null:new Uint8Array(h);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const VX=12,WX=250;let VS=KO();const GX=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),KX=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let hb=!1;async function JO(t,e){try{const r=t.match(GX);if(!r)throw new Error("invalid data");return new Za(200,"OK",{"content-type":r[1]||"text/plain"},r[2]?$X(r[3]):YX(r[3]))}catch{return new Za(599,"BAD REQUEST (invalid data: URI)",{},null,new Jo(t))}}function YO(t){async function e(r,n){try{const s=r.match(KX);if(!s)throw new Error("invalid link");return new Jo(`${t}${s[2]}`)}catch{return new Za(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Jo(r))}}return e}const um={data:JO,ipfs:YO("https://gateway.ipfs.io/ipfs/")},QO=new WeakMap;var Qc,Na;class JX{constructor(e){W(this,Qc);W(this,Na);P(this,Qc,[]),P(this,Na,!1),QO.set(e,()=>{if(!y(this,Na)){P(this,Na,!0);for(const r of y(this,Qc))setTimeout(()=>{r()},0);P(this,Qc,[])}})}addListener(e){Y(!y(this,Na),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),y(this,Qc).push(e)}get cancelled(){return y(this,Na)}checkSignal(){Y(!this.cancelled,"cancelled","CANCELLED",{})}}Qc=new WeakMap,Na=new WeakMap;function hm(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var ch,lh,Fs,vo,uh,hh,Er,Qn,Ao,Zc,Xc,el,_i,js,xa,tl,uf;const Fw=class Fw{constructor(e){W(this,tl);W(this,ch);W(this,lh);W(this,Fs);W(this,vo);W(this,uh);W(this,hh);W(this,Er);W(this,Qn);W(this,Ao);W(this,Zc);W(this,Xc);W(this,el);W(this,_i);W(this,js);W(this,xa);P(this,hh,String(e)),P(this,ch,!1),P(this,lh,!0),P(this,Fs,{}),P(this,vo,""),P(this,uh,3e5),P(this,js,{slotInterval:WX,maxAttempts:VX}),P(this,xa,null)}get url(){return y(this,hh)}set url(e){P(this,hh,String(e))}get body(){return y(this,Er)==null?null:new Uint8Array(y(this,Er))}set body(e){if(e==null)P(this,Er,void 0),P(this,Qn,void 0);else if(typeof e=="string")P(this,Er,Ji(e)),P(this,Qn,"text/plain");else if(e instanceof Uint8Array)P(this,Er,e),P(this,Qn,"application/octet-stream");else if(typeof e=="object")P(this,Er,Ji(JSON.stringify(e))),P(this,Qn,"application/json");else throw new Error("invalid body")}hasBody(){return y(this,Er)!=null}get method(){return y(this,vo)?y(this,vo):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),P(this,vo,String(e).toUpperCase())}get headers(){const e=Object.assign({},y(this,Fs));return y(this,Ao)&&(e.authorization=`Basic ${MX(Ji(y(this,Ao)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&y(this,Qn)&&(e["content-type"]=y(this,Qn)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,r){y(this,Fs)[String(e).toLowerCase()]=String(r)}clearHeaders(){P(this,Fs,{})}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return y(this,Ao)||null}setCredentials(e,r){M(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),P(this,Ao,`${e}:${r}`)}get allowGzip(){return y(this,lh)}set allowGzip(e){P(this,lh,!!e)}get allowInsecureAuthentication(){return!!y(this,ch)}set allowInsecureAuthentication(e){P(this,ch,!!e)}get timeout(){return y(this,uh)}set timeout(e){M(e>=0,"timeout must be non-zero","timeout",e),P(this,uh,e)}get preflightFunc(){return y(this,Zc)||null}set preflightFunc(e){P(this,Zc,e)}get processFunc(){return y(this,Xc)||null}set processFunc(e){P(this,Xc,e)}get retryFunc(){return y(this,el)||null}set retryFunc(e){P(this,el,e)}get getUrlFunc(){return y(this,xa)||VS}set getUrlFunc(e){P(this,xa,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${y(this,Er)?me(y(this,Er)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(y(this,js).slotInterval=e.slotInterval),e.maxAttempts!=null&&(y(this,js).maxAttempts=e.maxAttempts)}send(){return Y(y(this,_i)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),P(this,_i,new JX(this)),ne(this,tl,uf).call(this,0,WS()+this.timeout,0,this,new Za(0,"",{},null,this))}cancel(){Y(y(this,_i)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=QO.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const r=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();Y(this.method==="GET"&&(r!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Fw(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,P(s,Fs,Object.assign({},y(this,Fs))),y(this,Er)&&P(s,Er,new Uint8Array(y(this,Er))),P(s,Qn,y(this,Qn)),s}clone(){const e=new Fw(this.url);return P(e,vo,y(this,vo)),y(this,Er)&&P(e,Er,y(this,Er)),P(e,Qn,y(this,Qn)),P(e,Fs,Object.assign({},y(this,Fs))),P(e,Ao,y(this,Ao)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),P(e,Zc,y(this,Zc)),P(e,Xc,y(this,Xc)),P(e,el,y(this,el)),P(e,js,Object.assign({},y(this,js))),P(e,xa,y(this,xa)),e}static lockConfig(){hb=!0}static getGateway(e){return um[e.toLowerCase()]||null}static registerGateway(e,r){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(hb)throw new Error("gateways locked");um[e]=r}static registerGetUrl(e){if(hb)throw new Error("gateways locked");VS=e}static createGetUrlFunc(e){return KO(e)}static createDataGateway(){return JO}static createIpfsGatewayFunc(e){return YO(e)}};ch=new WeakMap,lh=new WeakMap,Fs=new WeakMap,vo=new WeakMap,uh=new WeakMap,hh=new WeakMap,Er=new WeakMap,Qn=new WeakMap,Ao=new WeakMap,Zc=new WeakMap,Xc=new WeakMap,el=new WeakMap,_i=new WeakMap,js=new WeakMap,xa=new WeakMap,tl=new WeakSet,uf=async function(e,r,n,s,i){var u,h,d;if(e>=y(this,js).maxAttempts)return i.makeServerError("exceeded maximum retry limit");Y(WS()<=r,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await QX(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in um){const f=await um[a](o.url,hm(y(s,_i)));if(f instanceof Za){let g=f;if(this.processFunc){hm(y(s,_i));try{g=await this.processFunc(o,g)}catch(p){(p.throttle==null||typeof p.stall!="number")&&g.makeServerError("error in post-processing function",p).assertOk()}}return g}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,hm(y(s,_i)));let l=new Za(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return ne(u=o.redirect(f),tl,uf).call(u,e+1,r,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let g=y(this,js).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(g=parseInt(f)),ne(h=o.clone(),tl,uf).call(h,e+1,r,g,s,l)}if(this.processFunc){hm(y(s,_i));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let g=y(this,js).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(g=f.stall),ne(d=o.clone(),tl,uf).call(d,e+1,r,g,s,l)}}return l};let Jo=Fw;var Kp,Jp,Yp,Zn,dh,rl;const d1=class d1{constructor(e,r,n,s,i){W(this,Kp);W(this,Jp);W(this,Yp);W(this,Zn);W(this,dh);W(this,rl);P(this,Kp,e),P(this,Jp,r),P(this,Yp,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),P(this,Zn,s==null?null:new Uint8Array(s)),P(this,dh,i||null),P(this,rl,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${y(this,Zn)?me(y(this,Zn)):"null"}>`}get statusCode(){return y(this,Kp)}get statusMessage(){return y(this,Jp)}get headers(){return Object.assign({},y(this,Yp))}get body(){return y(this,Zn)==null?null:new Uint8Array(y(this,Zn))}get bodyText(){try{return y(this,Zn)==null?"":Nw(y(this,Zn))}catch{Y(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Y(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,r){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new d1(599,n,this.headers,this.body,y(this,dh)||void 0);return P(s,rl,{message:e,error:r}),s}throwThrottleError(e,r){r==null?r=-1:M(Number.isInteger(r)&&r>=0,"invalid stall timeout","stall",r);const n=new Error(e||"throttling requests");throw $e(n,{stall:r,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return y(this,Zn)!=null}get request(){return y(this,dh)}ok(){return y(this,rl).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:r}=y(this,rl);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{y(this,Zn)&&(s=Nw(y(this,Zn)))}catch{}Y(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:r,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Kp=new WeakMap,Jp=new WeakMap,Yp=new WeakMap,Zn=new WeakMap,dh=new WeakMap,rl=new WeakMap;let Za=d1;function WS(){return new Date().getTime()}function YX(t){return Ji(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function QX(t){return new Promise(e=>setTimeout(e,t))}const ZX=BigInt(-1),Ls=BigInt(0),ju=BigInt(1),XX=BigInt(5),Cu={};let rh="0000";for(;rh.length<80;)rh+=rh;function Cc(t){let e=rh;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function ef(t,e,r){const n=BigInt(e.width);if(e.signed){const s=ju<<n-ju;Y(r==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t>Ls?t=Sw(Gc(t,n),n):t=-Sw(Gc(-t,n),n)}else{const s=ju<<n;Y(r==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%s+s)%s&s-ju}return t}function db(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);M(i,"invalid fixed format","format",t),e=i[1]!=="u",r=parseInt(i[2]),n=parseInt(i[3])}}else if(t){const i=t,o=(a,c,l)=>i[a]==null?l:(M(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),r=o("width","number",r),n=o("decimals","number",n)}M(r%8===0,"invalid FixedNumber width (not byte aligned)","format.width",r),M(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(e?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:e,width:r,decimals:n,name:s}}function eee(t,e){let r="";t<Ls&&(r="-",t*=ZX);let n=t.toString();if(e===0)return r+n;for(;n.length<=e;)n=rh+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return r+n}var Hs,Ut,on,Nt,Tc,go,WE,GE,KE,JE;const Aa=class Aa{constructor(e,r,n){W(this,Nt);H(this,"format");W(this,Hs);W(this,Ut);W(this,on);H(this,"_value");Ng(e,Cu,"FixedNumber"),P(this,Ut,r),P(this,Hs,n);const s=eee(r,n.decimals);$e(this,{format:n.name,_value:s}),P(this,on,Cc(n.decimals))}get signed(){return y(this,Hs).signed}get width(){return y(this,Hs).width}get decimals(){return y(this,Hs).decimals}get value(){return y(this,Ut)}addUnsafe(e){return ne(this,Nt,WE).call(this,e)}add(e){return ne(this,Nt,WE).call(this,e,"add")}subUnsafe(e){return ne(this,Nt,GE).call(this,e)}sub(e){return ne(this,Nt,GE).call(this,e,"sub")}mulUnsafe(e){return ne(this,Nt,KE).call(this,e)}mul(e){return ne(this,Nt,KE).call(this,e,"mul")}mulSignal(e){ne(this,Nt,Tc).call(this,e);const r=y(this,Ut)*y(e,Ut);return Y(r%y(this,on)===Ls,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ne(this,Nt,go).call(this,r/y(this,on),"mulSignal")}divUnsafe(e){return ne(this,Nt,JE).call(this,e)}div(e){return ne(this,Nt,JE).call(this,e,"div")}divSignal(e){Y(y(e,Ut)!==Ls,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ne(this,Nt,Tc).call(this,e);const r=y(this,Ut)*y(this,on);return Y(r%y(e,Ut)===Ls,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ne(this,Nt,go).call(this,r/y(e,Ut),"divSignal")}cmp(e){let r=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Cc(s):s<0&&(r*=Cc(-s)),r<n?-1:r>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=y(this,Ut);return y(this,Ut)<Ls&&(e-=y(this,on)-ju),e=y(this,Ut)/y(this,on)*y(this,on),ne(this,Nt,go).call(this,e,"floor")}ceiling(){let e=y(this,Ut);return y(this,Ut)>Ls&&(e+=y(this,on)-ju),e=y(this,Ut)/y(this,on)*y(this,on),ne(this,Nt,go).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const r=this.decimals-e,n=XX*Cc(r-1);let s=this.value+n;const i=Cc(r);return s=s/i*i,ef(s,y(this,Hs),"round"),new Aa(Cu,s,y(this,Hs))}isZero(){return y(this,Ut)===Ls}isNegative(){return y(this,Ut)<Ls}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Aa.fromString(this.toString(),e)}static fromValue(e,r,n){const s=r==null?0:Je(r),i=db(n);let o=Se(e,"value");const a=s-i.decimals;if(a>0){const c=Cc(a);Y(o%c===Ls,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Cc(-a));return ef(o,i,"fromValue"),new Aa(Cu,o,i)}static fromString(e,r){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);M(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=db(r);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=rh;Y(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return ef(a,s,"fromString"),new Aa(Cu,a,s)}static fromBytes(e,r){let n=Ty(et(e,"value"));const s=db(r);return s.signed&&(n=Sw(n,s.width)),ef(n,s,"fromBytes"),new Aa(Cu,n,s)}};Hs=new WeakMap,Ut=new WeakMap,on=new WeakMap,Nt=new WeakSet,Tc=function(e){M(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},go=function(e,r){return e=ef(e,y(this,Hs),r),new Aa(Cu,e,y(this,Hs))},WE=function(e,r){return ne(this,Nt,Tc).call(this,e),ne(this,Nt,go).call(this,y(this,Ut)+y(e,Ut),r)},GE=function(e,r){return ne(this,Nt,Tc).call(this,e),ne(this,Nt,go).call(this,y(this,Ut)-y(e,Ut),r)},KE=function(e,r){return ne(this,Nt,Tc).call(this,e),ne(this,Nt,go).call(this,y(this,Ut)*y(e,Ut)/y(this,on),r)},JE=function(e,r){return Y(y(e,Ut)!==Ls,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ne(this,Nt,Tc).call(this,e),ne(this,Nt,go).call(this,y(this,Ut)*y(this,on)/y(e,Ut),r)};let xw=Aa;function tee(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function GS(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function KS(t,e,r,n){const s=[];for(;r<e+1+n;){const i=ZO(t,r);s.push(i.result),r+=i.consumed,Y(r<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function ZO(t,e){Y(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=n=>{Y(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=GS(t,e+1,n);return r(e+1+n+s),KS(t,e,e+1+n,n+s)}else if(t[e]>=192){const n=t[e]-192;return r(e+1+n),KS(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=GS(t,e+1,n);r(e+1+n+s);const i=me(t.slice(e+1+n,e+1+n+s));return{consumed:1+n+s,result:i}}else if(t[e]>=128){const n=t[e]-128;r(e+1+n);const s=me(t.slice(e+1,e+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:tee(t[e])}}function xg(t){const e=et(t,"data"),r=ZO(e,0);return M(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function JS(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function XO(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(XO(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=JS(n.length);return s.unshift(247+s.length),s.concat(n)}const e=Array.prototype.slice.call(et(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=JS(e.length);return r.unshift(183+r.length),r.concat(e)}const YS="0123456789abcdef";function oc(t){let e="0x";for(const r of XO(t))e+=YS[r>>4],e+=YS[r&15];return e}const eR=["wei","kwei","mwei","gwei","szabo","finney","ether"];function tR(t,e){let r=18;if(typeof e=="string"){const n=eR.indexOf(e);M(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=Je(e,"unit"));return xw.fromValue(t,r,{decimals:r,width:512}).toString()}function ree(t,e){M(typeof t=="string","value must be a string","value",t);let r=18;if(typeof e=="string"){const n=eR.indexOf(e);M(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=Je(e,"unit"));return xw.fromString(t,{decimals:r,width:512}).value}function nee(t){return tR(t,18)}const fn=32,YE=new Uint8Array(fn),see=["then"],dm={},rR=new WeakMap;function kc(t){return rR.get(t)}function QS(t,e){rR.set(t,e)}function tf(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}function QE(t,e,r){return t.indexOf(null)>=0?e.map((n,s)=>n instanceof ad?QE(kc(n),n,r):n):t.reduce((n,s,i)=>{let o=e.getValue(s);return s in n||(r&&o instanceof ad&&(o=QE(kc(o),o,r)),n[s]=o),n},{})}var fh;const Hu=class Hu extends Array{constructor(...r){const n=r[0];let s=r[1],i=(r[2]||[]).slice(),o=!0;n!==dm&&(s=r,i=[],o=!1);super(s.length);W(this,fh);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(QS(this,Object.freeze(s.map((l,u)=>{const h=i[u];return h!=null&&a.get(h)===1?h:null}))),P(this,fh,[]),y(this,fh)==null&&y(this,fh),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,h)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Je(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const g=l[f];return g instanceof Error&&tf(`index ${f}`,g),g}if(see.indexOf(u)>=0)return Reflect.get(l,u,h);const d=l[u];if(d instanceof Function)return function(...f){return d.apply(this===h?l:this,f)};if(!(u in l))return l.getValue.apply(this===h?l:this,[u])}return Reflect.get(l,u,h)}});return QS(c,kc(this)),c}toArray(r){const n=[];return this.forEach((s,i)=>{s instanceof Error&&tf(`index ${i}`,s),r&&s instanceof Hu&&(s=s.toArray(r)),n.push(s)}),n}toObject(r){const n=kc(this);return n.reduce((s,i,o)=>(Y(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),QE(n,this,r)),{})}slice(r,n){r==null&&(r=0),r<0&&(r+=this.length,r<0&&(r=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=kc(this),i=[],o=[];for(let a=r;a<n;a++)i.push(this[a]),o.push(s[a]);return new Hu(dm,i,o)}filter(r,n){const s=kc(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&tf(`index ${a}`,c),r.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new Hu(dm,i,o)}map(r,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&tf(`index ${i}`,o),s.push(r.call(n,o,i,this))}return s}getValue(r){const n=kc(this).indexOf(r);if(n===-1)return;const s=this[n];return s instanceof Error&&tf(`property ${JSON.stringify(r)}`,s.error),s}static fromItems(r,n){return new Hu(dm,r,n)}};fh=new WeakMap;let ad=Hu;function ZS(t){let e=pr(t);return Y(e.length<=fn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:fn,offset:e.length}),e.length!==fn&&(e=dn(er([YE.slice(e.length%fn),e]))),e}class Zo{constructor(e,r,n,s){H(this,"name");H(this,"type");H(this,"localName");H(this,"dynamic");$e(this,{name:e,type:r,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,r){M(!1,e,this.localName,r)}}var Co,nl,ph,km;class ZE{constructor(){W(this,ph);W(this,Co);W(this,nl);P(this,Co,[]),P(this,nl,0)}get data(){return er(y(this,Co))}get length(){return y(this,nl)}appendWriter(e){return ne(this,ph,km).call(this,dn(e.data))}writeBytes(e){let r=dn(e);const n=r.length%fn;return n&&(r=dn(er([r,YE.slice(n)]))),ne(this,ph,km).call(this,r)}writeValue(e){return ne(this,ph,km).call(this,ZS(e))}writeUpdatableValue(){const e=y(this,Co).length;return y(this,Co).push(YE),P(this,nl,y(this,nl)+fn),r=>{y(this,Co)[e]=ZS(r)}}}Co=new WeakMap,nl=new WeakMap,ph=new WeakSet,km=function(e){return y(this,Co).push(e),P(this,nl,y(this,nl)+e.length),e.length};var Tn,Xn,sl,il,Ta,ql,ev,nR;const f1=class f1{constructor(e,r,n){W(this,ql);H(this,"allowLoose");W(this,Tn);W(this,Xn);W(this,sl);W(this,il);W(this,Ta);$e(this,{allowLoose:!!r}),P(this,Tn,dn(e)),P(this,sl,0),P(this,il,null),P(this,Ta,n??1024),P(this,Xn,0)}get data(){return me(y(this,Tn))}get dataLength(){return y(this,Tn).length}get consumed(){return y(this,Xn)}get bytes(){return new Uint8Array(y(this,Tn))}subReader(e){const r=new f1(y(this,Tn).slice(y(this,Xn)+e),this.allowLoose,y(this,Ta));return P(r,il,this),r}readBytes(e,r){let n=ne(this,ql,nR).call(this,0,e,!!r);return ne(this,ql,ev).call(this,e),P(this,Xn,y(this,Xn)+n.length),n.slice(0,e)}readValue(){return Ty(this.readBytes(fn))}readIndex(){return BX(this.readBytes(fn))}};Tn=new WeakMap,Xn=new WeakMap,sl=new WeakMap,il=new WeakMap,Ta=new WeakMap,ql=new WeakSet,ev=function(e){var r;if(y(this,il))return ne(r=y(this,il),ql,ev).call(r,e);P(this,sl,y(this,sl)+e),Y(y(this,Ta)<1||y(this,sl)<=y(this,Ta)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${y(this,Ta)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:dn(y(this,Tn)),offset:y(this,Xn),length:e,info:{bytesRead:y(this,sl),dataLength:this.dataLength}})},nR=function(e,r,n){let s=Math.ceil(r/fn)*fn;return y(this,Xn)+s>y(this,Tn).length&&(this.allowLoose&&n&&y(this,Xn)+r<=y(this,Tn).length?s=r:Y(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:dn(y(this,Tn)),length:y(this,Tn).length,offset:y(this,Xn)+s})),y(this,Tn).slice(y(this,Xn),y(this,Xn)+s)};let XE=f1;function Tw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function KA(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function iee(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tw(t.outputLen),Tw(t.blockLen)}function cd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function sR(t,e){KA(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const fb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iR=t=>t instanceof Uint8Array,oee=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),pb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),yi=(t,e)=>t<<32-e|t>>>e,aee=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!aee)throw new Error("Non little-endian hardware is not supported");function cee(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Py(t){if(typeof t=="string"&&(t=cee(t)),!iR(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function lee(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!iR(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}class JA{clone(){return this._cloneInto()}}function YA(t){const e=n=>t().update(Py(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function uee(t=32){if(fb&&typeof fb.getRandomValues=="function")return fb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class oR extends JA{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,iee(e);const n=Py(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return cd(this),this.iHash.update(e),this}digestInto(e){cd(this),KA(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const aR=(t,e,r)=>new oR(t,e).update(r).digest();aR.create=(t,e)=>new oR(t,e);function hee(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}class cR extends JA{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pb(this.buffer)}update(e){cd(this);const{view:r,buffer:n,blockLen:s}=this;e=Py(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=pb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){cd(this),sR(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)r[h]=0;hee(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=pb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const dee=(t,e,r)=>t&e^~t&r,fee=(t,e,r)=>t&e^t&r^e&r,pee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ha=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),da=new Uint32Array(64);class gee extends cR{constructor(){super(64,32,8,!1),this.A=ha[0]|0,this.B=ha[1]|0,this.C=ha[2]|0,this.D=ha[3]|0,this.E=ha[4]|0,this.F=ha[5]|0,this.G=ha[6]|0,this.H=ha[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)da[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=da[h-15],f=da[h-2],g=yi(d,7)^yi(d,18)^d>>>3,p=yi(f,17)^yi(f,19)^f>>>10;da[h]=p+da[h-7]+g+da[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=yi(a,6)^yi(a,11)^yi(a,25),f=u+d+dee(a,c,l)+pee[h]+da[h]|0,p=(yi(n,2)^yi(n,13)^yi(n,22))+fee(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){da.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const lR=YA(()=>new gee),fm=BigInt(2**32-1),tv=BigInt(32);function uR(t,e=!1){return e?{h:Number(t&fm),l:Number(t>>tv&fm)}:{h:Number(t>>tv&fm)|0,l:Number(t&fm)|0}}function hR(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=uR(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const mee=(t,e)=>BigInt(t>>>0)<<tv|BigInt(e>>>0),wee=(t,e,r)=>t>>>r,yee=(t,e,r)=>t<<32-r|e>>>r,bee=(t,e,r)=>t>>>r|e<<32-r,Eee=(t,e,r)=>t<<32-r|e>>>r,vee=(t,e,r)=>t<<64-r|e>>>r-32,Aee=(t,e,r)=>t>>>r-32|e<<64-r,Cee=(t,e)=>e,_ee=(t,e)=>t,dR=(t,e,r)=>t<<r|e>>>32-r,fR=(t,e,r)=>e<<r|t>>>32-r,pR=(t,e,r)=>e<<r-32|t>>>64-r,gR=(t,e,r)=>t<<r-32|e>>>64-r;function Iee(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const See=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Nee=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,xee=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Tee=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Pee=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Oee=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Qe={fromBig:uR,split:hR,toBig:mee,shrSH:wee,shrSL:yee,rotrSH:bee,rotrSL:Eee,rotrBH:vee,rotrBL:Aee,rotr32H:Cee,rotr32L:_ee,rotlSH:dR,rotlSL:fR,rotlBH:pR,rotlBL:gR,add:Iee,add3L:See,add3H:Nee,add4L:xee,add4H:Tee,add5H:Oee,add5L:Pee},[Ree,Dee]=Qe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),fa=new Uint32Array(80),pa=new Uint32Array(80);class kee extends cR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:g,Hh:p,Hl:m}=this;return[e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m]}set(e,r,n,s,i,o,a,c,l,u,h,d,f,g,p,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,r){for(let b=0;b<16;b++,r+=4)fa[b]=e.getUint32(r),pa[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const C=fa[b-15]|0,I=pa[b-15]|0,_=Qe.rotrSH(C,I,1)^Qe.rotrSH(C,I,8)^Qe.shrSH(C,I,7),O=Qe.rotrSL(C,I,1)^Qe.rotrSL(C,I,8)^Qe.shrSL(C,I,7),T=fa[b-2]|0,N=pa[b-2]|0,k=Qe.rotrSH(T,N,19)^Qe.rotrBH(T,N,61)^Qe.shrSH(T,N,6),U=Qe.rotrSL(T,N,19)^Qe.rotrBL(T,N,61)^Qe.shrSL(T,N,6),$=Qe.add4L(O,U,pa[b-7],pa[b-16]),V=Qe.add4H($,_,k,fa[b-7],fa[b-16]);fa[b]=V|0,pa[b]=$|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:g,Gh:p,Gl:m,Hh:w,Hl:E}=this;for(let b=0;b<80;b++){const C=Qe.rotrSH(h,d,14)^Qe.rotrSH(h,d,18)^Qe.rotrBH(h,d,41),I=Qe.rotrSL(h,d,14)^Qe.rotrSL(h,d,18)^Qe.rotrBL(h,d,41),_=h&f^~h&p,O=d&g^~d&m,T=Qe.add5L(E,I,O,Dee[b],pa[b]),N=Qe.add5H(T,w,C,_,Ree[b],fa[b]),k=T|0,U=Qe.rotrSH(n,s,28)^Qe.rotrBH(n,s,34)^Qe.rotrBH(n,s,39),$=Qe.rotrSL(n,s,28)^Qe.rotrBL(n,s,34)^Qe.rotrBL(n,s,39),V=n&i^n&a^i&a,z=s&o^s&c^o&c;w=p|0,E=m|0,p=f|0,m=g|0,f=h|0,g=d|0,{h,l:d}=Qe.add(l|0,u|0,N|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=Qe.add3L(k,$,z);n=Qe.add3H(v,N,U,V),s=v|0}({h:n,l:s}=Qe.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Qe.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Qe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Qe.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Qe.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:g}=Qe.add(this.Fh|0,this.Fl|0,f|0,g|0),{h:p,l:m}=Qe.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:w,l:E}=Qe.add(this.Hh|0,this.Hl|0,w|0,E|0),this.set(n,s,i,o,a,c,l,u,h,d,f,g,p,m,w,E)}roundClean(){fa.fill(0),pa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Uee=YA(()=>new kee);function Bee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const XS=Bee();XS.crypto||XS.msCrypto;function Lee(t){switch(t){case"sha256":return lR.create();case"sha512":return Uee.create()}M(!1,"invalid hashing algorithm name","algorithm",t)}const[mR,wR,yR]=[[],[],[]],$ee=BigInt(0),rf=BigInt(1),Mee=BigInt(2),Fee=BigInt(7),jee=BigInt(256),Hee=BigInt(113);for(let t=0,e=rf,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],mR.push(2*(5*n+r)),wR.push((t+1)*(t+2)/2%64);let s=$ee;for(let i=0;i<7;i++)e=(e<<rf^(e>>Fee)*Hee)%jee,e&Mee&&(s^=rf<<(rf<<BigInt(i))-rf);yR.push(s)}const[zee,qee]=hR(yR,!0),eN=(t,e,r)=>r>32?pR(t,e,r):dR(t,e,r),tN=(t,e,r)=>r>32?gR(t,e,r):fR(t,e,r);function Vee(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=eN(l,u,1)^r[a],d=tN(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=wR[o],c=eN(s,i,a),l=tN(s,i,a),u=mR[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=zee[n],t[1]^=qee[n]}r.fill(0)}class QA extends JA{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Tw(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=oee(this.state)}keccak(){Vee(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){cd(this);const{blockLen:r,state:n}=this;e=Py(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){cd(this,!1),KA(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Tw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new QA(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Wee=(t,e,r)=>YA(()=>new QA(e,t,r)),Gee=Wee(1,136,256/8);let bR=!1;const ER=function(t){return Gee(t)};let vR=ER;function cr(t){const e=et(t,"data");return me(vR(e))}cr._=ER;cr.lock=function(){bR=!0};cr.register=function(t){if(bR)throw new TypeError("keccak256 is locked");vR=t};Object.freeze(cr);const AR=function(t){return Lee("sha256").update(t).digest()};let CR=AR,_R=!1;function Nd(t){const e=et(t,"data");return me(CR(e))}Nd._=AR;Nd.lock=function(){_R=!0};Nd.register=function(t){if(_R)throw new Error("sha256 is locked");CR=t};Object.freeze(Nd);Object.freeze(Nd);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IR=BigInt(0),Oy=BigInt(1),Kee=BigInt(2),Ry=t=>t instanceof Uint8Array,Jee=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ld(t){if(!Ry(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Jee[t[r]];return e}function SR(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function ZA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function ud(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){const s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function Al(t){return ZA(ld(t))}function XA(t){if(!Ry(t))throw new Error("Uint8Array expected");return ZA(ld(Uint8Array.from(t).reverse()))}function hd(t,e){return ud(t.toString(16).padStart(e*2,"0"))}function e1(t,e){return hd(t,e).reverse()}function Yee(t){return ud(SR(t))}function Ms(t,e,r){let n;if(typeof e=="string")try{n=ud(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Ry(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Lp(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!Ry(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function Qee(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Zee(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xee(t){let e;for(e=0;t>IR;t>>=Oy,e+=1);return e}function ete(t,e){return t>>BigInt(e)&Oy}const tte=(t,e,r)=>t|(r?Oy:IR)<<BigInt(e),t1=t=>(Kee<<BigInt(t-1))-Oy,gb=t=>new Uint8Array(t),rN=t=>Uint8Array.from(t);function NR(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=gb(t),s=gb(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...h)=>r(s,n,...h),c=(h=gb())=>{s=a(rN([0]),h),n=a(),h.length!==0&&(s=a(rN([1]),h),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){n=a();const f=n.slice();d.push(f),h+=n.length}return Lp(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(l()));)c();return o(),f}}const rte={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Tg(t,e,r={}){const n=(s,i,o)=>{const a=rte[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const nte=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ete,bitLen:Xee,bitMask:t1,bitSet:tte,bytesToHex:ld,bytesToNumberBE:Al,bytesToNumberLE:XA,concatBytes:Lp,createHmacDrbg:NR,ensureBytes:Ms,equalBytes:Qee,hexToBytes:ud,hexToNumber:ZA,numberToBytesBE:hd,numberToBytesLE:e1,numberToHexUnpadded:SR,numberToVarBytesBE:Yee,utf8ToBytes:Zee,validateObject:Tg},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sr=BigInt(0),ir=BigInt(1),Uc=BigInt(2),ste=BigInt(3),rv=BigInt(4),nN=BigInt(5),sN=BigInt(8);BigInt(9);BigInt(16);function Un(t,e){const r=t%e;return r>=Sr?r:e+r}function ite(t,e,r){if(r<=Sr||e<Sr)throw new Error("Expected power/modulo > 0");if(r===ir)return Sr;let n=ir;for(;e>Sr;)e&ir&&(n=n*t%r),t=t*t%r,e>>=ir;return n}function ds(t,e,r){let n=t;for(;e-- >Sr;)n*=n,n%=r;return n}function nv(t,e){if(t===Sr||e<=Sr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Un(t,e),n=e,s=Sr,i=ir;for(;r!==Sr;){const a=n/r,c=n%r,l=s-i*a;n=r,r=c,s=i,i=l}if(n!==ir)throw new Error("invert: does not exist");return Un(s,e)}function ote(t){const e=(t-ir)/Uc;let r,n,s;for(r=t-ir,n=0;r%Uc===Sr;r/=Uc,n++);for(s=Uc;s<t&&ite(s,e,t)!==t-ir;s++);if(n===1){const o=(t+ir)/rv;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(r+ir)/Uc;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,s),r),h=a.pow(c,i),d=a.pow(c,r);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let p=a.sqr(d);f<l&&!a.eql(p,a.ONE);f++)p=a.sqr(p);const g=a.pow(u,ir<<BigInt(l-f-1));u=a.sqr(g),h=a.mul(h,g),d=a.mul(d,u),l=f}return h}}function ate(t){if(t%rv===ste){const e=(t+ir)/rv;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%sN===nN){const e=(t-nN)/sN;return function(n,s){const i=n.mul(s,Uc),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,Uc),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),s))throw new Error("Cannot find square root");return l}}return ote(t)}const cte=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lte(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=cte.reduce((n,s)=>(n[s]="function",n),e);return Tg(t,r)}function ute(t,e,r){if(r<Sr)throw new Error("Expected power > 0");if(r===Sr)return t.ONE;if(r===ir)return e;let n=t.ONE,s=e;for(;r>Sr;)r&ir&&(n=t.mul(n,s)),s=t.sqr(s),r>>=ir;return n}function hte(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function xR(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function dte(t,e,r=!1,n={}){if(t<=Sr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=xR(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=ate(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:t1(s),ZERO:Sr,ONE:ir,create:c=>Un(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Sr<=c&&c<t},is0:c=>c===Sr,isOdd:c=>(c&ir)===ir,neg:c=>Un(-c,t),eql:(c,l)=>c===l,sqr:c=>Un(c*c,t),add:(c,l)=>Un(c+l,t),sub:(c,l)=>Un(c-l,t),mul:(c,l)=>Un(c*l,t),pow:(c,l)=>ute(a,c,l),div:(c,l)=>Un(c*nv(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>nv(c,t),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>hte(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?e1(c,i):hd(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?XA(c):Al(c)}});return Object.freeze(a)}function TR(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function PR(t){const e=TR(t);return e+Math.ceil(e/2)}function fte(t,e,r=!1){const n=t.length,s=TR(e),i=PR(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?Al(t):XA(t),a=Un(o,e-ir)+ir;return r?e1(a,s):hd(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pte=BigInt(0),mb=BigInt(1);function gte(t,e){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>pte;)i&mb&&(o=o.add(a)),a=a.double(),i>>=mb;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let l=s,u=l;for(let h=0;h<o;h++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let l=t.ZERO,u=t.BASE;const h=BigInt(2**s-1),d=2**s,f=BigInt(s);for(let g=0;g<a;g++){const p=g*c;let m=Number(o&h);o>>=f,m>c&&(m-=d,o+=mb);const w=p,E=p+Math.abs(m)-1,b=g%2!==0,C=m<0;m===0?u=u.add(r(b,i[w])):l=l.add(r(C,i[E]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function OR(t){return lte(t.Fp),Tg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xR(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mte(t){const e=OR(t);Tg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:wte,hexToBytes:yte}=nte,Kc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Kc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:wte(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=Kc,r=typeof t=="string"?yte(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Kc._parseInt(r.subarray(2)),{d:o,l:a}=Kc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},Do=BigInt(0),As=BigInt(1);BigInt(2);const iN=BigInt(3);BigInt(4);function bte(t){const e=mte(t),{Fp:r}=e,n=e.toBytes||((g,p,m)=>{const w=p.toAffine();return Lp(Uint8Array.from([4]),r.toBytes(w.x),r.toBytes(w.y))}),s=e.fromBytes||(g=>{const p=g.subarray(1),m=r.fromBytes(p.subarray(0,r.BYTES)),w=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:m,y:w}});function i(g){const{a:p,b:m}=e,w=r.sqr(g),E=r.mul(w,g);return r.add(r.add(E,r.mul(g,p)),m)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&Do<g&&g<e.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:p,nByteLength:m,wrapPrivateKey:w,n:E}=e;if(p&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=ld(g)),typeof g!="string"||!p.includes(g.length))throw new Error("Invalid key");g=g.padStart(m*2,"0")}let b;try{b=typeof g=="bigint"?g:Al(Ms("private key",g,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof g}`)}return w&&(b=Un(b,E)),a(b),b}const l=new Map;function u(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(p,m,w){if(this.px=p,this.py=m,this.pz=w,p==null||!r.isValid(p))throw new Error("x required");if(m==null||!r.isValid(m))throw new Error("y required");if(w==null||!r.isValid(w))throw new Error("z required")}static fromAffine(p){const{x:m,y:w}=p||{};if(!p||!r.isValid(m)||!r.isValid(w))throw new Error("invalid affine point");if(p instanceof h)throw new Error("projective point not allowed");const E=b=>r.eql(b,r.ZERO);return E(m)&&E(w)?h.ZERO:new h(m,w,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const m=r.invertBatch(p.map(w=>w.pz));return p.map((w,E)=>w.toAffine(m[E])).map(h.fromAffine)}static fromHex(p){const m=h.fromAffine(s(Ms("pointHex",p)));return m.assertValidity(),m}static fromPrivateKey(p){return h.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y:m}=this.toAffine();if(!r.isValid(p)||!r.isValid(m))throw new Error("bad point: x or y not FE");const w=r.sqr(m),E=i(p);if(!r.eql(w,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:m,py:w,pz:E}=this,{px:b,py:C,pz:I}=p,_=r.eql(r.mul(m,I),r.mul(b,E)),O=r.eql(r.mul(w,I),r.mul(C,E));return _&&O}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:p,b:m}=e,w=r.mul(m,iN),{px:E,py:b,pz:C}=this;let I=r.ZERO,_=r.ZERO,O=r.ZERO,T=r.mul(E,E),N=r.mul(b,b),k=r.mul(C,C),U=r.mul(E,b);return U=r.add(U,U),O=r.mul(E,C),O=r.add(O,O),I=r.mul(p,O),_=r.mul(w,k),_=r.add(I,_),I=r.sub(N,_),_=r.add(N,_),_=r.mul(I,_),I=r.mul(U,I),O=r.mul(w,O),k=r.mul(p,k),U=r.sub(T,k),U=r.mul(p,U),U=r.add(U,O),O=r.add(T,T),T=r.add(O,T),T=r.add(T,k),T=r.mul(T,U),_=r.add(_,T),k=r.mul(b,C),k=r.add(k,k),T=r.mul(k,U),I=r.sub(I,T),O=r.mul(k,N),O=r.add(O,O),O=r.add(O,O),new h(I,_,O)}add(p){u(p);const{px:m,py:w,pz:E}=this,{px:b,py:C,pz:I}=p;let _=r.ZERO,O=r.ZERO,T=r.ZERO;const N=e.a,k=r.mul(e.b,iN);let U=r.mul(m,b),$=r.mul(w,C),V=r.mul(E,I),z=r.add(m,w),v=r.add(b,C);z=r.mul(z,v),v=r.add(U,$),z=r.sub(z,v),v=r.add(m,E);let S=r.add(b,I);return v=r.mul(v,S),S=r.add(U,V),v=r.sub(v,S),S=r.add(w,E),_=r.add(C,I),S=r.mul(S,_),_=r.add($,V),S=r.sub(S,_),T=r.mul(N,v),_=r.mul(k,V),T=r.add(_,T),_=r.sub($,T),T=r.add($,T),O=r.mul(_,T),$=r.add(U,U),$=r.add($,U),V=r.mul(N,V),v=r.mul(k,v),$=r.add($,V),V=r.sub(U,V),V=r.mul(N,V),v=r.add(v,V),U=r.mul($,v),O=r.add(O,U),U=r.mul(S,v),_=r.mul(z,_),_=r.sub(_,U),U=r.mul(z,$),T=r.mul(S,T),T=r.add(T,U),new h(_,O,T)}subtract(p){return this.add(p.negate())}is0(){return this.equals(h.ZERO)}wNAF(p){return f.wNAFCached(this,l,p,m=>{const w=r.invertBatch(m.map(E=>E.pz));return m.map((E,b)=>E.toAffine(w[b])).map(h.fromAffine)})}multiplyUnsafe(p){const m=h.ZERO;if(p===Do)return m;if(a(p),p===As)return this;const{endo:w}=e;if(!w)return f.unsafeLadder(this,p);let{k1neg:E,k1:b,k2neg:C,k2:I}=w.splitScalar(p),_=m,O=m,T=this;for(;b>Do||I>Do;)b&As&&(_=_.add(T)),I&As&&(O=O.add(T)),T=T.double(),b>>=As,I>>=As;return E&&(_=_.negate()),C&&(O=O.negate()),O=new h(r.mul(O.px,w.beta),O.py,O.pz),_.add(O)}multiply(p){a(p);let m=p,w,E;const{endo:b}=e;if(b){const{k1neg:C,k1:I,k2neg:_,k2:O}=b.splitScalar(m);let{p:T,f:N}=this.wNAF(I),{p:k,f:U}=this.wNAF(O);T=f.constTimeNegate(C,T),k=f.constTimeNegate(_,k),k=new h(r.mul(k.px,b.beta),k.py,k.pz),w=T.add(k),E=N.add(U)}else{const{p:C,f:I}=this.wNAF(m);w=C,E=I}return h.normalizeZ([w,E])[0]}multiplyAndAddUnsafe(p,m,w){const E=h.BASE,b=(I,_)=>_===Do||_===As||!I.equals(E)?I.multiplyUnsafe(_):I.multiply(_),C=b(this,m).add(b(p,w));return C.is0()?void 0:C}toAffine(p){const{px:m,py:w,pz:E}=this,b=this.is0();p==null&&(p=b?r.ONE:r.inv(E));const C=r.mul(m,p),I=r.mul(w,p),_=r.mul(E,p);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(_,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}isTorsionFree(){const{h:p,isTorsionFree:m}=e;if(p===As)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:m}=e;return p===As?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),n(h,this,p)}toHex(p=!0){return ld(this.toRawBytes(p))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=e.nBitLength,f=gte(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Ete(t){const e=OR(t);return Tg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function vte(t){const e=Ete(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(v){return Do<v&&v<r.ORDER}function a(v){return Un(v,n)}function c(v){return nv(v,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:d}=bte({...e,toBytes(v,S,R){const L=S.toAffine(),F=r.toBytes(L.x),j=Lp;return R?j(Uint8Array.from([S.hasEvenY()?2:3]),F):j(Uint8Array.from([4]),F,r.toBytes(L.y))},fromBytes(v){const S=v.length,R=v[0],L=v.subarray(1);if(S===s&&(R===2||R===3)){const F=Al(L);if(!o(F))throw new Error("Point is not on curve");const j=h(F);let K=r.sqrt(j);const Q=(K&As)===As;return(R&1)===1!==Q&&(K=r.neg(K)),{x:F,y:K}}else if(S===i&&R===4){const F=r.fromBytes(L.subarray(0,r.BYTES)),j=r.fromBytes(L.subarray(r.BYTES,2*r.BYTES));return{x:F,y:j}}else throw new Error(`Point of length ${S} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=v=>ld(hd(v,e.nByteLength));function g(v){const S=n>>As;return v>S}function p(v){return g(v)?a(-v):v}const m=(v,S,R)=>Al(v.slice(S,R));class w{constructor(S,R,L){this.r=S,this.s=R,this.recovery=L,this.assertValidity()}static fromCompact(S){const R=e.nByteLength;return S=Ms("compactSignature",S,R*2),new w(m(S,0,R),m(S,R,2*R))}static fromDER(S){const{r:R,s:L}=Kc.toSig(Ms("DER",S));return new w(R,L)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new w(this.r,this.s,S)}recoverPublicKey(S){const{r:R,s:L,recovery:F}=this,j=O(Ms("msgHash",S));if(F==null||![0,1,2,3].includes(F))throw new Error("recovery id invalid");const K=F===2||F===3?R+e.n:R;if(K>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const Q=(F&1)===0?"02":"03",ce=l.fromHex(Q+f(K)),ie=c(K),we=a(-j*ie),Te=a(L*ie),ze=l.BASE.multiplyAndAddUnsafe(ce,we,Te);if(!ze)throw new Error("point at infinify");return ze.assertValidity(),ze}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ud(this.toDERHex())}toDERHex(){return Kc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ud(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const E={isValidPrivateKey(v){try{return u(v),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const v=PR(e.n);return fte(e.randomBytes(v),e.n)},precompute(v=8,S=l.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}};function b(v,S=!0){return l.fromPrivateKey(v).toRawBytes(S)}function C(v){const S=v instanceof Uint8Array,R=typeof v=="string",L=(S||R)&&v.length;return S?L===s||L===i:R?L===2*s||L===2*i:v instanceof l}function I(v,S,R=!0){if(C(v))throw new Error("first arg must be private key");if(!C(S))throw new Error("second arg must be public key");return l.fromHex(S).multiply(u(v)).toRawBytes(R)}const _=e.bits2int||function(v){const S=Al(v),R=v.length*8-e.nBitLength;return R>0?S>>BigInt(R):S},O=e.bits2int_modN||function(v){return a(_(v))},T=t1(e.nBitLength);function N(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(Do<=v&&v<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return hd(v,e.nByteLength)}function k(v,S,R=U){if(["recovered","canonical"].some(He=>He in R))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:F}=e;let{lowS:j,prehash:K,extraEntropy:Q}=R;j==null&&(j=!0),v=Ms("msgHash",v),K&&(v=Ms("prehashed msgHash",L(v)));const ce=O(v),ie=u(S),we=[N(ie),N(ce)];if(Q!=null){const He=Q===!0?F(r.BYTES):Q;we.push(Ms("extraEntropy",He))}const Te=Lp(...we),ze=ce;function Xe(He){const ct=_(He);if(!d(ct))return;const rr=c(ct),D=l.BASE.multiply(ct).toAffine(),B=a(D.x);if(B===Do)return;const G=a(rr*a(ze+B*ie));if(G===Do)return;let ee=(D.x===B?0:2)|Number(D.y&As),Z=G;return j&&g(G)&&(Z=p(G),ee^=1),new w(B,Z,ee)}return{seed:Te,k2sig:Xe}}const U={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function V(v,S,R=U){const{seed:L,k2sig:F}=k(v,S,R),j=e;return NR(j.hash.outputLen,j.nByteLength,j.hmac)(L,F)}l.BASE._setWindowSize(8);function z(v,S,R,L=$){var D;const F=v;if(S=Ms("msgHash",S),R=Ms("publicKey",R),"strict"in L)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:K}=L;let Q,ce;try{if(typeof F=="string"||F instanceof Uint8Array)try{Q=w.fromDER(F)}catch(B){if(!(B instanceof Kc.Err))throw B;Q=w.fromCompact(F)}else if(typeof F=="object"&&typeof F.r=="bigint"&&typeof F.s=="bigint"){const{r:B,s:G}=F;Q=new w(B,G)}else throw new Error("PARSE");ce=l.fromHex(R)}catch(B){if(B.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&Q.hasHighS())return!1;K&&(S=e.hash(S));const{r:ie,s:we}=Q,Te=O(S),ze=c(we),Xe=a(Te*ze),He=a(ie*ze),ct=(D=l.BASE.multiplyAndAddUnsafe(ce,Xe,He))==null?void 0:D.toAffine();return ct?a(ct.x)===ie:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:I,sign:V,verify:z,ProjectivePoint:l,Signature:w,utils:E}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ate(t){return{hash:t,hmac:(e,...r)=>aR(t,e,lee(...r)),randomBytes:uee}}function Cte(t,e){const r=n=>vte({...t,...Ate(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RR=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),oN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_te=BigInt(1),sv=BigInt(2),aN=(t,e)=>(t+e/sv)/e;function Ite(t){const e=RR,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=ds(u,r,e)*u%e,d=ds(h,r,e)*u%e,f=ds(d,sv,e)*l%e,g=ds(f,s,e)*f%e,p=ds(g,i,e)*g%e,m=ds(p,a,e)*p%e,w=ds(m,c,e)*m%e,E=ds(w,a,e)*p%e,b=ds(E,r,e)*u%e,C=ds(b,o,e)*g%e,I=ds(C,n,e)*l%e,_=ds(I,sv,e);if(!iv.eql(iv.sqr(_),t))throw new Error("Cannot find square root");return _}const iv=dte(RR,void 0,void 0,{sqrt:Ite}),ga=Cte({a:BigInt(0),b:BigInt(7),Fp:iv,n:oN,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=oN,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_te*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=aN(i*t,e),c=aN(-n*t,e);let l=Un(t-a*r-c*s,e),u=Un(-a*n-c*i,e);const h=l>o,d=u>o;if(h&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},lR);BigInt(0);ga.ProjectivePoint;const $p="0x0000000000000000000000000000000000000000",cN="0x0000000000000000000000000000000000000000000000000000000000000000",lN=BigInt(0),uN=BigInt(1),hN=BigInt(2),dN=BigInt(27),fN=BigInt(28),pm=BigInt(35),_u={};function pN(t){return Ko(pr(t),32)}var gh,Ii,mh,ol;const $s=class $s{constructor(e,r,n,s){W(this,gh);W(this,Ii);W(this,mh);W(this,ol);Ng(e,_u,"Signature"),P(this,gh,r),P(this,Ii,n),P(this,mh,s),P(this,ol,null)}get r(){return y(this,gh)}set r(e){M(th(e)===32,"invalid r","value",e),P(this,gh,me(e))}get s(){return M(parseInt(y(this,Ii).substring(0,3))<8,"non-canonical s; use ._s","s",y(this,Ii)),y(this,Ii)}set s(e){M(th(e)===32,"invalid s","value",e),P(this,Ii,me(e))}get _s(){return y(this,Ii)}isValid(){return parseInt(y(this,Ii).substring(0,3))<8}get v(){return y(this,mh)}set v(e){const r=Je(e,"value");M(r===27||r===28,"invalid v","v",e),P(this,mh,r)}get networkV(){return y(this,ol)}get legacyChainId(){const e=this.networkV;return e==null?null:$s.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=et(this.s);return this.yParity&&(e[0]|=128),me(e)}get compactSerialized(){return er([this.r,this.yParityAndS])}get serialized(){return er([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new $s(_u,this.r,this._s,this.v);return this.networkV&&P(e,ol,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const r=Se(e,"v");return r==dN||r==fN?lN:(M(r>=pm,"invalid EIP-155 v","v",e),(r-pm)/hN)}static getChainIdV(e,r){return Se(e)*hN+BigInt(35+r-27)}static getNormalizedV(e){const r=Se(e);return r===lN||r===dN?27:r===uN||r===fN?28:(M(r>=pm,"invalid v","v",e),r&uN?27:28)}static from(e){function r(l,u){M(l,u,"signature",e)}if(e==null)return new $s(_u,cN,cN,27);if(typeof e=="string"){const l=et(e,"signature");if(l.length===64){const u=me(l.slice(0,32)),h=l.slice(32,64),d=h[0]&128?28:27;return h[0]&=127,new $s(_u,u,me(h),d)}if(l.length===65){const u=me(l.slice(0,32)),h=me(l.slice(32,64)),d=$s.getNormalizedV(l[64]);return new $s(_u,u,h,d)}r(!1,"invalid raw signature length")}if(e instanceof $s)return e.clone();const n=e.r;r(n!=null,"missing r");const s=pN(n),i=(function(l,u){if(l!=null)return pN(l);if(u!=null){r(Mt(u,32),"invalid yParityAndS");const h=et(u);return h[0]&=127,me(h)}r(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(l,u,h){if(l!=null){const d=Se(l);return{networkV:d>=pm?d:void 0,v:$s.getNormalizedV(d)}}if(u!=null)return r(Mt(u,32),"invalid yParityAndS"),{v:et(u)[0]&128?28:27};if(h!=null){switch(Je(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new $s(_u,s,i,a);return o&&P(c,ol,o),r(e.yParity==null||Je(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};gh=new WeakMap,Ii=new WeakMap,mh=new WeakMap,ol=new WeakMap;let Mn=$s;var _o;const Bc=class Bc{constructor(e){W(this,_o);M(th(e)===32,"invalid private key","privateKey","[REDACTED]"),P(this,_o,me(e))}get privateKey(){return y(this,_o)}get publicKey(){return Bc.computePublicKey(y(this,_o))}get compressedPublicKey(){return Bc.computePublicKey(y(this,_o),!0)}sign(e){M(th(e)===32,"invalid digest length","digest",e);const r=ga.sign(dn(e),dn(y(this,_o)),{lowS:!0});return Mn.from({r:ic(r.r,32),s:ic(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){const r=Bc.computePublicKey(e);return me(ga.getSharedSecret(dn(y(this,_o)),et(r),!1))}static computePublicKey(e,r){let n=et(e,"key");if(n.length===32){const i=ga.getPublicKey(n,!!r);return me(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=ga.ProjectivePoint.fromHex(n);return me(s.toRawBytes(r))}static recoverPublicKey(e,r){M(th(e)===32,"invalid digest length","digest",e);const n=Mn.from(r);let s=ga.Signature.fromCompact(dn(er([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(dn(e));return M(i!=null,"invalid signature for digest","signature",r),"0x"+i.toHex(!1)}static addPoints(e,r,n){const s=ga.ProjectivePoint.fromHex(Bc.computePublicKey(e).substring(2)),i=ga.ProjectivePoint.fromHex(Bc.computePublicKey(r).substring(2));return"0x"+s.add(i).toHex(!!n)}};_o=new WeakMap;let Mp=Bc;const Ste=BigInt(0),Nte=BigInt(36);function gN(t){t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=et(cr(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const r1={};for(let t=0;t<10;t++)r1[String(t)]=String(t);for(let t=0;t<26;t++)r1[String.fromCharCode(65+t)]=String(10+t);const mN=15;function xte(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>r1[n]).join("");for(;e.length>=mN;){let n=e.substring(0,mN);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const Tte=(function(){const t={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[r]=BigInt(e)}return t})();function Pte(t){t=t.toLowerCase();let e=Ste;for(let r=0;r<t.length;r++)e=e*Nte+Tte[t[r]];return e}function xt(t){if(M(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=gN(t);return M(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){M(t.substring(2,4)===xte(t),"bad icap checksum","address",t);let e=Pte(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return gN("0x"+e)}M(!1,"invalid address","address",t)}function Ote(t){const e=xt(t.from);let n=Se(t.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,xt(Xt(cr(oc([e,n])),12))}function DR(t){return t&&typeof t.getAddress=="function"}async function wb(t,e){const r=await e;return(r==null||r==="0x0000000000000000000000000000000000000000")&&(Y(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),M(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xt(r)}function pn(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xt(t):(Y(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),wb(t,e.resolveName(t)));if(DR(t))return wb(t,t.getAddress());if(t&&typeof t.then=="function")return wb(t,t);M(!1,"unsupported addressable value","target",t)}const wo={};function Ie(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new en(wo,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function mt(t,e){return new en(wo,`bytes${e||""}`,t,{size:e})}const wN=Symbol.for("_ethers_typed");var al;const yo=class yo{constructor(e,r,n,s){H(this,"type");H(this,"value");W(this,al);H(this,"_typedSymbol");s==null&&(s=null),Ng(wo,e,"Typed"),$e(this,{_typedSymbol:wN,type:r,value:n}),P(this,al,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return y(this,al)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return y(this,al)===!0?-1:y(this,al)===!1?this.value.length:null}static from(e,r){return new yo(wo,e,r)}static uint8(e){return Ie(e,8)}static uint16(e){return Ie(e,16)}static uint24(e){return Ie(e,24)}static uint32(e){return Ie(e,32)}static uint40(e){return Ie(e,40)}static uint48(e){return Ie(e,48)}static uint56(e){return Ie(e,56)}static uint64(e){return Ie(e,64)}static uint72(e){return Ie(e,72)}static uint80(e){return Ie(e,80)}static uint88(e){return Ie(e,88)}static uint96(e){return Ie(e,96)}static uint104(e){return Ie(e,104)}static uint112(e){return Ie(e,112)}static uint120(e){return Ie(e,120)}static uint128(e){return Ie(e,128)}static uint136(e){return Ie(e,136)}static uint144(e){return Ie(e,144)}static uint152(e){return Ie(e,152)}static uint160(e){return Ie(e,160)}static uint168(e){return Ie(e,168)}static uint176(e){return Ie(e,176)}static uint184(e){return Ie(e,184)}static uint192(e){return Ie(e,192)}static uint200(e){return Ie(e,200)}static uint208(e){return Ie(e,208)}static uint216(e){return Ie(e,216)}static uint224(e){return Ie(e,224)}static uint232(e){return Ie(e,232)}static uint240(e){return Ie(e,240)}static uint248(e){return Ie(e,248)}static uint256(e){return Ie(e,256)}static uint(e){return Ie(e,256)}static int8(e){return Ie(e,-8)}static int16(e){return Ie(e,-16)}static int24(e){return Ie(e,-24)}static int32(e){return Ie(e,-32)}static int40(e){return Ie(e,-40)}static int48(e){return Ie(e,-48)}static int56(e){return Ie(e,-56)}static int64(e){return Ie(e,-64)}static int72(e){return Ie(e,-72)}static int80(e){return Ie(e,-80)}static int88(e){return Ie(e,-88)}static int96(e){return Ie(e,-96)}static int104(e){return Ie(e,-104)}static int112(e){return Ie(e,-112)}static int120(e){return Ie(e,-120)}static int128(e){return Ie(e,-128)}static int136(e){return Ie(e,-136)}static int144(e){return Ie(e,-144)}static int152(e){return Ie(e,-152)}static int160(e){return Ie(e,-160)}static int168(e){return Ie(e,-168)}static int176(e){return Ie(e,-176)}static int184(e){return Ie(e,-184)}static int192(e){return Ie(e,-192)}static int200(e){return Ie(e,-200)}static int208(e){return Ie(e,-208)}static int216(e){return Ie(e,-216)}static int224(e){return Ie(e,-224)}static int232(e){return Ie(e,-232)}static int240(e){return Ie(e,-240)}static int248(e){return Ie(e,-248)}static int256(e){return Ie(e,-256)}static int(e){return Ie(e,-256)}static bytes1(e){return mt(e,1)}static bytes2(e){return mt(e,2)}static bytes3(e){return mt(e,3)}static bytes4(e){return mt(e,4)}static bytes5(e){return mt(e,5)}static bytes6(e){return mt(e,6)}static bytes7(e){return mt(e,7)}static bytes8(e){return mt(e,8)}static bytes9(e){return mt(e,9)}static bytes10(e){return mt(e,10)}static bytes11(e){return mt(e,11)}static bytes12(e){return mt(e,12)}static bytes13(e){return mt(e,13)}static bytes14(e){return mt(e,14)}static bytes15(e){return mt(e,15)}static bytes16(e){return mt(e,16)}static bytes17(e){return mt(e,17)}static bytes18(e){return mt(e,18)}static bytes19(e){return mt(e,19)}static bytes20(e){return mt(e,20)}static bytes21(e){return mt(e,21)}static bytes22(e){return mt(e,22)}static bytes23(e){return mt(e,23)}static bytes24(e){return mt(e,24)}static bytes25(e){return mt(e,25)}static bytes26(e){return mt(e,26)}static bytes27(e){return mt(e,27)}static bytes28(e){return mt(e,28)}static bytes29(e){return mt(e,29)}static bytes30(e){return mt(e,30)}static bytes31(e){return mt(e,31)}static bytes32(e){return mt(e,32)}static address(e){return new yo(wo,"address",e)}static bool(e){return new yo(wo,"bool",!!e)}static bytes(e){return new yo(wo,"bytes",e)}static string(e){return new yo(wo,"string",e)}static array(e,r){throw new Error("not implemented yet")}static tuple(e,r){throw new Error("not implemented yet")}static overrides(e){return new yo(wo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===wN}static dereference(e,r){if(yo.isTyped(e)){if(e.type!==r)throw new Error(`invalid type: expecetd ${r}, got ${e.type}`);return e.value}return e}};al=new WeakMap;let en=yo;class Rte extends Zo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){let n=en.dereference(r,"string");try{n=xt(n)}catch(s){return this._throwError(s.message,r)}return e.writeValue(n)}decode(e){return xt(ic(e.readValue(),20))}}class Dte extends Zo{constructor(r){super(r.name,r.type,"_",r.dynamic);H(this,"coder");this.coder=r}defaultValue(){return this.coder.defaultValue()}encode(r,n){return this.coder.encode(r,n)}decode(r){return this.coder.decode(r)}}function kR(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(l=>{const u=l.localName;return Y(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:r}),Y(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:r}),c[u]=!0,r[u]})}else M(!1,"invalid tuple value","tuple",r);M(e.length===n.length,"types/value length mismatch","tuple",r);let s=new ZE,i=new ZE,o=[];e.forEach((c,l)=>{let u=n[l];if(c.dynamic){let h=i.length;c.encode(i,u);let d=s.writeUpdatableValue();o.push(f=>{d(f+h)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function UR(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(kr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(kr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");r.push(o),n.push(i.localName||null)}),ad.fromItems(r,n)}class kte extends Zo{constructor(r,n,s){const i=r.type+"["+(n>=0?n:"")+"]",o=n===-1||r.dynamic;super("array",i,s,o);H(this,"coder");H(this,"length");$e(this,{coder:r,length:n})}defaultValue(){const r=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(r);return n}encode(r,n){const s=en.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,r.writeValue(s.length)),HO(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return kR(r,o,s)}decode(r){let n=this.length;n===-1&&(n=r.readIndex(),Y(n*fn<=r.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:r.bytes,offset:n*fn,length:r.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new Dte(this.coder));return UR(r,s)}}class Ute extends Zo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){const n=en.dereference(r,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class BR extends Zo{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=dn(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class Bte extends BR{constructor(e){super("bytes",e)}decode(e){return me(super.decode(e))}}class Lte extends Zo{constructor(r,n){let s="bytes"+String(r);super(s,s,n,!1);H(this,"size");$e(this,{size:r},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(r,n){let s=dn(en.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),r.writeBytes(s)}decode(r){return me(r.readBytes(this.size))}}const $te=new Uint8Array([]);class Mte extends Zo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes($te)}decode(e){return e.readBytes(0),null}}const Fte=BigInt(0),jte=BigInt(1),Hte=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class zte extends Zo{constructor(r,n,s){const i=(n?"int":"uint")+r*8;super(i,i,s,!1);H(this,"size");H(this,"signed");$e(this,{size:r,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(r,n){let s=Se(en.dereference(n,this.type)),i=Gc(Hte,fn*8);if(this.signed){let o=Gc(i,this.size*8-1);(s>o||s<-(o+jte))&&this._throwError("value out-of-bounds",n),s=VO(s,8*fn)}else(s<Fte||s>Gc(i,this.size*8))&&this._throwError("value out-of-bounds",n);return r.writeValue(s)}decode(r){let n=Gc(r.readValue(),this.size*8);return this.signed&&(n=Sw(n,this.size*8)),n}}class qte extends BR{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,Ji(en.dereference(r,"string")))}decode(e){return Nw(super.decode(e))}}class gm extends Zo{constructor(r,n){let s=!1;const i=[];r.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);H(this,"coders");$e(this,{coders:Object.freeze(r.slice())})}defaultValue(){const r=[];this.coders.forEach(s=>{r.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),r[o]==null&&(r[o]=r[i]))}),Object.freeze(r)}encode(r,n){const s=en.dereference(n,"tuple");return kR(r,this.coders,s)}decode(r){return UR(r,this.coders)}}function yb(t,e){return{address:xt(t),storageKeys:e.map((r,n)=>(M(Mt(r,32),"invalid slot",`storageKeys[${n}]`,r),r.toLowerCase()))}}function eu(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(M(r.length===2,"invalid slot set",`value[${n}]`,r),yb(r[0],r[1])):(M(r!=null&&typeof r=="object","invalid address-slot set","value",t),yb(r.address,r.storageKeys)));M(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return yb(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function LR(t){return{address:xt(t.address),nonce:Se(t.nonce!=null?t.nonce:0),chainId:Se(t.chainId!=null?t.chainId:0),signature:Mn.from(t.signature)}}function Vte(t){let e;return typeof t=="string"?e=Mp.computePublicKey(t,!1):e=t.publicKey,xt(cr("0x"+e.substring(4)).substring(26))}function Wte(t,e){return Vte(Mp.recoverPublicKey(t,e))}const vr=BigInt(0),Gte=BigInt(2),Kte=BigInt(27),Jte=BigInt(28),Yte=BigInt(35),Qte=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),bb=4096*32;function Zte(t){return{blobToKzgCommitment:n=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return et(t.blobToKzgCommitment(me(n)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return et(t.blobToKzgCommitment(n));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return et(t.blobToKZGCommitment(me(n)));M(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return et(t.computeBlobProof(me(n),me(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return et(t.computeBlobKZGProof(me(n),me(s)));M(!1,"unsupported KZG library","kzg",t)}}}function yN(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return r+=Nd(e).substring(4),"0x"+r}function xd(t){return t==="0x"?null:xt(t)}function Dy(t,e){try{return eu(t)}catch(r){M(!1,r.message,e,t)}}function Xte(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const r=[];for(let n=0;n<t.length;n++){const s=t[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);r.push({address:xd(s[1]),nonce:Bt(s[2],"nonce"),chainId:Bt(s[0],"chainId"),signature:Mn.from({yParity:tu(s[3],"yParity"),r:Ko(s[4],32),s:Ko(s[5],32)})})}return r}catch(r){M(!1,r.message,e,t)}}function tu(t,e){return t==="0x"?0:Je(t,e)}function Bt(t,e){if(t==="0x")return vr;const r=Se(t,e);return M(r<=Qte,"value exceeds uint size",e,r),r}function ot(t,e){const r=Se(t,"value"),n=pr(r);return M(n.length<=32,"value too large",`tx.${e}`,r),n}function ky(t){return eu(t).map(e=>[e.address,e.storageKeys])}function ere(t){return t.map(e=>[ot(e.chainId,"chainId"),e.address,ot(e.nonce,"nonce"),ot(e.signature.yParity,"yParity"),pr(e.signature.r),pr(e.signature.s)])}function tre(t,e){M(Array.isArray(t),`invalid ${e}`,"value",t);for(let r=0;r<t.length;r++)M(Mt(t[r],32),"invalid ${ param } hash",`value[${r}]`,t[r]);return t}function rre(t){const e=xg(t);M(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:tu(e[0],"nonce"),gasPrice:Bt(e[1],"gasPrice"),gasLimit:Bt(e[2],"gasLimit"),to:xd(e[3]),value:Bt(e[4],"value"),data:me(e[5]),chainId:vr};if(e.length===6)return r;const n=Bt(e[6],"v"),s=Bt(e[7],"r"),i=Bt(e[8],"s");if(s===vr&&i===vr)r.chainId=n;else{let o=(n-Yte)/Gte;o<vr&&(o=vr),r.chainId=o,M(o!==vr||n===Kte||n===Jte,"non-canonical legacy v","v",e[6]),r.signature=Mn.from({r:Ko(e[7],32),s:Ko(e[8],32),v:n})}return r}function nre(t,e){const r=[ot(t.nonce,"nonce"),ot(t.gasPrice||0,"gasPrice"),ot(t.gasLimit,"gasLimit"),t.to||"0x",ot(t.value,"value"),t.data];let n=vr;if(t.chainId!=vr)n=Se(t.chainId,"tx.chainId"),M(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==vr&&(r.push(pr(n)),r.push("0x"),r.push("0x")),oc(r);let s=BigInt(27+e.yParity);return n!==vr?s=Mn.getChainIdV(n,e.v):BigInt(e.v)!==s&&M(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(pr(s)),r.push(pr(e.r)),r.push(pr(e.s)),oc(r)}function Uy(t,e){let r;try{if(r=tu(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{M(!1,"invalid yParity","yParity",e[0])}const n=Ko(e[1],32),s=Ko(e[2],32),i=Mn.from({r:n,s,yParity:r});t.signature=i}function sre(t){const e=xg(et(t).slice(1));M(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",me(t));const r={type:2,chainId:Bt(e[0],"chainId"),nonce:tu(e[1],"nonce"),maxPriorityFeePerGas:Bt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Bt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Bt(e[4],"gasLimit"),to:xd(e[5]),value:Bt(e[6],"value"),data:me(e[7]),accessList:Dy(e[8],"accessList")};return e.length===9||Uy(r,e.slice(9)),r}function ire(t,e){const r=[ot(t.chainId,"chainId"),ot(t.nonce,"nonce"),ot(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ot(t.maxFeePerGas||0,"maxFeePerGas"),ot(t.gasLimit,"gasLimit"),t.to||"0x",ot(t.value,"value"),t.data,ky(t.accessList||[])];return e&&(r.push(ot(e.yParity,"yParity")),r.push(pr(e.r)),r.push(pr(e.s))),er(["0x02",oc(r)])}function ore(t){const e=xg(et(t).slice(1));M(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",me(t));const r={type:1,chainId:Bt(e[0],"chainId"),nonce:tu(e[1],"nonce"),gasPrice:Bt(e[2],"gasPrice"),gasLimit:Bt(e[3],"gasLimit"),to:xd(e[4]),value:Bt(e[5],"value"),data:me(e[6]),accessList:Dy(e[7],"accessList")};return e.length===8||Uy(r,e.slice(8)),r}function are(t,e){const r=[ot(t.chainId,"chainId"),ot(t.nonce,"nonce"),ot(t.gasPrice||0,"gasPrice"),ot(t.gasLimit,"gasLimit"),t.to||"0x",ot(t.value,"value"),t.data,ky(t.accessList||[])];return e&&(r.push(ot(e.yParity,"recoveryParam")),r.push(pr(e.r)),r.push(pr(e.s))),er(["0x01",oc(r)])}function cre(t){let e=xg(et(t).slice(1)),r="3",n=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";const i=e[1],o=e[2],a=e[3];M(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),M(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),M(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),M(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),M(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}M(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",me(t));const s={type:3,chainId:Bt(e[0],"chainId"),nonce:tu(e[1],"nonce"),maxPriorityFeePerGas:Bt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Bt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Bt(e[4],"gasLimit"),to:xd(e[5]),value:Bt(e[6],"value"),data:me(e[7]),accessList:Dy(e[8],"accessList"),maxFeePerBlobGas:Bt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(s.blobs=n),M(s.to!=null,`invalid address for transaction type: ${r}`,"data",t),M(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)M(Mt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||Uy(s,e.slice(11)),s}function lre(t,e,r){const n=[ot(t.chainId,"chainId"),ot(t.nonce,"nonce"),ot(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ot(t.maxFeePerGas||0,"maxFeePerGas"),ot(t.gasLimit,"gasLimit"),t.to||$p,ot(t.value,"value"),t.data,ky(t.accessList||[]),ot(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),tre(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(ot(e.yParity,"yParity")),n.push(pr(e.r)),n.push(pr(e.s)),r)?er(["0x03",oc([n,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])]):er(["0x03",oc(n)])}function ure(t){const e=xg(et(t).slice(1));M(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",me(t));const r={type:4,chainId:Bt(e[0],"chainId"),nonce:tu(e[1],"nonce"),maxPriorityFeePerGas:Bt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Bt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Bt(e[4],"gasLimit"),to:xd(e[5]),value:Bt(e[6],"value"),data:me(e[7]),accessList:Dy(e[8],"accessList"),authorizationList:Xte(e[9],"authorizationList")};return e.length===10||Uy(r,e.slice(10)),r}function hre(t,e){const r=[ot(t.chainId,"chainId"),ot(t.nonce,"nonce"),ot(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ot(t.maxFeePerGas||0,"maxFeePerGas"),ot(t.gasLimit,"gasLimit"),t.to||"0x",ot(t.value,"value"),t.data,ky(t.accessList||[]),ere(t.authorizationList||[])];return e&&(r.push(ot(e.yParity,"yParity")),r.push(pr(e.r)),r.push(pr(e.s))),er(["0x04",oc(r)])}var zs,wh,yh,bh,Eh,vh,Ah,Ch,_h,Ih,Sh,Nh,cl,Pa,Si,Oa,xh,Th,Um;const Ci=class Ci{constructor(){W(this,Th);W(this,zs);W(this,wh);W(this,yh);W(this,bh);W(this,Eh);W(this,vh);W(this,Ah);W(this,Ch);W(this,_h);W(this,Ih);W(this,Sh);W(this,Nh);W(this,cl);W(this,Pa);W(this,Si);W(this,Oa);W(this,xh);P(this,zs,null),P(this,wh,null),P(this,bh,0),P(this,Eh,vr),P(this,vh,null),P(this,Ah,null),P(this,Ch,null),P(this,yh,"0x"),P(this,_h,vr),P(this,Ih,vr),P(this,Sh,null),P(this,Nh,null),P(this,cl,null),P(this,Pa,null),P(this,Si,null),P(this,Oa,null),P(this,xh,null)}get type(){return y(this,zs)}set type(e){switch(e){case null:P(this,zs,null);break;case 0:case"legacy":P(this,zs,0);break;case 1:case"berlin":case"eip-2930":P(this,zs,1);break;case 2:case"london":case"eip-1559":P(this,zs,2);break;case 3:case"cancun":case"eip-4844":P(this,zs,3);break;case 4:case"pectra":case"eip-7702":P(this,zs,4);break;default:M(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=y(this,wh);return e==null&&this.type===3?$p:e}set to(e){P(this,wh,e==null?null:xt(e))}get nonce(){return y(this,bh)}set nonce(e){P(this,bh,Je(e,"value"))}get gasLimit(){return y(this,Eh)}set gasLimit(e){P(this,Eh,Se(e))}get gasPrice(){const e=y(this,vh);return e==null&&(this.type===0||this.type===1)?vr:e}set gasPrice(e){P(this,vh,e==null?null:Se(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=y(this,Ah);return e??(this.type===2||this.type===3?vr:null)}set maxPriorityFeePerGas(e){P(this,Ah,e==null?null:Se(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=y(this,Ch);return e??(this.type===2||this.type===3?vr:null)}set maxFeePerGas(e){P(this,Ch,e==null?null:Se(e,"maxFeePerGas"))}get data(){return y(this,yh)}set data(e){P(this,yh,me(e))}get value(){return y(this,_h)}set value(e){P(this,_h,Se(e,"value"))}get chainId(){return y(this,Ih)}set chainId(e){P(this,Ih,Se(e))}get signature(){return y(this,Sh)||null}set signature(e){P(this,Sh,e==null?null:Mn.from(e))}get accessList(){const e=y(this,Nh)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){P(this,Nh,e==null?null:eu(e))}get authorizationList(){const e=y(this,xh)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){P(this,xh,e==null?null:e.map(r=>LR(r)))}get maxFeePerBlobGas(){const e=y(this,cl);return e==null&&this.type===3?vr:e}set maxFeePerBlobGas(e){P(this,cl,e==null?null:Se(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=y(this,Pa);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){M(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)M(Mt(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}P(this,Pa,e)}get blobs(){return y(this,Oa)==null?null:y(this,Oa).map(e=>Object.assign({},e))}set blobs(e){if(e==null){P(this,Oa,null);return}const r=[],n=[];for(let s=0;s<e.length;s++){const i=e[s];if(GA(i)){Y(y(this,Si),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=et(i);if(M(o.length<=bb,"blob is too large",`blobs[${s}]`,i),o.length!==bb){const l=new Uint8Array(bb);l.set(o),o=l}const a=y(this,Si).blobToKzgCommitment(o),c=me(y(this,Si).computeBlobKzgProof(o,a));r.push({data:me(o),commitment:me(a),proof:c}),n.push(yN(1,a))}else{const o=me(i.commitment);r.push({data:me(i.data),commitment:o,proof:me(i.proof)}),n.push(yN(1,o))}}P(this,Oa,r),P(this,Pa,n)}get kzg(){return y(this,Si)}set kzg(e){e==null?P(this,Si,null):P(this,Si,Zte(e))}get hash(){return this.signature==null?null:cr(ne(this,Th,Um).call(this,!0,!1))}get unsignedHash(){return cr(this.unsignedSerialized)}get from(){return this.signature==null?null:Wte(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Mp.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ne(this,Th,Um).call(this,!0,!0)}get unsignedSerialized(){return ne(this,Th,Um).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=y(this,cl)!=null||y(this,Pa);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Y(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Y(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Y(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):r?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ci.from(this)}toJSON(){const e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ci;if(typeof e=="string"){const n=et(e);if(n[0]>=127)return Ci.from(rre(n));switch(n[0]){case 1:return Ci.from(ore(n));case 2:return Ci.from(sre(n));case 3:return Ci.from(cre(n));case 4:return Ci.from(ure(n))}Y(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new Ci;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Mn.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.authorizationList!=null&&(r.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(M(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),M(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(M(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),M(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}};zs=new WeakMap,wh=new WeakMap,yh=new WeakMap,bh=new WeakMap,Eh=new WeakMap,vh=new WeakMap,Ah=new WeakMap,Ch=new WeakMap,_h=new WeakMap,Ih=new WeakMap,Sh=new WeakMap,Nh=new WeakMap,cl=new WeakMap,Pa=new WeakMap,Si=new WeakMap,Oa=new WeakMap,xh=new WeakMap,Th=new WeakSet,Um=function(e,r){Y(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return nre(this,n);case 1:return are(this,n);case 2:return ire(this,n);case 3:return lre(this,n,r?this.blobs:null);case 4:return hre(this,n)}Y(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Pw=Ci;function Fl(t){return cr(Ji(t))}var dre="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const bN=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),EN=4;function fre(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let I=1;I<n;I++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const h=31,d=2**h,f=d>>>1,g=f>>1,p=d-1;let m=0;for(let I=0;I<h;I++)m=m<<1|u();let w=[],E=0,b=d;for(;;){let I=Math.floor(((m-E+1)*s-1)/b),_=0,O=n;for(;O-_>1;){let k=_+O>>>1;I<i[k]?O=k:_=k}if(_==0)break;w.push(_);let T=E+Math.floor(b*i[_]/s),N=E+Math.floor(b*i[_+1]/s)-1;for(;((T^N)&f)==0;)m=m<<1&p|u(),T=T<<1&p,N=N<<1&p|1;for(;T&~N&g;)m=m&f|m<<1&p>>>1|u(),T=T<<1^f,N=(N^f)<<1|f|1;E=T,b=1+N-T}let C=n-4;return w.map(I=>{switch(I-C){case 3:return C+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return C+256+(t[a++]<<8|t[a++]);case 1:return C+t[a++];default:return I-1}})}function pre(t){let e=0;return()=>t[e++]}function $R(t){return pre(fre(gre(t)))}function gre(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function mre(t){return t&1?~t>>1:t>>1}function wre(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=mre(e());return r}function Fp(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let i=0;i<s;i++)r.push(e+i);e+=s+1}return r}function MR(t){return jp(()=>{let e=Fp(t);if(e.length)return e})}function FR(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(yre(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(bre(r,t))}return e.flat()}function jp(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function jR(t,e,r){let n=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)wre(t,r).forEach((i,o)=>n[o].push(i));return n}function yre(t,e){let r=1+e(),n=e(),s=jp(e);return jR(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,h)=>{let d=h*n;return[c+h*r,l.map(f=>f+d)]})})}function bre(t,e){let r=1+e();return jR(r,1+t,e).map(s=>[s[0],s.slice(1)])}function Ere(t){let e=[],r=Fp(t);return s(n([]),[]),e;function n(i){let o=t(),a=jp(()=>{let c=Fp(t).map(l=>r[l]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function vre(t){return t.toString(16).toUpperCase().padStart(2,"0")}function HR(t){return`{${vre(t)}}`}function Are(t){let e=[];for(let r=0,n=t.length;r<n;){let s=t.codePointAt(r);r+=s<65536?1:2,e.push(s)}return e}function dd(t){let r=t.length;if(r<4096)return String.fromCodePoint(...t);let n=[];for(let s=0;s<r;)n.push(String.fromCodePoint(...t.slice(s,s+=4096)));return n.join("")}function Cre(t,e){let r=t.length,n=r-e.length;for(let s=0;n==0&&s<r;s++)n=t[s]-e[s];return n}var _re="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Hp=44032,Ow=4352,Rw=4449,Dw=4519,zR=19,qR=21,fd=28,kw=qR*fd,Ire=zR*kw,Sre=Hp+Ire,Nre=Ow+zR,xre=Rw+qR,Tre=Dw+fd;function hf(t){return t>>24&255}function VR(t){return t&16777215}let ov,vN,av,Bm;function Pre(){let t=$R(_re);ov=new Map(MR(t).flatMap((e,r)=>e.map(n=>[n,r+1<<24]))),vN=new Set(Fp(t)),av=new Map,Bm=new Map;for(let[e,r]of FR(t)){if(!vN.has(e)&&r.length==2){let[n,s]=r,i=Bm.get(n);i||(i=new Map,Bm.set(n,i)),i.set(s,e)}av.set(e,r.reverse())}}function WR(t){return t>=Hp&&t<Sre}function Ore(t,e){if(t>=Ow&&t<Nre&&e>=Rw&&e<xre)return Hp+(t-Ow)*kw+(e-Rw)*fd;if(WR(t)&&e>Dw&&e<Tre&&(t-Hp)%fd==0)return t+(e-Dw);{let r=Bm.get(t);return r&&(r=r.get(e),r)?r:-1}}function GR(t){ov||Pre();let e=[],r=[],n=!1;function s(i){let o=ov.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(WR(i)){let o=i-Hp,a=o/kw|0,c=o%kw/fd|0,l=o%fd;s(Ow+a),s(Rw+c),l>0&&s(Dw+l)}else{let o=av.get(i);o?r.push(...o):s(i)}if(!r.length)break;i=r.pop()}if(n&&e.length>1){let i=hf(e[0]);for(let o=1;o<e.length;o++){let a=hf(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=hf(e[--c]),i<=a))break}i=hf(e[o])}}return e}function Rre(t){let e=[],r=[],n=-1,s=0;for(let i of t){let o=hf(i),a=VR(i);if(n==-1)o==0?n=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(n,...r),r.length=0,n=a):r.push(a),s=o;else{let c=Ore(n,a);c>=0?n=c:s==0&&o==0?(e.push(n),n=a):(r.push(a),s=o)}}return n>=0&&e.push(n,...r),e}function KR(t){return GR(t).map(VR)}function Dre(t){return Rre(GR(t))}const AN=45,JR=".",YR=65039,QR=1,Uw=t=>Array.from(t);function zp(t,e){return t.P.has(e)||t.Q.has(e)}class kre extends Array{get is_emoji(){return!0}}let cv,ZR,Jc,lv,XR,nh,Eb,Du,Pc,CN,uv;function n1(){if(cv)return;let t=$R(dre);const e=()=>Fp(t),r=()=>new Set(e()),n=(u,h)=>h.forEach(d=>u.add(d));cv=new Map(FR(t)),ZR=r(),Jc=e(),lv=new Set(e().map(u=>Jc[u])),Jc=new Set(Jc),XR=r(),r();let s=MR(t),i=t();const o=()=>{let u=new Set;return e().forEach(h=>n(u,s[h])),n(u,e()),u};nh=jp(u=>{let h=jp(t).map(d=>d+96);if(h.length){let d=u>=i;h[0]-=32,h=dd(h),d&&(h=`Restricted[${h}]`);let f=o(),g=o(),p=!t();return{N:h,P:f,Q:g,M:p,R:d}}}),Eb=r(),Du=new Map;let a=e().concat(Uw(Eb)).sort((u,h)=>u-h);a.forEach((u,h)=>{let d=t(),f=a[h]=d?a[h-d]:{V:[],M:new Map};f.V.push(u),Eb.has(u)||Du.set(u,f)});for(let{V:u,M:h}of new Set(Du.values())){let d=[];for(let g of u){let p=nh.filter(w=>zp(w,g)),m=d.find(({G:w})=>p.some(E=>w.has(E)));m||(m={G:new Set,V:[]},d.push(m)),m.V.push(g),n(m.G,p)}let f=d.flatMap(g=>Uw(g.G));for(let{G:g,V:p}of d){let m=new Set(f.filter(w=>!g.has(w)));for(let w of p)h.set(w,m)}}Pc=new Set;let c=new Set;const l=u=>Pc.has(u)?c.add(u):Pc.add(u);for(let u of nh){for(let h of u.P)l(h);for(let h of u.Q)l(h)}for(let u of Pc)!Du.has(u)&&!c.has(u)&&Du.set(u,QR);n(Pc,KR(Pc)),CN=Ere(t).map(u=>kre.from(u)).sort(Cre),uv=new Map;for(let u of CN){let h=[uv];for(let d of u){let f=h.map(g=>{let p=g.get(d);return p||(p=new Map,g.set(d,p)),p});d===YR?h.push(...f):h=f}for(let d of h)d.V=u}}function s1(t){return(e3(t)?"":`${i1(By([t]))} `)+HR(t)}function i1(t){return`"${t}"‎`}function Ure(t){if(t.length>=4&&t[2]==AN&&t[3]==AN)throw new Error(`invalid label extension: "${dd(t.slice(0,4))}"`)}function Bre(t){for(let r=t.lastIndexOf(95);r>0;)if(t[--r]!==95)throw new Error("underscore allowed only at start")}function Lre(t){let e=t[0],r=bN.get(e);if(r)throw Mf(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let o=bN.get(e);if(o){if(s==i)throw Mf(`${r} + ${o}`);s=i+1,r=o}}if(s==n)throw Mf(`trailing ${r}`)}function By(t,e=1/0,r=HR){let n=[];$re(t[0])&&n.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];e3(a)&&(n.push(dd(t.slice(s,o))),n.push(r(a)),s=o+1)}return n.push(dd(t.slice(s,i))),n.join("")}function $re(t){return n1(),Jc.has(t)}function e3(t){return n1(),XR.has(t)}function Mre(t){return zre(Fre(t,Dre,Wre))}function Fre(t,e,r){if(!t)return[];n1();let n=0;return t.split(JR).map(s=>{let i=Are(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=Vre(i,e,r),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(Bre(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))Ure(u),l="ASCII";else{let d=a.flatMap(f=>f.is_emoji?[]:f);if(!d.length)l="Emoji";else{if(Jc.has(u[0]))throw Mf("leading combining mark");for(let p=1;p<c;p++){let m=a[p];if(!m.is_emoji&&Jc.has(m[0]))throw Mf(`emoji + combining mark: "${dd(a[p-1])} + ${By([m[0]])}"`)}Lre(u);let f=Uw(new Set(d)),[g]=Hre(f);qre(g,d),jre(g,f),l=g.N}}o.type=l}catch(a){o.error=a}return o})}function jre(t,e){let r,n=[];for(let s of e){let i=Du.get(s);if(i===QR)return;if(i){let o=i.M.get(s);if(r=r?r.filter(a=>o.has(a)):Uw(o),!r.length)return}else n.push(s)}if(r){for(let s of r)if(n.every(i=>zp(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function Hre(t){let e=nh;for(let r of t){let n=e.filter(s=>zp(s,r));if(!n.length)throw nh.some(s=>zp(s,r))?r3(e[0],r):t3(r);if(e=n,n.length==1)break}return e}function zre(t){return t.map(({input:e,error:r,output:n})=>{if(r){let s=r.message;throw new Error(t.length==1?s:`Invalid label ${i1(By(e,63))}: ${s}`)}return dd(n)}).join(JR)}function t3(t){return new Error(`disallowed character: ${s1(t)}`)}function r3(t,e){let r=s1(e),n=nh.find(s=>s.P.has(e));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function Mf(t){return new Error(`illegal placement: ${t}`)}function qre(t,e){for(let r of e)if(!zp(t,r))throw r3(t,r);if(t.M){let r=KR(e);for(let n=1,s=r.length;n<s;n++)if(lv.has(r[n])){let i=n+1;for(let o;i<s&&lv.has(o=r[i]);i++)for(let a=n;a<i;a++)if(r[a]==o)throw new Error(`duplicate non-spacing marks: ${s1(o)}`);if(i-n>EN)throw new Error(`excessive non-spacing marks: ${i1(By(r.slice(n-1,i)))} (${i-n}/${EN})`);n=i}}}function Vre(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=Gre(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let o=t.pop();if(Pc.has(o))s.push(o);else{let a=cv.get(o);if(a)s.push(...a);else if(!ZR.has(o))throw t3(o)}}}return s.length&&n.push(e(s)),n}function Wre(t){return t.filter(e=>e!=YR)}function Gre(t,e){let r=uv,n,s=t.length;for(;s&&(r=r.get(t[--s]),!!r);){let{V:i}=r;i&&(n=i,t.length=s)}return n}const n3=new Uint8Array(32);n3.fill(0);function _N(t){return M(t.length!==0,"invalid ENS name; empty component","comp",t),t}function s3(t){const e=Ji(Kre(t)),r=[];if(t.length===0)return r;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(r.push(_N(e.slice(n,s))),n=s+1);return M(n<e.length,"invalid ENS name; empty component","name",t),r.push(_N(e.slice(n))),r}function Kre(t){try{if(t.length===0)throw new Error("empty label");return Mre(t)}catch(e){M(!1,`invalid ENS name (${e.message})`,"name",t)}}function hv(t){M(typeof t=="string","invalid ENS name; not a string","name",t),M(t.length,"invalid ENS name (empty label)","name",t);let e=n3;const r=s3(t);for(;r.length;)e=cr(er([e,cr(r.pop())]));return me(e)}function Jre(t,e){const r=e;return M(r<=255,"DNS encoded label cannot exceed 255","length",r),me(er(s3(t).map(n=>{M(n.length<=r,`label ${JSON.stringify(t)} exceeds ${r} bytes`,"name",t);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}const i3=new Uint8Array(32);i3.fill(0);const Yre=BigInt(-1),o3=BigInt(0),a3=BigInt(1),Qre=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Zre(t){const e=et(t),r=e.length%32;return r?er([e,i3.slice(r)]):me(e)}const Xre=ic(a3,32),ene=ic(o3,32),IN={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},vb=["name","version","chainId","verifyingContract","salt"];function SN(t){return function(e){return M(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const tne={name:SN("name"),version:SN("version"),chainId:function(t){const e=Se(t,"domain.chainId");return M(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Gs(e)},verifyingContract:function(t){try{return xt(t).toLowerCase()}catch{}M(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=et(t,"domain.salt");return M(e.length===32,'invalid domain value "salt"',"domain.salt",t),me(e)}};function Ab(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const r=e[1]==="",n=parseInt(e[2]);M(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);const s=Gc(Qre,r?n-1:n),i=r?(s+a3)*Yre:o3;return function(o){const a=Se(o,"value");return M(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),ic(r?VO(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return M(r!==0&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(n){const s=et(n);return M(s.length===r,`invalid length for ${t}`,"value",n),Zre(n)}}}switch(t){case"address":return function(e){return Ko(xt(e),32)};case"bool":return function(e){return e?Xre:ene};case"bytes":return function(e){return cr(e)};case"string":return function(e){return Fl(e)}}return null}function NN(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}function mm(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Qp,Io,Ph,jw,c3;const gs=class gs{constructor(e){W(this,jw);H(this,"primaryType");W(this,Qp);W(this,Io);W(this,Ph);P(this,Io,new Map),P(this,Ph,new Map);const r=new Map,n=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:h,index:d}=mm(u);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:l,type:h+(d||"")}}),r.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),P(this,Qp,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){M(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const h=mm(u.type).base;M(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",e),!Ab(h)&&(M(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),n.get(h).push(c),r.get(c).add(h))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);M(o.length!==0,"missing primary type","types",e),M(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),$e(this,{primaryType:o[0]});function a(c,l){M(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of r.get(c))if(n.has(u)){a(u,l);for(const h of l)s.get(h).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),y(this,Io).set(c,NN(c,i[c])+u.map(h=>NN(h,i[h])).join(""))}}get types(){return JSON.parse(y(this,Qp))}getEncoder(e){let r=y(this,Ph).get(e);return r||(r=ne(this,jw,c3).call(this,e),y(this,Ph).set(e,r)),r}encodeType(e){const r=y(this,Io).get(e);return M(r,`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return cr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Ab(e))return n(e,r);const s=mm(e).array;if(s)return M(s.count===-1||s.count===r.length,`array length mismatch; expected length ${s.count}`,"value",r),r.map(o=>this._visit(s.prefix,o,n));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{});M(!1,`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new gs(e)}static getPrimaryType(e){return gs.from(e).primaryType}static hashStruct(e,r,n){return gs.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){if(e[n]==null)continue;const s=IN[n];M(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>vb.indexOf(n.name)-vb.indexOf(s.name)),gs.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return er(["0x1901",gs.hashDomain(e),gs.from(r).hash(n)])}static hash(e,r,n){return cr(gs.encode(e,r,n))}static async resolveNames(e,r,n,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Mt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=gs.from(r);o.visit(n,(a,c)=>(a==="address"&&!Mt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}}static getPayload(e,r,n){gs.hashDomain(e);const s={},i=[];vb.forEach(c=>{const l=e[c];l!=null&&(s[c]=tne[c](l),i.push({name:c,type:IN[c]}))});const o=gs.from(r);r=o.types;const a=Object.assign({},r);return M(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",r),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return me(et(l));if(c.match(/^u?int/))return Se(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return M(typeof l=="string","invalid string","value",l),l}M(!1,"unsupported type","type",c)})}}};Qp=new WeakMap,Io=new WeakMap,Ph=new WeakMap,jw=new WeakSet,c3=function(e){{const s=Ab(e);if(s)return s}const r=mm(e).array;if(r){const s=r.prefix,i=this.getEncoder(s);return o=>{M(r.count===-1||r.count===o.length,`array length mismatch; expected length ${r.count}`,"value",o);let a=o.map(i);return y(this,Io).has(s)&&(a=a.map(cr)),cr(er(a))}}const n=this.types[e];if(n){const s=Fl(y(this,Io).get(e));return i=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return y(this,Io).has(c)?cr(l):l});return o.unshift(s),er(o)}}M(!1,`unknown type: ${e}`,"type",e)};let Bw=gs;function gn(t){const e=new Set;return t.forEach(r=>e.add(r)),Object.freeze(e)}const rne="external public payable override",nne=gn(rne.split(" ")),l3="constant external internal payable private public pure view override",sne=gn(l3.split(" ")),u3="constructor error event fallback function receive struct",h3=gn(u3.split(" ")),d3="calldata memory storage payable indexed",ine=gn(d3.split(" ")),one="tuple returns",ane=[u3,d3,one,l3].join(" "),cne=gn(ane.split(" ")),lne={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},une=new RegExp("^(\\s*)"),hne=new RegExp("^([0-9]+)"),dne=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),f3=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),p3=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Or,qs,Zp,dv;const Hw=class Hw{constructor(e){W(this,Zp);W(this,Or);W(this,qs);P(this,Or,0),P(this,qs,e.slice())}get offset(){return y(this,Or)}get length(){return y(this,qs).length-y(this,Or)}clone(){return new Hw(y(this,qs))}reset(){P(this,Or,0)}popKeyword(e){const r=this.peek();if(r.type!=="KEYWORD"||!e.has(r.text))throw new Error(`expected keyword ${r.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const r=this.peek();throw new Error(`expected ${e}; got ${r.type} ${JSON.stringify(r.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=ne(this,Zp,dv).call(this,y(this,Or)+1,e.match+1);return P(this,Or,e.match+1),r}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=[];for(;y(this,Or)<e.match-1;){const n=this.peek().linkNext;r.push(ne(this,Zp,dv).call(this,y(this,Or)+1,n)),P(this,Or,n)}return P(this,Or,e.match+1),r}peek(){if(y(this,Or)>=y(this,qs).length)throw new Error("out-of-bounds");return y(this,qs)[y(this,Or)]}peekKeyword(e){const r=this.peekType("KEYWORD");return r!=null&&e.has(r)?r:null}peekType(e){if(this.length===0)return null;const r=this.peek();return r.type===e?r.text:null}pop(){const e=this.peek();return Pd(this,Or)._++,e}toString(){const e=[];for(let r=y(this,Or);r<y(this,qs).length;r++){const n=y(this,qs)[r];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};Or=new WeakMap,qs=new WeakMap,Zp=new WeakSet,dv=function(e=0,r=0){return new Hw(y(this,qs).slice(e,r).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let ii=Hw;function fc(t){const e=[],r=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(une);a&&(i+=a[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=lne[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")n.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;u=h+u,e[e.length-1].value=Je(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(dne),a){if(c.text=a[1],i+=c.text.length,cne.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(p3)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(hne),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ii(e.map(o=>Object.freeze(o)))}function xN(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function Ly(t,e){if(e.peekKeyword(h3)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function Yo(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function g3(t){let e=Yo(t,sne);return xN(e,gn("constant payable nonpayable".split(" "))),xN(e,gn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function jo(t,e){return t.popParams().map(r=>Ur.from(r,e))}function m3(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Se(t.pop().text);throw new Error("invalid gas")}return null}function jl(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const fne=new RegExp(/^(.*)\[([0-9]*)\]$/);function TN(t){const e=t.match(p3);if(M(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const r=parseInt(e[2]);M(r!==0&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);M(r!==0&&r<=256&&r%8===0,"invalid numeric width","type",t)}return t}const Qt={},jn=Symbol.for("_ethers_internal"),PN="_ParamTypeInternal",ON="_ErrorInternal",RN="_EventInternal",DN="_ConstructorInternal",kN="_FallbackInternal",UN="_FunctionInternal",BN="_StructInternal";var Oh,Lm;const ms=class ms{constructor(e,r,n,s,i,o,a,c){W(this,Oh);H(this,"name");H(this,"type");H(this,"baseType");H(this,"indexed");H(this,"components");H(this,"arrayLength");H(this,"arrayChildren");if(Ng(e,Qt,"ParamType"),Object.defineProperty(this,jn,{value:PN}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");$e(this,{name:r,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let r="";return this.isArray()?(r+=this.arrayChildren.format(e),r+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?r+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":r+=this.type,e!=="sighash"&&(this.indexed===!0&&(r+=" indexed"),e==="full"&&this.name&&(r+=" "+this.name)),r}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(s=>n.arrayChildren.walk(s,r))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((s,i)=>n.components[i].walk(s,r))}return r(this.type,e)}async walkAsync(e,r){const n=[],s=[e];return ne(this,Oh,Lm).call(this,n,e,r,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(e,r){if(ms.isParamType(e))return e;if(typeof e=="string")try{return ms.from(fc(e),r)}catch{M(!1,"invalid param type","obj",e)}else if(e instanceof ii){let a="",c="",l=null;Yo(e,gn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(p=>ms.from(p)),a=`tuple(${l.map(p=>p.format()).join(",")})`):(a=TN(e.popType("TYPE")),c=a);let u=null,h=null;for(;e.length&&e.peekType("BRACKET");){const p=e.pop();u=new ms(Qt,"",a,c,null,l,h,u),h=p.value,a+=p.text,c="array",l=null}let d=null;if(Yo(e,ine).has("indexed")){if(!r)throw new Error("");d=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ms(Qt,g,a,c,d,l,h,u)}const n=e.name;M(!n||typeof n=="string"&&n.match(f3),"invalid name","obj.name",n);let s=e.indexed;s!=null&&(M(r,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(fne);if(o){const a=parseInt(o[2]||"-1"),c=ms.from({type:o[1],components:e.components});return new ms(Qt,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>ms.from(l)):null;return new ms(Qt,n||"",i,"tuple",s,a,null,null)}return i=TN(e.type),new ms(Qt,n||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[jn]===PN}};Oh=new WeakSet,Lm=function(e,r,n,s){if(this.isArray()){if(!Array.isArray(r))throw new Error("invalid array value");if(this.arrayLength!==-1&&r.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=r.slice();a.forEach((c,l)=>{var u;ne(u=o,Oh,Lm).call(u,e,c,n,h=>{a[l]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(r))a=r.slice();else{if(r==null||typeof r!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in r))throw new Error(`missing value for component ${c.name}`);return r[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;ne(u=o[l],Oh,Lm).call(u,e,c,n,h=>{a[l]=h})}),s(a);return}const i=n(this.type,r);i.then?e.push((async function(){s(await i)})()):s(i)};let Ur=ms;class Hl{constructor(e,r,n){H(this,"type");H(this,"inputs");Ng(e,Qt,"Fragment"),n=Object.freeze(n.slice()),$e(this,{type:r,inputs:n})}static from(e){if(typeof e=="string"){try{Hl.from(JSON.parse(e))}catch{}return Hl.from(fc(e))}if(e instanceof ii)switch(e.peekKeyword(h3)){case"constructor":return Bo.from(e);case"error":return Bn.from(e);case"event":return Mi.from(e);case"fallback":case"receive":return Eo.from(e);case"function":return Fi.from(e);case"struct":return Cl.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Bo.from(e);case"error":return Bn.from(e);case"event":return Mi.from(e);case"fallback":case"receive":return Eo.from(e);case"function":return Fi.from(e);case"struct":return Cl.from(e)}Y(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}M(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Bo.isFragment(e)}static isError(e){return Bn.isFragment(e)}static isEvent(e){return Mi.isFragment(e)}static isFunction(e){return Fi.isFragment(e)}static isStruct(e){return Cl.isFragment(e)}}class $y extends Hl{constructor(r,n,s,i){super(r,n,i);H(this,"name");M(typeof s=="string"&&s.match(f3),"invalid identifier","name",s),i=Object.freeze(i.slice()),$e(this,{name:s})}}function qp(t,e){return"("+e.map(r=>r.format(t)).join(t==="full"?", ":",")+")"}class Bn extends $y{constructor(e,r,n){super(e,"error",r,n),Object.defineProperty(this,jn,{value:ON})}get selector(){return Fl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const r=[];return e!=="sighash"&&r.push("error"),r.push(this.name+qp(e,this.inputs)),r.join(" ")}static from(e){if(Bn.isFragment(e))return e;if(typeof e=="string")return Bn.from(fc(e));if(e instanceof ii){const r=Ly("error",e),n=jo(e);return jl(e),new Bn(Qt,r,n)}return new Bn(Qt,e.name,e.inputs?e.inputs.map(Ur.from):[])}static isFragment(e){return e&&e[jn]===ON}}class Mi extends $y{constructor(r,n,s,i){super(r,"event",n,s);H(this,"anonymous");Object.defineProperty(this,jn,{value:RN}),$e(this,{anonymous:i})}get topicHash(){return Fl(this.format("sighash"))}format(r){if(r==null&&(r="sighash"),r==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(r)))});const n=[];return r!=="sighash"&&n.push("event"),n.push(this.name+qp(r,this.inputs)),r!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(r,n){return n=(n||[]).map(i=>Ur.from(i)),new Mi(Qt,r,n,!1).topicHash}static from(r){if(Mi.isFragment(r))return r;if(typeof r=="string")try{return Mi.from(fc(r))}catch{M(!1,"invalid event fragment","obj",r)}else if(r instanceof ii){const n=Ly("event",r),s=jo(r,!0),i=!!Yo(r,gn(["anonymous"])).has("anonymous");return jl(r),new Mi(Qt,n,s,i)}return new Mi(Qt,r.name,r.inputs?r.inputs.map(n=>Ur.from(n,!0)):[],!!r.anonymous)}static isFragment(r){return r&&r[jn]===RN}}class Bo extends Hl{constructor(r,n,s,i,o){super(r,n,s);H(this,"payable");H(this,"gas");Object.defineProperty(this,jn,{value:DN}),$e(this,{payable:i,gas:o})}format(r){if(Y(r!=null&&r!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),r==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(r)))});const n=[`constructor${qp(r,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(r){if(Bo.isFragment(r))return r;if(typeof r=="string")try{return Bo.from(fc(r))}catch{M(!1,"invalid constuctor fragment","obj",r)}else if(r instanceof ii){Yo(r,gn(["constructor"]));const n=jo(r),s=!!Yo(r,nne).has("payable"),i=m3(r);return jl(r),new Bo(Qt,"constructor",n,s,i)}return new Bo(Qt,"constructor",r.inputs?r.inputs.map(Ur.from):[],!!r.payable,r.gas!=null?r.gas:null)}static isFragment(r){return r&&r[jn]===DN}}class Eo extends Hl{constructor(r,n,s){super(r,"fallback",n);H(this,"payable");Object.defineProperty(this,jn,{value:kN}),$e(this,{payable:s})}format(r){const n=this.inputs.length===0?"receive":"fallback";if(r==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(r){if(Eo.isFragment(r))return r;if(typeof r=="string")try{return Eo.from(fc(r))}catch{M(!1,"invalid fallback fragment","obj",r)}else if(r instanceof ii){const n=r.toString(),s=r.peekKeyword(gn(["fallback","receive"]));if(M(s,"type must be fallback or receive","obj",n),r.popKeyword(gn(["fallback","receive"]))==="receive"){const c=jo(r);return M(c.length===0,"receive cannot have arguments","obj.inputs",c),Yo(r,gn(["payable"])),jl(r),new Eo(Qt,[],!0)}let o=jo(r);o.length?M(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Ur.from("bytes")];const a=g3(r);if(M(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Yo(r,gn(["returns"])).has("returns")){const c=jo(r);M(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return jl(r),new Eo(Qt,o,a==="payable")}if(r.type==="receive")return new Eo(Qt,[],!0);if(r.type==="fallback"){const n=[Ur.from("bytes")],s=r.stateMutability==="payable";return new Eo(Qt,n,s)}M(!1,"invalid fallback description","obj",r)}static isFragment(r){return r&&r[jn]===kN}}class Fi extends $y{constructor(r,n,s,i,o,a){super(r,"function",n,i);H(this,"constant");H(this,"outputs");H(this,"stateMutability");H(this,"payable");H(this,"gas");Object.defineProperty(this,jn,{value:UN}),o=Object.freeze(o.slice()),$e(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Fl(this.format("sighash")).substring(0,10)}format(r){if(r==null&&(r="sighash"),r==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(r))),outputs:this.outputs.map(s=>JSON.parse(s.format(r)))});const n=[];return r!=="sighash"&&n.push("function"),n.push(this.name+qp(r,this.inputs)),r!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(qp(r,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(r,n){return n=(n||[]).map(i=>Ur.from(i)),new Fi(Qt,r,"view",n,[],null).selector}static from(r){if(Fi.isFragment(r))return r;if(typeof r=="string")try{return Fi.from(fc(r))}catch{M(!1,"invalid function fragment","obj",r)}else if(r instanceof ii){const s=Ly("function",r),i=jo(r),o=g3(r);let a=[];Yo(r,gn(["returns"])).has("returns")&&(a=jo(r));const c=m3(r);return jl(r),new Fi(Qt,s,o,i,a,c)}let n=r.stateMutability;return n==null&&(n="payable",typeof r.constant=="boolean"?(n="view",r.constant||(n="payable",typeof r.payable=="boolean"&&!r.payable&&(n="nonpayable"))):typeof r.payable=="boolean"&&!r.payable&&(n="nonpayable")),new Fi(Qt,r.name,n,r.inputs?r.inputs.map(Ur.from):[],r.outputs?r.outputs.map(Ur.from):[],r.gas!=null?r.gas:null)}static isFragment(r){return r&&r[jn]===UN}}class Cl extends $y{constructor(e,r,n){super(e,"struct",r,n),Object.defineProperty(this,jn,{value:BN})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Cl.from(fc(e))}catch{M(!1,"invalid struct fragment","obj",e)}else if(e instanceof ii){const r=Ly("struct",e),n=jo(e);return jl(e),new Cl(Qt,r,n)}return new Cl(Qt,e.name,e.inputs?e.inputs.map(Ur.from):[])}static isFragment(e){return e&&e[jn]===BN}}const ai=new Map;ai.set(0,"GENERIC_PANIC");ai.set(1,"ASSERT_FALSE");ai.set(17,"OVERFLOW");ai.set(18,"DIVIDE_BY_ZERO");ai.set(33,"ENUM_RANGE_ERROR");ai.set(34,"BAD_STORAGE_DATA");ai.set(49,"STACK_UNDERFLOW");ai.set(50,"ARRAY_RANGE_ERROR");ai.set(65,"OUT_OF_MEMORY");ai.set(81,"UNINITIALIZED_FUNCTION_CALL");const pne=new RegExp(/^bytes([0-9]*)$/),gne=new RegExp(/^(u?int)([0-9]*)$/);let Cb=null,LN=1024;function mne(t,e,r,n){let s="missing revert data",i=null;const o=null;let a=null;if(r){s="execution reverted";const l=et(r);if(r=me(r),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(me(l.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(me(l.slice(0,4))==="0x4e487b71")try{const u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${ai.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?xt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=xt(e.from)),Kt(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:c,invocation:o,revert:a})}var Ra,ku;const zw=class zw{constructor(){W(this,Ra)}getDefaultValue(e){const r=e.map(s=>ne(this,Ra,ku).call(this,Ur.from(s)));return new gm(r,"_").defaultValue()}encode(e,r){HO(r.length,e.length,"types/values length mismatch");const n=e.map(o=>ne(this,Ra,ku).call(this,Ur.from(o))),s=new gm(n,"_"),i=new ZE;return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(o=>ne(this,Ra,ku).call(this,Ur.from(o)));return new gm(s,"_").decode(new XE(r,n,LN))}static _setDefaultMaxInflation(e){M(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),LN=e}static defaultAbiCoder(){return Cb==null&&(Cb=new zw),Cb}static getBuiltinCallException(e,r,n){return mne(e,r,n,zw.defaultAbiCoder())}};Ra=new WeakSet,ku=function(e){if(e.isArray())return new kte(ne(this,Ra,ku).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new gm(e.components.map(n=>ne(this,Ra,ku).call(this,n)),e.name);switch(e.baseType){case"address":return new Rte(e.name);case"bool":return new Ute(e.name);case"string":return new qte(e.name);case"bytes":return new Bte(e.name);case"":return new Mte(e.name)}let r=e.type.match(gne);if(r){let n=parseInt(r[2]||"256");return M(n!==0&&n<=256&&n%8===0,"invalid "+r[1]+" bit length","param",e),new zte(n/8,r[1]==="int",e.name)}if(r=e.type.match(pne),r){let n=parseInt(r[1]);return M(n!==0&&n<=32,"invalid bytes length","param",e),new Lte(n,e.name)}M(!1,"invalid type","type",e.type)};let Vp=zw;class wne{constructor(e,r,n){H(this,"fragment");H(this,"name");H(this,"signature");H(this,"topic");H(this,"args");const s=e.name,i=e.format();$e(this,{fragment:e,name:s,signature:i,topic:r,args:n})}}class yne{constructor(e,r,n,s){H(this,"fragment");H(this,"name");H(this,"args");H(this,"signature");H(this,"selector");H(this,"value");const i=e.name,o=e.format();$e(this,{fragment:e,name:i,args:n,signature:o,selector:r,value:s})}}class bne{constructor(e,r,n){H(this,"fragment");H(this,"name");H(this,"args");H(this,"signature");H(this,"selector");const s=e.name,i=e.format();$e(this,{fragment:e,name:s,args:n,signature:i,selector:r})}}class $N{constructor(e){H(this,"hash");H(this,"_isIndexed");$e(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const MN={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},FN={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&MN[t.toString()]&&(e=MN[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Ni,xi,Ti,Wr,Yi,$m,Mm;const Lc=class Lc{constructor(e){W(this,Yi);H(this,"fragments");H(this,"deploy");H(this,"fallback");H(this,"receive");W(this,Ni);W(this,xi);W(this,Ti);W(this,Wr);let r=[];typeof e=="string"?r=JSON.parse(e):r=e,P(this,Ti,new Map),P(this,Ni,new Map),P(this,xi,new Map);const n=[];for(const o of r)try{n.push(Hl.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}$e(this,{fragments:Object.freeze(n)});let s=null,i=!1;P(this,Wr,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}$e(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(M(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=y(this,Ti);break;case"event":c=y(this,xi);break;case"error":c=y(this,Ni);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||$e(this,{deploy:Bo.from("constructor()")}),$e(this,{fallback:s,receive:i})}format(e){const r=e?"minimal":"full";return this.fragments.map(s=>s.format(r))}formatJson(){const e=this.fragments.map(r=>r.format("json"));return JSON.stringify(e.map(r=>JSON.parse(r)))}getAbiCoder(){return Vp.defaultAbiCoder()}getFunctionName(e){const r=ne(this,Yi,$m).call(this,e,null,!1);return M(r,"no matching function","key",e),r.name}hasFunction(e){return!!ne(this,Yi,$m).call(this,e,null,!1)}getFunction(e,r){return ne(this,Yi,$m).call(this,e,r||null,!0)}forEachFunction(e){const r=Array.from(y(this,Ti).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(y(this,Ti).get(s),n)}}getEventName(e){const r=ne(this,Yi,Mm).call(this,e,null,!1);return M(r,"no matching event","key",e),r.name}hasEvent(e){return!!ne(this,Yi,Mm).call(this,e,null,!1)}getEvent(e,r){return ne(this,Yi,Mm).call(this,e,r||null,!0)}forEachEvent(e){const r=Array.from(y(this,xi).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(y(this,xi).get(s),n)}}getError(e,r){if(Mt(e)){const s=e.toLowerCase();if(FN[s])return Bn.from(FN[s].signature);for(const i of y(this,Ni).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of y(this,Ni))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Bn.from("error Error(string)"):e==="Panic"?Bn.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");M(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Bn.from(e).format(),e==="Error(string)")return Bn.from("error Error(string)");if(e==="Panic(uint256)")return Bn.from("error Panic(uint256)");const n=y(this,Ni).get(e);return n||null}forEachError(e){const r=Array.from(y(this,Ni).keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(y(this,Ni).get(s),n)}}_decodeParams(e,r){return y(this,Wr).decode(e,r)}_encodeParams(e,r){return y(this,Wr).encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);M(n,"unknown error","fragment",e),e=n}return M(Xt(r,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",r),this._decodeParams(e.inputs,Xt(r,4))}encodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);M(n,"unknown error","fragment",e),e=n}return er([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);M(n,"unknown function","fragment",e),e=n}return M(Xt(r,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",r),this._decodeParams(e.inputs,Xt(r,4))}encodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);M(n,"unknown function","fragment",e),e=n}return er([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionResult(e,r){if(typeof e=="string"){const i=this.getFunction(e);M(i,"unknown function","fragment",e),e=i}let n="invalid length for result data";const s=dn(r);if(s.length%32===0)try{return y(this,Wr).decode(e.outputs,s)}catch{n="could not decode result data"}Y(!1,n,"BAD_DATA",{value:me(s),info:{method:e.name,signature:e.format()}})}makeError(e,r){const n=et(e,"data"),s=Vp.getBuiltinCallException("call",r,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=me(n.slice(0,4)),c=this.getError(a);if(c)try{const l=y(this,Wr).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(r);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,r){if(typeof e=="string"){const n=this.getFunction(e);M(n,"unknown function","fragment",e),e=n}return me(y(this,Wr).encode(e.outputs,r||[]))}encodeFilterTopics(e,r){if(typeof e=="string"){const i=this.getEvent(e);M(i,"unknown event","eventFragment",e),e=i}Y(r.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:r.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(i,o)=>i.type==="string"?Fl(o):i.type==="bytes"?cr(me(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=ic(o):i.type.match(/^bytes/)?o=UX(o,32):i.type==="address"&&y(this,Wr).encode(["address"],[o]),Ko(me(o),32));for(r.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){M(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?M(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){if(typeof e=="string"){const o=this.getEvent(e);M(o,"unknown event","eventFragment",e),e=o}const n=[],s=[],i=[];return e.anonymous||n.push(e.topicHash),M(r.length===e.inputs.length,"event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(Fl(c));else if(o.type==="bytes")n.push(cr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(y(this,Wr).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:y(this,Wr).encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"){const f=this.getEvent(e);M(f,"unknown event","eventFragment",e),e=f}if(n!=null&&!e.anonymous){const f=e.topicHash;M(Mt(n[0],32)&&n[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,g)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Ur.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=n!=null?y(this,Wr).decode(s,er(n)):null,c=y(this,Wr).decode(i,r,!0),l=[],u=[];let h=0,d=0;return e.inputs.forEach((f,g)=>{let p=null;if(f.indexed)if(a==null)p=new $N(null);else if(o[g])p=new $N(a[d++]);else try{p=a[d++]}catch(m){p=m}else try{p=c[h++]}catch(m){p=m}l.push(p),u.push(f.name||null)}),ad.fromItems(l,u)}parseTransaction(e){const r=et(e.data,"tx.data"),n=Se(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(me(r.slice(0,4)));if(!s)return null;const i=y(this,Wr).decode(s.inputs,r.slice(4));return new yne(s,s.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new wne(r,r.topicHash,this.decodeEventLog(r,e.data,e.topics))}parseError(e){const r=me(e),n=this.getError(Xt(r,0,4));if(!n)return null;const s=y(this,Wr).decode(n.inputs,Xt(r,4));return new bne(n,n.selector,s)}static from(e){return e instanceof Lc?e:typeof e=="string"?new Lc(JSON.parse(e)):typeof e.formatJson=="function"?new Lc(e.formatJson()):typeof e.format=="function"?new Lc(e.format("json")):new Lc(e)}};Ni=new WeakMap,xi=new WeakMap,Ti=new WeakMap,Wr=new WeakMap,Yi=new WeakSet,$m=function(e,r,n){if(Mt(e)){const i=e.toLowerCase();for(const o of y(this,Ti).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of y(this,Ti))o.split("(")[0]===e&&i.push(a);if(r){const o=r.length>0?r[r.length-1]:null;let a=r.length,c=!0;en.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let h=0;h<r.length;h++)if(en.isTyped(r[h])){if(h>=u.length){if(r[h].type==="overrides")continue;i.splice(l,1);break}if(r[h].type!==u[h].baseType){i.splice(l,1);break}}}}if(i.length===1&&r&&r.length!==i[0].inputs.length){const o=r[r.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");M(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=y(this,Ti).get(Fi.from(e).format());return s||null},Mm=function(e,r,n){if(Mt(e)){const i=e.toLowerCase();for(const o of y(this,xi).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of y(this,xi))o.split("(")[0]===e&&i.push(a);if(r){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<r.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<r.length;c++)if(en.isTyped(r[c])&&r[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");M(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=y(this,xi).get(Mi.from(e).format());return s||null};let fv=Lc;const w3=BigInt(0);function sh(t){return t??null}function nr(t){return t==null?null:t.toString()}class jN{constructor(e,r,n){H(this,"gasPrice");H(this,"maxFeePerGas");H(this,"maxPriorityFeePerGas");$e(this,{gasPrice:sh(e),maxFeePerGas:sh(r),maxPriorityFeePerGas:sh(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:r,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:nr(e),maxFeePerGas:nr(r),maxPriorityFeePerGas:nr(n)}}}function Lw(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=me(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Se(t[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Je(t[s],`request.${s}`));return t.accessList&&(e.accessList=eu(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>GA(s)?me(s):Object.assign({},s))),e}var So;class Ene{constructor(e,r){H(this,"provider");H(this,"number");H(this,"hash");H(this,"timestamp");H(this,"parentHash");H(this,"parentBeaconBlockRoot");H(this,"nonce");H(this,"difficulty");H(this,"gasLimit");H(this,"gasUsed");H(this,"stateRoot");H(this,"receiptsRoot");H(this,"blobGasUsed");H(this,"excessBlobGas");H(this,"miner");H(this,"prevRandao");H(this,"extraData");H(this,"baseFeePerGas");W(this,So);P(this,So,e.transactions.map(n=>typeof n!="string"?new Wp(n,r):n)),$e(this,{provider:r,hash:sh(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:sh(e.prevRandao),extraData:e.extraData,baseFeePerGas:sh(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return y(this,So).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=y(this,So).slice();return e.length===0?[]:(Y(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:r,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:h,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:g,timestamp:p,transactions:m}=this;return{_type:"Block",baseFeePerGas:nr(e),difficulty:nr(r),extraData:n,gasLimit:nr(s),gasUsed:nr(i),blobGasUsed:nr(this.blobGasUsed),excessBlobGas:nr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:h,timestamp:p,parentBeaconBlockRoot:d,stateRoot:f,receiptsRoot:g,transactions:m}}[Symbol.iterator](){let e=0;const r=this.transactions;return{next:()=>e<this.length?{value:r[e++],done:!1}:{value:void 0,done:!0}}}get length(){return y(this,So).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let r;if(typeof e=="number")r=y(this,So)[e];else{const n=e.toLowerCase();for(const s of y(this,So))if(typeof s=="string"){if(s!==n)continue;r=s;break}else{if(s.hash!==n)continue;r=s;break}}if(r==null)throw new Error("no such tx");return typeof r=="string"?await this.provider.getTransaction(r):r}getPrefetchedTransaction(e){const r=this.prefetchedTransactions;if(typeof e=="number")return r[e];e=e.toLowerCase();for(const n of r)if(n.hash===e)return n;M(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return vne(this)}}So=new WeakMap;class Pg{constructor(e,r){H(this,"provider");H(this,"transactionHash");H(this,"blockHash");H(this,"blockNumber");H(this,"removed");H(this,"address");H(this,"data");H(this,"topics");H(this,"index");H(this,"transactionIndex");this.provider=r;const n=Object.freeze(e.topics.slice());$e(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Y(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Y(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Y(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Ane(this)}}var Xp;class y3{constructor(e,r){H(this,"provider");H(this,"to");H(this,"from");H(this,"contractAddress");H(this,"hash");H(this,"index");H(this,"blockHash");H(this,"blockNumber");H(this,"logsBloom");H(this,"gasUsed");H(this,"blobGasUsed");H(this,"cumulativeGasUsed");H(this,"gasPrice");H(this,"blobGasPrice");H(this,"type");H(this,"status");H(this,"root");W(this,Xp);P(this,Xp,Object.freeze(e.logs.map(s=>new Pg(s,r))));let n=w3;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),$e(this,{provider:r,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return y(this,Xp)}toJSON(){const{to:e,from:r,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:nr(this.cumulativeGasUsed),from:r,gasPrice:nr(this.gasPrice),blobGasUsed:nr(this.blobGasUsed),blobGasPrice:nr(this.blobGasPrice),gasUsed:nr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:h,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return E3(this)}reorderedEvent(e){return Y(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),b3(this,e)}}Xp=new WeakMap;var Da;const p1=class p1{constructor(e,r){H(this,"provider");H(this,"blockNumber");H(this,"blockHash");H(this,"index");H(this,"hash");H(this,"type");H(this,"to");H(this,"from");H(this,"nonce");H(this,"gasLimit");H(this,"gasPrice");H(this,"maxPriorityFeePerGas");H(this,"maxFeePerGas");H(this,"maxFeePerBlobGas");H(this,"data");H(this,"value");H(this,"chainId");H(this,"signature");H(this,"accessList");H(this,"blobVersionedHashes");H(this,"authorizationList");W(this,Da);this.provider=r,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,P(this,Da,-1)}toJSON(){const{blockNumber:e,blockHash:r,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:h,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:r,blobVersionedHashes:d,chainId:nr(this.chainId),data:l,from:a,gasLimit:nr(this.gasLimit),gasPrice:nr(this.gasPrice),hash:s,maxFeePerGas:nr(this.maxFeePerGas),maxPriorityFeePerGas:nr(this.maxPriorityFeePerGas),maxFeePerBlobGas:nr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:n,type:i,value:nr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const r=this.provider.getBlock(e);if(r==null)throw new Error("TODO");return r}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:r,blockNumber:n}=await cn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return r==null||r.blockNumber==null?0:n-r.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,r){const n=e??1,s=r??0;let i=y(this,Da),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:f}=await cn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=d;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=i-3,o<y(this,Da)&&(o=y(this,Da)));o<=d;){if(a)return null;const p=await this.provider.getBlock(o,!0);if(p==null)return;for(const m of p)if(m===this.hash)return;for(let m=0;m<p.length;m++){const w=await p.getTransaction(m);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const E=await this.provider.getTransactionReceipt(w.hash);if(E==null||d-E.blockNumber+1<n)return;let b="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?b="repriced":w.data==="0x"&&w.from===w.to&&w.value===w3&&(b="cancelled"),Y(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:b==="replaced"||b==="cancelled",reason:b,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:E})}}o++}},l=d=>{if(d==null||d.status!==0)return d;Y(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(n===0)return l(u);if(u){if(n===1||await u.confirmations()>=n)return l(u)}else if(await c(),n===0)return null;return await new Promise((d,f)=>{const g=[],p=()=>{g.forEach(w=>w())};if(g.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{p(),f(Kt("wait for transaction timeout","TIMEOUT"))},s);g.push(()=>{clearTimeout(w)})}const m=async w=>{if(await w.confirmations()>=n){p();try{d(l(w))}catch(E){f(E)}}};if(g.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),i>=0){const w=async()=>{try{await c()}catch(E){if(kr(E,"TRANSACTION_REPLACED")){p(),f(E);return}}a||this.provider.once("block",w)};g.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Y(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),E3(this)}reorderedEvent(e){return Y(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Y(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),b3(this,e)}replaceableTransaction(e){M(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const r=new p1(this,this.provider);return P(r,Da,e),r}};Da=new WeakMap;let Wp=p1;function vne(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function b3(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function E3(t){return{orphan:"drop-transaction",tx:t}}function Ane(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class o1 extends Pg{constructor(r,n,s){super(r,r.provider);H(this,"interface");H(this,"fragment");H(this,"args");const i=n.decodeEventLog(s,r.data,r.topics);$e(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class v3 extends Pg{constructor(r,n){super(r,r.provider);H(this,"error");$e(this,{error:n})}}var Rh;class Cne extends y3{constructor(r,n,s){super(s,n);W(this,Rh);P(this,Rh,r)}get logs(){return super.logs.map(r=>{const n=r.topics.length?y(this,Rh).getEvent(r.topics[0]):null;if(n)try{return new o1(r,y(this,Rh),n)}catch(s){return new v3(r,s)}return r})}}Rh=new WeakMap;var eg;class a1 extends Wp{constructor(r,n,s){super(s,n);W(this,eg);P(this,eg,r)}async wait(r,n){const s=await super.wait(r,n);return s==null?null:new Cne(y(this,eg),this.provider,s)}}eg=new WeakMap;class A3 extends WO{constructor(r,n,s,i){super(r,n,s);H(this,"log");$e(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class _ne extends A3{constructor(e,r,n,s,i){super(e,r,n,new o1(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);$e(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const HN=BigInt(0);function C3(t){return t&&typeof t.call=="function"}function _3(t){return t&&typeof t.estimateGas=="function"}function My(t){return t&&typeof t.resolveName=="function"}function I3(t){return t&&typeof t.sendTransaction=="function"}function S3(t){if(t!=null){if(My(t))return t;if(t.provider)return t.provider}}var tg;class Ine{constructor(e,r,n){W(this,tg);H(this,"fragment");if($e(this,{fragment:r}),r.inputs.length<n.length)throw new Error("too many arguments");const s=zl(e.runner,"resolveName"),i=My(s)?s:null;P(this,tg,(async function(){const o=await Promise.all(r.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(u,h)=>u==="address"?Array.isArray(h)?Promise.all(h.map(d=>pn(d,i))):pn(h,i):h)));return e.interface.encodeFilterTopics(r,o)})())}getTopicFilter(){return y(this,tg)}}tg=new WeakMap;function zl(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Yc(t){return t==null?null:t.provider||null}async function N3(t,e){const r=en.dereference(t,"overrides");M(typeof r=="object","invalid overrides parameter","overrides",t);const n=Lw(r);return M(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),M(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Sne(t,e,r){const n=zl(t,"resolveName"),s=My(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(r[o],(a,c)=>(c=en.dereference(c,a),a==="address"?pn(c,s):c))))}function Nne(t){const e=async function(o){const a=await N3(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await pn(a.from,S3(t.runner)));const c=t.interface,l=Se(a.value||HN,"overrides.value")===HN,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&M(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),M(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return M(h||l,"cannot send value to non-payable fallback","overrides.value",a.value),M(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},r=async function(o){const a=zl(t.runner,"call");Y(C3(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw WA(l)&&l.data?t.interface.makeError(l.data,c):l}},n=async function(o){const a=t.runner;Y(I3(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Yc(t.runner);return new a1(t.interface,l,c)},s=async function(o){const a=zl(t.runner,"estimateGas");return Y(_3(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await n(o);return $e(i,{_contract:t,estimateGas:s,populateTransaction:e,send:n,staticCall:r}),i}function xne(t,e){const r=function(...l){const u=t.interface.getFunction(e,l);return Y(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},n=async function(...l){const u=r(...l);let h={};if(u.inputs.length+1===l.length&&(h=await N3(l.pop()),h.from&&(h.from=await pn(h.from,S3(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await Sne(t.runner,u.inputs,l);return Object.assign({},h,await cn({to:t.getAddress(),data:t.interface.encodeFunctionData(u,d)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;Y(I3(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await u.sendTransaction(await n(...l)),d=Yc(t.runner);return new a1(t.interface,d,h)},o=async function(...l){const u=zl(t.runner,"estimateGas");return Y(_3(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await n(...l))},a=async function(...l){const u=zl(t.runner,"call");Y(C3(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await n(...l);let d="0x";try{d=await u.call(h)}catch(g){throw WA(g)&&g.data?t.interface.makeError(g.data,h):g}const f=r(...l);return t.interface.decodeFunctionResult(f,d)},c=async(...l)=>r(...l).constant?await s(...l):await i(...l);return $e(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return Y(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function Tne(t,e){const r=function(...s){const i=t.interface.getEvent(e,s);return Y(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},n=function(...s){return new Ine(t,r(...s),s)};return $e(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return Y(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),n}const $w=Symbol.for("_ethersInternal_contract"),x3=new WeakMap;function Pne(t,e){x3.set(t[$w],e)}function Yn(t){return x3.get(t[$w])}function One(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function c1(t,e){let r,n=null;if(Array.isArray(e)){const i=function(o){if(Mt(o,32))return o;const a=t.interface.getEvent(o);return M(a,"unknown fragment","name",o),a.topicHash};r=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?r=[null]:typeof e=="string"?Mt(e,32)?r=[e]:(n=t.interface.getEvent(e),M(n,"unknown fragment","event",e),r=[n.topicHash]):One(e)?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):M(!1,"unknown event name","event",e);r=r.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=r.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:r}}async function df(t,e){const{subs:r}=Yn(t);return r.get((await c1(t,e)).tag)||null}async function zN(t,e,r){const n=Yc(t.runner);Y(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await c1(t,r),{addr:a,subs:c}=Yn(t);let l=c.get(i);if(!l){const h={address:a||t,topics:o},d=m=>{let w=s;if(w==null)try{w=t.interface.getEvent(m.topics[0])}catch{}if(w){const E=w,b=s?t.interface.decodeEventLog(s,m.data,m.topics):[];gv(t,r,b,C=>new _ne(t,C,r,E,m))}else gv(t,r,[],E=>new A3(t,E,r,m))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(n.on(h,d))},stop:async()=>{if(f.length==0)return;let m=f;f=[],await Promise.all(m),n.off(h,d)}},c.set(i,l)}return l}let pv=Promise.resolve();async function Rne(t,e,r,n){await pv;const s=await df(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(r);n&&c.push(n(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Yn(t).subs.delete(s.tag)),i>0}async function gv(t,e,r,n){try{await pv}catch{}const s=Rne(t,e,r,n);return pv=s,await s}const wm=["then"];var ex;ex=$w;const jf=class jf{constructor(e,r,n,s){H(this,"target");H(this,"interface");H(this,"runner");H(this,"filters");H(this,ex);H(this,"fallback");M(typeof e=="string"||DR(e),"invalid value for Contract target","target",e),n==null&&(n=null);const i=fv.from(r);$e(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,$w,{value:{}});let o,a=null,c=null;if(s){const h=Yc(n);c=new a1(this.interface,h,s)}let l=new Map;if(typeof e=="string")if(Mt(e))a=e,o=Promise.resolve(e);else{const h=zl(n,"resolveName");if(!My(h))throw Kt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(d=>{if(d==null)throw Kt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Yn(this).addr=d,d})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Yn(this).addr=h,h});Pne(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(h,d,f)=>{if(typeof d=="symbol"||wm.indexOf(d)>=0)return Reflect.get(h,d,f);try{return this.getEvent(d)}catch(g){if(!kr(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(h,d)=>wm.indexOf(d)>=0?Reflect.has(h,d):Reflect.has(h,d)||this.interface.hasEvent(String(d))});return $e(this,{filters:u}),$e(this,{fallback:i.receive||i.fallback?Nne(this):null}),new Proxy(this,{get:(h,d,f)=>{if(typeof d=="symbol"||d in h||wm.indexOf(d)>=0)return Reflect.get(h,d,f);try{return h.getFunction(d)}catch(g){if(!kr(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(h,d)=>typeof d=="symbol"||d in h||wm.indexOf(d)>=0?Reflect.has(h,d):h.interface.hasFunction(d)})}connect(e){return new jf(this.target,this.interface,e)}attach(e){return new jf(e,this.interface,this.runner)}async getAddress(){return await Yn(this).addrPromise}async getDeployedCode(){const e=Yc(this.runner);Y(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const r=await e.getCode(await this.getAddress());return r==="0x"?null:r}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Yc(this.runner);return Y(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Yn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),xne(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Tne(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,r,n){r==null&&(r=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=Yn(this),o=s||await i,{fragment:a,topics:c}=await c1(this,e),l={address:o,topics:c,fromBlock:r,toBlock:n},u=Yc(this.runner);return Y(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(h=>{let d=a;if(d==null)try{d=this.interface.getEvent(h.topics[0])}catch{}if(d)try{return new o1(h,this.interface,d)}catch(f){return new v3(h,f)}return new Pg(h,u)})}async on(e,r){const n=await zN(this,"on",e);return n.listeners.push({listener:r,once:!1}),n.start(),this}async once(e,r){const n=await zN(this,"once",e);return n.listeners.push({listener:r,once:!0}),n.start(),this}async emit(e,...r){return await gv(this,e,r,null)}async listenerCount(e){if(e){const s=await df(this,e);return s?s.listeners.length:0}const{subs:r}=Yn(this);let n=0;for(const{listeners:s}of r.values())n+=s.length;return n}async listeners(e){if(e){const s=await df(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:r}=Yn(this);let n=[];for(const{listeners:s}of r.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(e,r){const n=await df(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(r==null||n.listeners.length===0)&&(n.stop(),Yn(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const r=await df(this,e);if(!r)return this;r.stop(),Yn(this).subs.delete(r.tag)}else{const{subs:r}=Yn(this);for(const{tag:n,stop:s}of r.values())s(),r.delete(n)}return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return await this.off(e,r)}static buildClass(e){class r extends jf{constructor(s,i=null){super(s,e,i)}}return r}static from(e,r,n){return n==null&&(n=null),new this(e,r,n)}};let mv=jf;function Dne(){return mv}class ih extends Dne(){}function _b(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):M(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class kne{constructor(e){H(this,"name");$e(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,r){throw new Error("unsupported coin")}async decodeAddress(e,r){throw new Error("unsupported coin")}}const T3=new RegExp("^(ipfs)://(.*)$","i"),qN=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),T3,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ka,ll,Ua,Uu,qw,P3;const zu=class zu{constructor(e,r,n){W(this,Ua);H(this,"provider");H(this,"address");H(this,"name");W(this,ka);W(this,ll);$e(this,{provider:e,address:r,name:n}),P(this,ka,null),P(this,ll,new ih(r,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return y(this,ka)==null&&P(this,ka,(async()=>{try{return await y(this,ll).supportsInterface("0x9061b923")}catch(e){if(kr(e,"CALL_EXCEPTION"))return!1;throw P(this,ka,null),e}})()),await y(this,ka)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await ne(this,Ua,Uu).call(this,"addr(bytes32)");return i==null||i===$p?null:i}catch(i){if(kr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await ne(this,Ua,Uu).call(this,"addr(bytes32,uint)",[i]);if(Mt(o,20))return xt(o)}let r=null;for(const i of this.provider.plugins)if(i instanceof kne&&i.supportsCoinType(e)){r=i;break}if(r==null)return null;const n=await ne(this,Ua,Uu).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const s=await r.decodeAddress(e,n);if(s!=null)return s;Y(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const r=await ne(this,Ua,Uu).call(this,"text(bytes32,string)",[e]);return r==null||r==="0x"?null:r}async getContentHash(){const e=await ne(this,Ua,Uu).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const r=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const s=r[1]==="e3010170"?"ipfs":"ipns",i=parseInt(r[4],16);if(r[5].length===i*2)return`${s}://${LX("0x"+r[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;Y(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const r=await this.getText("avatar");if(r==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:r});for(let n=0;n<qN.length;n++){const s=r.match(qN[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:r}),{linkage:e,url:r};case"ipfs":{const o=_b(r);return e.push({type:"ipfs",value:r}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:r});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new ih(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const p=await u.ownerOf(l);if(a!==p)return e.push({type:"!owner",value:p}),{url:null,linkage:e};e.push({type:"owner",value:p})}else if(i==="erc1155"){const p=await u.balanceOf(a,l);if(!p)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:p.toString()})}let h=await u[o](l);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",ic(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=_b(h)),e.push({type:"metadata-url",value:h});let d={};const f=await new Jo(h).send();f.assertOk();try{d=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const w=f.body;return w&&e.push({type:"!metadata",value:me(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let g=d.image;if(typeof g!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(T3)==null)return e.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:g}),g=_b(g)}return e.push({type:"url",value:g}),{linkage:e,url:g}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const r=await e.getNetwork(),n=r.getPlugin("org.ethers.plugins.network.Ens");return Y(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:r}}),n.address}static async fromName(e,r){var s;let n=r;for(;;){if(n===""||n==="."||r!=="eth"&&n==="eth")return null;const i=await ne(s=zu,qw,P3).call(s,e,n);if(i!=null){const o=new zu(e,i,r);return n!==r&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};ka=new WeakMap,ll=new WeakMap,Ua=new WeakSet,Uu=async function(e,r){r=(r||[]).slice();const n=y(this,ll).interface;r.unshift(hv(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),Y(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),r=[Jre(this.name,255),n.encodeFunctionData(s,r)],e="resolve(bytes,bytes)"),r.push({enableCcipRead:!0});try{const i=await y(this,ll)[e](...r);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!kr(i,"CALL_EXCEPTION"))throw i}return null},qw=new WeakSet,P3=async function(e,r){const n=await zu.getEnsAddress(e);try{const i=await new ih(n,["function resolver(bytes32) view returns (address)"],e).resolver(hv(r),{enableCcipRead:!0});return i===$p?null:i}catch(s){throw s}return null},W(zu,qw);let Mw=zu;const VN=BigInt(0);function it(t,e){return(function(r){return r==null?e:t(r)})}function Gp(t,e){return(r=>{if(e&&r==null)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map(n=>t(n))})}function Og(t,e){return(r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r)){for(const o of e[s])if(o in r){i=o;break}}try{const o=t[s](r[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Y(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:r})}}return n})}function Une(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}M(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function pd(t){return M(Mt(t,!0),"invalid data","value",t),t}function Dr(t){return M(Mt(t,32),"invalid hash","value",t),t}const Bne=Og({address:xt,blockHash:Dr,blockNumber:Je,data:pd,index:Je,removed:it(Une,!1),topics:Gp(Dr),transactionHash:Dr,transactionIndex:Je},{index:["logIndex"]});function Lne(t){return Bne(t)}const $ne=Og({hash:it(Dr),parentHash:Dr,parentBeaconBlockRoot:it(Dr,null),number:Je,timestamp:Je,nonce:it(pd),difficulty:Se,gasLimit:Se,gasUsed:Se,stateRoot:it(Dr,null),receiptsRoot:it(Dr,null),blobGasUsed:it(Se,null),excessBlobGas:it(Se,null),miner:it(xt),prevRandao:it(Dr,null),extraData:pd,baseFeePerGas:it(Se)},{prevRandao:["mixHash"]});function Mne(t){const e=$ne(t);return e.transactions=t.transactions.map(r=>typeof r=="string"?r:O3(r)),e}const Fne=Og({transactionIndex:Je,blockNumber:Je,transactionHash:Dr,address:xt,topics:Gp(Dr),data:pd,index:Je,blockHash:Dr},{index:["logIndex"]});function jne(t){return Fne(t)}const Hne=Og({to:it(xt,null),from:it(xt,null),contractAddress:it(xt,null),index:Je,root:it(me),gasUsed:Se,blobGasUsed:it(Se,null),logsBloom:it(pd),blockHash:Dr,hash:Dr,logs:Gp(jne),blockNumber:Je,cumulativeGasUsed:Se,effectiveGasPrice:it(Se),blobGasPrice:it(Se,null),status:it(Je),type:it(Je,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function zne(t){return Hne(t)}function O3(t){t.to&&Se(t.to)===VN&&(t.to="0x0000000000000000000000000000000000000000");const e=Og({hash:Dr,index:it(Je,void 0),type:r=>r==="0x"||r==null?0:Je(r),accessList:it(eu,null),blobVersionedHashes:it(Gp(Dr,!0),null),authorizationList:it(Gp(r=>{let n;if(r.signature)n=r.signature;else{let s=r.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),n=Object.assign({},r,{yParity:s})}return{address:xt(r.address),chainId:Se(r.chainId),nonce:Se(r.nonce),signature:Mn.from(n)}},!1),null),blockHash:it(Dr,null),blockNumber:it(Je,null),transactionIndex:it(Je,null),from:xt,gasPrice:it(Se),maxPriorityFeePerGas:it(Se),maxFeePerGas:it(Se),maxFeePerBlobGas:it(Se,null),gasLimit:Se,to:it(xt,null),value:Se,nonce:Je,data:pd,creates:it(xt,null),chainId:it(Se,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Ote(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Mn.from(t.signature):e.signature=Mn.from(t),e.chainId==null){const r=e.signature.legacyChainId;r!=null&&(e.chainId=r)}return e.blockHash&&Se(e.blockHash)===VN&&(e.blockHash=null),e}const qne="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Rg{constructor(e){H(this,"name");$e(this,{name:e})}clone(){return new Rg(this.name)}}class Fy extends Rg{constructor(r,n){r==null&&(r=0);super(`org.ethers.network.plugins.GasCost#${r||0}`);H(this,"effectiveBlock");H(this,"txBase");H(this,"txCreate");H(this,"txDataZero");H(this,"txDataNonzero");H(this,"txAccessListStorageKey");H(this,"txAccessListAddress");const s={effectiveBlock:r};function i(o,a){let c=(n||{})[o];c==null&&(c=a),M(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),$e(this,s)}clone(){return new Fy(this.effectiveBlock,this)}}class jy extends Rg{constructor(r,n){super("org.ethers.plugins.network.Ens");H(this,"address");H(this,"targetNetwork");$e(this,{address:r||qne,targetNetwork:n??1})}clone(){return new jy(this.address,this.targetNetwork)}}var rg,ng;class Vne extends Rg{constructor(r,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");W(this,rg);W(this,ng);P(this,rg,r),P(this,ng,n)}get url(){return y(this,rg)}get processFunc(){return y(this,ng)}clone(){return this}}rg=new WeakMap,ng=new WeakMap;const Ib=new Map;var Dh,kh,Ba;const qu=class qu{constructor(e,r){W(this,Dh);W(this,kh);W(this,Ba);P(this,Dh,e),P(this,kh,Se(r)),P(this,Ba,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return y(this,Dh)}set name(e){P(this,Dh,e)}get chainId(){return y(this,kh)}set chainId(e){P(this,kh,Se(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Se(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Se(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Se(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(y(this,Ba).values())}attachPlugin(e){if(y(this,Ba).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return y(this,Ba).set(e.name,e.clone()),this}getPlugin(e){return y(this,Ba).get(e)||null}getPlugins(e){return this.plugins.filter(r=>r.name.split("#")[0]===e)}clone(){const e=new qu(this.name,this.chainId);return this.plugins.forEach(r=>{e.attachPlugin(r.clone())}),e}computeIntrinsicGas(e){const r=this.getPlugin("org.ethers.plugins.network.GasCost")||new Fy;let n=r.txBase;if(e.to==null&&(n+=r.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?n+=r.txDataZero:n+=r.txDataNonzero;if(e.accessList){const s=eu(e.accessList);for(const i in s)n+=r.txAccessListAddress+r.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(e){if(Wne(),e==null)return qu.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const r=Ib.get(e);if(r)return r();if(typeof e=="bigint")return new qu("unknown",e);M(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){M(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const r=new qu(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&r.attachPlugin(new jy(e.ensAddress,e.ensNetwork)),r}M(!1,"invalid network","network",e)}static register(e,r){typeof e=="number"&&(e=BigInt(e));const n=Ib.get(e);n&&M(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),Ib.set(e,r)}};Dh=new WeakMap,kh=new WeakMap,Ba=new WeakMap;let Hi=qu;function WN(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function GN(t){return new Vne(t,async(e,r,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:WN(a.maxFee,9),maxPriorityFeePerGas:WN(a.maxPriorityFee,9)}}catch(i){Y(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let KN=!1;function Wne(){if(KN)return;KN=!0;function t(e,r,n){const s=function(){const i=new Hi(e,r);return n.ensNetwork!=null&&i.attachPlugin(new jy(null,n.ensNetwork)),i.attachPlugin(new Fy),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Hi.register(e,s),Hi.register(r,s),n.altNames&&n.altNames.forEach(i=>{Hi.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[GN("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[GN("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function wv(t){return JSON.parse(JSON.stringify(t))}var No,ws,La,Pi,Uh,Fm;class Gne{constructor(e){W(this,Uh);W(this,No);W(this,ws);W(this,La);W(this,Pi);P(this,No,e),P(this,ws,null),P(this,La,4e3),P(this,Pi,-2)}get pollingInterval(){return y(this,La)}set pollingInterval(e){P(this,La,e)}start(){y(this,ws)||(P(this,ws,y(this,No)._setTimeout(ne(this,Uh,Fm).bind(this),y(this,La))),ne(this,Uh,Fm).call(this))}stop(){y(this,ws)&&(y(this,No)._clearTimeout(y(this,ws)),P(this,ws,null))}pause(e){this.stop(),e&&P(this,Pi,-2)}resume(){this.start()}}No=new WeakMap,ws=new WeakMap,La=new WeakMap,Pi=new WeakMap,Uh=new WeakSet,Fm=async function(){try{const e=await y(this,No).getBlockNumber();if(y(this,Pi)===-2){P(this,Pi,e);return}if(e!==y(this,Pi)){for(let r=y(this,Pi)+1;r<=e;r++){if(y(this,ws)==null)return;await y(this,No).emit("block",r)}P(this,Pi,e)}}catch{}y(this,ws)!=null&&P(this,ws,y(this,No)._setTimeout(ne(this,Uh,Fm).bind(this),y(this,La)))};var ul,hl,$a;class l1{constructor(e){W(this,ul);W(this,hl);W(this,$a);P(this,ul,e),P(this,$a,!1),P(this,hl,r=>{this._poll(r,y(this,ul))})}async _poll(e,r){throw new Error("sub-classes must override this")}start(){y(this,$a)||(P(this,$a,!0),y(this,hl).call(this,-2),y(this,ul).on("block",y(this,hl)))}stop(){y(this,$a)&&(P(this,$a,!1),y(this,ul).off("block",y(this,hl)))}pause(e){this.stop()}resume(){this.start()}}ul=new WeakMap,hl=new WeakMap,$a=new WeakMap;var Bh,xo;class Kne extends l1{constructor(r,n){super(r);W(this,Bh);W(this,xo);P(this,Bh,n),P(this,xo,-2)}pause(r){r&&P(this,xo,-2),super.pause(r)}async _poll(r,n){const s=await n.getBlock(y(this,Bh));s!=null&&(y(this,xo)===-2?P(this,xo,s.number):s.number>y(this,xo)&&(n.emit(y(this,Bh),s.number),P(this,xo,s.number)))}}Bh=new WeakMap,xo=new WeakMap;var Vw;class Jne extends l1{constructor(r,n){super(r);W(this,Vw);P(this,Vw,wv(n))}async _poll(r,n){throw new Error("@TODO")}}Vw=new WeakMap;var Lh;class Yne extends l1{constructor(r,n){super(r);W(this,Lh);P(this,Lh,n)}async _poll(r,n){const s=await n.getTransactionReceipt(y(this,Lh));s&&n.emit(y(this,Lh),s)}}Lh=new WeakMap;var To,$h,Mh,Ma,ys,Ww,R3;class u1{constructor(e,r){W(this,Ww);W(this,To);W(this,$h);W(this,Mh);W(this,Ma);W(this,ys);P(this,To,e),P(this,$h,wv(r)),P(this,Mh,ne(this,Ww,R3).bind(this)),P(this,Ma,!1),P(this,ys,-2)}start(){y(this,Ma)||(P(this,Ma,!0),y(this,ys)===-2&&y(this,To).getBlockNumber().then(e=>{P(this,ys,e)}),y(this,To).on("block",y(this,Mh)))}stop(){y(this,Ma)&&(P(this,Ma,!1),y(this,To).off("block",y(this,Mh)))}pause(e){this.stop(),e&&P(this,ys,-2)}resume(){this.start()}}To=new WeakMap,$h=new WeakMap,Mh=new WeakMap,Ma=new WeakMap,ys=new WeakMap,Ww=new WeakSet,R3=async function(e){if(y(this,ys)===-2)return;const r=wv(y(this,$h));r.fromBlock=y(this,ys)+1,r.toBlock=e;const n=await y(this,To).getLogs(r);if(n.length===0){y(this,ys)<e-60&&P(this,ys,e-60);return}for(const s of n)y(this,To).emit(y(this,$h),s),P(this,ys,s.blockNumber)};const Qne=BigInt(2),Zne=10;function ym(t){return t&&typeof t.then=="function"}function jm(t,e){return t+":"+JSON.stringify(e,(r,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class D3{constructor(e){H(this,"name");$e(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Xne(t){return JSON.parse(JSON.stringify(t))}function yv(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function Sb(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Mt(t,32)){const r=t.toLowerCase();return{type:"transaction",tag:jm("tx",{hash:r}),hash:r}}if(t.orphan){const r=t;return{type:"orphan",tag:jm("orphan",r),filter:Xne(r)}}if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map(s=>s==null?null:Array.isArray(s)?yv(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(r.address){const s=[],i=[],o=a=>{Mt(a)?s.push(a):i.push((async()=>{s.push(await pn(a,e))})())};Array.isArray(r.address)?r.address.forEach(o):o(r.address),i.length&&await Promise.all(i),n.address=yv(s.map(a=>a.toLowerCase()))}return{filter:n,tag:jm("event",n),type:"event"}}M(!1,"unknown ProviderEvent","event",t)}function Nb(){return new Date().getTime()}const ese={cacheTimeout:250,pollingInterval:4e3};var Gr,Fa,Kr,Fh,es,dl,ja,Po,sg,bs,jh,Hh,tt,Gn,bv,Ev,ff,vv,pf,Hm;class tse{constructor(e,r){W(this,tt);W(this,Gr);W(this,Fa);W(this,Kr);W(this,Fh);W(this,es);W(this,dl);W(this,ja);W(this,Po);W(this,sg);W(this,bs);W(this,jh);W(this,Hh);if(P(this,Hh,Object.assign({},ese,r||{})),e==="any")P(this,dl,!0),P(this,es,null);else if(e){const n=Hi.from(e);P(this,dl,!1),P(this,es,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else P(this,dl,!1),P(this,es,null);P(this,Po,-1),P(this,ja,new Map),P(this,Gr,new Map),P(this,Fa,new Map),P(this,Kr,null),P(this,Fh,!1),P(this,sg,1),P(this,bs,new Map),P(this,jh,!1)}get pollingInterval(){return y(this,Hh).pollingInterval}get provider(){return this}get plugins(){return Array.from(y(this,Fa).values())}attachPlugin(e){if(y(this,Fa).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return y(this,Fa).set(e.name,e.connect(this)),this}getPlugin(e){return y(this,Fa).get(e)||null}get disableCcipRead(){return y(this,jh)}set disableCcipRead(e){P(this,jh,!!e)}async ccipReadFetch(e,r,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Jo(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:n});let h="unknown error",d;try{d=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=d.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(h=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}Y(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:h}}),o.push(h)}Y(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,r){return new Ene(Mne(e),this)}_wrapLog(e,r){return new Pg(Lne(e),this)}_wrapTransactionReceipt(e,r){return new y3(zne(e),this)}_wrapTransactionResponse(e,r){return new Wp(O3(e),this)}_detectNetwork(){Y(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Y(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Je(await ne(this,tt,Gn).call(this,{method:"getBlockNumber"}),"%response");return y(this,Po)>=0&&P(this,Po,e),e}_getAddress(e){return pn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Mt(e))return Mt(e,32)?e:Gs(e);if(typeof e=="bigint"&&(e=Je(e,"blockTag")),typeof e=="number")return e>=0?Gs(e):y(this,Po)>=0?Gs(y(this,Po)+e):this.getBlockNumber().then(r=>Gs(r+e));M(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const r=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?yv(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return h&&(d.address=h),r.length&&(d.topics=r),l&&(d.fromBlock=l),u&&(d.toBlock=u),n&&(d.blockHash=n),d};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const r=Lw(e),n=[];if(["to","from"].forEach(s=>{if(r[s]==null)return;const i=pn(r[s],this);ym(i)?n.push((async function(){r[s]=await i})()):r[s]=i}),r.blockTag!=null){const s=this._getBlockTag(r.blockTag);ym(s)?n.push((async function(){r.blockTag=await s})()):r.blockTag=s}return n.length?(async function(){return await Promise.all(n),r})():r}async getNetwork(){if(y(this,es)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw y(this,es)===s&&P(this,es,null),i}})();return P(this,es,s),(await s).clone()}const e=y(this,es),[r,n]=await Promise.all([e,this._detectNetwork()]);return r.chainId!==n.chainId&&(y(this,dl)?(this.emit("network",n,r),y(this,es)===e&&P(this,es,Promise.resolve(n))):Y(!1,`network changed: ${r.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),r.clone()}async getFeeData(){const e=await this.getNetwork(),r=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await cn({_block:ne(this,tt,vv).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await ne(this,tt,Gn).call(this,{method:"getGasPrice"});return Se(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await ne(this,tt,Gn).call(this,{method:"getPriorityFee"});return Se(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Qne+c),new jN(i,a,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Jo(n.url),i=await n.processFunc(r,this,s);return new jN(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await r()}async estimateGas(e){let r=this._getTransactionRequest(e);return ym(r)&&(r=await r),Se(await ne(this,tt,Gn).call(this,{method:"estimateGas",transaction:r}),"%response")}async call(e){const{tx:r,blockTag:n}=await cn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ne(this,tt,Ev).call(this,ne(this,tt,bv).call(this,r,n,e.enableCcipRead?0:-1))}async getBalance(e,r){return Se(await ne(this,tt,ff).call(this,{method:"getBalance"},e,r),"%response")}async getTransactionCount(e,r){return Je(await ne(this,tt,ff).call(this,{method:"getTransactionCount"},e,r),"%response")}async getCode(e,r){return me(await ne(this,tt,ff).call(this,{method:"getCode"},e,r))}async getStorage(e,r,n){const s=Se(r,"position");return me(await ne(this,tt,ff).call(this,{method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:r,hash:n,network:s}=await cn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Pw.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(r)}async getBlock(e,r){const{network:n,params:s}=await cn({network:this.getNetwork(),params:ne(this,tt,vv).call(this,e,!!r)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:r,params:n}=await cn({network:this.getNetwork(),params:ne(this,tt,Gn).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,r)}async getTransactionReceipt(e){const{network:r,params:n}=await cn({network:this.getNetwork(),params:ne(this,tt,Gn).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await ne(this,tt,Gn).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,r)}async getTransactionResult(e){const{result:r}=await cn({network:this.getNetwork(),result:ne(this,tt,Gn).call(this,{method:"getTransactionResult",hash:e})});return r==null?null:me(r)}async getLogs(e){let r=this._getFilter(e);ym(r)&&(r=await r);const{network:n,params:s}=await cn({network:this.getNetwork(),params:ne(this,tt,Gn).call(this,{method:"getLogs",filter:r})});return s.map(i=>this._wrapLog(i,n))}_getProvider(e){Y(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Mw.fromName(this,e)}async getAvatar(e){const r=await this.getResolver(e);return r?await r.getAvatar():null}async resolveName(e){const r=await this.getResolver(e);return r?await r.getAddress():null}async lookupAddress(e){e=xt(e);const r=hv(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await Mw.getEnsAddress(this),i=await new ih(n,["function resolver(bytes32) view returns (address)"],this).resolver(r);if(i==null||i===$p)return null;const a=await new ih(i,["function name(bytes32) view returns (string)"],this).name(r);return await this.resolveName(a)!==e?null:a}catch(n){if(kr(n,"BAD_DATA")&&n.value==="0x"||kr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,r,n){const s=r??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=(async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Kt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){Y(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const r=y(this,bs).get(e);r&&(r.timer&&clearTimeout(r.timer),y(this,bs).delete(e))}_setTimeout(e,r){r==null&&(r=0);const n=Pd(this,sg)._++,s=()=>{y(this,bs).delete(n),e()};if(this.paused)y(this,bs).set(n,{timer:null,func:s,time:r});else{const i=setTimeout(s,r);y(this,bs).set(n,{timer:i,func:s,time:Nb()})}return n}_forEachSubscriber(e){for(const r of y(this,Gr).values())e(r.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new D3(e.type);case"block":{const r=new Gne(this);return r.pollingInterval=this.pollingInterval,r}case"safe":case"finalized":return new Kne(this,e.type);case"event":return new u1(this,e.filter);case"transaction":return new Yne(this,e.hash);case"orphan":return new Jne(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,r){for(const n of y(this,Gr).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=r,n.started&&r.start(),y(this,Kr)!=null&&r.pause(y(this,Kr));break}}async on(e,r){const n=await ne(this,tt,Hm).call(this,e);return n.listeners.push({listener:r,once:!1}),n.started||(n.subscriber.start(),n.started=!0,y(this,Kr)!=null&&n.subscriber.pause(y(this,Kr))),this}async once(e,r){const n=await ne(this,tt,Hm).call(this,e);return n.listeners.push({listener:r,once:!0}),n.started||(n.subscriber.start(),n.started=!0,y(this,Kr)!=null&&n.subscriber.pause(y(this,Kr))),this}async emit(e,...r){const n=await ne(this,tt,pf).call(this,e,r);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new WO(this,o?null:i,e);try{i.call(this,...r,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),y(this,Gr).delete(n.tag)),s>0}async listenerCount(e){if(e){const n=await ne(this,tt,pf).call(this,e);return n?n.listeners.length:0}let r=0;for(const{listeners:n}of y(this,Gr).values())r+=n.length;return r}async listeners(e){if(e){const n=await ne(this,tt,pf).call(this,e);return n?n.listeners.map(({listener:s})=>s):[]}let r=[];for(const{listeners:n}of y(this,Gr).values())r=r.concat(n.map(({listener:s})=>s));return r}async off(e,r){const n=await ne(this,tt,pf).call(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(!r||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),y(this,Gr).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:r,started:n,subscriber:s}=await ne(this,tt,Hm).call(this,e);n&&s.stop(),y(this,Gr).delete(r)}else for(const[r,{started:n,subscriber:s}]of y(this,Gr))n&&s.stop(),y(this,Gr).delete(r);return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return this.off(e,r)}get destroyed(){return y(this,Fh)}destroy(){this.removeAllListeners();for(const e of y(this,bs).keys())this._clearTimeout(e);P(this,Fh,!0)}get paused(){return y(this,Kr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(P(this,Po,-1),y(this,Kr)!=null){if(y(this,Kr)==!!e)return;Y(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(r=>r.pause(e)),P(this,Kr,!!e);for(const r of y(this,bs).values())r.timer&&clearTimeout(r.timer),r.time=Nb()-r.time}resume(){if(y(this,Kr)!=null){this._forEachSubscriber(e=>e.resume()),P(this,Kr,null);for(const e of y(this,bs).values()){let r=e.time;r<0&&(r=0),e.time=Nb(),setTimeout(e.func,r)}}}}Gr=new WeakMap,Fa=new WeakMap,Kr=new WeakMap,Fh=new WeakMap,es=new WeakMap,dl=new WeakMap,ja=new WeakMap,Po=new WeakMap,sg=new WeakMap,bs=new WeakMap,jh=new WeakMap,Hh=new WeakMap,tt=new WeakSet,Gn=async function(e){const r=y(this,Hh).cacheTimeout;if(r<0)return await this._perform(e);const n=jm(e.method,e);let s=y(this,ja).get(n);return s||(s=this._perform(e),y(this,ja).set(n,s),setTimeout(()=>{y(this,ja).get(n)===s&&y(this,ja).delete(n)},r)),await s},bv=async function(e,r,n){Y(n<Zne,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:r,enableCcipRead:!0})});const s=Lw(e);try{return me(await this._perform({method:"call",transaction:s,blockTag:r}))}catch(i){if(!this.disableCcipRead&&WA(i)&&i.data&&n>=0&&r==="latest"&&s.to!=null&&Xt(i.data,0,4)==="0x556f1830"){const o=i.data,a=await pn(s.to,this);let c;try{c=ose(Xt(i.data,4))}catch(h){Y(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}Y(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);Y(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:er([c.selector,ise([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const h=await ne(this,tt,bv).call(this,u,r,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:h}),h}}throw i}},Ev=async function(e){const{value:r}=await cn({network:this.getNetwork(),value:e});return r},ff=async function(e,r,n){let s=this._getAddress(r),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await ne(this,tt,Ev).call(this,ne(this,tt,Gn).call(this,Object.assign(e,{address:s,blockTag:i})))},vv=async function(e,r){if(Mt(e,32))return await ne(this,tt,Gn).call(this,{method:"getBlock",blockHash:e,includeTransactions:r});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await ne(this,tt,Gn).call(this,{method:"getBlock",blockTag:n,includeTransactions:r})},pf=async function(e,r){let n=await Sb(e,this);return n.type==="event"&&r&&r.length>0&&r[0].removed===!0&&(n=await Sb({orphan:"drop-log",log:r[0]},this)),y(this,Gr).get(n.tag)||null},Hm=async function(e){const r=await Sb(e,this),n=r.tag;let s=y(this,Gr).get(n);return s||(s={subscriber:this._getSubscriber(r),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},y(this,Gr).set(n,s)),s};function rse(t,e){try{const r=Av(t,e);if(r)return Nw(r)}catch{}return null}function Av(t,e){if(t==="0x")return null;try{const r=Je(Xt(t,e,e+32)),n=Je(Xt(t,r,r+32));return Xt(t,r+32,r+32+n)}catch{}return null}function JN(t){const e=pr(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function nse(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const sse=new Uint8Array([]);function ise(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(sse),r+=32;for(let n=0;n<t.length;n++){const s=et(t[n]);e[n]=JN(r),e.push(JN(s.length)),e.push(nse(s)),r+=32+Math.ceil(s.length/32)*32}return er(e)}const YN="0x0000000000000000000000000000000000000000000000000000000000000000";function ose(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Y(th(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=Xt(t,0,32);Y(Xt(r,0,12)===Xt(YN,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Xt(r,12);try{const n=[],s=Je(Xt(t,32,64)),i=Je(Xt(t,s,s+32)),o=Xt(t,s+32);for(let a=0;a<i;a++){const c=rse(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{Y(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Av(t,64);if(n==null)throw new Error("abort");e.calldata=n}catch{Y(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Y(Xt(t,100,128)===Xt(YN,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Xt(t,96,100);try{const n=Av(t,128);if(n==null)throw new Error("abort");e.extraData=n}catch{Y(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function _c(t,e){if(t.provider)return t.provider;Y(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function QN(t,e){let r=Lw(e);if(r.to!=null&&(r.to=pn(r.to,t)),r.from!=null){const n=r.from;r.from=Promise.all([t.getAddress(),pn(n,t)]).then(([s,i])=>(M(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else r.from=t.getAddress();return await cn(r)}class ase{constructor(e){H(this,"provider");$e(this,{provider:e||null})}async getNonce(e){return _c(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await QN(this,e)}async populateTransaction(e){const r=_c(this,"populateTransaction"),n=await QN(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=Se(n.chainId);M(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?M(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&i&&M(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await r.getFeeData();Y(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await r.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Y(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):Y(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await cn(n)}async populateAuthorization(e){const r=Object.assign({},e);return r.chainId==null&&(r.chainId=(await _c(this,"getNetwork").getNetwork()).chainId),r.nonce==null&&(r.nonce=await this.getNonce()),r}async estimateGas(e){return _c(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return _c(this,"call").call(await this.populateCall(e))}async resolveName(e){return await _c(this,"resolveName").resolveName(e)}async sendTransaction(e){const r=_c(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=Pw.from(n);return await r.broadcastTransaction(await this.signTransaction(s))}authorize(e){Y(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function cse(t){return JSON.parse(JSON.stringify(t))}var an,Oi,fl,Ha,pl,zh,ac,Cv,_v;class k3{constructor(e){W(this,ac);W(this,an);W(this,Oi);W(this,fl);W(this,Ha);W(this,pl);W(this,zh);P(this,an,e),P(this,Oi,null),P(this,fl,ne(this,ac,Cv).bind(this)),P(this,Ha,!1),P(this,pl,null),P(this,zh,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,r){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){y(this,Ha)||(P(this,Ha,!0),ne(this,ac,Cv).call(this,-2))}stop(){y(this,Ha)&&(P(this,Ha,!1),P(this,zh,!0),ne(this,ac,_v).call(this),y(this,an).off("block",y(this,fl)))}pause(e){e&&ne(this,ac,_v).call(this),y(this,an).off("block",y(this,fl))}resume(){this.start()}}an=new WeakMap,Oi=new WeakMap,fl=new WeakMap,Ha=new WeakMap,pl=new WeakMap,zh=new WeakMap,ac=new WeakSet,Cv=async function(e){try{y(this,Oi)==null&&P(this,Oi,this._subscribe(y(this,an)));let r=null;try{r=await y(this,Oi)}catch(i){if(!kr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(r==null){P(this,Oi,null),y(this,an)._recoverSubscriber(this,this._recover(y(this,an)));return}const n=await y(this,an).getNetwork();if(y(this,pl)||P(this,pl,n),y(this,pl).chainId!==n.chainId)throw new Error("chaid changed");if(y(this,zh))return;const s=await y(this,an).send("eth_getFilterChanges",[r]);await this._emitResults(y(this,an),s)}catch(r){console.log("@TODO",r)}y(this,an).once("block",y(this,fl))},_v=function(){const e=y(this,Oi);e&&(P(this,Oi,null),e.then(r=>{y(this,an).destroyed||y(this,an).send("eth_uninstallFilter",[r])}))};var gl;class lse extends k3{constructor(r,n){super(r);W(this,gl);P(this,gl,cse(n))}_recover(r){return new u1(r,y(this,gl))}async _subscribe(r){return await r.send("eth_newFilter",[y(this,gl)])}async _emitResults(r,n){for(const s of n)r.emit(y(this,gl),r._wrapLog(s,r._network))}}gl=new WeakMap;class use extends k3{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,r){for(const n of r)e.emit("pending",n)}}const hse="bigint,boolean,function,number,string,symbol".split(/,/g);function zm(t){if(t==null||hse.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(zm);if(typeof t=="object")return Object.keys(t).reduce((e,r)=>(e[r]=t[r],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function dse(t){return new Promise(e=>{setTimeout(e,t)})}function Iu(t){return t&&t.toLowerCase()}function ZN(t){return t&&typeof t.pollingInterval=="number"}const U3={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class oh extends ase{constructor(r,n){super(r);H(this,"address");n=xt(n),$e(this,{address:n})}connect(r){Y(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(r){return await this.populateCall(r)}async sendUncheckedTransaction(r){const n=zm(r),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await pn(o,this.provider);M(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",r),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await pn(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(r){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(r);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(n));return}}catch(u){if(kr(u,"CANCELLED")||kr(u,"BAD_DATA")||kr(u,"NETWORK_ERROR")||kr(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(kr(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",Kt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(r){const n=zm(r);if(n.from){const i=await pn(n.from,this.provider);M(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",r),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(r){const n=typeof r=="string"?Ji(r):r;return await this.provider.send("personal_sign",[me(n),this.address.toLowerCase()])}async signTypedData(r,n,s){const i=zm(s),o=await Bw.resolveNames(r,n,i,async a=>{const c=await pn(a);return M(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Bw.getPayload(o.domain,n,o.value))])}async unlock(r){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),r,null])}async _legacySignMessage(r){const n=typeof r=="string"?Ji(r):r;return await this.provider.send("eth_sign",[this.address.toLowerCase(),me(n)])}}var ml,qh,Oo,Ri,Vs,Es,Pn,ig,Iv;class fse extends tse{constructor(r,n){super(r,n);W(this,ig);W(this,ml);W(this,qh);W(this,Oo);W(this,Ri);W(this,Vs);W(this,Es);W(this,Pn);P(this,qh,1),P(this,ml,Object.assign({},U3,n||{})),P(this,Oo,[]),P(this,Ri,null),P(this,Es,null),P(this,Pn,null);{let i=null;const o=new Promise(a=>{i=a});P(this,Vs,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(M(!s||r!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&r!=null&&P(this,Es,Hi.from(r))):s&&(M(r==null||s.matches(r),"staticNetwork MUST match network object","options",n),P(this,Es,s))}_getOption(r){return y(this,ml)[r]}get _network(){return Y(y(this,Es),"network is not available yet","NETWORK_ERROR"),y(this,Es)}async _perform(r){if(r.method==="call"||r.method==="estimateGas"){let s=r.transaction;if(s&&s.type!=null&&Se(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(r=Object.assign({},r,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(r);return n!=null?await this.send(n.method,n.args):super._perform(r)}async _detectNetwork(){const r=this._getOption("staticNetwork");if(r)if(r===!0){if(y(this,Es))return y(this,Es)}else return r;return y(this,Pn)?await y(this,Pn):this.ready?(P(this,Pn,(async()=>{try{const n=Hi.from(Se(await this.send("eth_chainId",[])));return P(this,Pn,null),n}catch(n){throw P(this,Pn,null),n}})()),await y(this,Pn)):(P(this,Pn,(async()=>{const n={id:Pd(this,qh)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],P(this,Pn,null)}catch(i){throw P(this,Pn,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Hi.from(Se(s.result));throw this.getRpcError(n,s)})()),await y(this,Pn))}_start(){y(this,Vs)==null||y(this,Vs).resolve==null||(y(this,Vs).resolve(),P(this,Vs,null),(async()=>{for(;y(this,Es)==null&&!this.destroyed;)try{P(this,Es,await this._detectNetwork())}catch(r){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Kt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:r}})),await dse(1e3)}ne(this,ig,Iv).call(this)})())}async _waitUntilReady(){if(y(this,Vs)!=null)return await y(this,Vs).promise}_getSubscriber(r){return r.type==="pending"?new use(this):r.type==="event"?this._getOption("polling")?new u1(this,r.filter):new lse(this,r.filter):r.type==="orphan"&&r.filter.orphan==="drop-log"?new D3("orphan"):super._getSubscriber(r)}get ready(){return y(this,Vs)==null}getRpcTransaction(r){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(r[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=Gs(Se(r[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{r[s]!=null&&(n[s]=me(r[s]))}),r.accessList&&(n.accessList=eu(r.accessList)),r.blobVersionedHashes&&(n.blobVersionedHashes=r.blobVersionedHashes.map(s=>s.toLowerCase())),r.authorizationList&&(n.authorizationList=r.authorizationList.map(s=>{const i=LR(s);return{address:i.address,nonce:Gs(i.nonce),chainId:Gs(i.chainId),yParity:Gs(i.signature.yParity),r:Gs(i.signature.r),s:Gs(i.signature.s)}})),n}getRpcRequest(r){switch(r.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Iu(r.address),r.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Iu(r.address),r.blockTag]};case"getCode":return{method:"eth_getCode",args:[Iu(r.address),r.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Iu(r.address),"0x"+r.position.toString(16),r.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[r.signedTransaction]};case"getBlock":if("blockTag"in r)return{method:"eth_getBlockByNumber",args:[r.blockTag,!!r.includeTransactions]};if("blockHash"in r)return{method:"eth_getBlockByHash",args:[r.blockHash,!!r.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[r.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[r.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(r.transaction),r.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(r.transaction)]};case"getLogs":return r.filter&&r.filter.address!=null&&(Array.isArray(r.filter.address)?r.filter.address=r.filter.address.map(Iu):r.filter.address=Iu(r.filter.address)),{method:"eth_getLogs",args:[r.filter]}}return null}getRpcError(r,n){const{method:s}=r,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Kt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:r.params[0],info:{payload:r,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return Kt("nonce has already been used","NONCE_EXPIRED",{transaction:r.params[0],info:{payload:r,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Sv(i),l=Vp.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",r.params[0],c?c.data:null);return l.info={error:i,payload:r},l}const o=JSON.stringify(gse(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Kt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:r,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=r.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Kt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Kt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Kt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Kt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Kt("unsupported operation","UNSUPPORTED_OPERATION",{operation:r.method,info:{error:i,payload:r}}):Kt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:r})}send(r,n){if(this.destroyed)return Promise.reject(Kt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r}));const s=Pd(this,qh)._++,i=new Promise((o,a)=>{y(this,Oo).push({resolve:o,reject:a,payload:{method:r,params:n,id:s,jsonrpc:"2.0"}})});return ne(this,ig,Iv).call(this),i}async getSigner(r){r==null&&(r=0);const n=this.send("eth_accounts",[]);if(typeof r=="number"){const i=await n;if(r>=i.length)throw new Error("no such account");return new oh(this,i[r])}const{accounts:s}=await cn({network:this.getNetwork(),accounts:n});r=xt(r);for(const i of s)if(xt(i)===r)return new oh(this,r);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new oh(this,n))}destroy(){y(this,Ri)&&(clearTimeout(y(this,Ri)),P(this,Ri,null));for(const{payload:r,reject:n}of y(this,Oo))n(Kt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));P(this,Oo,[]),super.destroy()}}ml=new WeakMap,qh=new WeakMap,Oo=new WeakMap,Ri=new WeakMap,Vs=new WeakMap,Es=new WeakMap,Pn=new WeakMap,ig=new WeakSet,Iv=function(){if(y(this,Ri))return;const r=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");P(this,Ri,setTimeout(()=>{P(this,Ri,null);const n=y(this,Oo);for(P(this,Oo,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==y(this,ml).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>y(this,ml).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(Kt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(h=>h.id===l.id)[0];if(u==null){const h=Kt("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",h),c(h);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},r))};var za;class B3 extends fse{constructor(r,n){super(r,n);W(this,za);let s=this._getOption("pollingInterval");s==null&&(s=U3.pollingInterval),P(this,za,s)}_getSubscriber(r){const n=super._getSubscriber(r);return ZN(n)&&(n.pollingInterval=y(this,za)),n}get pollingInterval(){return y(this,za)}set pollingInterval(r){if(!Number.isInteger(r)||r<0)throw new Error("invalid interval");P(this,za,r),this._forEachSubscriber(n=>{ZN(n)&&(n.pollingInterval=y(this,za))})}}za=new WeakMap;var Vh;class pse extends B3{constructor(r,n,s){r==null&&(r="http://localhost:8545");super(n,s);W(this,Vh);typeof r=="string"?P(this,Vh,new Jo(r)):P(this,Vh,r.clone())}_getConnection(){return y(this,Vh).clone()}async send(r,n){return await this._start(),await super.send(r,n)}async _send(r){const n=this._getConnection();n.body=JSON.stringify(r),n.setHeader("content-type","application/json");const s=await n.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}Vh=new WeakMap;function Sv(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Mt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const r=Sv(t[e]);if(r)return r}return null}if(typeof t=="string")try{return Sv(JSON.parse(t))}catch{}return null}function Nv(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const r in t)Nv(t[r],e);if(typeof t=="string")try{return Nv(JSON.parse(t),e)}catch{}}}function gse(t){const e=[];return Nv(t,e),e}var Wh,Gh;const $c=class $c extends B3{constructor(r,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});M(r&&r.request,"invalid EIP-1193 provider","ethereum",r);super(n,i);W(this,Wh);W(this,Gh);P(this,Gh,null),s&&s.providerInfo&&P(this,Gh,s.providerInfo),P(this,Wh,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await r.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return y(this,Gh)}async send(r,n){return await this._start(),await super.send(r,n)}async _send(r){M(!Array.isArray(r),"EIP-1193 does not support batch request","payload",r);try{const n=await y(this,Wh).call(this,r.method,r.params||[]);return[{id:r.id,result:n}]}catch(n){return[{id:r.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(r,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(r,n)}async hasSigner(r){r==null&&(r=0);const n=await this.send("eth_accounts",[]);return typeof r=="number"?n.length>r:(r=r.toLowerCase(),n.filter(s=>s.toLowerCase()===r).length!==0)}async getSigner(r){if(r==null&&(r=0),!await this.hasSigner(r))try{await y(this,Wh).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(r)}static async discover(r){if(r==null&&(r={}),r.provider)return new $c(r.provider);const n=r.window?r.window:typeof window<"u"?window:null;if(n==null)return null;const s=r.anyProvider;if(s&&n.ethereum)return new $c(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=r.timeout?r.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=d=>{c.push(d.detail),s&&u()},u=()=>{if(clearTimeout(h),c.length)if(r&&r.filter){const d=r.filter(c.map(f=>Object.assign({},f.info)));if(d==null)o(null);else if(d instanceof $c)o(d);else{let f=null;if(d.uuid&&(f=c.filter(p=>d.uuid===p.info.uuid)[0]),f){const{provider:g,info:p}=f;o(new $c(g,void 0,{providerInfo:p}))}else a(Kt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:d}))}}else{const{provider:d,info:f}=c[0];o(new $c(d,void 0,{providerInfo:f}))}else o(null);n.removeEventListener("eip6963:announceProvider",l)},h=setTimeout(()=>{u()},i);n.addEventListener("eip6963:announceProvider",l),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};Wh=new WeakMap,Gh=new WeakMap;let Ff=$c;const Ic={signMessage:async(t,e,r)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=Mt(t)?t:me(Ji(t));return await e.request({method:"personal_sign",params:[n,r]})},estimateGas:async(t,e,r,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0},i=new Ff(e,n);return await new oh(i,r).estimateGas(s)},sendTransaction:async(t,e,r,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0},i=new Ff(e,n),c=await(await new oh(i,r).sendTransaction(s)).wait();return(c==null?void 0:c.hash)||null},writeContract:async(t,e,r,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const s=new Ff(e,n),i=new oh(s,r),o=new ih(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:ree,formatUnits:tR};class mse extends jO{constructor(){super({adapterType:q.ADAPTER_TYPES.ETHERS,namespace:q.CHAIN.EVM}),this.balancePromises={}}async createEthersConfig(e){if(!e.metadata)return;let r;function n(){if(r)return r;if(!(typeof window>"u")&&window.ethereum)return r=window.ethereum,r}async function s(){const{SafeProvider:a}=await Jr(async()=>{const{SafeProvider:d}=await import("./SafeProvider-DwBFOySW.js");return{SafeProvider:d}},__vite__mapDeps([41,42,43])),{default:c}=await Jr(async()=>{const{default:d}=await import("./index-DtZ77vmU.js");return{default:d}},__vite__mapDeps([44,42])),l=new c,u=await l.safe.getInfo(),h=new a(u,l);return await h.connect().catch(d=>{console.info("Failed to auto-connect to Safe:",d)}),h}async function i(){var a,c,l;try{const{createCoinbaseWalletSDK:u}=await Jr(async()=>{const{createCoinbaseWalletSDK:d}=await import("./index-BSa-HmJi.js");return{createCoinbaseWalletSDK:d}},__vite__mapDeps([45,43]));return typeof window>"u"?void 0:u({appName:(a=e==null?void 0:e.metadata)==null?void 0:a.name,appLogoUrl:(c=e==null?void 0:e.metadata)==null?void 0:c.icons[0],appChainIds:((l=e.networks)==null?void 0:l.map(d=>d.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(u){console.error("Failed to import Coinbase Wallet SDK:",u);return}}const o={metadata:e.metadata};if(e.enableInjected!==!1&&(o.injected=n()),e.enableCoinbase!==!1){const a=await i();a&&(o.coinbase=a)}if(_e.isSafeApp()){const a=await s();a&&(o.safe=a)}return o.EIP6963=e.enableEIP6963!==!1,o}async signMessage(e){const{message:r,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await Ic.signMessage(r,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var n;if(!e.provider)throw new Error("Provider is undefined");return{hash:await Ic.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:xe.state.address},e.provider,xe.state.address,Number((n=e.caipNetwork)==null?void 0:n.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:r}=hn.parseCaipAddress(e.caipAddress);return{hash:await Ic.writeContract(e,e.provider,r,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:r,caipNetwork:n,address:s}=e;if(!r)throw new Error("Provider is undefined");try{return{gas:await Ic.estimateGas({data:e.data,to:e.to,address:s},r,s,Number(n==null?void 0:n.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return Ic.parseUnits(e.value,e.decimals)}formatUnits(e){return Ic.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:r,chainId:n}=e,s=this.connectors.find(c=>c.id===r),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(r,i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(a)||Number(n),provider:i,type:s.type,id:r}}async syncConnectors(e){var n;this.ethersConfig=await this.createEthersConfig(e),(n=this.ethersConfig)!=null&&n.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var a,c;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===q.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:$i.ConnectorExplorerIds[i],imageUrl:(a=e==null?void 0:e.connectorImages)==null?void 0:a[i],name:$i.ConnectorNamesMap[i]||"Unknown",imageId:$i.ConnectorImageIds[i],type:$i.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(c=this.ethersConfig)==null?void 0:c[s]})})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>_r.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}async syncConnections({connectToFirstConnector:e,getConnectorStorageInfo:r}){var n;await((n=this.connectionManager)==null?void 0:n.syncConnections({connectors:this.connectors,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenProviderEvents.bind(this),getConnectionStatusInfo(s){return r(s)}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const r=q.CONNECTOR_ID.WALLET_CONNECT;return Ki.listenWcProvider({universalProvider:e,namespace:q.CHAIN.EVM,onConnect:n=>this.onConnect(n,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:n=>this.onAccountsChanged(n,r,!1),onChainChanged:n=>this.onChainChanged(n,r)}),this.addConnector(new VA({provider:e,caipNetworks:this.getCaipNetworks(),namespace:q.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){var r;if(e.detail){const{info:n,provider:s}=e.detail;if(!((r=this.connectors)==null?void 0:r.find(o=>o.name===(n==null?void 0:n.name)))){const o=$i.ConnectorTypesMap[q.CONNECTOR_ID.EIP6963],a=(n==null?void 0:n.rdns)||(n==null?void 0:n.name)||(n==null?void 0:n.uuid);this.namespace&&a&&this.addConnector({id:a,type:o,imageUrl:n==null?void 0:n.icon,name:(n==null?void 0:n.name)||"Unknown",provider:s,info:n,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const r=this.eip6963EventHandler.bind(this);window.addEventListener(yt.EIP6963_ANNOUNCE_EVENT,r),window.dispatchEvent(new Event(yt.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:r,type:n,chainId:s,socialUri:i}){var h;const o=this.connectors.find(d=>_r.isLowerCaseMatch(d.id,e));if(!o)throw new Error("Connector not found");const a=(h=this.connectionManager)==null?void 0:h.getConnection({address:r,connectorId:e,connections:this.connections,connectors:this.connectors});if(a){const d=a.caipNetwork;if(!d)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(a.account)return this.emit("accountChanged",{address:a.account.address,chainId:d.id,connector:o}),{address:a.account.address,chainId:d.id,provider:o.provider,type:o.type,id:e}}const c=o==null?void 0:o.provider;if(!c)throw new Error("Provider not found");let l=[],u;if(n===yt.CONNECTOR_TYPE_AUTH){const{address:d,accounts:f}=await rs.authConnectorAuthenticate({authConnector:c,chainNamespace:q.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:Fn("eip155")}),g=this.getCaipNetworks().find(p=>p.id.toString()===(s==null?void 0:s.toString()));l=[d],this.addConnection({connectorId:e,accounts:f?f.map(p=>({address:p.address})):l.map(p=>({address:p})),caipNetwork:g,auth:{name:X.getConnectedSocialProvider(),username:X.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:l[0],chainId:Number(s),connector:o})}else{l=await c.request({method:"eth_requestAccounts"}),u=await c.request({method:"eth_chainId"});const d=this.getCaipNetworks().find(f=>f.id.toString()===(s==null?void 0:s.toString()));if(u!==s){if(!d)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:d,provider:c,providerType:n})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:l[0],chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:l.map(f=>({address:f})),caipNetwork:d}),o.id!==q.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,c)}return{address:l[0],chainId:Number(s),provider:c,type:n,id:e}}async reconnect(e){const{id:r,chainId:n}=e,s=this.connectors.find(i=>i.id===r);s&&s.type==="AUTH"&&n&&await rs.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:q.CHAIN.EVM,chainId:n,preferredAccountType:Fn("eip155")})}async getAccounts(e){var o;const r=this.connectors.find(a=>a.id===e.id),n=r==null?void 0:r.provider;if(!n||!r)throw new Error("Provider not found");const s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:a})=>_e.createAccount(q.CHAIN.EVM,a,"eoa"))};if(e.id===q.CONNECTOR_ID.AUTH){const a=r.provider;if(!a.user)return{accounts:[]};const{accounts:c,address:l}=a.user;return Promise.resolve({accounts:(c||[{address:l,type:"eoa"}]).map(u=>_e.createAccount(q.CHAIN.EVM,u.address,u.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(a=>_e.createAccount(q.CHAIN.EVM,a,"eoa"))}}async disconnect(e){var r,n;if(e.id){const s=this.connectors.find(o=>_r.isLowerCaseMatch(o.id,e.id));if(!s)throw new Error("Connector not found");const i=(r=this.connectionManager)==null?void 0:r.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(s.type){case yt.CONNECTOR_TYPE_WALLET_CONNECT:s.provider.session&&s.provider.disconnect();break;case yt.CONNECTOR_TYPE_AUTH:await((n=s.provider)==null?void 0:n.disconnect());break;case yt.CONNECTOR_TYPE_ANNOUNCED:case yt.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(s.provider);break;default:throw new Error("Unsupported provider type")}return s.id&&(this.removeProviderListeners(s.id),this.deleteConnection(s.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:i?[i]:[]}}return this.disconnectAll()}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>{var i;return s.id.toString()===((i=e.chainId)==null?void 0:i.toString())});if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&n.chainNamespace===q.CHAIN.EVM){const s=`${n.caipNetworkId}:${r}`,i=this.balancePromises[s];if(i)return i;const o=X.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new pse(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{try{const l=await a.getBalance(r),u=nee(l);X.updateNativeBalanceCache({caipAddress:s,balance:u,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:u,symbol:n.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){var i,o;const{caipNetwork:r,provider:n,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:eh.numberToHexString(r.id)}]})}catch(a){if(a.code===Uo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||a.code===Uo.ERROR_INVALID_CHAIN_ID||a.code===Uo.ERROR_CODE_DEFAULT||((o=(i=a==null?void 0:a.data)==null?void 0:i.originalError)==null?void 0:o.code)===Uo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await eh.addEthereumChain(n,r);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(r=>r.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(r){console.info("Could not revoke permissions from wallet. Disconnecting...",r)}}async getCapabilities(e){var s,i;const r=wt.getProvider(q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");const n=(i=(s=r.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(n){const a=Ic.parseWalletCapabilities(n)[e];if(a)return a}return await r.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const r=wt.getProvider(q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const r=wt.getProvider(q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const r=wt.getProvider(q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getAssets",params:[e]})}}const wse="b56e18d47c72ab683b10814fe9495694",L3=[hX,dX,FO],yse=new mse,h1=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},bse={name:"ActionButtonList",setup(){const{disconnect:t}=CX(),{open:e}=SX(),r=RX();return{handleDisconnect:async()=>{try{await t()}catch(o){console.error("Error during disconnect:",o)}},openAppKit:()=>e(),switchToNetwork:()=>r.value.switchNetwork(L3[1])}}};function Ese(t,e,r,n,s,i){return Gv(),Kv("div",null,[Wt("button",{onClick:e[0]||(e[0]=(...o)=>n.openAppKit&&n.openAppKit(...o))},"Open"),Wt("button",{onClick:e[1]||(e[1]=(...o)=>n.handleDisconnect&&n.handleDisconnect(...o))},"Disconnect"),Wt("button",{onClick:e[2]||(e[2]=(...o)=>n.switchToNetwork&&n.switchToNetwork(...o))},"Switch")])}const vse=h1(bse,[["render",Ese]]),Ase={name:"InfoList",setup(){const t=IX(),e=xX(),r=AX(),n=TX(),{walletInfo:s}=NX();return qv(()=>{console.log("Events: ",n)}),{kitTheme:t,state:e,accountInfo:r,walletInfo:s}}};function Cse(t,e,r,n,s,i){var o;return Gv(),Kv(Di,null,[Wt("section",null,[e[0]||(e[0]=Wt("h2",null,"useAppKit",-1)),Wt("pre",null,"Address: "+ho(n.accountInfo.address)+`
caip Address: `+ho(n.accountInfo.caipAddress)+`
Connected: `+ho(n.accountInfo.isConnected)+`
Status: `+ho(n.accountInfo.status)+`
      `,1)]),Wt("section",null,[e[1]||(e[1]=Wt("h2",null,"Theme",-1)),Wt("pre",null,"Theme: "+ho(n.kitTheme.themeMode)+`
      `,1)]),Wt("section",null,[e[2]||(e[2]=Wt("h2",null,"State",-1)),Wt("pre",null,"open: "+ho(n.state.open)+`
selectedNetworkId: `+ho(n.state.selectedNetworkId)+`
      `,1)]),Wt("section",null,[e[5]||(e[5]=Wt("h2",null,"WalletInfo",-1)),Wt("pre",null,[Ju("Name: "+ho((o=n.walletInfo)==null?void 0:o.name),1),e[3]||(e[3]=Wt("br",null,null,-1)),e[4]||(e[4]=Ju(`
      `,-1))])])],64)}const _se=h1(Ase,[["render",Cse]]);OX({adapters:[yse],networks:L3,projectId:wse,themeMode:"light",features:{analytics:!0,email:!1,socials:!1},themeVariables:{"--w3m-accent":"#000000"},enableWalletConnect:!0,enableInjected:!0,enableEIP6963:!0,enableCoinbase:!0});const Ise={name:"App",components:{ActionButtonList:vse,InfoList:_se}},Sse="/web3-demo/reown.svg",Nse={class:"pages"};function xse(t,e,r,n,s,i){const o=C1("ActionButtonList"),a=C1("InfoList");return Gv(),Kv("div",Nse,[e[0]||(e[0]=Wt("img",{src:Sse,alt:"Reown",width:"150",height:"150"},null,-1)),e[1]||(e[1]=Wt("h1",null,"AppKit ethers vue Example",-1)),e[2]||(e[2]=Wt("appkit-button",null,null,-1)),Lo(o),e[3]||(e[3]=Wt("div",{className:"advice"},[Wt("p",null,[Ju(" 123 "),Wt("br"),Ju(" Go to "),Wt("a",{href:"https://cloud.reown.com",target:"_blank",className:"link-button",rel:"Reown Cloud"},"Reown Cloud"),Ju(" to get your own. ")])],-1)),Lo(a)])}const Tse=h1(Ise,[["render",xse]]);lU(Tse).mount("#app");export{yt as $,xe as A,Le as B,MZ as C,Xv as D,Cr as E,Jf as F,ew as G,y2 as H,xl as I,Xm as J,$se as K,Bse as L,ht as M,kU as N,xB as O,J as P,$Z as Q,je as R,ji as S,Rn as T,Yr as U,t2 as V,gr as W,Ue as X,zb as Y,De as Z,ke as _,Dm as a,ko as a0,If as a1,hn as a2,wt as a3,$U as a4,Kb as a5,Ws as a6,rs as a7,Lie as a8,At as a9,Om as aA,Ym as aB,_r as aC,qE as aD,Pu as aE,p5 as aF,IU as aG,E5 as aH,ns as aI,DO as aa,VE as ab,id as ac,Jr as ad,Zv as ae,Am as af,Rt as ag,ec as ah,Q8 as ai,g2 as aj,at as ak,Fse as al,Pl as am,Tl as an,w8 as ao,A8 as ap,b8 as aq,p2 as ar,tB as as,hg as at,wd as au,yl as av,Ga as aw,hc as ax,Use as ay,TB as az,Bie as b,Fie as c,Br as d,Mie as e,fe as f,q as g,Pt as h,Zu as i,Fn as j,x as k,_e as l,f8 as m,hr as n,cA as o,zt as p,Ct as q,$ie as r,rn as s,c2 as t,ue as u,o2 as v,as as w,Uie as x,X as y,kse as z};
